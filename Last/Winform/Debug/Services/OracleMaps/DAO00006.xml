<?xml version="1.0" encoding="utf-8" ?>
<!--iBatis Map File-->
<sqlMap namespace="eHospital" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <statements>
        <!--Revision:0,358dfa1298a10cbbb3053b777d903570-->
        <statement id="DAO00006_GetList" resultClass="DataObject">
            select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,
            nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,
            case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI
            from TM_DICHVU  dv
            left join TM_NHOMDICHVU nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = '$BENHVIEN_ID$'
            left join TM_NHOMDICHVU captren on nhom_dv.CAPTREN_ID = captren.MANHOMDICHVU and captren.BENHVIEN_ID = '$BENHVIEN_ID$'
            left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = '$BENHVIEN_ID$'
            where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = '$BENHVIEN_ID$'
            and dv.TAMNGUNG = '0'
            <isPropertyAvailable prepend="AND" property="MALOAIDICHVU">
                loaiDV.MALOAIDICHVU = '$MALOAIDICHVU$'
            </isPropertyAvailable>
            <isPropertyAvailable prepend="AND" property="MADICHVU">
                dv.MADICHVU = '$MADICHVU$'
            </isPropertyAvailable>
        </statement>
        <!--Revision:0,4f97c68d484ebf27865a69461a99a7a1-->
        <statement id="DAO00006_GetListDuocTyle" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
            select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE from TM_DOITUONG_GIADUOC_TYLE
            where
            BENHVIEN_ID = '$BENHVIEN_ID$'
            and DOITUONG_ID = '$DOITUONG_ID$'
        </statement>
        <!--Revision:0,93824e8850a3c6d234e83e2bc8ff03d0-->
        <statement id="DAO00006_GetDSNhomDichVu" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
            select * from TM_NHOMDICHVU
            where captren_id =
            (select NHOMDICHVU_ID from TM_NHOMDICHVU where MANHOMDICHVU = '$MANHOMDICHVU$' and ROWNUM = 1)
            and BENHVIEN_ID = '$BENHVIEN_ID$'
        </statement>
    </statements>
</sqlMap>
