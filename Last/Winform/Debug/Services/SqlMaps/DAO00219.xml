<?xml version="1.0" encoding="utf-8" ?>
<!--============================================================================
//	CAUTION: This file is generated by IBatisNetGen.3.SQLMap.cst at 5/24/2016 11:05:56 AM
//				Any manual editing will be lost in re-generation.
//===========================================================================-->
<sqlMap namespace="eHospital" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <statements>
    <statement id="DAO00219_GetAll" resultClass="DataObject">
      select *
      from TM_KHANGSINHDO
      order by KHANGSINHDO_ID
    </statement>
    
    <statement id="DAO00219_GetList" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select n.NHOMKHANGSINHDO_ID, n.TENNHOMKHANGSINHDO, k.*
      from TM_KHANGSINHDO k

      left join TM_KHANGSINHDO_NHOM m
      on k.KHANGSINHDO_ID = m.KHANGSINHDO_ID and 
      (k.LOAIKHANGSINHDO_ID = (select top (1) DICTIONARY_ID from LST_DICTIONARY where DICTIONARY_CODE = '$LOAI$'))

      left join TM_NHOMKHANGSINHDO n
      on m.NHOMKHANGSINHDO_ID = n.NHOMKHANGSINHDO_ID

      where n.NHOMKHANGSINHDO_ID is not null
      and k.BENHVIEN_ID = '$BENHVIEN_ID$'
      and k.TAMNGUNG = 0
      order by KHANGSINHDO_ID
    </statement>
    
    <statement id="DAO00219_GetDetail" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select *
      from TM_KHANGSINHDO
      where TM_KHANGSINHDO.KHANGSINHDO_ID  = '$value$'
      order by KHANGSINHDO_ID
    </statement>
    <statement id="DAO00219_GetDetailP" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select *
      from TM_KHANGSINHDO
      where TM_KHANGSINHDO.KHANGSINHDO_ID  = '$KHANGSINHDO_ID$'
      order by KHANGSINHDO_ID
    </statement>
    <insert id="DAO00219_Add" parameterClass="System.Collections.IDictionary" resultClass="System.Int64">
      insert into TM_KHANGSINHDO (
      MAKHANGSINHDO
      , TENKHANGSINHDO
      , LOAIKHANGSINHDO_ID
      , TENKHONGDAU
      , TAMNGUNG
      , NGAYTAO
      , NGUOITAO_ID
      , NGAYCAPNHAT
      , NGUOICAPNHAT_ID
      , BENHVIEN_ID
      ) values (
      #KHANGSINHDO_ID#
      #TENKHANGSINHDO#
      , #LOAIKHANGSINHDO_ID#
      , #TENKHONGDAU#
      , #TAMNGUNG#
      , #NGAYTAO#
      , #NGUOITAO_ID#
      , #NGAYCAPNHAT#
      , #NGUOICAPNHAT_ID#
      , #BENHVIEN_ID#
      )
      SELECT SCOPE_IDENTITY()
      
    </insert>

    <update id="DAO00219_Update" parameterClass="System.Collections.IDictionary">
      update TM_KHANGSINHDO set
      MAKHANGSINHDO = #MAKHANGSINHDO#
      , TENKHANGSINHDO = #TENKHANGSINHDO#
      , LOAIKHANGSINHDO_ID = #LOAIKHANGSINHDO_ID#
      , TENKHONGDAU = #TENKHONGDAU#
      , TAMNGUNG = #TAMNGUNG#
      , NGAYTAO = #NGAYTAO#
      , NGUOITAO_ID = #NGUOITAO_ID#
      , NGAYCAPNHAT = #NGAYCAPNHAT#
      , NGUOICAPNHAT_ID = #NGUOICAPNHAT_ID#
      , BENHVIEN_ID = #BENHVIEN_ID#
      where
      KHANGSINHDO_ID = '$KHANGSINHDO_ID$'
    </update>

    <statement id="DAO00219_Delete" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      delete from TM_KHANGSINHDO
      where
      KHANGSINHDO_ID = '$KHANGSINHDO_ID$'
    </statement>

    <statement id="DAO00219_DeleteP" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      delete from TM_KHANGSINHDO
      <dynamic prepend="where">
        <isParameterPresent>
          <isNotEmpty prepend="and" property="KHANGSINHDO_ID">
            TM_KHANGSINHDO.KHANGSINHDO_ID = '$KHANGSINHDO_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="MAKHANGSINHDO">
            TM_KHANGSINHDO.MAKHANGSINHDO = '$MAKHANGSINHDO$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="TENKHANGSINHDO">
            TM_KHANGSINHDO.TENKHANGSINHDO = '$TENKHANGSINHDO$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="LOAIKHANGSINHDO_ID">
            TM_KHANGSINHDO.LOAIKHANGSINHDO_ID = '$LOAIKHANGSINHDO_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="TENKHONGDAU">
            TM_KHANGSINHDO.TENKHONGDAU = '$TENKHONGDAU$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="TAMNGUNG">
            TM_KHANGSINHDO.TAMNGUNG = '$TAMNGUNG$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGAYTAO">
            TM_KHANGSINHDO.NGAYTAO = '$NGAYTAO$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOITAO_ID">
            TM_KHANGSINHDO.NGUOITAO_ID = '$NGUOITAO_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGAYCAPNHAT">
            TM_KHANGSINHDO.NGAYCAPNHAT = '$NGAYCAPNHAT$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOICAPNHAT_ID">
            TM_KHANGSINHDO.NGUOICAPNHAT_ID = '$NGUOICAPNHAT_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="BENHVIEN_ID">
            TM_KHANGSINHDO.BENHVIEN_ID = '$BENHVIEN_ID$'
          </isNotEmpty>
        </isParameterPresent>
      </dynamic>
    </statement>
  </statements>

</sqlMap>
