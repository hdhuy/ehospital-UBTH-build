--------------------------------------------------------------------------------
2020-07-15 13:48:23,004 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2020-07-15 13:48:23,289 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 13:48:23,337 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 13:48:23,869 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:48:24,250 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 13:48:46,564 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '01819' and TYPE = 'D']
2020-07-15 13:48:46,594 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '01819' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 13:48:50,644 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '01819')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '01819' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 13:48:50,757 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 13:48:52,045 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2020-07-15 13:48:53,988 [13] DEBUG - Statement Id: [DAO00013_GetListChiaSeBenhNhan_Total] PreparedStatement : [select count(*) as TOTALROWS        from TT_BENHNHAN A        where  A.ACTIVE = '1']
2020-07-15 13:48:54,064 [13] DEBUG - Statement Id: [DAO00013_GetListChiaSeBenhNhan] PreparedStatement : [select * from        (        select ROW_NUMBER() OVER(order by a.MAYTE) as ROWNUMBER, *,        CASE        WHEN A.GIOITINH = 1 THEN 'Nam'        WHEN A.GIOITINH = 2 THEN N'Nữ'        END as TENGIOITINH        from TT_BENHNHAN A        where  ACTIVE = '1') lst where lst.ROWNUMBER between 1 and 200000]
2020-07-15 13:48:56,189 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2020-07-15 13:48:57,849 [14] DEBUG - Statement Id: [DAO00027_GetListTiepNhanCOM015] PreparedStatement : [declare @ManhomDSA varchar(10);        select top 1  @ManhomDSA = VALUE from TM_SYS_APPSETTINGS where CODE = 'MANHOM_DICHVU_DSA'        SELECT * FROM        (        SELECT        (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID)) AS acss_lookupID,        ROW_NUMBER() OVER        (PARTITION BY (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID))        ORDER BY (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID)))        as num,        A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID) as KEYCOM15,        C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,        CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU, A.SOBHYT,        B.*, F.TRANGTHAI as TRANGTHAI_BENHAN_NOITRU,        CASE        WHEN @ManhomDSA is not null and E.MANHOMDICHVU in (@ManhomDSA) THEN E.MANHOMDICHVU        WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID        left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID        left join TT_NOITRU_BENHAN F on F.TIEPNHAN_ID = A.TIEPNHAN_ID        where C.NGAYHENCLS is NULL and A.BENHVIEN_ID = '01819'        and A.THOIGIANTIEPNHAN > DATEADD(DAY, -30, GETDATE())        ) a WHERE a.num = 1]
2020-07-15 13:48:59,402 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2020-07-15 13:49:01,473 [14] DEBUG - Statement Id: [DAO00117_GetList] PreparedStatement : [select A.*              from TT_NGOAITRU_TOATHUOC_NGUOIMUA A]
2020-07-15 13:49:01,873 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2020-07-15 13:49:03,672 [13] DEBUG - Statement Id: [DAO00027_GetListTiepNhanNoiTru] PreparedStatement : [select distinct B.*, C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID,        isnull(C.KHOACHUYENDEN_ID,C.KHOAVAO_ID) as KHOACHUYENDEN_ID, A.TRANGTHAI, A.DOITUONG_ID, C.TRANGTHAI as TRANGTHAI_BENHAN,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        CASE WHEN RIGHT(C.SOBENHAN,2) = 'CC' THEN 'CC' ELSE 'NT' END AS LOAIBENHAN, CONVERT(VARCHAR(11), C.NGAYVAOKHOA,103) as NGAYVAOKHOA        , A.UUTIEN, pb.TENPHONGBAN, A.NGOAIGIO                from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'HOANTHANH' or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_NOITRU_BENHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID and (C.TRANGTHAI='DAXUATVIEN' or C.TRANGTHAI='DATHANHTOAN' OR C.TRANGTHAI='DANGDIEUTRI')        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(C.KHOACHUYENDEN_ID,C.KHOAVAO_ID)                where A.BENHVIEN_ID = '01819' and C.LOAIBENHAN != 2]
2020-07-15 13:49:04,686 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2020-07-15 13:49:07,614 [14] DEBUG - Statement Id: [DAO00027_GetListCacheTiepNhanNgoaiTru] PreparedStatement : [select distinct B.*, C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID,        isnull(C.KHOACHUYENDEN_ID,C.KHOAVAO_ID) as KHOACHUYENDEN_ID, A.TRANGTHAI, A.DOITUONG_ID, C.TRANGTHAI as TRANGTHAI_BENHAN,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        'NGOAITRU' AS LOAIBENHAN, CONVERT(VARCHAR(11),C.NGAYVAOKHOA,103) as NGAYVAOKHOA, A.SOBHYT        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'HOANTHANH' or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_NOITRU_BENHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID and (C.TRANGTHAI='DAXUATVIEN' or C.TRANGTHAI='DATHANHTOAN' OR C.TRANGTHAI='DANGDIEUTRI')        where A.BENHVIEN_ID = '01819' and C.LOAIBENHAN = 2]
2020-07-15 13:49:08,509 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2020-07-15 13:49:11,887 [14] DEBUG - Statement Id: [DAO00027_GetListTiepNhan] PreparedStatement : [select distinct CONVERT(VARCHAR(11),C.NGAYYEUCAU,103) as NGAYYEUCAU, C.DICHVU_ID, C.DVYEUCAU_ID, D.TENDICHVU, C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU' OR A.TRANGTHAI = 'NGOAITRU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,        CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU, A.SOBHYT,        B.*,        CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU'  or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID                left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID        left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID        where C.NGAYHENCLS is NULL and A.BENHVIEN_ID = '01819']
2020-07-15 13:49:17,130 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2020-07-15 13:49:18,946 [14] DEBUG - Statement Id: [DAO00027_GetListTiepNhanAll] PreparedStatement : [select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, isnull(C.SOBENHAN,NULL) as SOBENHAN,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT, CONVERT(VARCHAR(11),A.NGAYTIEPNHAN,103) as NGAYTIEPNHAN,        B.*        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        left join TT_NOITRU_XACNHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID         left join TT_NOITRU_BENHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        where A.BENHVIEN_ID = '01819' and D.BENHAN_ID is null and A.TRANGTHAI != 'HOANTHANH' and D.BENHAN_ID is null]
2020-07-15 13:49:20,654 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2020-07-15 13:49:22,855 [16] DEBUG - Statement Id: [DAO00026_GetListDanhSachDichVuGhiNhanVTYT_COM25] PreparedStatement : [select distinct CONVERT(VARCHAR(11),C.NGAYYEUCAU,103) as NGAYYEUCAU, C.DICHVU_ID, C.DVYEUCAU_ID, D.TENDICHVU, C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,            A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,            CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,            CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU,            B.*, isnull(ntba.SOBENHAN, '') SOBENHAN, isnull(ntba.BENHAN_ID, 0) BENHAN_ID,            CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU            from TT_TIEPNHAN A            inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'            inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID                        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID            left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID            left join TT_NOITRU_BENHAN ntba on ntba.BENHAN_ID = C.BENHAN_ID              where            C.NGAYHENCLS is NULL and A.BENHVIEN_ID = '01819'            and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU')            and (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END in ('02', '04'))]
2020-07-15 13:49:25,824 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2020-07-15 13:49:27,745 [14] DEBUG - Statement Id: [DAO00027_GetListDuyetToaThuoc] PreparedStatement : [select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        B.*, 'NGOAITRU' as LOAITOA, C.PHAMVI_ID as PHAMVI_ID        from TT_NGOAITRU_KHAMBENH_TOATHUOC C        inner join TT_NGOAITRU_KHAMBENH D on C.KHAMBENH_ID = D.KHAMBENH_ID        inner join TT_TIEPNHAN A on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID        where C.DUYET = '1' and C.TRANGTHAI = 'CHUAXUAT' and C.BENHVIEN_ID = '01819' and (C.LOAITOATHUOC = 'BV' or C.LOAITOATHUOC = 'MP' or C.LOAITOATHUOC = 'KTBV')        union        select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        B.*, 'MUANGOAI' as LOAITOA, C.PHAMVI_ID as PHAMVI_ID        from TT_NGOAITRU_KHAMBENH_TOATHUOC C        inner join TT_NGOAITRU_KHAMBENH D on C.KHAMBENH_ID = D.KHAMBENH_ID        inner join TT_TIEPNHAN A on D.TIEPNHAN_ID = A.TIEPNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU')        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID        where C.DUYET = '1' and C.TRANGTHAI = 'CHUAXUAT' and C.BENHVIEN_ID = '01819' and (A.SOBHYT is null or A.SOBHYT = '')        union        select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        B.*, 'NOITRU' as LOAITOA, C.PHAMVI_ID as PHAMVI_ID        from TT_NOITRU_TOATHUOC C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU')        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID        where (C.TRANGTHAI = 'DADUYET' or C.TRANGTHAI = 'CHUAXUAT') and C.BENHVIEN_ID = '01819' and (A.SOBHYT is not null or A.SOBHYT != '')        union        select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        B.*, 'MUANGOAI' as LOAITOA, C.PHAMVI_ID as PHAMVI_ID        from TT_NOITRU_TOATHUOC C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU')        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_NOITRU_BENHAN D on D.TIEPNHAN_ID = C.TIEPNHAN_ID        where (C.TRANGTHAI = 'DADUYET' or C.TRANGTHAI = 'CHUAXUAT') and C.BENHVIEN_ID = '01819' and (A.SOBHYT is null or A.SOBHYT = '') and D.TRANGTHAI != 'DANGDIEUTRI']
2020-07-15 13:49:29,319 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2020-07-15 13:49:32,218 [16] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 13:49:32,327 [6] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 13:49:32,404 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2020-07-15 13:49:34,442 [17] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        ,TT_TONKHO.PHAMVI_ID AS KHO_PHAMVI_ID        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        ,A.PHAMVI_ID        from        (select SUM(AA.SOLUONG) as SOLUONG, AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID        ,CC.PHAMVI_ID        from TT_DUOC_TONKHO AA INNER JOIN TM_KHODUOC BB ON AA.KHODUOC_ID=BB.KHODUOC_ID        LEFT JOIN TM_PHAMVI CC ON BB.PHAMVI_ID=CC.PHAMVI_ID        where AA.BENHVIEN_ID = '01819' group by AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID,CC.PHAMVI_ID        ) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ,A.PHAMVI_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' and TT_TONKHO.SOLUONG >= 0]
2020-07-15 13:49:37,057 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2020-07-15 13:49:38,757 [29] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @NGUONDUOC_MACDINH varchar(5) = '0';        declare @TOAMUANGOAI int = 0;        select @NGUONDUOC_MACDINH = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'PHA_NGUONDUOC'        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + @NGUONDUOC_MACDINH as DUOC_KEY, 0 as PHAMVI_ID, @NGUONDUOC_MACDINH as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end        else        begin                select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end]
2020-07-15 13:49:42,958 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2020-07-15 13:49:45,088 [34] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 13:49:45,177 [6] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 13:49:45,257 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2020-07-15 13:49:46,855 [34] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 13:49:46,923 [6] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 13:49:46,999 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2020-07-15 13:49:48,759 [35] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoBangKhongForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG = 0        GROUP BY        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH,M.LOAIMAU_ID,M.DONVITINH_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 13:49:50,171 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:49:52,793 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = '01819']
2020-07-15 13:50:02,268 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = '01819' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2020-07-15 13:50:02,309 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819'              order by SETTING_ID]
2020-07-15 13:50:02,414 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:02,580 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:02,897 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2020-07-15 13:50:02,898 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 13:50:02,898 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 13:50:02,955 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2020-07-15 13:50:02,955 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 13:50:02,955 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 13:50:03,527 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:03,769 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:21,964 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='20'            AND B.BENHVIEN_ID = '01819']
2020-07-15 13:50:22,511 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:22,636 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = '01819' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2020-07-15 13:50:23,000 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = '01819' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2020-07-15 13:50:27,517 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:28,466 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '20'        and A.BENHVIEN_ID = '01819']
2020-07-15 13:50:38,922 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '87'        and A.BENHVIEN_ID = '01819']
2020-07-15 13:50:40,395 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] PreparedStatement : [IF EXISTS            (SELECT ACCOUNT_ID FROM TM_SYS_USERS WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1 )            BEGIN            update TM_SYS_USERS set INVENTORY_ID =  @param2 , WORKING_DEPT_ID =  @param3             WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1             END            ELSE            BEGIN            insert into TM_SYS_USERS ([ACCOUNT_ID], [ACCOUNT_NAME], [INVENTORY_ID], [WORKING_DEPT_ID], [HOSPITAL_ID])            values ( @param0 ,  @param4 ,  @param2 ,  @param3 ,  @param1 )            END]
2020-07-15 13:50:40,395 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Parameters: [@param0=[ACCOUNT_ID,113], @param1=[HOSPITAL_ID,01819], @param2=[INVENTORY_ID,null], @param3=[WORKING_DEPT_ID,87], @param4=[ACCOUNT_NAME,admin]]
2020-07-15 13:50:40,395 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[System.DBNull, null], @param3=[String, System.String], @param4=[String, System.String]]
2020-07-15 13:50:40,774 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819']
2020-07-15 13:50:41,078 [1] DEBUG - Statement Id: [DAO00030_CheckLoaiPhongBan] PreparedStatement : [select pb.*  from TM_PHONGBAN pb          join LST_DICTIONARY dic on pb.LOAIPHONGBAN_ID = dic.DICTIONARY_ID          where          pb.PHONGBAN_ID = 87          and dic.DICTIONARY_CODE = '']
2020-07-15 13:50:47,278 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MTR02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:50:48,887 [1] DEBUG - Statement Id: [DAO00210_DEP01_GetList] PreparedStatement : [WITH PhongbanRec AS              (              SELECT P.PHONGBAN_ID AS CATEGORY_ID, P.MAPHONGBAN AS CATEGORY_CODE, P.TENPHONGBAN AS CATEGORY_NAME, P.CAP AS FOLDER_LEVEL, ISNULL(P.CAPTREN_ID,0) AS PARENT_ID, '0' AS IS_FOLDER, P.LOAIPHONGBAN_ID              , P.TAMNGUNG              FROM TM_PHONGBAN AS P              WHERE P.CAP = 1 AND ISNULL(P.CAPTREN_ID,0) = 0 AND P.BENHVIEN_ID = '01819'              UNION ALL              SELECT P.PHONGBAN_ID AS CATEGORY_ID, P.MAPHONGBAN AS CATEGORY_CODE, P.TENPHONGBAN AS CATEGORY_NAME, P.CAP AS FOLDER_LEVEL, P.CAPTREN_ID AS PARENT_ID, '0' AS IS_FOLDER, P.LOAIPHONGBAN_ID              , P.TAMNGUNG              FROM PhongbanRec AS PR              INNER JOIN TM_PHONGBAN AS P ON P.CAPTREN_ID = PR.CATEGORY_ID AND P.BENHVIEN_ID = '01819'              )              SELECT P.* FROM PhongbanRec AS P              INNER JOIN LST_DICTIONARY AS D on P.LOAIPHONGBAN_ID = D.DICTIONARY_ID AND D.DICTIONARY_TYPE_CODE = 'LoaiPhongBan']
2020-07-15 13:50:49,738 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'TM_CHUYENKHOA'              ORDER BY c.column_id]
2020-07-15 13:50:50,119 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, CHUYENKHOA_ID,TENCHUYENKHOA AS DISPLAY              FROM TM_CHUYENKHOA              ]
2020-07-15 13:50:50,214 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY'              ORDER BY c.column_id]
2020-07-15 13:50:50,582 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_ID,DICTIONARY_NAME AS DISPLAY,DICTIONARY_TYPE_CODE              FROM LST_DICTIONARY              ]
2020-07-15 13:50:50,763 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [sp_sys_GetListComboData]
2020-07-15 13:50:50,763 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@LANGUAGE_ID=[PARAMETERS.LANGUAGE_ID,VI], @USER_ID=[PARAMETERS.USER_ID,null], @DATA_GROUP=[PARAMETERS.DATA_GROUP,REF_NHANVIEN], @BENHVIEN_ID=[PARAMETERS.BENHVIEN_ID,01819], @ADDITIONPARA_1=[PARAMETERS.ADDITIONPARA_1,null], @ADDITIONPARA_2=[PARAMETERS.ADDITIONPARA_2,null], @ADDITIONPARA_3=[PARAMETERS.ADDITIONPARA_3,null]]
2020-07-15 13:50:50,763 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@LANGUAGE_ID=[String, System.String], @USER_ID=[System.DBNull, null], @DATA_GROUP=[String, System.String], @BENHVIEN_ID=[String, System.String], @ADDITIONPARA_1=[System.DBNull, null], @ADDITIONPARA_2=[System.DBNull, null], @ADDITIONPARA_3=[System.DBNull, null]]
2020-07-15 13:50:50,879 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY'              ORDER BY c.column_id]
2020-07-15 13:50:50,910 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_ID,DICTIONARY_NAME AS DISPLAY,DICTIONARY_TYPE_CODE              FROM LST_DICTIONARY              ]
2020-07-15 13:50:51,341 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [sp_sys_GetListComboData]
2020-07-15 13:50:51,341 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@LANGUAGE_ID=[PARAMETERS.LANGUAGE_ID,VI], @USER_ID=[PARAMETERS.USER_ID,null], @DATA_GROUP=[PARAMETERS.DATA_GROUP,REF_PHONGBAN], @BENHVIEN_ID=[PARAMETERS.BENHVIEN_ID,01819], @ADDITIONPARA_1=[PARAMETERS.ADDITIONPARA_1,null], @ADDITIONPARA_2=[PARAMETERS.ADDITIONPARA_2,null], @ADDITIONPARA_3=[PARAMETERS.ADDITIONPARA_3,null]]
2020-07-15 13:50:51,341 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@LANGUAGE_ID=[String, System.String], @USER_ID=[System.DBNull, null], @DATA_GROUP=[String, System.String], @BENHVIEN_ID=[String, System.String], @ADDITIONPARA_1=[System.DBNull, null], @ADDITIONPARA_2=[System.DBNull, null], @ADDITIONPARA_3=[System.DBNull, null]]
2020-07-15 13:50:51,423 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY'              ORDER BY c.column_id]
2020-07-15 13:50:51,453 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_ID,DICTIONARY_NAME AS DISPLAY,DICTIONARY_TYPE_CODE              FROM LST_DICTIONARY              ]
2020-07-15 13:51:08,534 [1] DEBUG - Statement Id: [DAO00210_DEP01_GetDetailByID] PreparedStatement : [SELECT * FROM TM_PHONGBAN WHERE PHONGBAN_ID = '17']
2020-07-15 13:51:13,392 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'ADM15'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:51:28,517 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'ADM18'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:51:28,574 [1] DEBUG - Statement Id: [DAO00210_DEP01_GetList] PreparedStatement : [WITH PhongbanRec AS              (              SELECT P.PHONGBAN_ID AS CATEGORY_ID, P.MAPHONGBAN AS CATEGORY_CODE, P.TENPHONGBAN AS CATEGORY_NAME, P.CAP AS FOLDER_LEVEL, ISNULL(P.CAPTREN_ID,0) AS PARENT_ID, '0' AS IS_FOLDER, P.LOAIPHONGBAN_ID              , P.TAMNGUNG              FROM TM_PHONGBAN AS P              WHERE P.CAP = 1 AND ISNULL(P.CAPTREN_ID,0) = 0 AND P.BENHVIEN_ID = '01819'              UNION ALL              SELECT P.PHONGBAN_ID AS CATEGORY_ID, P.MAPHONGBAN AS CATEGORY_CODE, P.TENPHONGBAN AS CATEGORY_NAME, P.CAP AS FOLDER_LEVEL, P.CAPTREN_ID AS PARENT_ID, '0' AS IS_FOLDER, P.LOAIPHONGBAN_ID              , P.TAMNGUNG              FROM PhongbanRec AS PR              INNER JOIN TM_PHONGBAN AS P ON P.CAPTREN_ID = PR.CATEGORY_ID AND P.BENHVIEN_ID = '01819'              )              SELECT P.* FROM PhongbanRec AS P              INNER JOIN LST_DICTIONARY AS D on P.LOAIPHONGBAN_ID = D.DICTIONARY_ID AND D.DICTIONARY_TYPE_CODE = 'LoaiPhongBan'               where                             D.DICTIONARY_CODE NOT IN ('PhongBenh')]
2020-07-15 13:53:18,779 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'Department' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:18,815 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:18,848 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'BGD' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:18,881 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'DN' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:18,921 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KHTH' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:18,954 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'P207' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,002 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C24' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,061 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B1-C24' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,096 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C12' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,151 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C11' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,184 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C9' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,241 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A12' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,286 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A22' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,331 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,371 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C6' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,412 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B7' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,445 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,478 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,511 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B6' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,543 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A7' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,574 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,606 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A6' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,637 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,672 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A4' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,705 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B11' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,736 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B5' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,768 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B8' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,800 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A14' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,832 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A14.1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,865 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'B9' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,898 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C10' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,930 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,962 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'A10' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:19,993 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PKA6T9' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,024 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C2-HH' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,058 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C2-SH' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,091 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'C2-VS' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,122 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'CTTM' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,157 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KLL' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,192 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK121' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,224 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK131' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,255 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'P209' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,286 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK215' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,317 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'P214' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,348 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'XN04' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,379 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK120' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,411 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PKA4' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,443 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PKA6' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,475 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB216' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,505 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB225' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,536 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB114' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,567 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB110' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,597 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK106' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,629 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB104' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,660 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB212' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,690 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB113' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,721 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB115' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,751 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB203' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,782 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK111' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,813 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB116' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,844 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB117' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,875 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB202' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,905 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK204' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,937 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB220' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:20,969 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB206' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,005 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB107' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,041 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PKDY134' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,074 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB217' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,107 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB101' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,141 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KPK' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,175 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KB103' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,210 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KTP' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,244 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'KBB9' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,277 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TN1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,313 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TN2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,351 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TN3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,391 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TN4' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,424 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PK CLC' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,458 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'BHYT' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,492 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'QUAN' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,527 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.SA1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,561 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.SA2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,600 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.SA3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,635 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.SA4' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,670 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.SA5' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,711 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.XQ1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,749 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.XQ2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,783 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.XQ3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,830 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'K39.XQ4' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,863 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PCC1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,900 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PCC2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,935 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'PCC3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:21,969 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'GDYK' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:22,003 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'P120NGOAIGIO' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:22,048 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TNV' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:22,081 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TP1' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:22,123 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TP2' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:22,158 [1] DEBUG - Statement Id: [DAO00212_DEP04_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHODUOC AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHODUOC AS K ON K.KHODUOC_ID = PK.KHODUOC_ID        WHERE P.MAPHONGBAN = 'TP3' AND PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,189 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,224 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,250 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,276 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,301 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,327 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,379 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,405 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,430 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,455 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,480 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,505 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,532 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,558 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,584 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,613 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,639 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,665 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,690 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,716 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,742 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,768 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,803 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,829 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,856 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,883 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,909 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,935 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,963 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:53:59,989 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,028 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,054 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,086 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,116 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,141 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,167 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,193 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,219 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,243 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,269 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,296 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,639 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,755 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,784 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,883 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,915 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:00,944 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,087 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,188 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,222 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,250 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,294 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,343 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,369 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,401 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,427 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,457 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,484 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,517 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,562 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,588 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,616 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,644 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,674 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,700 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:01,858 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,024 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,206 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,249 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,276 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,302 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,328 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,353 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,378 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,403 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,429 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,455 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,480 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,506 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,585 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,611 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,652 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,678 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,710 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,737 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,772 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,817 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,845 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,883 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,919 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,948 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:02,984 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:03,014 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:03,040 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:03,072 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:03,108 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:03,134 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:03,439 [1] DEBUG - Statement Id: [DAO00212_DEP_GetListByCode] PreparedStatement : [SELECT K.*        FROM TM_PHONGBAN_KHO AS PK        INNER JOIN TM_PHONGBAN AS P ON P.PHONGBAN_ID = PK.PHONGBAN_ID        INNER JOIN TM_KHO AS K ON K.KHO_ID = PK.KHO_ID        WHERE PK.BENHVIEN_ID ='01819']
2020-07-15 13:54:17,865 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2020-07-15 13:54:17,901 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 13:54:17,927 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 13:54:18,018 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:18,158 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 13:54:26,002 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '01819' and TYPE = 'D']
2020-07-15 13:54:26,031 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '01819' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 13:54:27,686 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '01819')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '01819' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 13:54:27,746 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 13:54:28,509 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2020-07-15 13:54:28,600 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2020-07-15 13:54:28,672 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2020-07-15 13:54:28,761 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2020-07-15 13:54:28,847 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2020-07-15 13:54:28,920 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2020-07-15 13:54:29,002 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2020-07-15 13:54:29,075 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2020-07-15 13:54:29,166 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2020-07-15 13:54:29,673 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2020-07-15 13:54:29,711 [37] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 13:54:29,787 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2020-07-15 13:54:29,824 [37] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        ,TT_TONKHO.PHAMVI_ID AS KHO_PHAMVI_ID        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        ,A.PHAMVI_ID        from        (select SUM(AA.SOLUONG) as SOLUONG, AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID        ,CC.PHAMVI_ID        from TT_DUOC_TONKHO AA INNER JOIN TM_KHODUOC BB ON AA.KHODUOC_ID=BB.KHODUOC_ID        LEFT JOIN TM_PHAMVI CC ON BB.PHAMVI_ID=CC.PHAMVI_ID        where AA.BENHVIEN_ID = '01819' group by AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID,CC.PHAMVI_ID        ) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ,A.PHAMVI_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' and TT_TONKHO.SOLUONG >= 0]
2020-07-15 13:54:31,909 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2020-07-15 13:54:31,942 [37] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @NGUONDUOC_MACDINH varchar(5) = '0';        declare @TOAMUANGOAI int = 0;        select @NGUONDUOC_MACDINH = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'PHA_NGUONDUOC'        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + @NGUONDUOC_MACDINH as DUOC_KEY, 0 as PHAMVI_ID, @NGUONDUOC_MACDINH as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end        else        begin                select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end]
2020-07-15 13:54:34,012 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2020-07-15 13:54:34,047 [37] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 13:54:34,114 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2020-07-15 13:54:34,148 [37] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 13:54:34,224 [37] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2020-07-15 13:54:35,184 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:35,270 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = '01819']
2020-07-15 13:54:35,318 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = '01819' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2020-07-15 13:54:35,361 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819'              order by SETTING_ID]
2020-07-15 13:54:35,464 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:35,588 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:35,658 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2020-07-15 13:54:35,658 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 13:54:35,658 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 13:54:35,685 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2020-07-15 13:54:35,685 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 13:54:35,685 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 13:54:35,797 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:35,959 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:39,368 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 13:54:39,821 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:54:39,888 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = '01819' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2020-07-15 13:54:40,101 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = '01819' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2020-07-15 13:56:23,530 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:56:23,767 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = '01819'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = '01819'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = '01819'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = '01819'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2020-07-15 13:56:24,411 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'KhuVucSong'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:24,555 [1] DEBUG - Statement Id: [DAO00031_GetList] PreparedStatement : [select *              from TM_DOITUONG              where ACTIVE = 1 and BENHVIEN_ID = '01819']
2020-07-15 13:56:25,442 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'HinhThucDenKhamBenh'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:25,750 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NgheNghiep'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:25,965 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DanToc'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:26,132 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'QuocGia'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:26,850 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:26,886 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:56:26,917 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 13:56:26,948 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 13:56:27,005 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 13:56:27,047 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 13:56:27,254 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 13:56:27,690 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 13:56:27,782 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 13:56:27,929 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 13:56:28,613 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 13:56:29,428 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 13:57:22,365 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:57:22,412 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:57:22,441 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 13:57:22,473 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 13:57:22,523 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 13:57:22,570 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 13:57:22,927 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 13:57:23,084 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 13:57:23,166 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 13:57:23,332 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 13:57:23,784 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 13:59:16,405 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:59:16,450 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 13:59:16,477 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 13:59:16,504 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 13:59:16,550 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 13:59:16,580 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 13:59:17,007 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 13:59:17,115 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 13:59:17,151 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 13:59:17,244 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 13:59:17,456 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
--------------------------------------------------------------------------------
2020-07-15 14:01:59,142 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2020-07-15 14:01:59,389 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:01:59,431 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:01:59,702 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:01:59,984 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:02:04,744 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '01819' and TYPE = 'D']
2020-07-15 14:02:04,770 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '01819' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:02:06,938 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '01819')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '01819' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:02:07,020 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:02:07,842 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2020-07-15 14:02:07,978 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2020-07-15 14:02:08,050 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2020-07-15 14:02:08,129 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2020-07-15 14:02:08,198 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2020-07-15 14:02:08,286 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2020-07-15 14:02:08,362 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2020-07-15 14:02:08,433 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2020-07-15 14:02:08,507 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2020-07-15 14:02:09,046 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2020-07-15 14:02:09,086 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:02:09,173 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2020-07-15 14:02:09,205 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        ,TT_TONKHO.PHAMVI_ID AS KHO_PHAMVI_ID        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        ,A.PHAMVI_ID        from        (select SUM(AA.SOLUONG) as SOLUONG, AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID        ,CC.PHAMVI_ID        from TT_DUOC_TONKHO AA INNER JOIN TM_KHODUOC BB ON AA.KHODUOC_ID=BB.KHODUOC_ID        LEFT JOIN TM_PHAMVI CC ON BB.PHAMVI_ID=CC.PHAMVI_ID        where AA.BENHVIEN_ID = '01819' group by AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID,CC.PHAMVI_ID        ) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ,A.PHAMVI_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' and TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:02:10,041 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2020-07-15 14:02:10,072 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @NGUONDUOC_MACDINH varchar(5) = '0';        declare @TOAMUANGOAI int = 0;        select @NGUONDUOC_MACDINH = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'PHA_NGUONDUOC'        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + @NGUONDUOC_MACDINH as DUOC_KEY, 0 as PHAMVI_ID, @NGUONDUOC_MACDINH as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end        else        begin                select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end]
2020-07-15 14:02:12,109 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2020-07-15 14:02:12,147 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 14:02:12,217 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2020-07-15 14:02:12,252 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 14:02:12,331 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2020-07-15 14:02:13,316 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:02:14,140 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = '01819']
2020-07-15 14:02:17,635 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = '01819' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2020-07-15 14:02:17,664 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819'              order by SETTING_ID]
2020-07-15 14:02:17,730 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:02:17,864 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:02:18,009 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2020-07-15 14:02:18,017 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:02:18,017 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:02:18,045 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2020-07-15 14:02:18,045 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:02:18,045 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:02:18,241 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:02:18,394 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:02:31,974 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:02:32,245 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:02:32,327 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = '01819' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2020-07-15 14:02:32,578 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = '01819' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2020-07-15 14:03:34,167 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:03:35,966 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:03:36,047 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:03:36,074 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:03:36,101 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:03:36,138 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:03:36,169 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:03:36,348 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:03:36,801 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:03:36,837 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:03:36,891 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:03:37,971 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:03:38,618 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:04:46,765 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:04:46,806 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:04:46,834 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:04:46,865 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:04:46,924 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:04:46,955 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:04:47,315 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:04:47,443 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:04:47,478 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:04:47,555 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:06:35,418 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:07:56,811 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:07:56,854 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:07:56,882 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:07:56,911 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:07:56,967 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:07:57,002 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:07:57,451 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:07:57,591 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:07:57,644 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:07:57,734 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:08:00,312 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:10:29,451 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:10:29,497 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:10:29,561 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:10:29,587 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:10:29,631 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:10:29,667 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:10:30,042 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:10:30,152 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:10:30,188 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:10:30,265 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:10:33,112 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:10:50,733 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2020-07-15 14:10:50,864 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:10:50,891 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:10:50,999 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:10:51,080 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:10:55,526 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '01819' and TYPE = 'D']
2020-07-15 14:10:55,566 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '01819' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:10:57,311 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '01819')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '01819' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:10:57,397 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:10:57,882 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2020-07-15 14:10:57,963 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2020-07-15 14:10:58,050 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2020-07-15 14:10:58,163 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2020-07-15 14:10:58,237 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2020-07-15 14:10:58,324 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2020-07-15 14:10:58,406 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2020-07-15 14:10:58,481 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2020-07-15 14:10:58,560 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2020-07-15 14:10:59,066 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2020-07-15 14:10:59,111 [21] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:10:59,177 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2020-07-15 14:10:59,208 [21] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        ,TT_TONKHO.PHAMVI_ID AS KHO_PHAMVI_ID        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        ,A.PHAMVI_ID        from        (select SUM(AA.SOLUONG) as SOLUONG, AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID        ,CC.PHAMVI_ID        from TT_DUOC_TONKHO AA INNER JOIN TM_KHODUOC BB ON AA.KHODUOC_ID=BB.KHODUOC_ID        LEFT JOIN TM_PHAMVI CC ON BB.PHAMVI_ID=CC.PHAMVI_ID        where AA.BENHVIEN_ID = '01819' group by AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID,CC.PHAMVI_ID        ) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ,A.PHAMVI_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' and TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:11:00,113 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2020-07-15 14:11:00,173 [21] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @NGUONDUOC_MACDINH varchar(5) = '0';        declare @TOAMUANGOAI int = 0;        select @NGUONDUOC_MACDINH = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'PHA_NGUONDUOC'        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + @NGUONDUOC_MACDINH as DUOC_KEY, 0 as PHAMVI_ID, @NGUONDUOC_MACDINH as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end        else        begin                select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end]
2020-07-15 14:11:02,671 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2020-07-15 14:11:02,726 [21] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 14:11:02,813 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2020-07-15 14:11:02,873 [21] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 14:11:02,944 [21] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2020-07-15 14:11:03,905 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:04,003 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = '01819']
2020-07-15 14:11:04,083 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = '01819' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2020-07-15 14:11:04,131 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819'              order by SETTING_ID]
2020-07-15 14:11:04,221 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:04,318 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:04,384 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2020-07-15 14:11:04,384 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:11:04,384 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:11:04,413 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2020-07-15 14:11:04,413 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:11:04,413 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:11:04,486 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:04,601 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:05,880 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:11:06,124 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:06,218 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = '01819' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2020-07-15 14:11:06,439 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = '01819' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2020-07-15 14:11:09,982 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:11:11,567 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:11:11,899 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:11:11,928 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:11:11,979 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:11:15,044 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:11:15,078 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:11:15,412 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:11:15,599 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:11:15,636 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:11:15,713 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:11:16,222 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:11:16,768 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
--------------------------------------------------------------------------------
2020-07-15 14:18:18,169 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2020-07-15 14:18:18,432 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:18:18,470 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:18:18,824 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:19,142 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:18:34,360 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '01819' and TYPE = 'D']
2020-07-15 14:18:34,389 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '01819' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:18:36,809 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '01819')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '01819' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:18:36,901 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:18:37,750 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2020-07-15 14:18:37,903 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2020-07-15 14:18:37,981 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2020-07-15 14:18:38,064 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2020-07-15 14:18:38,149 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2020-07-15 14:18:38,225 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2020-07-15 14:18:38,307 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2020-07-15 14:18:38,386 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2020-07-15 14:18:38,479 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2020-07-15 14:18:39,285 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2020-07-15 14:18:39,340 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:18:39,451 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2020-07-15 14:18:39,503 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        ,TT_TONKHO.PHAMVI_ID AS KHO_PHAMVI_ID        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        ,A.PHAMVI_ID        from        (select SUM(AA.SOLUONG) as SOLUONG, AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID        ,CC.PHAMVI_ID        from TT_DUOC_TONKHO AA INNER JOIN TM_KHODUOC BB ON AA.KHODUOC_ID=BB.KHODUOC_ID        LEFT JOIN TM_PHAMVI CC ON BB.PHAMVI_ID=CC.PHAMVI_ID        where AA.BENHVIEN_ID = '01819' group by AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID,CC.PHAMVI_ID        ) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ,A.PHAMVI_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' and TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:18:40,158 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2020-07-15 14:18:40,206 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @NGUONDUOC_MACDINH varchar(5) = '0';        declare @TOAMUANGOAI int = 0;        select @NGUONDUOC_MACDINH = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'PHA_NGUONDUOC'        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + @NGUONDUOC_MACDINH as DUOC_KEY, 0 as PHAMVI_ID, @NGUONDUOC_MACDINH as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end        else        begin                select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end]
2020-07-15 14:18:42,221 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2020-07-15 14:18:42,256 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 14:18:42,349 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2020-07-15 14:18:42,381 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 14:18:42,498 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2020-07-15 14:18:43,484 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:44,422 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = '01819']
2020-07-15 14:18:48,142 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = '01819' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2020-07-15 14:18:48,172 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819'              order by SETTING_ID]
2020-07-15 14:18:48,243 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:48,365 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:48,507 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2020-07-15 14:18:48,510 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:18:48,510 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:18:48,552 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2020-07-15 14:18:48,552 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:18:48,552 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:18:48,680 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:48,831 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:58,177 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:18:58,460 [1] DEBUG - Statement Id: [DAO00045_GetList] PreparedStatement : [SELECT            TM_DICHVU.DICHVU_ID, TM_NHOMDICHVU.NHOMDICHVU_ID, TM_NHOMDICHVU.MANHOMDICHVU, TM_DICHVU.MADICHVU, TM_NHOMDICHVU.TENNHOMDICHVU,            TM_NHOMDICHVU.TENNHOMDICHVU_EN, TM_NHOMDICHVU.TENNHOMDICHVU_RU, TM_NHOMDICHVU.CAP, TM_NHOMDICHVU.CAPTREN_ID, TM_DICHVU.TENDICHVU,            TM_DICHVU.BENHVIEN_ID, TM_DICHVU.CHONHETCAPDUOI, TM_DICHVU.CAPTREN_ID AS DICHVU_CAPTREN_ID            FROM            TM_DICHVU            INNER JOIN            TM_NHOMDICHVU ON TM_DICHVU.NHOMDICHVU_ID = TM_NHOMDICHVU.NHOMDICHVU_ID AND TM_DICHVU.BENHVIEN_ID = TM_NHOMDICHVU.BENHVIEN_ID            where left(MANHOMDICHVU,2) in ('02, 03')            and TM_DICHVU.BENHVIEN_ID = '01819']
2020-07-15 14:18:58,732 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:18:58,809 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = '01819' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2020-07-15 14:18:59,049 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = '01819' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2020-07-15 14:19:40,066 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:19:41,624 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:19:41,662 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:19:41,693 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:19:41,727 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:19:41,774 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:19:41,809 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:19:41,972 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:19:42,344 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:19:42,384 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:19:42,465 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:19:43,500 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
--------------------------------------------------------------------------------
2020-07-15 14:29:05,282 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2020-07-15 14:29:05,736 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:29:05,781 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:29:06,378 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:06,783 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:29:20,178 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '01819' and TYPE = 'D']
2020-07-15 14:29:20,205 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '01819' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2020-07-15 14:29:22,057 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '01819')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '01819' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2020-07-15 14:29:22,135 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2020-07-15 14:29:22,895 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2020-07-15 14:29:23,053 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2020-07-15 14:29:23,129 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2020-07-15 14:29:23,200 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2020-07-15 14:29:23,269 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2020-07-15 14:29:23,346 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2020-07-15 14:29:23,413 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2020-07-15 14:29:23,488 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2020-07-15 14:29:23,562 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2020-07-15 14:29:24,105 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2020-07-15 14:29:24,138 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = '01819' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' AND TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:29:24,212 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2020-07-15 14:29:24,243 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        ,TT_TONKHO.PHAMVI_ID AS KHO_PHAMVI_ID        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = '01819' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = '01819')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        ,A.PHAMVI_ID        from        (select SUM(AA.SOLUONG) as SOLUONG, AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID        ,CC.PHAMVI_ID        from TT_DUOC_TONKHO AA INNER JOIN TM_KHODUOC BB ON AA.KHODUOC_ID=BB.KHODUOC_ID        LEFT JOIN TM_PHAMVI CC ON BB.PHAMVI_ID=CC.PHAMVI_ID        where AA.BENHVIEN_ID = '01819' group by AA.KHODUOC_ID, AA.DUOC_ID, AA.NGUONDUOC_ID,CC.PHAMVI_ID        ) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ,A.PHAMVI_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = '01819' and TT_TONKHO.SOLUONG >= 0]
2020-07-15 14:29:25,146 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2020-07-15 14:29:25,196 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @NGUONDUOC_MACDINH varchar(5) = '0';        declare @TOAMUANGOAI int = 0;        select @NGUONDUOC_MACDINH = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'PHA_NGUONDUOC'        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + @NGUONDUOC_MACDINH as DUOC_KEY, 0 as PHAMVI_ID, @NGUONDUOC_MACDINH as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end        else        begin                select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,d.CONGDUNG,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = '01819'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = '01819')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (        select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID)        A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = '01819'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = '01819'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = '01819'        where d.BENHVIEN_ID = '01819'  and tk.SOLUONG >= 0        end]
2020-07-15 14:29:27,027 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2020-07-15 14:29:27,060 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,        SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH        FROM TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID        WHERE TK.SOLUONG > 0        GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,        TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2020-07-15 14:29:27,144 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2020-07-15 14:29:27,174 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct        TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,        TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,        TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH        from TM_MAU M        JOIN        (        select        A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO        from        (        select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO        from TT_MAU_TONKHO TK        JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID        inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID        left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'        where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0        ) A        )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'        LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID        LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2020-07-15 14:29:27,251 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '01819'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2020-07-15 14:29:28,185 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:28,875 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = '01819']
2020-07-15 14:29:32,161 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = '01819' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2020-07-15 14:29:32,188 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819'              order by SETTING_ID]
2020-07-15 14:29:32,271 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:32,401 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:32,556 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2020-07-15 14:29:32,559 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:29:32,559 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:29:32,598 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2020-07-15 14:29:32,598 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,01819], @param1=[ACCOUNT_ID,113]]
2020-07-15 14:29:32,598 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2020-07-15 14:29:32,749 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:32,890 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:40,204 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:29:40,372 [1] DEBUG - Statement Id: [DAO00045_GetList] PreparedStatement : [SELECT            TM_DICHVU.DICHVU_ID, TM_NHOMDICHVU.NHOMDICHVU_ID, TM_NHOMDICHVU.MANHOMDICHVU, TM_DICHVU.MADICHVU, TM_NHOMDICHVU.TENNHOMDICHVU,            TM_NHOMDICHVU.TENNHOMDICHVU_EN, TM_NHOMDICHVU.TENNHOMDICHVU_RU, TM_NHOMDICHVU.CAP, TM_NHOMDICHVU.CAPTREN_ID, TM_DICHVU.TENDICHVU,            TM_DICHVU.BENHVIEN_ID, TM_DICHVU.CHONHETCAPDUOI, TM_DICHVU.CAPTREN_ID AS DICHVU_CAPTREN_ID            FROM            TM_DICHVU            INNER JOIN            TM_NHOMDICHVU ON TM_DICHVU.NHOMDICHVU_ID = TM_NHOMDICHVU.NHOMDICHVU_ID AND TM_DICHVU.BENHVIEN_ID = TM_NHOMDICHVU.BENHVIEN_ID            where left(MANHOMDICHVU,2) in ('02, 03')            and TM_DICHVU.BENHVIEN_ID = '01819']
2020-07-15 14:29:40,591 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:40,675 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = '01819' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2020-07-15 14:29:40,925 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = '01819' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2020-07-15 14:29:44,045 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:29:45,597 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:29:45,630 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN,        DICTIONARY_TYPE_CODE        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2020-07-15 14:29:45,663 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = '01819' AND TAMNGUNG = '0']
2020-07-15 14:29:45,695 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'QuanHamBenhNhan' and ENABLED = '1']
2020-07-15 14:29:45,730 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'TinhTrangBenhNhan' and ENABLED = '1']
2020-07-15 14:29:45,762 [1] DEBUG - Statement Id: [DAO00019_GetQuanHam_TinhTrangBN] PreparedStatement : [select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'DonViCongTac' and ENABLED = '1']
2020-07-15 14:29:45,956 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetDSHangDoi_COMPUTERNAME] PreparedStatement : [SELECT B.ID,B.DEPARTMENT_ID,C.DEPARTMENT_NAME, C.DEPT_CODE, B.[NAME] as QUEUENAME,B.ID as QUEUE_ID     FROM QMS_QUEUE B     INNER JOIN QMS_DEPARTMENT C ON B.DEPARTMENT_ID=C.DEPARTMENT_ID     JOIN (SELECT DISTINCT XX.SECTION_ID FROM QMS_QUEUE XX JOIN QMS_CLIENT YY ON YY.QUEUE_ID = XX.ID     WHERE XX.DEPARTMENT_ID='87' AND (YY.COMPUTERNAME = 'GMC-HAIPN6' OR YY.IPADDRESS = '10.15.167.54')) A ON A.SECTION_ID = B.SECTION_ID     WHERE B.BENHVIEN_ID = '01819' AND B.STATE = 1]
2020-07-15 14:29:46,318 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:29:46,355 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:29:46,434 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:29:47,620 [1] DEBUG - Statement Id: [DAO00403_QMS002_GetThongTinClient] PreparedStatement : [SELECT B.ID as QUEUE_ID, B.NAME AS QUEUE_NAME,A.ID AS CLIENT_ID , A.[NAME] AS CLIENT_NAME, ISNULL(A.[STATE],1) AS [STATE],(CASE C.NAME WHEN 'UT' THEN 1 ELSE 0 END) AS QUEUETYPE     , B.DEPARTMENT_ID,ISNULL(B.SECTION_ID,-1) AS SECTION_ID,A.IPSERVER,A.NAMEAUDIO,C.QUEUE_TYPE_CODE,C.QUEUE_TYPE_CODE_SOUND,S.[NAME] AS SECTIONNAME     FROM QMS_QUEUE B LEFT JOIN QMS_CLIENT A ON A.QUEUE_ID = B.ID     LEFT JOIN QMS_QUEUE_TYPE C ON B.QUEUETYPE_ID = C.ID     LEFT JOIN QMS_SECTION S ON B.SECTION_ID=S.ID     WHERE     (A.COMPUTERNAME = 'GMC-HAIPN6' OR A.IPADDRESS = '10.15.167.54') AND A.[STATE] = 1 AND B.DEPARTMENT_ID='87'            AND B.BENHVIEN_ID = '01819']
2020-07-15 14:30:10,427 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = '01819']
2020-07-15 14:30:10,548 [1] DEBUG - Statement Id: [DAO00095_GetDetailTrungBN] PreparedStatement : [select  TT_TIEPNHAN.NGAYTIEPNHAN AS NGAYTIEPNHAN ,TT_TIEPNHAN.SOBHYT AS SOTHE, TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH,TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH          from TT_BENHNHAN          left join TT_TIEPNHAN  ON          TT_TIEPNHAN.TIEPNHAN_ID = (SELECT TOP 1 TIEPNHAN_ID FROM TT_TIEPNHAN WHERE BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID ORDER BY THOIGIANTIEPNHAN DESC)           WHERE                TT_BENHNHAN.TENBENHNHAN = N'Test Nlh1'             AND               convert(varchar(10),TT_BENHNHAN.NGAYSINH, 103) = convert(varchar(10),'12/10/1998', 103)               AND               TT_BENHNHAN.GIOITINH = '1']
2020-07-15 14:30:27,185 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select top 1 * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%'  and ACTIVE = '1' order by DOITUONG_ID asc]
2020-07-15 14:30:27,185 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2020-07-15 14:30:27,185 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2020-07-15 14:30:27,459 [1] DEBUG - Statement Id: [DAO00095_GetDetail] PreparedStatement : [select distinct TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH, TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH, TN1.SOBHYT AS SOTHE, TN1.NGAYTIEPNHAN          from TT_BENHNHAN          left join (          select MAX(TIEPNHAN_ID) AS TIEPNHAN_ID, BENHNHAN_ID from TT_TIEPNHAN GROUP BY BENHNHAN_ID) TN ON TN.BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID          left join TT_TIEPNHAN TN1 ON TN1.TIEPNHAN_ID = TN.TIEPNHAN_ID           WHERE                TN1.SOBHYT = 'DN452342352355501819']
2020-07-15 14:30:58,790 [1] DEBUG - Statement Id: [DAO00019_GetLoaiGiaLoaiKhachHang] PreparedStatement : [select A.*, B.DICTIONARY_CODE MAKHACHHANG, C.TENLOAIGIA        from TM_NGUONKHACHHANG_LOAIGIA A        left join LST_DICTIONARY B on A.NGUONKHACHHANG_BENHNHAN_ID = B.DICTIONARY_ID        inner join TM_LOAIGIA C on C.LOAIGIA_ID = A.LOAIGIA_ID and CAPTREN_ID  = (select LOAIGIA_ID from TM_LOAIGIA where MALOAIGIA = 'GiaDichVu')        left join TM_DICHVU_DONGIA dvdg on dvdg.LOAIGIA_ID = A.LOAIGIA_ID        where B.DICTIONARY_TYPE_CODE = 'NguonKhachHang' and dvdg.DICHVU_ID  =  @param0]
2020-07-15 14:30:58,790 [1] DEBUG - Statement Id: [DAO00019_GetLoaiGiaLoaiKhachHang] Parameters: [@param0=[DICHVU_ID,3]]
2020-07-15 14:30:58,790 [1] DEBUG - Statement Id: [DAO00019_GetLoaiGiaLoaiKhachHang] Types: [@param0=[Int64, System.Int64]]
2020-07-15 14:30:58,901 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = '01819'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = '01819'            where A.DOITUONG_ID = '4'                            and A.DICHVU_ID = '3'                         and A.BENHVIEN_ID = '01819'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2020-07-15 14:30:59,267 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '0003' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:30:59,360 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:30:59,434 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:30:59,496 [1] DEBUG - Statement Id: [DAO00000_GetDICHVU_DONGIA_LOAIGIA] PreparedStatement : [select A.LOAIGIA_ID, A.BANGGIA_ID, A.GIAVON, A.TYLEVAT  as TYLE_VAT, A.TYLE_LOINHUAN,            A.DONGIA as DONGIA_DOANHTHU, NULL as DONGIA_KHAC, isnull(D.MAPHANNHOMDICHVU, 'TT') as LOAI_CHIPHI            from TM_DICHVU_DONGIA A            inner join TM_BANGGIA B on B.LOAIGIA_ID = A.LOAIGIA_ID AND B.BENHVIEN_ID = '01819'            left join (select B.MAPHANNHOMDICHVU, A.* from TM_DICHVU_PHANNHOMDICHVU A            inner join TM_PHANNHOMDICHVU B on  B.PHANNHOMDICHVU_ID = A.PHANNHOMDICHVU_ID            where A.DICHVU_ID = '3' AND A.BENHVIEN_ID = '01819') D on A.DICHVU_ID = D.DICHVU_ID            where A.LOAIGIA_ID = '2' and A.DICHVU_ID = '3'            union            select A.LOAIGIA_ID, null as BANGGIA_ID, null as GIAVON, null as TYLE_VAT, null as TYLE_LOINHUAN,            null as DONGIA_DOANHTHU, C.DONGIA as DONGIA_KHAC, isnull(D.MAPHANNHOMDICHVU, 'TT') as LOAI_CHIPHI            from TM_DOITUONG_GIADICHVU A            left join TM_DICHVU dv on dv.DICHVU_ID = A.DICHVU_ID            inner join TM_BANGGIA B on B.LOAIGIA_ID = A.LOAIGIA_ID AND B.BENHVIEN_ID = '01819'            left join TM_DICHVU_DONGIA C on C.LOAIGIA_ID = A.LOAIGIA_ID AND C.BENHVIEN_ID = '01819'            and C.BANGGIA_ID = B.BANGGIA_ID and C.DICHVU_ID = A.DICHVU_ID            left join (select B.MAPHANNHOMDICHVU, A.* from TM_DICHVU_PHANNHOMDICHVU A            inner join TM_PHANNHOMDICHVU B on  B.PHANNHOMDICHVU_ID = A.PHANNHOMDICHVU_ID            where A.DICHVU_ID = '3' AND A.BENHVIEN_ID = '01819') D on A.DICHVU_ID = D.DICHVU_ID            where A.DOITUONG_ID = '4'  and A.DICHVU_ID = '3' and A.LOAIGIA_ID            in (select top 1 LOAIGIA_ID from TM_DOITUONG_LOAIGIA            where DOITUONG_ID = '4' and GIAHOTRO = '1'  AND BENHVIEN_ID = '01819'            and LOAIGIA_ID            in (select LOAIGIA_ID from TM_BANGGIA            where LOAIBANGGIA in            (select LOAIBANGGIA from TM_BANGGIA where LOAIGIA_ID = '2'  AND BENHVIEN_ID = '01819')            and TAMNGUNG = '0')  AND BENHVIEN_ID = '01819'            and isnull(dv.TAMNGUNG, '0') = '0' and isnull(dv.BHYT, '0') = '1'            )]
2020-07-15 14:30:59,777 [1] DEBUG - Statement Id: [DAO00024_TM_TIEPNHAN_BANGGIA_DICHVU_getlist] PreparedStatement : [select * from TM_TIEPNHAN_BANGGIA_DICHVU where TAMNGUNG != '1' and BENHVIEN_ID = '01819']
2020-07-15 14:31:01,725 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select top 1 * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%'  and ACTIVE = '1' order by DOITUONG_ID asc]
2020-07-15 14:31:01,725 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2020-07-15 14:31:01,725 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2020-07-15 14:31:01,887 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:31:04,128 [1] DEBUG - Statement Id: [DAO00013_Add_BenhNhan] PreparedStatement : [declare @keyValue int, @BenhVienId varchar(10), @yearNow int, @Mayte varchar(20), @SoVaoVien varchar(20), @fid varchar(20),        @Bnid int, @Manoisinh varchar(10), @Namsinh int, @Ngaysinh smalldatetime, @Gioitinh int, @Thangsinh int, @Daysinh int, @beginpatient int        declare @InsertedRows TABLE (BENHNHAN_ID INT, MAYTE varchar(20), MANOISINH varchar(10), NAMSINH int, NGAYSINH smalldatetime, GIOITINH int )        set @keyValue = 0;        set @Thangsinh = 0;        set @Daysinh = 0;        set @beginpatient = 0;        set @fid = 'F';        set @BenhVienId = '01819'        set @yearNow = YEAR(getdate())                select @beginpatient = isnull(VALUE, 0) from TM_SYS_APPSETTINGS where CODE = 'COM_FIRST_NUMBER_PATIENTCODE_INTHEYEAR'          select @keyValue = KEYVALUE from LST_KEYDATA        where KEYTYPE = 'MAYTE' and KEYYEAR = @yearNow                if @keyValue = 0        Insert into LST_KEYDATA values ('MAYTE', @yearNow, '0', '0', '0', '0', '0', @beginpatient, @BenhVienId);        Update LST_KEYDATA set KEYVALUE = KEYVALUE + 1, @keyValue = (KEYVALUE + 1) where KEYTYPE = 'MAYTE' and KEYYEAR = @yearNow                set @SoVaoVien = right('0000000'+convert(varchar(7), @keyValue), 7)        set @Mayte = RIGHT(@yearNow, 2) + @SoVaoVien                insert into TT_BENHNHAN (        MAYTE        , SOVAOVIEN        , TENBENHNHAN        , HO        , TEN        , GIOITINH        , NGAYSINH        , NAMSINH        , MANOISINH        , SONHA        , DIACHI        , SODIENTHOAI        , XAPHUONG_ID        , QUANHUYEN_ID        , TINHTHANH_ID        , DANTOC_ID        , QUOCTICH_ID        , SOLUUTRUNOITRU        , SOLUUTRUNGOAITRU        , NGHENGHIEP_ID        , CMND        , HOCHIEU        , VIETKIEU        , NGUOINUOCNGOAI        , DIACHITHUONGTRU        , DIACHILIENLAC        , DIACHICOQUAN        , EMAIL        , NHOMMAU_ID        , YEUTORH_ID        , TIENSUDIUNG        , TIENSUBENH        , TIENSUHUTTHUOCLA        , TUVONG        , NGAYTUVONG        , THOIGIANTUVONG        , NGUYENNHANTUVONG_ID        , NGUOIGHINHANTUVONG_ID        , THOIGIANGHINHANTUVONG        , NHANVIEN_ID        , DONVICONGTAC_ID        , DIENTHOAIBAN        , TINHTRANGHONNHAN_ID        , NGUOILIENHE_ID        , MOIQUANHE_ID        , NGUOILIENHE        , THONGTIN_NLH        , GHICHU        , HINHANH_DAIDIEN        , SITE_ID        , PID        , ACTIVE        , BENHVIEN_ID        , NGAYTAO        , NGUOITAO_ID        , NGAYGIOSINH        , TRINHDOVANHOA_ID        )                values (        @Mayte        , @SoVaoVien        ,  @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45         ,  @param46         ,  @param47         ,  @param48         , '1'        ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         );        set @Bnid = SCOPE_IDENTITY()                select @Manoisinh = MANOISINH, @Namsinh = NAMSINH, @Ngaysinh = NGAYSINH, @Gioitinh = GIOITINH from @InsertedRows;        IF (@Ngaysinh is not Null)        BEGIN        set @Thangsinh = MONTH(@Ngaysinh);        set @Daysinh = DAY(@Ngaysinh);        END        IF (@Manoisinh is Null) set @Manoisinh = '0'        set @fid = right('000'+convert(varchar(3), @Manoisinh), 3) + convert(varchar(1), @Gioitinh) + RIGHT(@Namsinh, 2) + right('00'+convert(varchar(2), @Thangsinh), 2) + right('00'+convert(varchar(2), @Daysinh), 2) + right('000000000'+convert(varchar(9), @Bnid), 9) + convert(varchar(1), 'F');                update TT_BENHNHAN set FID = @fid where BENHNHAN_ID = @Bnid;                select @Bnid]
2020-07-15 14:31:04,129 [1] DEBUG - Statement Id: [DAO00013_Add_BenhNhan] Parameters: [@param0=[TENBENHNHAN,Test Nlh1], @param1=[HO,Test], @param2=[TEN,Nlh1], @param3=[GIOITINH,1], @param4=[NGAYSINH,10/12/1998 12:00:00 AM], @param5=[NAMSINH,1998], @param6=[MANOISINH,null], @param7=[SONHA,null], @param8=[DIACHI,null], @param9=[SODIENTHOAI,null], @param10=[XAPHUONG_ID,09613], @param11=[QUANHUYEN_ID,null], @param12=[TINHTHANH_ID,null], @param13=[DANTOC_ID,332], @param14=[QUOCTICH_ID,291], @param15=[SOLUUTRUNOITRU,null], @param16=[SOLUUTRUNGOAITRU,null], @param17=[NGHENGHIEP_ID,null], @param18=[CMND,null], @param19=[HOCHIEU,null], @param20=[VIETKIEU,null], @param21=[NGUOINUOCNGOAI,null], @param22=[DIACHITHUONGTRU,Xã Sơn Đông, Thị xã Sơn Tây, Thành phố Hà Nội], @param23=[DIACHILIENLAC,Xã Sơn Đông, Thị xã Sơn Tây, Thành phố Hà Nội], @param24=[DIACHICOQUAN,null], @param25=[EMAIL,null], @param26=[NHOMMAU_ID,null], @param27=[YEUTORH_ID,null], @param28=[TIENSUDIUNG,null], @param29=[TIENSUBENH,null], @param30=[TIENSUHUTTHUOCLA,null], @param31=[TUVONG,null], @param32=[NGAYTUVONG,null], @param33=[THOIGIANTUVONG,null], @param34=[NGUYENNHANTUVONG_ID,null], @param35=[NGUOIGHINHANTUVONG_ID,null], @param36=[THOIGIANGHINHANTUVONG,null], @param37=[NHANVIEN_ID,null], @param38=[DONVICONGTAC_ID,13761], @param39=[DIENTHOAIBAN,null], @param40=[TINHTRANGHONNHAN_ID,null], @param41=[NGUOILIENHE_ID,null], @param42=[MOIQUANHE_ID,null], @param43=[NGUOILIENHE,Test người liên hệ 1], @param44=[THONGTIN_NLH,null], @param45=[GHICHU,null], @param46=[HINHANH_DAIDIEN,imgMale.png], @param47=[SITE_ID,105], @param48=[PID,null], @param49=[BENHVIEN_ID,01819], @param50=[NGAYTAO,7/15/2020 2:31:04 PM], @param51=[NGUOITAO_ID,1], @param52=[NGAYGIOSINH,null], @param53=[TRINHDOVANHOA_ID,null]]
2020-07-15 14:31:04,129 [1] DEBUG - Statement Id: [DAO00013_Add_BenhNhan] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[DateTime, System.DateTime], @param5=[Int64, System.Int64], @param6=[System.DBNull, null], @param7=[System.DBNull, null], @param8=[System.DBNull, null], @param9=[System.DBNull, null], @param10=[String, System.String], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[Int64, System.Int64], @param14=[Int64, System.Int64], @param15=[System.DBNull, null], @param16=[System.DBNull, null], @param17=[System.DBNull, null], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[String, System.String], @param23=[String, System.String], @param24=[System.DBNull, null], @param25=[System.DBNull, null], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[System.DBNull, null], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[Int64, System.Int64], @param39=[System.DBNull, null], @param40=[System.DBNull, null], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[String, System.String], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[String, System.String], @param47=[String, System.String], @param48=[System.DBNull, null], @param49=[String, System.String], @param50=[DateTime, System.DateTime], @param51=[String, System.String], @param52=[System.DBNull, null], @param53=[System.DBNull, null]]
2020-07-15 14:31:04,249 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhan_byBenhNhanId] PreparedStatement : [select *        from TT_BENHNHAN        where BENHNHAN_ID = '8727'        order by BENHNHAN_ID]
2020-07-15 14:31:04,306 [1] DEBUG - Statement Id: [DAO00013_GetBenhNhanToDB] PreparedStatement : [select ROW_NUMBER() OVER(order by a.MAYTE) as ROWNUMBER, *,        CASE        WHEN A.GIOITINH = 1 THEN 'Nam'        WHEN A.GIOITINH = 2 THEN N'Nữ'        END as TENGIOITINH        from TT_BENHNHAN A        where  ACTIVE = '1' and MAYTE = '200001808']
2020-07-15 14:31:04,629 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] PreparedStatement : [if not exists (select 1        from TT_BENHNHAN_BHYT        where SOTHE = 'DN452342352355501819' and BENHNHAN_ID = '8727')        insert into TT_BENHNHAN_BHYT (        BENHNHAN_ID        , LOAIBHYT        , SOTHE        , NGAYCAP        , NGAYHIEULUC        , NGAYHETHIEULUC        , TINHTHANH_CAPTHE_ID        , BENHVIEN_ID        , BENHVIEN_KCB_ID        , TREN3NAM        , TREN5NAM        , TREN6THANG        , NGAYMIENDONGCHITRA        , TAMNGUNG        , NGAYTAO        , NGUOITAO_ID        , KHUVUCSONG_ID        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         )        else        update TT_BENHNHAN_BHYT set        LOAIBHYT =  @param1         , SOTHE =  @param2         , NGAYCAP =  @param3         , NGAYHIEULUC =  @param4         , NGAYHETHIEULUC =  @param5         , TINHTHANH_CAPTHE_ID =  @param6         , BENHVIEN_ID =  @param7         , BENHVIEN_KCB_ID =  @param8         , TREN3NAM =  @param9         , TREN5NAM =  @param10         , TREN6THANG =  @param11         , NGAYMIENDONGCHITRA =  @param12         , TAMNGUNG =  @param13         , NGAYCAPNHAT =  @param17         , NGUOICAPNHAT_ID =  @param18         , KHUVUCSONG_ID =  @param16         where        SOTHE = 'DN452342352355501819' and BENHNHAN_ID = '8727']
2020-07-15 14:31:04,629 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Parameters: [@param0=[BENHNHAN_ID,8727], @param1=[LOAIBHYT,null], @param2=[SOTHE,DN452342352355501819], @param3=[NGAYCAP,null], @param4=[NGAYHIEULUC,1/1/2020 12:00:00 AM], @param5=[NGAYHETHIEULUC,12/31/2020 12:00:00 AM], @param6=[TINHTHANH_CAPTHE_ID,null], @param7=[BENHVIEN_ID,01819], @param8=[BENHVIEN_KCB_ID,01819], @param9=[TREN3NAM,0], @param10=[TREN5NAM,0], @param11=[TREN6THANG,null], @param12=[NGAYMIENDONGCHITRA,null], @param13=[TAMNGUNG,null], @param14=[NGAYTAO,7/15/2020 2:31:04 PM], @param15=[NGUOITAO_ID,1], @param16=[KHUVUCSONG_ID,null], @param17=[NGAYCAPNHAT,7/15/2020 2:31:04 PM], @param18=[NGUOICAPNHAT_ID,1]]
2020-07-15 14:31:04,630 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Types: [@param0=[Int32, System.Int32], @param1=[System.DBNull, null], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[DateTime, System.DateTime], @param5=[DateTime, System.DateTime], @param6=[System.DBNull, null], @param7=[String, System.String], @param8=[String, System.String], @param9=[String, System.String], @param10=[String, System.String], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[System.DBNull, null], @param17=[DateTime, System.DateTime], @param18=[String, System.String]]
2020-07-15 14:31:04,720 [1] DEBUG - Statement Id: [DAO00118_Add_BenhNhan] PreparedStatement : [if not exists (select 1 from TT_BENHNHAN where BENHNHAN_ID = '8727')              insert into TT_BENHNHAN (              BENHNHAN_ID              , MAYTE              , SOVAOVIEN              , TENBENHNHAN              , HO              , TEN              , GIOITINH              , NGAYSINH              , NAMSINH              , SONHA              , DIACHI              , SODIENTHOAI              , XAPHUONG_ID              , QUANHUYEN_ID              , TINHTHANH_ID              , DANTOC_ID              , QUOCTICH_ID              , SOLUUTRUNOITRU              , SOLUUTRUNGOAITRU              , NGHENGHIEP_ID              , CMND              , HOCHIEU              , VIETKIEU              , NGUOINUOCNGOAI              , DIACHITHUONGTRU              , DIACHILIENLAC              , DIACHICOQUAN              , EMAIL              , NHOMMAU_ID              , YEUTORH_ID              , TIENSUDIUNG              , TIENSUBENH              , TIENSUHUTTHUOCLA              , TUVONG              , NGAYTUVONG              , THOIGIANTUVONG              , NGUYENNHANTUVONG_ID              , NGUOIGHINHANTUVONG_ID              , THOIGIANGHINHANTUVONG              , NHANVIEN_ID              , DONVICONGTAC_ID              , DIENTHOAIBAN              , TINHTRANGHONNHAN_ID              , NGUOILIENHE_ID              , MOIQUANHE_ID              , NGUOILIENHE              , THONGTIN_NLH              , GHICHU              , HINHANH_DAIDIEN              , BENHVIEN_ID              , NGAYTAO              , NGUOITAO_ID              , NGAYGIOSINH              ) values (               @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               ,  @param17               ,  @param18               ,  @param19               ,  @param20               ,  @param21               ,  @param22               ,  @param23               ,  @param24               ,  @param25               ,  @param26               ,  @param27               ,  @param28               ,  @param29               ,  @param30               ,  @param31               ,  @param32               ,  @param33               ,  @param34               ,  @param35               ,  @param36               ,  @param37               ,  @param38               ,  @param39               ,  @param40               ,  @param41               ,  @param42               ,  @param43               ,  @param44               ,  @param45               ,  @param46               ,  @param47               ,  @param48               ,  @param49               ,  @param50               ,  @param51               ,  @param52               )              else              update TT_BENHNHAN set              MAYTE =  @param1                ,                   SOVAOVIEN =  @param2                ,                   TENBENHNHAN =  @param3                ,                   HO =  @param4                ,                   TEN =  @param5                ,                   GIOITINH =  @param6                ,                   NGAYSINH =  @param7                ,                   NAMSINH =  @param8                ,                   SONHA =  @param9                ,                   SODIENTHOAI =  @param11                ,                   XAPHUONG_ID =  @param12                ,                   DANTOC_ID =  @param15                ,                   QUOCTICH_ID =  @param16                ,                   NGHENGHIEP_ID =  @param19                ,                   NGUOINUOCNGOAI =  @param23                ,                   DIACHITHUONGTRU =  @param24                ,                   DIACHILIENLAC =  @param25                ,                   DONVICONGTAC_ID =  @param40                ,                   NGUOILIENHE_ID =  @param43                ,                   MOIQUANHE_ID =  @param44                ,                   NGUOILIENHE =  @param45                ,                   THONGTIN_NLH =  @param46                ,                   GHICHU =  @param47                ,                   BENHVIEN_ID =  @param49                ,                   NGUOICAPNHAT_ID =  @param53                              where              BENHNHAN_ID = '8727']
2020-07-15 14:31:04,720 [1] DEBUG - Statement Id: [DAO00118_Add_BenhNhan] Parameters: [@param0=[BENHNHAN_ID,8727], @param1=[MAYTE,200001808], @param2=[SOVAOVIEN,0001808], @param3=[TENBENHNHAN,Test Nlh1], @param4=[HO,Test], @param5=[TEN,Nlh1], @param6=[GIOITINH,1], @param7=[NGAYSINH,10/12/1998 12:00:00 AM], @param8=[NAMSINH,1998], @param9=[SONHA,null], @param10=[DIACHI,null], @param11=[SODIENTHOAI,null], @param12=[XAPHUONG_ID,09613], @param13=[QUANHUYEN_ID,null], @param14=[TINHTHANH_ID,null], @param15=[DANTOC_ID,332], @param16=[QUOCTICH_ID,291], @param17=[SOLUUTRUNOITRU,null], @param18=[SOLUUTRUNGOAITRU,null], @param19=[NGHENGHIEP_ID,null], @param20=[CMND,null], @param21=[HOCHIEU,null], @param22=[VIETKIEU,null], @param23=[NGUOINUOCNGOAI,null], @param24=[DIACHITHUONGTRU,Xã Sơn Đông, Thị xã Sơn Tây, Thành phố Hà Nội], @param25=[DIACHILIENLAC,Xã Sơn Đông, Thị xã Sơn Tây, Thành phố Hà Nội], @param26=[DIACHICOQUAN,null], @param27=[EMAIL,null], @param28=[NHOMMAU_ID,null], @param29=[YEUTORH_ID,null], @param30=[TIENSUDIUNG,null], @param31=[TIENSUBENH,null], @param32=[TIENSUHUTTHUOCLA,null], @param33=[TUVONG,null], @param34=[NGAYTUVONG,null], @param35=[THOIGIANTUVONG,null], @param36=[NGUYENNHANTUVONG_ID,null], @param37=[NGUOIGHINHANTUVONG_ID,null], @param38=[THOIGIANGHINHANTUVONG,null], @param39=[NHANVIEN_ID,null], @param40=[DONVICONGTAC_ID,13761], @param41=[DIENTHOAIBAN,null], @param42=[TINHTRANGHONNHAN_ID,null], @param43=[NGUOILIENHE_ID,null], @param44=[MOIQUANHE_ID,null], @param45=[NGUOILIENHE,Test người liên hệ 1], @param46=[THONGTIN_NLH,null], @param47=[GHICHU,null], @param48=[HINHANH_DAIDIEN,imgMale.png], @param49=[BENHVIEN_ID,01819], @param50=[NGAYTAO,null], @param51=[NGUOITAO_ID,1], @param52=[NGAYGIOSINH,null], @param53=[NGUOICAPNHAT_ID,1]]
2020-07-15 14:31:04,720 [1] DEBUG - Statement Id: [DAO00118_Add_BenhNhan] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[DateTime, System.DateTime], @param8=[Int64, System.Int64], @param9=[System.DBNull, null], @param10=[System.DBNull, null], @param11=[System.DBNull, null], @param12=[String, System.String], @param13=[System.DBNull, null], @param14=[System.DBNull, null], @param15=[Int64, System.Int64], @param16=[Int64, System.Int64], @param17=[System.DBNull, null], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[System.DBNull, null], @param23=[System.DBNull, null], @param24=[String, System.String], @param25=[String, System.String], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[System.DBNull, null], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[System.DBNull, null], @param40=[Int64, System.Int64], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[String, System.String], @param46=[System.DBNull, null], @param47=[System.DBNull, null], @param48=[String, System.String], @param49=[String, System.String], @param50=[System.DBNull, null], @param51=[String, System.String], @param52=[System.DBNull, null], @param53=[String, System.String]]
2020-07-15 14:31:04,801 [1] DEBUG - Statement Id: [DAO00118_Add_Update_BHYT] PreparedStatement : [if not exists (select 1              from TT_BENHNHAN_BHYT              where SOTHE = 'DN452342352355501819' and BENHNHAN_ID = '8727')              insert into TT_BENHNHAN_BHYT (              BENHNHAN_ID              , LOAIBHYT              , SOTHE              , NGAYCAP              , NGAYHIEULUC              , NGAYHETHIEULUC              , TINHTHANH_CAPTHE_ID              , BENHVIEN_ID              , BENHVIEN_KCB_ID              , TREN3NAM              , TREN5NAM              , TREN6THANG              , NGAYMIENDONGCHITRA              , TAMNGUNG              , NGAYTAO              , NGUOITAO_ID              , KHUVUCSONG_ID              ) values (               @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               )              else              update TT_BENHNHAN_BHYT set              LOAIBHYT =  @param1               , SOTHE =  @param2               , NGAYCAP =  @param3               , NGAYHIEULUC =  @param4               , NGAYHETHIEULUC =  @param5               , TINHTHANH_CAPTHE_ID =  @param6               , BENHVIEN_ID =  @param7               , BENHVIEN_KCB_ID =  @param8               , TREN3NAM =  @param9               , TREN5NAM =  @param10               , TREN6THANG =  @param11               , NGAYMIENDONGCHITRA =  @param12               , TAMNGUNG =  @param13               , NGAYCAPNHAT =  @param17               , NGUOICAPNHAT_ID =  @param18               , KHUVUCSONG_ID =  @param16               where              SOTHE = 'DN452342352355501819' and BENHNHAN_ID = '8727']
2020-07-15 14:31:04,801 [1] DEBUG - Statement Id: [DAO00118_Add_Update_BHYT] Parameters: [@param0=[BENHNHAN_ID,8727], @param1=[LOAIBHYT,null], @param2=[SOTHE,DN452342352355501819], @param3=[NGAYCAP,null], @param4=[NGAYHIEULUC,1/1/2020 12:00:00 AM], @param5=[NGAYHETHIEULUC,12/31/2020 12:00:00 AM], @param6=[TINHTHANH_CAPTHE_ID,null], @param7=[BENHVIEN_ID,01819], @param8=[BENHVIEN_KCB_ID,01819], @param9=[TREN3NAM,False], @param10=[TREN5NAM,False], @param11=[TREN6THANG,null], @param12=[NGAYMIENDONGCHITRA,null], @param13=[TAMNGUNG,null], @param14=[NGAYTAO,7/15/2020 2:31:04 PM], @param15=[NGUOITAO_ID,1], @param16=[KHUVUCSONG_ID,null], @param17=[NGAYCAPNHAT,7/15/2020 2:31:04 PM], @param18=[NGUOICAPNHAT_ID,1]]
2020-07-15 14:31:04,801 [1] DEBUG - Statement Id: [DAO00118_Add_Update_BHYT] Types: [@param0=[Int32, System.Int32], @param1=[System.DBNull, null], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[DateTime, System.DateTime], @param5=[DateTime, System.DateTime], @param6=[System.DBNull, null], @param7=[String, System.String], @param8=[String, System.String], @param9=[Boolean, System.Boolean], @param10=[Boolean, System.Boolean], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[System.DBNull, null], @param17=[DateTime, System.DateTime], @param18=[String, System.String]]
2020-07-15 14:31:04,863 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] PreparedStatement : [if not exists (select 1        from TT_BENHNHAN_BHYT        where SOTHE = 'DN452342352355501819' and BENHNHAN_ID = '8727')        insert into TT_BENHNHAN_BHYT (        BENHNHAN_ID        , LOAIBHYT        , SOTHE        , NGAYCAP        , NGAYHIEULUC        , NGAYHETHIEULUC        , TINHTHANH_CAPTHE_ID        , BENHVIEN_ID        , BENHVIEN_KCB_ID        , TREN3NAM        , TREN5NAM        , TREN6THANG        , NGAYMIENDONGCHITRA        , TAMNGUNG        , NGAYTAO        , NGUOITAO_ID        , KHUVUCSONG_ID        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         )        else        update TT_BENHNHAN_BHYT set        LOAIBHYT =  @param1         , SOTHE =  @param2         , NGAYCAP =  @param3         , NGAYHIEULUC =  @param4         , NGAYHETHIEULUC =  @param5         , TINHTHANH_CAPTHE_ID =  @param6         , BENHVIEN_ID =  @param7         , BENHVIEN_KCB_ID =  @param8         , TREN3NAM =  @param9         , TREN5NAM =  @param10         , TREN6THANG =  @param11         , NGAYMIENDONGCHITRA =  @param12         , TAMNGUNG =  @param13         , NGAYCAPNHAT =  @param17         , NGUOICAPNHAT_ID =  @param18         , KHUVUCSONG_ID =  @param16         where        SOTHE = 'DN452342352355501819' and BENHNHAN_ID = '8727']
2020-07-15 14:31:04,864 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Parameters: [@param0=[BENHNHAN_ID,8727], @param1=[LOAIBHYT,4], @param2=[SOTHE,DN452342352355501819], @param3=[NGAYCAP,null], @param4=[NGAYHIEULUC,1/1/2020 12:00:00 AM], @param5=[NGAYHETHIEULUC,12/31/2020 12:00:00 AM], @param6=[TINHTHANH_CAPTHE_ID,null], @param7=[BENHVIEN_ID,01819], @param8=[BENHVIEN_KCB_ID,01819], @param9=[TREN3NAM,0], @param10=[TREN5NAM,0], @param11=[TREN6THANG,null], @param12=[NGAYMIENDONGCHITRA,null], @param13=[TAMNGUNG,null], @param14=[NGAYTAO,7/15/2020 2:31:04 PM], @param15=[NGUOITAO_ID,1], @param16=[KHUVUCSONG_ID,null], @param17=[NGAYCAPNHAT,7/15/2020 2:31:04 PM], @param18=[NGUOICAPNHAT_ID,1]]
2020-07-15 14:31:04,864 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[DateTime, System.DateTime], @param5=[DateTime, System.DateTime], @param6=[System.DBNull, null], @param7=[String, System.String], @param8=[String, System.String], @param9=[String, System.String], @param10=[String, System.String], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[System.DBNull, null], @param17=[DateTime, System.DateTime], @param18=[String, System.String]]
2020-07-15 14:31:05,132 [1] DEBUG - Statement Id: [DAOWF001_Laythongtingateways] PreparedStatement : [select * from TM_PROCESS_GATEWAYS]
2020-07-15 14:31:05,426 [1] DEBUG - Statement Id: [DAO00019_Add] PreparedStatement : [declare        @keyValue int, @BenhVienId varchar(10),        @yearNow int, @monthNow varchar(2), @dayNow varchar(2),        @Sotiepnhan varchar(20), @SoThuTu varchar(20)        set @keyValue = 0;        set @BenhVienId = '01819'        set @yearNow = YEAR(getdate())        set @monthNow = RIGHT('00' + convert(varchar(2), MONTH(getdate())),2)        set @dayNow = RIGHT('00' + convert(varchar(2), DAY(getdate())),2)        BEGIN        select @keyValue = KEYVALUE from LST_KEYDATA        where KEYTYPE = 'SOTIEPNHAN' and KEYYEAR = @yearNow and KEYMONTH = @monthNow and KEYDAY = @dayNow        and BENHVIEN_ID = @BenhVienId        if @keyValue = 0        Insert into LST_KEYDATA values ('SOTIEPNHAN', @yearNow, @monthNow, @dayNow, '0', '0', '0', 0, @BenhVienId);        Update LST_KEYDATA set KEYVALUE = (KEYVALUE + 1), @keyValue = (KEYVALUE + 1) where KEYTYPE = 'SOTIEPNHAN' and KEYYEAR = @yearNow and KEYMONTH = @monthNow and KEYDAY = @dayNow and BENHVIEN_ID = @BenhVienId        set @SoThuTu = right('0000000'+convert(varchar(7), @keyValue), 7)        set @Sotiepnhan = 'TN' + RIGHT(@yearNow, 2) + @monthNow  + @dayNow + '.' + @SoThuTu                   insert into TT_TIEPNHAN (        SOTIEPNHAN        , UUTIEN        , BENHNHAN_ID        , BENHVIEN_ID        , TUYENKHAMBENH_ID        , NOITIEPNHAN_ID        , NGAYTIEPNHAN        , THOIGIANTIEPNHAN        , NAMTIEPNHAN        , THANGTIEPNHAN        , DOITUONG_ID        , LYDOTIEPNHAN_ID        , HINHTHUCDENKHAM_ID        , TINHTRANGHEN        , XACNHANCHIPHI_ID        , THUTIENTRUOC        , TAIKHAM        , SOBHYT        , BHYTTUNGAY        , BHYTDENNGAY        , BHYTNGAYCAP        , BHYTTREN3NAM        , BHYTTREN5NAM        , NGAYMIENDONGCHITRA        , LOAIBHYT        , NGAYBHYT2        , SOCHUYENVIEN        , HINHTHUCCHUYENVIEN_ID        , NOIGIOITHIEU_ID        , NGUOIGIOITHIEU_ID        , THOIGIANCHUYENTUYEN        , LYDOCHUYENVIEN_ID        , ICDNOIGIOITHIEU_ID        , CHANDOANNGT        , TRAITUYEN        , DIACHILIENHE        , XAPHUONG_ID        , QUANHUYEN_ID        , TINHTHANH_ID        , PROCESS_ID        , TRANGTHAI        , KHUVUCSONG_ID        , THANHVIEN_ID        , THE_ID        , LOAITHANHVIEN_ID        , SUDUNG_BHTN        , VIP        , GHICHU_TIEPNHAN        , BAOLANH_VIENPHI        , CONGTY_CHITRA_ID        , NGUON_BENHNHAN_ID        , LOAITIEPNHAN_ID        , THONGTIN_KCB_BHYT        , NGAYTAO        , NGUOITAO_ID        , LYDODENKHAM        , QUANHAM_ID        , TINHTRANGBENHNHAN_ID        , DONVICONGTAC_ID        , DONVICONGTAC         ,           NGOAIGIO         ,           NGUOINUOCNGOAI         ,           ISTHONGTUYEN                 , TENNGUOIGIOITHIEU        , GIOITHIEUBENNGOAI                 )        OUTPUT INSERTED.TIEPNHAN_ID, INSERTED.SOTIEPNHAN        values (        @Sotiepnhan        ,  @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45         ,  @param46         ,  @param47         ,  @param48         ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55         ,  @param56         ,  @param57         ,  @param58          ,            @param59          ,            @param60          ,            @param61                  ,  @param62         ,  @param63                  )        end]
2020-07-15 14:31:05,426 [1] DEBUG - Statement Id: [DAO00019_Add] Parameters: [@param0=[UUTIEN,0], @param1=[BENHNHAN_ID,8727], @param2=[BENHVIEN_ID,01819], @param3=[TUYENKHAMBENH_ID,null], @param4=[NOITIEPNHAN_ID,87], @param5=[NGAYTIEPNHAN,7/15/2020 12:00:00 AM], @param6=[THOIGIANTIEPNHAN,7/15/2020 2:29:46 PM], @param7=[NAMTIEPNHAN,2020], @param8=[THANGTIEPNHAN,7], @param9=[DOITUONG_ID,4], @param10=[LYDOTIEPNHAN_ID,null], @param11=[HINHTHUCDENKHAM_ID,461], @param12=[TINHTRANGHEN,null], @param13=[XACNHANCHIPHI_ID,null], @param14=[THUTIENTRUOC,null], @param15=[TAIKHAM,0], @param16=[SOBHYT,DN452342352355501819], @param17=[BHYTTUNGAY,1/1/2020 12:00:00 AM], @param18=[BHYTDENNGAY,12/31/2020 12:00:00 AM], @param19=[BHYTNGAYCAP,null], @param20=[BHYTTREN3NAM,0], @param21=[BHYTTREN5NAM,0], @param22=[NGAYMIENDONGCHITRA,null], @param23=[LOAIBHYT,null], @param24=[NGAYBHYT2,null], @param25=[SOCHUYENVIEN,], @param26=[HINHTHUCCHUYENVIEN_ID,null], @param27=[NOIGIOITHIEU_ID,null], @param28=[NGUOIGIOITHIEU_ID,null], @param29=[THOIGIANCHUYENTUYEN,null], @param30=[LYDOCHUYENVIEN_ID,null], @param31=[ICDNOIGIOITHIEU_ID,null], @param32=[CHANDOANNGT,], @param33=[TRAITUYEN,0], @param34=[DIACHILIENHE,null], @param35=[XAPHUONG_ID,09613], @param36=[QUANHUYEN_ID,null], @param37=[TINHTHANH_ID,null], @param38=[PROCESS_ID,P02], @param39=[TRANGTHAI,DATIEPNHAN], @param40=[KHUVUCSONG_ID,null], @param41=[THANHVIEN_ID,null], @param42=[THE_ID,null], @param43=[LOAITHANHVIEN_ID,null], @param44=[SUDUNG_BHTN,0], @param45=[VIP,0], @param46=[GHICHU_TIEPNHAN,null], @param47=[BAOLANH_VIENPHI,0], @param48=[CONGTY_CHITRA_ID,null], @param49=[NGUON_BENHNHAN_ID,null], @param50=[LOAITIEPNHAN_ID,8351], @param51=[THONGTIN_KCB_BHYT,null], @param52=[NGAYTAO,7/15/2020 2:31:05 PM], @param53=[NGUOITAO_ID,1], @param54=[LYDODENKHAM,null], @param55=[QUANHAM_ID,12744], @param56=[TINHTRANGBENHNHAN_ID,null], @param57=[DONVICONGTAC_ID,13761], @param58=[DONVICONGTAC,null], @param59=[NGOAIGIO,null], @param60=[NGUOINUOCNGOAI,null], @param61=[ISTHONGTUYEN,0], @param62=[TENNGUOIGIOITHIEU,null], @param63=[GIOITHIEUBENNGOAI,null]]
2020-07-15 14:31:05,426 [1] DEBUG - Statement Id: [DAO00019_Add] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[String, System.String], @param5=[DateTime, System.DateTime], @param6=[DateTime, System.DateTime], @param7=[Int32, System.Int32], @param8=[Int32, System.Int32], @param9=[Int64, System.Int64], @param10=[System.DBNull, null], @param11=[Int64, System.Int64], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[System.DBNull, null], @param15=[Int32, System.Int32], @param16=[String, System.String], @param17=[DateTime, System.DateTime], @param18=[DateTime, System.DateTime], @param19=[System.DBNull, null], @param20=[String, System.String], @param21=[String, System.String], @param22=[System.DBNull, null], @param23=[System.DBNull, null], @param24=[System.DBNull, null], @param25=[String, System.String], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[String, System.String], @param33=[String, System.String], @param34=[System.DBNull, null], @param35=[String, System.String], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[String, System.String], @param39=[String, System.String], @param40=[System.DBNull, null], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[String, System.String], @param45=[String, System.String], @param46=[System.DBNull, null], @param47=[String, System.String], @param48=[System.DBNull, null], @param49=[System.DBNull, null], @param50=[Int64, System.Int64], @param51=[System.DBNull, null], @param52=[DateTime, System.DateTime], @param53=[String, System.String], @param54=[System.DBNull, null], @param55=[Int64, System.Int64], @param56=[System.DBNull, null], @param57=[Int64, System.Int64], @param58=[System.DBNull, null], @param59=[System.DBNull, null], @param60=[System.DBNull, null], @param61=[String, System.String], @param62=[System.DBNull, null], @param63=[System.DBNull, null]]
2020-07-15 14:31:05,659 [1] DEBUG - Statement Id: [DAO00019_GetTTTiepNhan_byTiepNhanId] PreparedStatement : [select *        from TT_TIEPNHAN        where TIEPNHAN_ID = '8743'        order by TIEPNHAN_ID]
2020-07-15 14:31:05,692 [1] DEBUG - Statement Id: [DAO00080_Add_KhamBenh_CapCuu] PreparedStatement : [insert into TT_KHAMBENH_VAOVIEN (        SOPHIEU        , TIEPNHAN_ID        , KHAMBENH_ID        , BENHNHAN_ID        , NGUOILIENHE        , DIENTHOAILIENHE        , NOILAMVIEC        , CHANDOANNOIGIOITHIEU        , NGAYKHAM        , THOIGIANKHAM        , LYDOVAOVIEN        , QUATRINHBENHLY        , TIENSUBANTHAN        , TIENSUGIADINH        , KHAMXETTOANTHAN        , KHAMXETCACBOPHAN        , KHAMXETKQLS        , CHANDOANVAO        , ICDKHAMXET_ID        , DAXULY        , NGAYRA        , THOIGIANRA        , NHAPKHOA_ID        , CHUYENVIEN_ID        , CHUY        , MACH        , NHIETDO        , HUYETAPCAO        , HUYETAPTHAP        , NHIPTHO        , CANNANG        , CHIEUCAO        , BACSI_ID        , XUTRUKHAMBENH_ID        , CAPCUU        , NGAYTAINAN        , THOIGIANTAINAN        , NOITAINAN_TINHTHANH_ID        , NOITAINAN_QUANHUYEN_ID        , NOITAINAN_PHUONGXA_ID        , NOITAINAN_DIACHI        , DIADIEMTAINAN_ID        , BOPHANBITHUONG_ID        , MUCDO_ID        , DIENBIENSAUTN_ID        , XUTRISAUTN_ID        , NGUYENNHAN_ID        , NGUYENNHANCHITIET_ID        , ICD_NGUYENNHAN        , NGAYTAO        , NGUOITAO_ID        , NGAYCAPNHAT        , NGUOICAPNHAT_ID        , BENHANCHUYENKHOA        , CHANDOANVAOVIEN        , CHANDOANRAVIEN        , DIEUTRITUNGAY        , DIEUTRIDENNGAY        , DIENBIENLS        , KQXETNGHIEM        , PHAUTHUAT        , THUTHUAT        , TINHTRANGNGUOIBENH        , HUONGDIEUTRI        , NGUOIGIAO_ID        , NGUOINHAN_ID        , XQUANG        , CTSCANNER        , SIEUAM        , XETNGHIEM        , KHAC        , TOANBOHS        , LOAICHUYENKHOA        , CONGANCANTHIEP        , CDRR_BENHCHINH        , CDRR_BENHKEM        , ICD_BENHCHINH        , ICD_BENHKEMTHEO        , PHUONGPHAPDIEUTRI        , FIELD_1        , FIELD_2        , FIELD_3        , FIELD_4        , FIELD_5        , FIELD_6        , FIELD_7        , FIELD_8        , FIELD_9        , FIELD_10        , FIELD_11        , FIELD_12        , FIELD_13        , FIELD_14        , FIELD_15        , FIELD_27        , FIELD_28        , FIELD_29        , FIELD_30        , FIELD_31        , FIELD_32        , FIELD_33        , FIELD_34        , FIELD_35        , FIELD_36        , FIELD_37        , FIELD_38        , FIELD_39        , FIELD_40        , FIELD_41        , FIELD_42        , FIELD_43        , FIELD_44        , FIELD_45        , FIELD_46        , FIELD_47        , FIELD_48        , FIELD_49        , FIELD_50        , FIELD_51        , FIELD_52        , FIELD_53        , FIELD_54        , FIELD_55        , FIELD_56        , BENHVIEN_ID        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45         ,  @param46         ,  @param47         ,  @param48         ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55         ,  @param56         ,  @param57         ,  @param58         ,  @param59         ,  @param60         ,  @param61         ,  @param62         ,  @param63         ,  @param64         ,  @param65         ,  @param66         ,  @param67         ,  @param68         ,  @param69         ,  @param70         ,  @param71         ,  @param72         ,  @param73         ,  @param74         ,  @param75         ,  @param76         ,  @param77         ,  @param78         ,  @param79         ,  @param80         ,  @param81         ,  @param82         ,  @param83         ,  @param84         ,  @param85         ,  @param86         ,  @param87         ,  @param88         ,  @param89         ,  @param90         ,  @param91         ,  @param92         ,  @param93         ,  @param94         ,  @param95         ,  @param96         ,  @param97         ,  @param98         ,  @param99         ,  @param100         ,  @param101         ,  @param102         ,  @param103         ,  @param104         ,  @param105         ,  @param106         ,  @param107         ,  @param108         ,  @param109         ,  @param110         ,  @param111         ,  @param112         ,  @param113         ,  @param114         ,  @param115         ,  @param116         ,  @param117         ,  @param118         ,  @param119         ,  @param120         ,  @param121         ,  @param122         ,  @param123         ,  @param124         )]
2020-07-15 14:31:05,692 [1] DEBUG - Statement Id: [DAO00080_Add_KhamBenh_CapCuu] Parameters: [@param0=[SOPHIEU,null], @param1=[TIEPNHAN_ID,8743], @param2=[KHAMBENH_ID,null], @param3=[BENHNHAN_ID,8727], @param4=[NGUOILIENHE,Test người liên hệ 1], @param5=[DIENTHOAILIENHE,null], @param6=[NOILAMVIEC,null], @param7=[CHANDOANNOIGIOITHIEU,null], @param8=[NGAYKHAM,7/15/2020 12:00:00 AM], @param9=[THOIGIANKHAM,7/15/2020 2:29:46 PM], @param10=[LYDOVAOVIEN,null], @param11=[QUATRINHBENHLY,null], @param12=[TIENSUBANTHAN,null], @param13=[TIENSUGIADINH,null], @param14=[KHAMXETTOANTHAN,null], @param15=[KHAMXETCACBOPHAN,null], @param16=[KHAMXETKQLS,null], @param17=[CHANDOANVAO,null], @param18=[ICDKHAMXET_ID,null], @param19=[DAXULY,null], @param20=[NGAYRA,null], @param21=[THOIGIANRA,null], @param22=[NHAPKHOA_ID,87], @param23=[CHUYENVIEN_ID,null], @param24=[CHUY,null], @param25=[MACH,null], @param26=[NHIETDO,null], @param27=[HUYETAPCAO,null], @param28=[HUYETAPTHAP,null], @param29=[NHIPTHO,null], @param30=[CANNANG,null], @param31=[CHIEUCAO,null], @param32=[BACSI_ID,null], @param33=[XUTRUKHAMBENH_ID,null], @param34=[CAPCUU,null], @param35=[NGAYTAINAN,null], @param36=[THOIGIANTAINAN,null], @param37=[NOITAINAN_TINHTHANH_ID,null], @param38=[NOITAINAN_QUANHUYEN_ID,null], @param39=[NOITAINAN_PHUONGXA_ID,null], @param40=[NOITAINAN_DIACHI,null], @param41=[DIADIEMTAINAN_ID,null], @param42=[BOPHANBITHUONG_ID,null], @param43=[MUCDO_ID,null], @param44=[DIENBIENSAUTN_ID,null], @param45=[XUTRISAUTN_ID,null], @param46=[NGUYENNHAN_ID,null], @param47=[NGUYENNHANCHITIET_ID,null], @param48=[ICD_NGUYENNHAN,null], @param49=[NGAYTAO,7/15/2020 2:31:05 PM], @param50=[NGUOITAO_ID,1], @param51=[NGAYCAPNHAT,7/15/2020 2:31:05 PM], @param52=[NGUOICAPNHAT_ID,1], @param53=[BENHANCHUYENKHOA,null], @param54=[CHANDOANVAOVIEN,null], @param55=[CHANDOANRAVIEN,null], @param56=[DIEUTRITUNGAY,null], @param57=[DIEUTRIDENNGAY,null], @param58=[DIENBIENLS,null], @param59=[KQXETNGHIEM,null], @param60=[PHAUTHUAT,null], @param61=[THUTHUAT,null], @param62=[TINHTRANGNGUOIBENH,null], @param63=[HUONGDIEUTRI,null], @param64=[NGUOIGIAO_ID,null], @param65=[NGUOINHAN_ID,null], @param66=[XQUANG,null], @param67=[CTSCANNER,null], @param68=[SIEUAM,null], @param69=[XETNGHIEM,null], @param70=[KHAC,null], @param71=[TOANBOHS,null], @param72=[LOAICHUYENKHOA,null], @param73=[CONGANCANTHIEP,null], @param74=[CDRR_BENHCHINH,null], @param75=[CDRR_BENHKEM,null], @param76=[ICD_BENHCHINH,null], @param77=[ICD_BENHKEMTHEO,null], @param78=[PHUONGPHAPDIEUTRI,null], @param79=[FIELD_1,null], @param80=[FIELD_2,null], @param81=[FIELD_3,null], @param82=[FIELD_4,null], @param83=[FIELD_5,null], @param84=[FIELD_6,null], @param85=[FIELD_7,null], @param86=[FIELD_8,null], @param87=[FIELD_9,null], @param88=[FIELD_10,null], @param89=[FIELD_11,null], @param90=[FIELD_12,null], @param91=[FIELD_13,null], @param92=[FIELD_14,null], @param93=[FIELD_15,null], @param94=[FIELD_27,null], @param95=[FIELD_28,null], @param96=[FIELD_29,null], @param97=[FIELD_30,null], @param98=[FIELD_31,null], @param99=[FIELD_32,null], @param100=[FIELD_33,null], @param101=[FIELD_34,null], @param102=[FIELD_35,null], @param103=[FIELD_36,null], @param104=[FIELD_37,null], @param105=[FIELD_38,null], @param106=[FIELD_39,null], @param107=[FIELD_40,null], @param108=[FIELD_41,null], @param109=[FIELD_42,null], @param110=[FIELD_43,null], @param111=[FIELD_44,null], @param112=[FIELD_45,null], @param113=[FIELD_46,null], @param114=[FIELD_47,null], @param115=[FIELD_48,null], @param116=[FIELD_49,null], @param117=[FIELD_50,null], @param118=[FIELD_51,null], @param119=[FIELD_52,null], @param120=[FIELD_53,null], @param121=[FIELD_54,null], @param122=[FIELD_55,null], @param123=[FIELD_56,null], @param124=[BENHVIEN_ID,01819]]
2020-07-15 14:31:05,692 [1] DEBUG - Statement Id: [DAO00080_Add_KhamBenh_CapCuu] Types: [@param0=[System.DBNull, null], @param1=[Int32, System.Int32], @param2=[System.DBNull, null], @param3=[Int32, System.Int32], @param4=[String, System.String], @param5=[System.DBNull, null], @param6=[System.DBNull, null], @param7=[System.DBNull, null], @param8=[DateTime, System.DateTime], @param9=[DateTime, System.DateTime], @param10=[System.DBNull, null], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[System.DBNull, null], @param15=[System.DBNull, null], @param16=[System.DBNull, null], @param17=[System.DBNull, null], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[String, System.String], @param23=[System.DBNull, null], @param24=[System.DBNull, null], @param25=[System.DBNull, null], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[System.DBNull, null], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[System.DBNull, null], @param40=[System.DBNull, null], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[System.DBNull, null], @param47=[System.DBNull, null], @param48=[System.DBNull, null], @param49=[DateTime, System.DateTime], @param50=[String, System.String], @param51=[DateTime, System.DateTime], @param52=[String, System.String], @param53=[System.DBNull, null], @param54=[System.DBNull, null], @param55=[System.DBNull, null], @param56=[System.DBNull, null], @param57=[System.DBNull, null], @param58=[System.DBNull, null], @param59=[System.DBNull, null], @param60=[System.DBNull, null], @param61=[System.DBNull, null], @param62=[System.DBNull, null], @param63=[System.DBNull, null], @param64=[System.DBNull, null], @param65=[System.DBNull, null], @param66=[System.DBNull, null], @param67=[System.DBNull, null], @param68=[System.DBNull, null], @param69=[System.DBNull, null], @param70=[System.DBNull, null], @param71=[System.DBNull, null], @param72=[System.DBNull, null], @param73=[System.DBNull, null], @param74=[System.DBNull, null], @param75=[System.DBNull, null], @param76=[System.DBNull, null], @param77=[System.DBNull, null], @param78=[System.DBNull, null], @param79=[System.DBNull, null], @param80=[System.DBNull, null], @param81=[System.DBNull, null], @param82=[System.DBNull, null], @param83=[System.DBNull, null], @param84=[System.DBNull, null], @param85=[System.DBNull, null], @param86=[System.DBNull, null], @param87=[System.DBNull, null], @param88=[System.DBNull, null], @param89=[System.DBNull, null], @param90=[System.DBNull, null], @param91=[System.DBNull, null], @param92=[System.DBNull, null], @param93=[System.DBNull, null], @param94=[System.DBNull, null], @param95=[System.DBNull, null], @param96=[System.DBNull, null], @param97=[System.DBNull, null], @param98=[System.DBNull, null], @param99=[System.DBNull, null], @param100=[System.DBNull, null], @param101=[System.DBNull, null], @param102=[System.DBNull, null], @param103=[System.DBNull, null], @param104=[System.DBNull, null], @param105=[System.DBNull, null], @param106=[System.DBNull, null], @param107=[System.DBNull, null], @param108=[System.DBNull, null], @param109=[System.DBNull, null], @param110=[System.DBNull, null], @param111=[System.DBNull, null], @param112=[System.DBNull, null], @param113=[System.DBNull, null], @param114=[System.DBNull, null], @param115=[System.DBNull, null], @param116=[System.DBNull, null], @param117=[System.DBNull, null], @param118=[System.DBNull, null], @param119=[System.DBNull, null], @param120=[System.DBNull, null], @param121=[System.DBNull, null], @param122=[System.DBNull, null], @param123=[System.DBNull, null], @param124=[String, System.String]]
2020-07-15 14:31:05,762 [1] DEBUG - Statement Id: [DAO00000_GetMucHuongDOITUONGBHYT] PreparedStatement : [select * from TM_DOITUONG          where BENHVIEN_ID = '01819'           and             NHOMTHE like '%' +  @param0  +'%']
2020-07-15 14:31:05,762 [1] DEBUG - Statement Id: [DAO00000_GetMucHuongDOITUONGBHYT] Parameters: [@param0=[NHOMTHE,DN4]]
2020-07-15 14:31:05,762 [1] DEBUG - Statement Id: [DAO00000_GetMucHuongDOITUONGBHYT] Types: [@param0=[String, System.String]]
2020-07-15 14:31:05,794 [1] DEBUG - Statement Id: [DAO00019_Add_TT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [INSERT INTO TT_TIEPNHAN_SOTHEBHYT        (TIEPNHAN_ID        ,BENHNHAN_ID        ,BENHAN_ID        ,DOITUONG_ID        ,SOBHYT        ,BHYTTUNGAY        ,BHYTDENNGAY        ,BHYTNGAYCAP        ,BHYTTREN3NAM        ,BHYTTREN5NAM        ,NGAYMIENDONGCHITRA        ,TRAITUYEN        ,BENHVIEN_ID        ,NOITAO_ID        ,NGAYTAO        ,NGUOITAO_ID        ,NGAYCAPNHAT        ,NGUOICAPNHAT_ID        ,TYLE_VUOT_LCB        ,TYLE_TRAITUYEN        ,GIOIHAN_VUOT_LCB        ,LUONG_COSO        ,TYLE_THUOC_UT        ,MADOITUONG)        VALUES        ( @param0         , @param1         , @param2         , @param3         , @param4         , @param5         , @param6         , @param7         , @param8         , @param9         , @param10         , @param11         , @param12         , @param13         , @param14         , @param15         , @param16         , @param17         , @param18         , @param19         , @param20         , @param21         , @param22         , @param23 )]
2020-07-15 14:31:05,794 [1] DEBUG - Statement Id: [DAO00019_Add_TT_TIEPNHAN_SOTHEBHYT] Parameters: [@param0=[TIEPNHAN_ID,8743], @param1=[BENHNHAN_ID,8727], @param2=[BENHAN_ID,null], @param3=[DOITUONG_ID,10], @param4=[SOBHYT,DN452342352355501819], @param5=[BHYTTUNGAY,1/1/2020 12:00:00 AM], @param6=[BHYTDENNGAY,12/31/2020 12:00:00 AM], @param7=[BHYTNGAYCAP,null], @param8=[BHYTTREN3NAM,0], @param9=[BHYTTREN5NAM,0], @param10=[NGAYMIENDONGCHITRA,null], @param11=[TRAITUYEN,0], @param12=[BENHVIEN_ID,01819], @param13=[NOITAO_ID,87], @param14=[NGAYTAO,7/15/2020 2:31:05 PM], @param15=[NGUOITAO_ID,1], @param16=[NGAYCAPNHAT,7/15/2020 2:31:05 PM], @param17=[NGUOICAPNHAT_ID,1], @param18=[TYLE_VUOT_LCB,0.80], @param19=[TYLE_TRAITUYEN,0.60], @param20=[GIOIHAN_VUOT_LCB,223500.00], @param21=[LUONG_COSO,1490000.00], @param22=[TYLE_THUOC_UT,0.50], @param23=[MADOITUONG,BHYT4_TN]]
2020-07-15 14:31:05,794 [1] DEBUG - Statement Id: [DAO00019_Add_TT_TIEPNHAN_SOTHEBHYT] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[System.DBNull, null], @param3=[Int32, System.Int32], @param4=[String, System.String], @param5=[DateTime, System.DateTime], @param6=[DateTime, System.DateTime], @param7=[System.DBNull, null], @param8=[String, System.String], @param9=[String, System.String], @param10=[System.DBNull, null], @param11=[String, System.String], @param12=[String, System.String], @param13=[String, System.String], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[DateTime, System.DateTime], @param17=[String, System.String], @param18=[Decimal, System.Decimal], @param19=[Decimal, System.Decimal], @param20=[Decimal, System.Decimal], @param21=[Decimal, System.Decimal], @param22=[Decimal, System.Decimal], @param23=[String, System.String]]
2020-07-15 14:31:05,970 [1] DEBUG - Statement Id: [DAO00027_GetListTiepNhanAllCOM30] PreparedStatement : [select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, isnull(C.SOBENHAN,NULL) as SOBENHAN,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT, CONVERT(VARCHAR(11),A.NGAYTIEPNHAN,103) as NGAYTIEPNHAN,        B.*        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join (select * from TT_BENHNHAN where MAYTE = '200001808' and ACTIVE = '1') B on B.BENHNHAN_ID = A.BENHNHAN_ID  and B.ACTIVE = '1'        left join TT_NOITRU_BENHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        where A.TIEPNHAN_ID = '8743' and A.BENHVIEN_ID = '01819' and (A.TRANGTHAI not in ('HUY','CAPCUU', 'NOITRU', 'NGOAITRU'))]
2020-07-15 14:31:06,233 [1] DEBUG - Statement Id: [DAOWF001_LaythongtinProcess] PreparedStatement : [select * from TM_PROCESS        where        PROCESS_CODE = 'P02']
2020-07-15 14:31:06,268 [1] DEBUG - Statement Id: [DAOWF001_Kiemtrathongtindayeucau] PreparedStatement : [select * from TT_REQUEST        where        PROCESS_CODE = 'P02'        AND PARA = '{"HOSPITAL_ID":"01819","SOTIEPNHAN":"TN200715.0000001"}'        AND CURR_STATE_CODE = '7'        AND ISACTIVE = '1']
2020-07-15 14:31:06,320 [1] DEBUG - Statement Id: [DAOWF002_Add] PreparedStatement : [DECLARE @IDRequestOld int        DECLARE @IDRequestNew int        select top 1 @IDRequestOld = ID from TT_REQUEST where PARA =  @param0  order by ID desc          insert into TT_REQUEST (        PROCESS_CODE        , PARA        , CURR_STATE_CODE        ) values (         @param1         ,  @param0         ,  @param2         )        SELECT @IDRequestNew = SCOPE_IDENTITY()        if (@IDRequestOld is not null)        begin        update TT_REQUEST_SERVICE set REQUEST_ID = @IDRequestNew, PROCESS_CODE =  @param1  where REQUEST_ID = @IDRequestOld        update TT_REQUEST set ISACTIVE = '0' where ID = @IDRequestOld        update TT_REQUEST_SERVICE_DETAIL set REQUEST_ID = @IDRequestNew where REQUEST_ID = @IDRequestOld        end          select @IDRequestNew]
2020-07-15 14:31:06,320 [1] DEBUG - Statement Id: [DAOWF002_Add] Parameters: [@param0=[PARA,{"HOSPITAL_ID":"01819","SOTIEPNHAN":"TN200715.0000001"}], @param1=[PROCESS_CODE,P02], @param2=[CURR_STATE_CODE,7]]
2020-07-15 14:31:06,320 [1] DEBUG - Statement Id: [DAOWF002_Add] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String]]
2020-07-15 14:31:06,396 [1] DEBUG - Statement Id: [DAO00020_GetNhomdichvuIDByManhom] PreparedStatement : [select NHOMDICHVU_ID from TM_NHOMDICHVU where MANHOMDICHVU = '04']
2020-07-15 14:31:06,428 [1] DEBUG - Statement Id: [DAO00020_Add] PreparedStatement : [declare        @keyValue int, @BenhVienId varchar(10), @yearNow int, @SoPhieuYeu varchar(20), @SoRender varchar(20), @MaNhomDichVu varchar(20)        set @keyValue = 0;        set @BenhVienId = '01819'        set @yearNow = YEAR(getdate())        set @MaNhomDichVu = '5'                 select @keyValue = KEYVALUE from LST_KEYDATA        where KEYTYPE = 'SOPHIEUYEUCAU' and KEYYEAR = @yearNow and SEGMENT_1 = @MaNhomDichVu and BENHVIEN_ID = @BenhVienId        if @keyValue = 0        Insert into LST_KEYDATA values ('SOPHIEUYEUCAU', @yearNow, '0', '0', @MaNhomDichVu, '0', '0', 0, @BenhVienId);          Update LST_KEYDATA set KEYVALUE = KEYVALUE + 1, @keyValue = (KEYVALUE + 1) where KEYTYPE = 'SOPHIEUYEUCAU' and KEYYEAR = @yearNow and SEGMENT_1 = @MaNhomDichVu and BENHVIEN_ID = @BenhVienId        set @SoRender = right('000000'+convert(varchar(6), @keyValue), 6)        set @SoPhieuYeu = RIGHT(@yearNow, 2) + '.' + @MaNhomDichVu + '.' + @SoRender                 insert into TT_DVYEUCAU (        TIEPNHAN_ID        , BENHAN_ID        , KHAMBENH_ID        , SODICHVUYEUCAU        , KHAMBENH_NGOAITRU_ID        , SOPHIEUYEUCAU        , BENHNHAN_ID        , DOITUONG_ID        , DICHVU_ID         ,           NGUOICHIDINH_ID                 , BACSICHIDINH_ID        , GIOYEUCAU        , NGAYYEUCAU        , THANGYEUCAU        , NAMYEUCAU        , NGAYGIOYEUCAU        , THUTUYEUCAU        , NOIYEUCAU_ID        , NOITHUCHIEN_ID        , TRANGTHAI_HANGDOI        , NOIDUNGCHITIET        , CHANDOAN        , LUUTRU_ID        , SODICHVUDONGTIEN        , DICHVU_KHAMBENH_ID        , DALAYMAU        , SINHTHIET        , CLOTEST        , TIEMCANQUANG        , TRIEUCHUNG        , DAITHE        , VITHE        , BENHPHAM        , DANHANBENHPHAM        , NGAYNHANBENHPHAM        , THOIGIANNHANBENHPHAM        , NGUOINHANBENHPHAM_ID        , MANGUOINHAPBENHPHAM        , TENNGUOINHAPBENHPHAM        , KETQUAXNKHAC        , YEUCAUBENNGOAI        , THUCHIENBENNGOAI        , DONVIBENNGOAI_ID        , BACSIBENNGOAI_ID        , TENBACSIBENNGOAI        , KHOABENNGOAI_ID        , KHOABENNGOAI                 , NOITHUCHIENTHAYDOI_ID        , LOAIKHACHHANG_ID        , THE_ID        , BARCODEID        , HOPDONG_ID        , HOPDONG_BENHNHAN_ID        , HINHTHUCTHANHTOAN_ID        , DANGKY_ID        , DANGKY_CHITIET_ID        , LICHHEN_ID        , THOIGIANLICHHEN        , BNKHONGDENBV        , GHICHU        , THANHTOANTRUOC        , KHAN        , DUOCPHEPTHUCHIEN        , HUYYEUCAU        , LYDOHUY        , TRANGTHAI        , KHOADULIEU        , NGAYKHOADULIEU        , THOIGIANKHOADULIEU        , NGUOIKHOA_ID        , MANGUOIKHOA        , TENNGUOIKHOA        , BENHVIEN_ID        , NGAYTAO        , NGUOITAO_ID        , NGAYHENCLS        , CREATININEMAU        , VUNGCANKHAOSAT        , BHYTDONGTIEN        , THUTIENSAU                 , DVKEMTHEO        , DVKEMTHEO_KHACEKIP        , LIENCHUYENKHOA                 , VITRIKHAOSAT        )        OUTPUT INSERTED.DVYEUCAU_ID, INSERTED.SOPHIEUYEUCAU        values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         , @SoPhieuYeu        ,  @param5         ,  @param6         ,  @param7          ,            @param8                  ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45                  ,  @param46         ,  @param47         ,  @param48         ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55         ,  @param56         ,  @param57         ,  @param58         ,  @param59         ,  @param60         ,  @param61         ,  @param62         ,  @param63         ,  @param64         ,  @param65         ,  @param66         ,  @param67         ,  @param68         ,  @param69         ,  @param70         ,  @param71         ,  @param72         ,  @param73         ,  @param74         ,  @param75         ,  @param76         ,  @param77         ,  @param78                  ,  @param79         ,  @param80         ,  @param81                  ,  @param82         );]
2020-07-15 14:31:06,428 [1] DEBUG - Statement Id: [DAO00020_Add] Parameters: [@param0=[TIEPNHAN_ID,8743], @param1=[BENHAN_ID,null], @param2=[KHAMBENH_ID,null], @param3=[SODICHVUYEUCAU,1], @param4=[KHAMBENH_NGOAITRU_ID,null], @param5=[BENHNHAN_ID,8727], @param6=[DOITUONG_ID,4], @param7=[DICHVU_ID,3], @param8=[NGUOICHIDINH_ID,1], @param9=[BACSICHIDINH_ID,1], @param10=[GIOYEUCAU,14], @param11=[NGAYYEUCAU,7/15/2020 12:00:00 AM], @param12=[THANGYEUCAU,7], @param13=[NAMYEUCAU,2020], @param14=[NGAYGIOYEUCAU,7/15/2020 2:29:46 PM], @param15=[THUTUYEUCAU,1], @param16=[NOIYEUCAU_ID,87], @param17=[NOITHUCHIEN_ID,74], @param18=[TRANGTHAI_HANGDOI,null], @param19=[NOIDUNGCHITIET,null], @param20=[CHANDOAN,null], @param21=[LUUTRU_ID,null], @param22=[SODICHVUDONGTIEN,0], @param23=[DICHVU_KHAMBENH_ID,null], @param24=[DALAYMAU,null], @param25=[SINHTHIET,0], @param26=[CLOTEST,0], @param27=[TIEMCANQUANG,0], @param28=[TRIEUCHUNG,null], @param29=[DAITHE,null], @param30=[VITHE,null], @param31=[BENHPHAM,null], @param32=[DANHANBENHPHAM,0], @param33=[NGAYNHANBENHPHAM,null], @param34=[THOIGIANNHANBENHPHAM,null], @param35=[NGUOINHANBENHPHAM_ID,null], @param36=[MANGUOINHAPBENHPHAM,null], @param37=[TENNGUOINHAPBENHPHAM,null], @param38=[KETQUAXNKHAC,null], @param39=[YEUCAUBENNGOAI,0], @param40=[THUCHIENBENNGOAI,0], @param41=[DONVIBENNGOAI_ID,null], @param42=[BACSIBENNGOAI_ID,null], @param43=[TENBACSIBENNGOAI,null], @param44=[KHOABENNGOAI_ID,null], @param45=[KHOABENNGOAI,null], @param46=[NOITHUCHIENTHAYDOI_ID,null], @param47=[LOAIKHACHHANG_ID,null], @param48=[THE_ID,null], @param49=[BARCODEID,null], @param50=[HOPDONG_ID,null], @param51=[HOPDONG_BENHNHAN_ID,null], @param52=[HINHTHUCTHANHTOAN_ID,null], @param53=[DANGKY_ID,null], @param54=[DANGKY_CHITIET_ID,null], @param55=[LICHHEN_ID,null], @param56=[THOIGIANLICHHEN,null], @param57=[BNKHONGDENBV,null], @param58=[GHICHU,null], @param59=[THANHTOANTRUOC,1], @param60=[KHAN,0], @param61=[DUOCPHEPTHUCHIEN,0], @param62=[HUYYEUCAU,0], @param63=[LYDOHUY,null], @param64=[TRANGTHAI,CHUAKETQUA], @param65=[KHOADULIEU,null], @param66=[NGAYKHOADULIEU,null], @param67=[THOIGIANKHOADULIEU,null], @param68=[NGUOIKHOA_ID,null], @param69=[MANGUOIKHOA,null], @param70=[TENNGUOIKHOA,null], @param71=[BENHVIEN_ID,01819], @param72=[NGAYTAO,7/15/2020 2:31:06 PM], @param73=[NGUOITAO_ID,1], @param74=[NGAYHENCLS,null], @param75=[CREATININEMAU,null], @param76=[VUNGCANKHAOSAT,null], @param77=[BHYTDONGTIEN,null], @param78=[THUTIENSAU,0], @param79=[DVKEMTHEO,0], @param80=[DVKEMTHEO_KHACEKIP,null], @param81=[LIENCHUYENKHOA,null], @param82=[VITRIKHAOSAT,null]]
2020-07-15 14:31:06,428 [1] DEBUG - Statement Id: [DAO00020_Add] Types: [@param0=[String, System.String], @param1=[System.DBNull, null], @param2=[System.DBNull, null], @param3=[Int32, System.Int32], @param4=[System.DBNull, null], @param5=[Int32, System.Int32], @param6=[Int64, System.Int64], @param7=[Int64, System.Int64], @param8=[Int64, System.Int64], @param9=[Int64, System.Int64], @param10=[Int32, System.Int32], @param11=[DateTime, System.DateTime], @param12=[Int32, System.Int32], @param13=[Int32, System.Int32], @param14=[DateTime, System.DateTime], @param15=[Int32, System.Int32], @param16=[String, System.String], @param17=[Int64, System.Int64], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[Int32, System.Int32], @param23=[System.DBNull, null], @param24=[System.DBNull, null], @param25=[Int32, System.Int32], @param26=[Int32, System.Int32], @param27=[Int32, System.Int32], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[Int32, System.Int32], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[Int32, System.Int32], @param40=[Int32, System.Int32], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[System.DBNull, null], @param47=[System.DBNull, null], @param48=[System.DBNull, null], @param49=[System.DBNull, null], @param50=[System.DBNull, null], @param51=[System.DBNull, null], @param52=[System.DBNull, null], @param53=[System.DBNull, null], @param54=[System.DBNull, null], @param55=[System.DBNull, null], @param56=[System.DBNull, null], @param57=[System.DBNull, null], @param58=[System.DBNull, null], @param59=[Int32, System.Int32], @param60=[Int32, System.Int32], @param61=[Int32, System.Int32], @param62=[Int32, System.Int32], @param63=[System.DBNull, null], @param64=[String, System.String], @param65=[System.DBNull, null], @param66=[System.DBNull, null], @param67=[System.DBNull, null], @param68=[System.DBNull, null], @param69=[System.DBNull, null], @param70=[System.DBNull, null], @param71=[String, System.String], @param72=[DateTime, System.DateTime], @param73=[String, System.String], @param74=[System.DBNull, null], @param75=[System.DBNull, null], @param76=[System.DBNull, null], @param77=[System.DBNull, null], @param78=[String, System.String], @param79=[Int32, System.Int32], @param80=[System.DBNull, null], @param81=[System.DBNull, null], @param82=[System.DBNull, null]]
2020-07-15 14:31:06,520 [1] DEBUG - Statement Id: [DAO00027_ThongTinTiepNhanCOM006] PreparedStatement : [select distinct CONVERT(VARCHAR(11),A.NGAYTIEPNHAN,103) as NGAYYEUCAU, C.DICHVU_ID, C.DVYEUCAU_ID, D.TENDICHVU, C.NOITHUCHIEN_ID,        A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU'   or A.TRANGTHAI = 'NGOAITRU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,        CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU, A.SOBHYT,        B.*,        CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU'  or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID        left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID        where C.NGAYHENCLS is NULL and A.TIEPNHAN_ID = '8743' and C.DICHVU_ID = '3' and A.BENHVIEN_ID = '01819'         and           C.DVYEUCAU_ID = '13143']
2020-07-15 14:31:06,692 [1] DEBUG - Statement Id: [DAO00027_ThongTinTiepNhanCOM015] PreparedStatement : [declare @ManhomDSA varchar(10);        select top 1  @ManhomDSA = VALUE from TM_SYS_APPSETTINGS where CODE = 'MANHOM_DICHVU_DSA'        SELECT * FROM        (        SELECT        (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID)) AS acss_lookupID,        ROW_NUMBER() OVER        (PARTITION BY (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID))        ORDER BY (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID)))        as num,        A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID) as KEYCOM15,        C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,        CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU, A.SOBHYT,        B.*, F.TRANGTHAI as TRANGTHAI_BENHAN_NOITRU,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        CASE        WHEN @ManhomDSA is not null and E.MANHOMDICHVU in (@ManhomDSA) THEN E.MANHOMDICHVU        WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU        , A.UUTIEN, A.NGOAIGIO        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID        left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID        left join TT_NOITRU_BENHAN F on F.TIEPNHAN_ID = A.TIEPNHAN_ID        where C.NGAYHENCLS is NULL and A.TIEPNHAN_ID = '8743' and A.BENHVIEN_ID = '01819'        ) a where a.num = 1]
2020-07-15 14:31:06,967 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN200715.0000001']
2020-07-15 14:31:07,024 [1] DEBUG - Statement Id: [DAOWF001_Kiemtrathongtindayeucaudacochua] PreparedStatement : [select * from TT_REQUEST        where        PARA = '{"HOSPITAL_ID":"01819","SOTIEPNHAN":"TN200715.0000001"}'        AND ISACTIVE = '1']
2020-07-15 14:31:07,054 [1] DEBUG - Statement Id: [DAOWF001_Kiemtrathongtindichvudayeucau] PreparedStatement : [select top 1 * from TT_REQUEST_SERVICE        where        PARA = '{"DICHVU_ID":"3","DVYEUCAU_ID":"13143"}'                AND ISACTIVE = '1' order by ID desc]
2020-07-15 14:31:07,120 [1] DEBUG - Statement Id: [DAOWF001_KiemtrathongtinchitietDichvuYeucau] PreparedStatement : [select * from TT_REQUEST_SERVICE_DETAIL        where        REQUEST_SERVICE_ID = '']
2020-07-15 14:31:07,178 [1] DEBUG - Statement Id: [DAOWF001_GetStartStateOfProcess] PreparedStatement : [select STATE_CODE from TM_STATE where TYPE_CODE = 'S' and PROCESS_CODE = 'P02']
2020-07-15 14:31:07,223 [1] DEBUG - Statement Id: [DAOWF001_Laythongtinwithstatecode] PreparedStatement : [select A.*, B.STATUS_CODE from        TM_STATE_ACTION A        left join TM_STATE B on B.STATE_CODE = A.NEXT_STATE_CODE and A.PROCESS_CODE = B.PROCESS_CODE        where        A.CURR_STATE_CODE = '7'        AND A.PROCESS_CODE = 'P02'        Order By ORDER_ID ASC]
2020-07-15 14:31:07,272 [1] DEBUG - Statement Id: [DAOWF003_Add] PreparedStatement : [insert into TT_REQUEST_SERVICE (        REQUEST_ID        , PARA        , CURR_STATE_CODE        , PROCESS_CODE        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         )        SELECT SCOPE_IDENTITY()]
2020-07-15 14:31:07,272 [1] DEBUG - Statement Id: [DAOWF003_Add] Parameters: [@param0=[REQUEST_ID,8747], @param1=[SERVICEPARA,{"DICHVU_ID":"3","DVYEUCAU_ID":"13143"}], @param2=[CURR_STATE_CODE,0], @param3=[PROCESS_CODE,P02]]
2020-07-15 14:31:07,272 [1] DEBUG - Statement Id: [DAOWF003_Add] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String]]
2020-07-15 14:31:07,310 [1] DEBUG - Statement Id: [DAOWF005_Add] PreparedStatement : [insert into TT_REQUEST_SERVICE_DETAIL (        REQUEST_ID        ,REQUEST_SERVICE_ID        , OLD_STATE_CODE        , CURR_STATE_CODE        ) values (         @param0         , @param1         ,  @param2         ,  @param3         )        SELECT SCOPE_IDENTITY()]
2020-07-15 14:31:07,310 [1] DEBUG - Statement Id: [DAOWF005_Add] Parameters: [@param0=[REQUEST_ID,8747], @param1=[REQUEST_SERVICE_ID,11161], @param2=[OLD_STATE_CODE,null], @param3=[CURR_STATE_CODE,0]]
2020-07-15 14:31:07,310 [1] DEBUG - Statement Id: [DAOWF005_Add] Types: [@param0=[String, System.String], @param1=[Int64, System.Int64], @param2=[System.DBNull, null], @param3=[String, System.String]]
2020-07-15 14:31:07,340 [1] DEBUG - Statement Id: [DAOWF005_Add_History] PreparedStatement : [insert into TT_REQUEST_SERVICE_HISTORY (        REQUEST_ID        ,REQUEST_SERVICE_ID        , OLD_STATE_CODE        , CURR_STATE_CODE        ) values (         @param0         , @param1         ,  @param2         ,  @param3         )]
2020-07-15 14:31:07,340 [1] DEBUG - Statement Id: [DAOWF005_Add_History] Parameters: [@param0=[REQUEST_ID,8747], @param1=[REQUEST_SERVICE_ID,11161], @param2=[OLD_STATE_CODE,null], @param3=[CURR_STATE_CODE,0]]
2020-07-15 14:31:07,340 [1] DEBUG - Statement Id: [DAOWF005_Add_History] Types: [@param0=[String, System.String], @param1=[Int64, System.Int64], @param2=[System.DBNull, null], @param3=[String, System.String]]
2020-07-15 14:31:07,378 [1] DEBUG - Statement Id: [DAO00009_TT_DVYEUCAU_Update] PreparedStatement : [Update TT_DVYEUCAU set TRANGTHAI_WFL = 'CHUAKETQUA' where DVYEUCAU_ID = '13143']
2020-07-15 14:31:07,407 [1] DEBUG - Statement Id: [DAO00026_GetListDanhSachDichVuGhiNhanVTYT_COM25_WithTN] PreparedStatement : [select distinct CONVERT(VARCHAR(11),C.NGAYYEUCAU,103) as NGAYYEUCAU, C.DICHVU_ID, C.DVYEUCAU_ID, D.TENDICHVU, C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,            A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,            CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,            CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU,            B.*, isnull(ntba.SOBENHAN, '') SOBENHAN, isnull(ntba.BENHAN_ID, 0) BENHAN_ID,            CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU            from TT_TIEPNHAN A            inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'            inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID                        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID            left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID            left join TT_NOITRU_BENHAN ntba on ntba.BENHAN_ID = C.BENHAN_ID              where            C.NGAYHENCLS is NULL and A.BENHVIEN_ID = '01819'            and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU')            and (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END in ('02', '04'))            and A.TIEPNHAN_ID = '8743']
2020-07-15 14:31:07,705 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '8743']
2020-07-15 14:31:07,766 [1] DEBUG - Statement Id: [DAO00064_GetTopTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select top 1 stbhyt.*, ba.SOBENHAN,        tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where        stbhyt.TIEPNHAN_ID = '8743' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'        order by SOBHYT_HUONG_ID desc]
2020-07-15 14:31:07,825 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = '01819'            and DOITUONG_ID = '10']
2020-07-15 14:31:07,855 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [declare @ManhomDSA varchar(10);        declare @PhanLoaiNhomDV varchar(20) = '05';        select top 1  @ManhomDSA = VALUE from TM_SYS_APPSETTINGS where CODE = 'MANHOM_DICHVU_DSA'        if (@ManhomDSA is not null) set @PhanLoaiNhomDV += ',' + @ManhomDSA        select distinct ptyc.*        from TT_PHAUTHUAT_YEUCAU ptyc        inner join TM_DICHVU dv on dv.DICHVU_ID = ptyc.DICHVU_ID        inner join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        inner join TT_PHAUTHUAT pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        where        pt.TIEPNHAN_ID = 8743        and (left(ndv.MANHOMDICHVU, 2) in (select * from STRING_SPLIT(@PhanLoaiNhomDV,',')) or ndv.MANHOMDICHVU in (select * from STRING_SPLIT(@PhanLoaiNhomDV,',')))]
2020-07-15 14:31:08,034 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = '01819'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = '01819'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = '01819'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = '01819'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2020-07-15 14:31:08,067 [1] DEBUG - Statement Id: [DAO00027_GetDichvuYCBHYTTyle] PreparedStatement : [select DVYEUCAU_ID from TT_DVYEUCAU        where TIEPNHAN_ID = 8743 and isnull(BHYT_TYLETHANHTOAN_ID, 0) > 0]
2020-07-15 14:31:08,140 [1] DEBUG - Statement Id: [DAO00023_Add] PreparedStatement : [insert into TT_VIENPHI (        TIEPNHAN_ID        , BENHAN_ID         ,           BENHNHAN_ID         ,           DOTDIEUTRI_ID                 , KHAMBENH_ID        , REF_ID        , REF_TABLE        , DICHVU_ID        , DUOC_ID        , LOAI_CHIPHI        , LOAIGIA_ID        , SOLUONG        , DONGIA_DOANHTHU        , THANHTIEN_DOANHTHU        , BHYT_TL        , BHYT_DONGIA        , BHYT_THANHTIEN        , BHYT_DONGIA_CHITRA        , BHYT_THANHTIEN_CHITRA        , BENHNHAN_PHAITHANHTOAN        , GIATRI_HOADON        , GIATRI_HOADON_DATHANHTOAN        , GIATRI_BIENLAI        , GIATRI_BIENLAI_DATHANHTOAN        , GIATRI_BENHNHAN_DATHANHTOAN        , GIATRI_THATTHU        , MIENGIAM_TL        , MIENGIAM_GIATRI        , NGANSACH_TL        , NGANSACH_GIATRI        , TAITRO_TL        , TAITRO_GIATRI        , BHTN_TL        , BHTN_DONGIA        , BHTN_THANHTIEN        , BHTN_DONGIA_CHITRA        , BHTN_THANHTIEN_CHITRA         ,           DUOCPHEPTHUCHIEN         ,           HUY         ,           DATHANHTOAN         ,           DATHUCHIEN         ,           KHONGTHUTIEN         ,           BHYTDONGTIEN                 , DUYET        , HOADON_ID         ,           ACTIVE         ,           TYLE_VAT         ,           GIAVON         ,           BANGGIA_ID                 , BENHVIEN_ID        , NGUOITAO_ID        , NGAYTAO        , NGUOICAPNHAT_ID        , NGAYCAPNHAT        , DONGIA_BHYT_BANDAU        , DONGIADOANHTHU_BANDAU         ,           YEUCAUVP         ,           DOITUONG_HUONG_ID         ,           SOBHYT_HUONG_ID         ,           DICHVU_TL         ,           SOLONHAP_ID                 ) values (         @param0         ,  @param1          ,            @param2          ,            @param3                  ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36          ,            @param37          ,            @param38          ,            @param39          ,            @param40          ,            @param41          ,            @param42                  ,  @param43         ,  @param44          ,            @param45          ,            @param46          ,            @param47          ,            @param48                  ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55          ,            @param56          ,            @param57          ,            @param58          ,            @param59          ,            @param60                  )        SELECT SCOPE_IDENTITY()]
2020-07-15 14:31:08,140 [1] DEBUG - Statement Id: [DAO00023_Add] Parameters: [@param0=[TIEPNHAN_ID,8743], @param1=[BENHAN_ID,null], @param2=[BENHNHAN_ID,8727], @param3=[DOTDIEUTRI_ID,0], @param4=[KHAMBENH_ID,null], @param5=[REF_ID,13143], @param6=[REF_TABLE,TT_DVYEUCAU], @param7=[DICHVU_ID,3], @param8=[DUOC_ID,null], @param9=[LOAI_CHIPHI,TT], @param10=[LOAIGIA_ID,2], @param11=[SOLUONG,1], @param12=[DONGIA_DOANHTHU,38700], @param13=[THANHTIEN_DOANHTHU,38700], @param14=[BHYT_TL,1], @param15=[BHYT_DONGIA,38700], @param16=[BHYT_THANHTIEN,38700], @param17=[BHYT_DONGIA_CHITRA,38700], @param18=[BHYT_THANHTIEN_CHITRA,38700], @param19=[BENHNHAN_PHAITHANHTOAN,0], @param20=[GIATRI_HOADON,0], @param21=[GIATRI_HOADON_DATHANHTOAN,0], @param22=[GIATRI_BIENLAI,0], @param23=[GIATRI_BIENLAI_DATHANHTOAN,0], @param24=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param25=[GIATRI_THATTHU,0], @param26=[MIENGIAM_TL,0], @param27=[MIENGIAM_GIATRI,0], @param28=[NGANSACH_TL,0], @param29=[NGANSACH_GIATRI,0], @param30=[TAITRO_TL,0], @param31=[TAITRO_GIATRI,0], @param32=[BHTN_TL,0], @param33=[BHTN_DONGIA,0], @param34=[BHTN_THANHTIEN,0], @param35=[BHTN_DONGIA_CHITRA,0], @param36=[BHTN_THANHTIEN_CHITRA,0], @param37=[DUOCPHEPTHUCHIEN,0], @param38=[HUY,0], @param39=[DATHANHTOAN,0], @param40=[DATHUCHIEN,0], @param41=[KHONGTHUTIEN,0], @param42=[BHYTDONGTIEN,0], @param43=[DUYET,null], @param44=[HOADON_ID,null], @param45=[ACTIVE,1], @param46=[TYLE_VAT,0], @param47=[GIAVON,0], @param48=[BANGGIA_ID,2013], @param49=[BENHVIEN_ID,01819], @param50=[NGUOITAO_ID,1], @param51=[NGAYTAO,7/15/2020 2:31:08 PM], @param52=[NGUOICAPNHAT_ID,1], @param53=[NGAYCAPNHAT,7/15/2020 2:31:08 PM], @param54=[DONGIA_BHYT_BANDAU,38700], @param55=[DONGIADOANHTHU_BANDAU,38700], @param56=[YEUCAUVP,0], @param57=[DOITUONG_HUONG_ID,10], @param58=[SOBHYT_HUONG_ID,8751], @param59=[DICHVU_TL,1], @param60=[SOLONHAP_ID,null]]
2020-07-15 14:31:08,140 [1] DEBUG - Statement Id: [DAO00023_Add] Types: [@param0=[Int32, System.Int32], @param1=[System.DBNull, null], @param2=[Int32, System.Int32], @param3=[Int32, System.Int32], @param4=[System.DBNull, null], @param5=[Int32, System.Int32], @param6=[String, System.String], @param7=[Int32, System.Int32], @param8=[System.DBNull, null], @param9=[String, System.String], @param10=[Int32, System.Int32], @param11=[Decimal, System.Decimal], @param12=[Decimal, System.Decimal], @param13=[Decimal, System.Decimal], @param14=[Decimal, System.Decimal], @param15=[Decimal, System.Decimal], @param16=[Decimal, System.Decimal], @param17=[Decimal, System.Decimal], @param18=[Decimal, System.Decimal], @param19=[Decimal, System.Decimal], @param20=[Decimal, System.Decimal], @param21=[Decimal, System.Decimal], @param22=[Decimal, System.Decimal], @param23=[Decimal, System.Decimal], @param24=[Decimal, System.Decimal], @param25=[Decimal, System.Decimal], @param26=[Decimal, System.Decimal], @param27=[Decimal, System.Decimal], @param28=[Decimal, System.Decimal], @param29=[Decimal, System.Decimal], @param30=[Decimal, System.Decimal], @param31=[Decimal, System.Decimal], @param32=[Decimal, System.Decimal], @param33=[Decimal, System.Decimal], @param34=[Decimal, System.Decimal], @param35=[Decimal, System.Decimal], @param36=[Decimal, System.Decimal], @param37=[Int32, System.Int32], @param38=[Int32, System.Int32], @param39=[Int32, System.Int32], @param40=[Int32, System.Int32], @param41=[String, System.String], @param42=[String, System.String], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[Int32, System.Int32], @param46=[Int32, System.Int32], @param47=[Decimal, System.Decimal], @param48=[Int32, System.Int32], @param49=[String, System.String], @param50=[String, System.String], @param51=[DateTime, System.DateTime], @param52=[String, System.String], @param53=[DateTime, System.DateTime], @param54=[Decimal, System.Decimal], @param55=[Decimal, System.Decimal], @param56=[String, System.String], @param57=[Int32, System.Int32], @param58=[Int32, System.Int32], @param59=[Decimal, System.Decimal], @param60=[System.DBNull, null]]
2020-07-15 14:31:08,573 [1] DEBUG - Statement Id: [DAO00064_GetREGListVienphiTiepNhan] PreparedStatement : [select A.*, B.THUTIENSAU        from TT_VIENPHI A        left join TT_DVYEUCAU B on A.REF_ID =  B.DVYEUCAU_ID and A.REF_TABLE = 'TT_DVYEUCAU' and B.HUYYEUCAU = '0'        where        A.TIEPNHAN_ID = '8743' and A.BENHVIEN_ID = '01819' and (A.BENHAN_ID is NULL or A.BENHAN_ID = '')        and A.HUY = '0'        ORDER BY A.VIENPHI_ID]
2020-07-15 14:31:08,630 [1] DEBUG - Statement Id: [DAO00064_GetTopTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select top 1 stbhyt.*, ba.SOBENHAN,        tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where        stbhyt.TIEPNHAN_ID = '8743' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'        order by SOBHYT_HUONG_ID desc]
2020-07-15 14:31:08,662 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = '01819'            and DOITUONG_ID = '10']
2020-07-15 14:31:08,689 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [declare @ManhomDSA varchar(10);        declare @PhanLoaiNhomDV varchar(20) = '05';        select top 1  @ManhomDSA = VALUE from TM_SYS_APPSETTINGS where CODE = 'MANHOM_DICHVU_DSA'        if (@ManhomDSA is not null) set @PhanLoaiNhomDV += ',' + @ManhomDSA        select distinct ptyc.*        from TT_PHAUTHUAT_YEUCAU ptyc        inner join TM_DICHVU dv on dv.DICHVU_ID = ptyc.DICHVU_ID        inner join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        inner join TT_PHAUTHUAT pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        where        pt.TIEPNHAN_ID = 8743        and (left(ndv.MANHOMDICHVU, 2) in (select * from STRING_SPLIT(@PhanLoaiNhomDV,',')) or ndv.MANHOMDICHVU in (select * from STRING_SPLIT(@PhanLoaiNhomDV,',')))]
2020-07-15 14:31:08,717 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = '01819'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = '01819'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = '01819'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = '01819'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2020-07-15 14:31:08,748 [1] DEBUG - Statement Id: [DAO00027_GetDichvuYCBHYTTyle] PreparedStatement : [select DVYEUCAU_ID from TT_DVYEUCAU        where TIEPNHAN_ID = 8743 and isnull(BHYT_TYLETHANHTOAN_ID, 0) > 0]
2020-07-15 14:31:08,778 [1] DEBUG - Statement Id: [DAO00023_Update_VPTiepnhan] PreparedStatement : [update TT_VIENPHI set        TIEPNHAN_ID =  @param0                ,           BENHNHAN_ID =  @param1          ,           REF_ID =  @param2                  , REF_TABLE =  @param3         , DICHVU_ID =  @param4         , DUOC_ID =  @param5         , LOAI_CHIPHI =  @param6         , LOAIGIA_ID =  @param7         , SOLUONG =  @param8         , DONGIA_DOANHTHU =  @param9         , THANHTIEN_DOANHTHU =  @param10         , BHYT_TL =  @param11         , BHYT_DONGIA =  @param12         , BHYT_THANHTIEN =  @param13         , BHYT_DONGIA_CHITRA =  @param14         , BHYT_THANHTIEN_CHITRA =  @param15         , BENHNHAN_PHAITHANHTOAN =  @param16         , GIATRI_HOADON =  @param17         , GIATRI_HOADON_DATHANHTOAN =  @param18         , GIATRI_BIENLAI =  @param19         , GIATRI_BIENLAI_DATHANHTOAN =  @param20         , GIATRI_BENHNHAN_DATHANHTOAN =  @param21         , GIATRI_THATTHU =  @param22         , MIENGIAM_TL =  @param23         , NGANSACH_TL =  @param24         , NGANSACH_GIATRI =  @param25         , TAITRO_TL =  @param26         , TAITRO_GIATRI =  @param27         , BHTN_TL =  @param28         , BHTN_DONGIA =  @param29         , BHTN_THANHTIEN =  @param30         , BHTN_DONGIA_CHITRA =  @param31         , BHTN_THANHTIEN_CHITRA =  @param32          ,           TYLE_VAT =  @param33          ,           GIAVON =  @param34          ,           BANGGIA_ID =  @param35          ,           BHYTDONGTIEN =  @param36          ,           BHYT_DONGIA_CONGKHAM_DAU =  @param37          ,           BHYT_CONGKHAM_DAU_TYLE =  @param38                  , BENHVIEN_ID =  @param39         , NGUOICAPNHAT_ID =  @param40         , NGAYCAPNHAT =  @param41          ,           DONGIA_BHYT_BANDAU =  @param42          ,           DONGIADOANHTHU_BANDAU =  @param43          ,           YEUCAUVP =  @param44                        where                    VIENPHI_ID = '15996' and DATHANHTOAN = '0']
2020-07-15 14:31:08,779 [1] DEBUG - Statement Id: [DAO00023_Update_VPTiepnhan] Parameters: [@param0=[TIEPNHAN_ID,8743], @param1=[BENHNHAN_ID,8727], @param2=[REF_ID,13143], @param3=[REF_TABLE,TT_DVYEUCAU], @param4=[DICHVU_ID,3], @param5=[DUOC_ID,null], @param6=[LOAI_CHIPHI,TT], @param7=[LOAIGIA_ID,2], @param8=[SOLUONG,1.0000], @param9=[DONGIA_DOANHTHU,38700.0000], @param10=[THANHTIEN_DOANHTHU,38700.00], @param11=[BHYT_TL,1], @param12=[BHYT_DONGIA,38700.0000], @param13=[BHYT_THANHTIEN,38700.00], @param14=[BHYT_DONGIA_CHITRA,38700], @param15=[BHYT_THANHTIEN_CHITRA,38700.00], @param16=[BENHNHAN_PHAITHANHTOAN,0], @param17=[GIATRI_HOADON,0], @param18=[GIATRI_HOADON_DATHANHTOAN,0], @param19=[GIATRI_BIENLAI,0], @param20=[GIATRI_BIENLAI_DATHANHTOAN,0], @param21=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param22=[GIATRI_THATTHU,0], @param23=[MIENGIAM_TL,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[TYLE_VAT,0], @param34=[GIAVON,0.0000], @param35=[BANGGIA_ID,2013], @param36=[BHYTDONGTIEN,0], @param37=[BHYT_DONGIA_CONGKHAM_DAU,38700.0000], @param38=[BHYT_CONGKHAM_DAU_TYLE,1], @param39=[BENHVIEN_ID,01819], @param40=[NGUOICAPNHAT_ID,1], @param41=[NGAYCAPNHAT,7/15/2020 2:31:08 PM], @param42=[DONGIA_BHYT_BANDAU,38700.00], @param43=[DONGIADOANHTHU_BANDAU,38700.00], @param44=[YEUCAUVP,0]]
2020-07-15 14:31:08,779 [1] DEBUG - Statement Id: [DAO00023_Update_VPTiepnhan] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[Int32, System.Int32], @param5=[System.DBNull, null], @param6=[String, System.String], @param7=[Int32, System.Int32], @param8=[Decimal, System.Decimal], @param9=[Decimal, System.Decimal], @param10=[Decimal, System.Decimal], @param11=[Decimal, System.Decimal], @param12=[Decimal, System.Decimal], @param13=[Decimal, System.Decimal], @param14=[Decimal, System.Decimal], @param15=[Decimal, System.Decimal], @param16=[Decimal, System.Decimal], @param17=[Decimal, System.Decimal], @param18=[Decimal, System.Decimal], @param19=[Decimal, System.Decimal], @param20=[Decimal, System.Decimal], @param21=[Decimal, System.Decimal], @param22=[Decimal, System.Decimal], @param23=[Decimal, System.Decimal], @param24=[Decimal, System.Decimal], @param25=[Decimal, System.Decimal], @param26=[Decimal, System.Decimal], @param27=[Decimal, System.Decimal], @param28=[Decimal, System.Decimal], @param29=[Decimal, System.Decimal], @param30=[Decimal, System.Decimal], @param31=[Decimal, System.Decimal], @param32=[Decimal, System.Decimal], @param33=[Int32, System.Int32], @param34=[Decimal, System.Decimal], @param35=[Int32, System.Int32], @param36=[String, System.String], @param37=[Decimal, System.Decimal], @param38=[Decimal, System.Decimal], @param39=[String, System.String], @param40=[Int32, System.Int32], @param41=[DateTime, System.DateTime], @param42=[Decimal, System.Decimal], @param43=[Decimal, System.Decimal], @param44=[String, System.String]]
2020-07-15 14:31:08,888 [1] DEBUG - Statement Id: [DAO00019_GetDetails_TiepNhan] PreparedStatement : [select tn.TIEPNHAN_ID, tn.SOTIEPNHAN, tn.SOBHYT as SOTHE, tn.BHYTTUNGAY as NGAYHIEULUC,        tn.BHYTDENNGAY as NGAYHETHIEULUC, tn.BHYTNGAYCAP as NGAYCAP, tn.BHYTTREN3NAM as TREN3NAM, tn.KHUVUCSONG_ID,        tn.BHYTTREN5NAM as TREN5NAM,tn.NGAYMIENDONGCHITRA,tn.NOIGIOITHIEU_ID, tn.NGUOIGIOITHIEU_ID, tn.CHANDOANNGT,        tn.NOITIEPNHAN_ID, tn.DOITUONG_ID, tn.TRAITUYEN, tn.HINHTHUCDENKHAM_ID, tn.THOIGIANTIEPNHAN,        dv.DVYEUCAU_ID, dv.DICHVU_ID, dv.NOITHUCHIEN_ID as PHONGBAN_ID,        dv.NGUOITAO_ID as DV_NGUOITAO_ID, dv.NGAYTAO as DV_NGAYTAO, dv.THUTIENSAU, dv.BACSICHIDINH_ID, dv.NGUOICHIDINH_ID,        dv.NGUOICAPNHAT_ID as DV_NGUOICAPNHAT_ID, dv.NGAYCAPNHAT as DV_NGAYCAPNHAT,        vp.VIENPHI_ID, vp.KHONGTHUTIEN, vp.LOAI_CHIPHI, vp.LOAIGIA_ID as LOAIGIA,        vp.DATHUCHIEN, vp.DATHANHTOAN, vp.DONGIA_DOANHTHU,        dv.NOITHUCHIEN_ID, dv.TRANGTHAI,        vp.NGUOITAO_ID as VP_NGUOITAO_ID, vp.BHYT_DONGIA, vp.TYLE_VAT, vp.BANGGIA_ID, vp.GIAVON,        tn.NGAYTAO as TN_NGAYTAO,        vp.NGAYTAO as VP_NGAYTAO, vp.NGUOICAPNHAT_ID as VP_NGUOICAPNHAT_ID, vp.NGAYCAPNHAT as VP_NGAYCAPNHAT,        tn.SOCHUYENVIEN, tn.THOIGIANCHUYENTUYEN, tn.HINHTHUCCHUYENVIEN_ID, tn.LYDOCHUYENVIEN_ID, tn.ICDNOIGIOITHIEU_ID,        tn.SUDUNG_BHTN, tn.THE_ID, tn.LOAITHANHVIEN_ID, tn.THANHVIEN_ID, tn.VIP, tn.GHICHU_TIEPNHAN, tn.BAOLANH_VIENPHI        , tn.CONGTY_CHITRA_ID, tn.TRANGTHAI as TRANGTHAI_TIEPNHAN, tn.NGUOITAO_ID as TN_NGUOITAO_ID, tn.TINHTRANGHEN        , tn.NGUON_BENHNHAN_ID, tn.THONGTIN_KCB_BHYT, tn.LOAITIEPNHAN_ID, tn.LYDODENKHAM, vp.YEUCAUVP        , tn.TENNGUOIGIOITHIEU, tn.GIOITHIEUBENNGOAI, tn.UUTIEN, tn.KHOAHENTK, tn.NGUOINUOCNGOAI, tn.NGOAIGIO        , tn.QUANHAM_ID, tn.TINHTRANGBENHNHAN_ID        from (        select top 1 *        from TT_TIEPNHAN        where BENHVIEN_ID = '01819'                 order by                 SOTIEPNHAN desc        ) as tn        left join TT_DVYEUCAU dv on dv.TIEPNHAN_ID = tn.TIEPNHAN_ID and dv.HUYYEUCAU = '0'        left join TT_VIENPHI vp on vp.TIEPNHAN_ID = tn.TIEPNHAN_ID and vp.DICHVU_ID = dv.DICHVU_ID  and dv.DVYEUCAU_ID = vp.REF_ID]
2020-07-15 14:31:09,007 [1] DEBUG - Statement Id: [DAO00056_GetList] PreparedStatement : [select * from TM_LOAIGIA where BENHVIEN_ID = '01819']
2020-07-15 14:31:15,506 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:31:15,550 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:31:15,639 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:31:15,823 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = '01819'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = '01819'              where pb_dv.BENHVIEN_ID = '01819']
2020-07-15 14:31:15,860 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = '01819' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2020-07-15 14:31:15,941 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        , SUM(BHYT) as BHYT, SUM(VIENPHI) as VIENPHI        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI not in ('CHUAKETQUA','DANGTHUCHIEN','CHOXACNHAN') then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN,        case when len(tn.SOBHYT) > 1 then 1 else 0 end as BHYT,        case when len(tn.SOBHYT) = 0 then 1 else 0 end as VIENPHI        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        inner join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='01819' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (60,62,64,66,67,69,71,72,73,74,75,55,55,56,56,57,57,54,12,80,80,63,76,1002,79,70,68,53,53,14,14,14,61,1001)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2020-07-15 14:31:18,712 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '01819'               AND                   TM_SYS_SCREEN.PAGE = 'REG05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2020-07-15 14:31:18,982 [1] DEBUG - Statement Id: [DAO00019_GetTotalLichSuTiepNhan] PreparedStatement : [select count(*)        from (        select T.*        from TT_TIEPNHAN AS T        where        T.BENHVIEN_ID = '01819'         and           convert(date, T.NGAYTIEPNHAN) >= '7/15/2020 2:31:18 PM'         and           convert(date, T.NGAYTIEPNHAN) <= '7/15/2020 2:31:18 PM'                 ) as tn        inner join (select A.*, B.DESCRIPTION from TT_BENHNHAN A        left join TM_GENDER B on B.ID = A.GIOITINH) as bn on tn.BENHNHAN_ID = bn.BENHNHAN_ID                 where tn.BENHVIEN_ID = '01819']
2020-07-15 14:31:19,102 [1] DEBUG - Statement Id: [DAO00019_GetLichSuTiepNhan] PreparedStatement : [select * from (        select ROW_NUMBER() OVER(ORDER BY tn.THOIGIANTIEPNHAN desc) AS ROWNUMBER, tn.*, bn.MAYTE,        bn.TENBENHNHAN, isnull(convert(varchar, NGAYSINH, 103), convert(varchar, NAMSINH)) as NGAYSINH,        bn.DESCRIPTION as GIOITINH, isnull(bn.DIACHILIENLAC,bn.DIACHITHUONGTRU) as DIACHILIENLAC        from (        select T.*, LOAIBENHAN = CASE ISNULL(NB.LOAIBENHAN,ISNULL(NN.LOAIBENHAN,0)) WHEN 0 THEN '' WHEN 2 THEN 'DTNT' WHEN 1 THEN 'CC' ELSE 'NT' END        , DT.TENDOITUONG, NV.TENNHANVIEN        from TT_TIEPNHAN AS T        left join TT_NOITRU_NHAPVIEN AS NN ON NN.TIEPNHAN_ID = T.TIEPNHAN_ID        left join TT_NOITRU_BENHAN AS NB ON NB.BENHAN_ID = (SELECT TOP 1 BENHAN_ID FROM TT_NOITRU_BENHAN WHERE TIEPNHAN_ID = T.TIEPNHAN_ID ORDER BY BENHAN_ID DESC)        left join TM_DOITUONG AS DT ON DT.DOITUONG_ID = T.DOITUONG_ID        left join TM_NHANVIEN AS NV ON NV.NHANVIEN_ID = T.NGUOITAO_ID        where        T.BENHVIEN_ID = '01819'         and           convert(date, T.NGAYTIEPNHAN) >= '7/15/2020 2:31:18 PM'         and           convert(date, T.NGAYTIEPNHAN) <= '7/15/2020 2:31:18 PM'                 ) as tn        inner join (select A.*, B.DESCRIPTION from TT_BENHNHAN A        left join TM_GENDER B on B.ID = A.GIOITINH) as bn on tn.BENHNHAN_ID = bn.BENHNHAN_ID                 ) as tn        where (tn.RowNumber between 1 and 17) and tn.BENHVIEN_ID = '01819'        order by tn.THOIGIANTIEPNHAN desc]
2020-07-15 14:31:26,763 [1] DEBUG - Statement Id: [DAO00013_GetListBenhNhan] PreparedStatement : [select B.*, isnull(convert(varchar, B.NGAYSINH, 103), convert(varchar, B.NAMSINH)) as NGAYTHANGNAMSINH             from TT_BENHNHAN AS B               where                 B.MAYTE = '200001808'                     order by B.BENHNHAN_ID]
2020-07-15 14:31:26,804 [1] DEBUG - Statement Id: [DAO00095_GetListNguoiLienHe] PreparedStatement : [SELECT BNN.*, D.DICTIONARY_NAME AS TENQUANHE          FROM TT_BENHNHAN AS BN          INNER JOIN TT_BENHNHAN_NGUOILIENHE AS BNN ON BNN.BENHNHAN_ID = BN.BENHNHAN_ID          LEFT JOIN LST_DICTIONARY AS D ON D.DICTIONARY_ID = BNN.QUANHE_ID AND D.DICTIONARY_TYPE_CODE = 'QuanHeGiaDinh'          WHERE BN.MAYTE = '200001808' AND BN.ACTIVE = '1' AND BN.BENHVIEN_ID = '01819']
2020-07-15 14:31:26,862 [1] DEBUG - Statement Id: [DAO00095_GetListBenhNhan] PreparedStatement : [select B.*, isnull(convert(varchar, B.NGAYSINH, 103), convert(varchar, B.NAMSINH)) as NGAYTHANGNAMSINH                        ,T.TIEPNHAN_ID AS TIEPNHAN_ID_L, T.SOBHYT AS SOTHE_L, T.BHYTTUNGAY AS NGAYHIEULUC_L, T.BHYTDENNGAY AS NGAYHETHIEULUC_L, T.KHUVUCSONG_ID AS KHUVUCSONG_ID_L            , T.NGAYMIENDONGCHITRA AS NGAYMIENDONGCHITRA_L, T.BHYTTREN5NAM AS TREN5NAM_L, T.TRAITUYEN AS TRAITUYEN_L                     from TT_BENHNHAN AS B                        left join TT_TIEPNHAN AS T ON T.TIEPNHAN_ID =            (SELECT TOP 1 TIEPNHAN_ID FROM TT_TIEPNHAN WHERE BENHNHAN_ID = B.BENHNHAN_ID ORDER BY THOIGIANTIEPNHAN DESC)           where                   B.MAYTE = '200001808'                         order by B.BENHNHAN_ID]
2020-07-15 14:31:27,100 [1] DEBUG - Statement Id: [DAO00019_LaySoTienCongNo] PreparedStatement : [select SOTIEN        from TT_BENHNHAN_CONGNO        where        MAYTE = '200001808'        and BENHVIEN_ID = '01819'        and ACTIVE = '1']
2020-07-15 14:31:27,185 [1] DEBUG - Statement Id: [DAO00019_GetDSTiepNhanByBenhNhan] PreparedStatement : [SELECT T.*, NN.SOBENHAN AS SOBENHAN_DTNT        FROM TT_TIEPNHAN AS T        LEFT JOIN TT_NOITRU_NHAPVIEN AS NN ON NN.TIEPNHAN_ID = T.TIEPNHAN_ID AND NN.LOAIBENHAN = '2'        WHERE T.BENHNHAN_ID = '8727' AND T.BENHVIEN_ID = '01819' AND T.TRANGTHAI != 'HOANTHANH'        AND (NN.NHAPVIEN_ID IS NULL AND convert(date, T.NGAYTAO) = convert(date, '7/15/2020 2:31:27 PM')        OR NN.NHAPVIEN_ID IS NOT NULL)        ORDER BY NN.SOBENHAN]
2020-07-15 14:31:27,259 [1] DEBUG - Statement Id: [DAO00019_GetDetails_TiepNhan] PreparedStatement : [select tn.TIEPNHAN_ID, tn.SOTIEPNHAN, tn.SOBHYT as SOTHE, tn.BHYTTUNGAY as NGAYHIEULUC,        tn.BHYTDENNGAY as NGAYHETHIEULUC, tn.BHYTNGAYCAP as NGAYCAP, tn.BHYTTREN3NAM as TREN3NAM, tn.KHUVUCSONG_ID,        tn.BHYTTREN5NAM as TREN5NAM,tn.NGAYMIENDONGCHITRA,tn.NOIGIOITHIEU_ID, tn.NGUOIGIOITHIEU_ID, tn.CHANDOANNGT,        tn.NOITIEPNHAN_ID, tn.DOITUONG_ID, tn.TRAITUYEN, tn.HINHTHUCDENKHAM_ID, tn.THOIGIANTIEPNHAN,        dv.DVYEUCAU_ID, dv.DICHVU_ID, dv.NOITHUCHIEN_ID as PHONGBAN_ID,        dv.NGUOITAO_ID as DV_NGUOITAO_ID, dv.NGAYTAO as DV_NGAYTAO, dv.THUTIENSAU, dv.BACSICHIDINH_ID, dv.NGUOICHIDINH_ID,        dv.NGUOICAPNHAT_ID as DV_NGUOICAPNHAT_ID, dv.NGAYCAPNHAT as DV_NGAYCAPNHAT,        vp.VIENPHI_ID, vp.KHONGTHUTIEN, vp.LOAI_CHIPHI, vp.LOAIGIA_ID as LOAIGIA,        vp.DATHUCHIEN, vp.DATHANHTOAN, vp.DONGIA_DOANHTHU,        dv.NOITHUCHIEN_ID, dv.TRANGTHAI,        vp.NGUOITAO_ID as VP_NGUOITAO_ID, vp.BHYT_DONGIA, vp.TYLE_VAT, vp.BANGGIA_ID, vp.GIAVON,        tn.NGAYTAO as TN_NGAYTAO,        vp.NGAYTAO as VP_NGAYTAO, vp.NGUOICAPNHAT_ID as VP_NGUOICAPNHAT_ID, vp.NGAYCAPNHAT as VP_NGAYCAPNHAT,        tn.SOCHUYENVIEN, tn.THOIGIANCHUYENTUYEN, tn.HINHTHUCCHUYENVIEN_ID, tn.LYDOCHUYENVIEN_ID, tn.ICDNOIGIOITHIEU_ID,        tn.SUDUNG_BHTN, tn.THE_ID, tn.LOAITHANHVIEN_ID, tn.THANHVIEN_ID, tn.VIP, tn.GHICHU_TIEPNHAN, tn.BAOLANH_VIENPHI        , tn.CONGTY_CHITRA_ID, tn.TRANGTHAI as TRANGTHAI_TIEPNHAN, tn.NGUOITAO_ID as TN_NGUOITAO_ID, tn.TINHTRANGHEN        , tn.NGUON_BENHNHAN_ID, tn.THONGTIN_KCB_BHYT, tn.LOAITIEPNHAN_ID, tn.LYDODENKHAM, vp.YEUCAUVP        , tn.TENNGUOIGIOITHIEU, tn.GIOITHIEUBENNGOAI, tn.UUTIEN, tn.KHOAHENTK, tn.NGUOINUOCNGOAI, tn.NGOAIGIO        , tn.QUANHAM_ID, tn.TINHTRANGBENHNHAN_ID        from (        select top 1 *        from TT_TIEPNHAN        where BENHVIEN_ID = '01819'         and           TIEPNHAN_ID = '8743'                   order by                 SOTIEPNHAN desc        ) as tn        left join TT_DVYEUCAU dv on dv.TIEPNHAN_ID = tn.TIEPNHAN_ID and dv.HUYYEUCAU = '0'        left join TT_VIENPHI vp on vp.TIEPNHAN_ID = tn.TIEPNHAN_ID and vp.DICHVU_ID = dv.DICHVU_ID  and dv.DVYEUCAU_ID = vp.REF_ID]
2020-07-15 14:31:27,319 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select top 1 * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%'  and ACTIVE = '1' order by DOITUONG_ID asc]
2020-07-15 14:31:27,319 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2020-07-15 14:31:27,319 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2020-07-15 14:31:27,460 [1] DEBUG - Statement Id: [DAO00019_GetTiepNhanMienGiamCLSThucHien] PreparedStatement : [select TIEPNHAN_ID from TT_MIENGIAM where TIEPNHAN_ID ='8743';]
2020-07-15 14:31:27,489 [1] DEBUG - Statement Id: [DAO00019_GetTiepNhanMienGiamCLSThucHien01] PreparedStatement : [select TIEPNHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID ='8743' and TRANGTHAI != 'CHUAKETQUA']
2020-07-15 14:31:27,534 [1] DEBUG - Statement Id: [DAO00060_KiemtrabenhnhanCapcuuNoitruDaKhoaBenhAn] PreparedStatement : [select A.* , C.TRANGTHAI as STATUS, C.SOTIEPNHAN, A.ICD_BENHCHINH as ICD_NHAPVIEN              from TT_NOITRU_BENHAN A              inner join TT_TIEPNHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID and convert(date, C.NGAYTAO) = convert(date, getdate())              inner join TT_BENHNHAN B on A.BENHNHAN_ID = B.BENHNHAN_ID and B.ACTIVE = '1' and B.MAYTE = '200001808'              where A.TRANGTHAI = 'DAKHOA' and A.BENHVIEN_ID = '01819']
2020-07-15 14:31:27,629 [1] DEBUG - Statement Id: [DAO00060_KiemtrabenhnhanCapcuuNoitru] PreparedStatement : [select A.* , C.TRANGTHAI as STATUS, C.SOTIEPNHAN, A.ICD_BENHCHINH as ICD_NHAPVIEN, C.SOBHYT, C.BHYTTUNGAY, C.BHYTDENNGAY              from TT_NOITRU_BENHAN A              inner join TT_TIEPNHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID              inner join TT_BENHNHAN B on A.BENHNHAN_ID = B.BENHNHAN_ID and B.ACTIVE = '1' and B.MAYTE = '200001808'              where (A.TRANGTHAI = 'DANGDIEUTRI' OR A.TRANGTHAI = 'DAXUATVIEN' OR A.TRANGTHAI = 'DATHANHTOAN') and A.BENHVIEN_ID = '01819'               and                   A.TIEPNHAN_ID = '8743']
2020-07-15 14:31:27,684 [1] DEBUG - Statement Id: [DAO00014_GetTTNhapVien] PreparedStatement : [select *        from TT_NOITRU_NHAPVIEN        where TIEPNHAN_ID  = '8743']
2020-07-15 14:31:27,717 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '8727' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = '01819'        order by THE_ID desc]
2020-07-15 14:31:27,783 [1] DEBUG - Statement Id: [DAO00095_Search_LichSuKhamChuaBenh] PreparedStatement : [select KB.THOIGIANKHAM, DV.TENDICHVU AS NOIDUNG, PB.TENPHONGBAN AS TENPHONGKHAM, NV.TENNHANVIEN AS TENBACSIKHAM,          KB.CHANDOANKHOAKHAM AS CHANDOAN, TN.SOBHYT          from TT_BENHNHAN BN          inner join TT_TIEPNHAN TN on TN.BENHNHAN_ID = BN.BENHNHAN_ID and TN.BENHVIEN_ID = BN.BENHVIEN_ID          inner join TT_NGOAITRU_KHAMBENH KB on KB.TIEPNHAN_ID = TN.TIEPNHAN_ID and KB.BENHVIEN_ID = TN.BENHVIEN_ID          left join TM_DICHVU DV on DV.DICHVU_ID = KB.DICHVU_ID and DV.BENHVIEN_ID = KB.BENHVIEN_ID          left join TM_PHONGBAN PB on PB.PHONGBAN_ID = KB.PHONGBAN_ID and PB.BENHVIEN_ID = KB.BENHVIEN_ID          left join TM_NHANVIEN NV on NV.NHANVIEN_ID = KB.BACSIKHAM_ID and NV.BENHVIEN_ID = KB.BENHVIEN_ID          where BN.BENHNHAN_ID = 8727          and BN.BENHVIEN_ID = '01819'          order by KB.THOIGIANKHAM]
