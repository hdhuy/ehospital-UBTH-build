--------------------------------------------------------------------------------
2019-08-15 09:26:48,836 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 09:26:49,202 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 09:26:49,252 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 09:26:49,814 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:26:50,187 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 09:26:59,904 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 09:27:00,065 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 09:27:04,449 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 09:27:04,845 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 09:27:09,580 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 09:27:10,404 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 09:27:10,987 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 09:27:11,074 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 09:27:11,168 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 09:27:11,454 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 09:27:11,924 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 09:27:12,011 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 09:27:12,091 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 09:27:12,666 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 09:27:12,749 [6] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 09:27:12,833 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 09:27:12,883 [6] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 09:27:19,594 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 09:27:19,654 [6] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 09:27:22,681 [6] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 09:27:22,757 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 09:27:22,807 [6] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 09:27:22,895 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 09:27:22,937 [6] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 09:27:23,009 [6] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 09:27:23,945 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:27:26,361 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 09:27:33,147 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 09:27:33,182 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 09:27:33,264 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:27:33,436 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:27:33,829 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 09:27:33,831 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 09:27:33,831 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 09:27:33,864 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 09:27:33,864 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 09:27:33,864 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 09:27:34,042 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:27:34,254 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:27:46,236 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:27:46,723 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 09:27:48,000 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 09:28:05,332 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:28:05,645 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:28:09,824 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:28:10,262 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:28:10,262 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:28:10,262 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:28:12,401 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:28:12,463 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:28:12,463 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:28:12,463 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:28:17,810 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:28:18,065 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:28:18,065 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:28:18,065 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:28:23,909 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:28:24,398 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD40'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:28:24,827 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '25'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 09:28:24,984 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '25'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 09:28:26,156 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '25'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 09:28:26,273 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '25'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 09:28:45,165 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190041240']
2019-08-15 09:28:45,225 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:28:45,225 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:28:45,225 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:29:09,778 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190041240']
2019-08-15 09:29:09,884 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '10/1/2018 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:29:09,884 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:29:09,884 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
--------------------------------------------------------------------------------
2019-08-15 09:36:56,691 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 09:36:57,281 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 09:36:57,320 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 09:36:57,659 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:36:57,940 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 09:37:03,739 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 09:37:04,014 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 09:37:05,716 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 09:37:05,863 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 09:37:06,659 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 09:37:06,843 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 09:37:06,933 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 09:37:07,014 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 09:37:07,095 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 09:37:07,180 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 09:37:07,260 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 09:37:07,336 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 09:37:07,415 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 09:37:07,953 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 09:37:08,006 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 09:37:08,078 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 09:37:08,112 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 09:37:09,158 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 09:37:09,196 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 09:37:13,196 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 09:37:13,270 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 09:37:13,318 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 09:37:13,392 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 09:37:13,431 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 09:37:13,504 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 09:37:14,446 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:15,378 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 09:37:20,211 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 09:37:20,246 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 09:37:20,343 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:20,466 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:20,603 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 09:37:20,605 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 09:37:20,605 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 09:37:20,639 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 09:37:20,639 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 09:37:20,639 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 09:37:20,787 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:20,944 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:28,631 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:28,754 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 09:37:29,238 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 09:37:37,972 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:38,233 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:37:47,890 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:37:48,028 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:37:48,028 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:37:48,028 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:37:48,099 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:37:48,155 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:37:48,156 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:37:48,156 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:37:49,097 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:37:49,158 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:37:49,158 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:37:49,158 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:38:27,323 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR12'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:38:27,825 [1] DEBUG - Statement Id: [DAO00061_GetDSBenhAnByBenhNhanID] PreparedStatement : [select ntba.*        ,case        when ntba.LOAIBENHAN = '1' then icd_cc.MAICD        else icd_nt.MAICD + COALESCE(';' + ICD_BENHPHU,'')        end as MAICD        , case        when ntba.LOAIBENHAN = '1' then icd_cc.TENICD + COALESCE( '; ' + CHANDOANRAVIEN, '')        else icd_nt.TENICD + COALESCE('; ' + CHANDOANRAVIEN,'') + (select '; ' + TENICD from [dbo].[SplitString](ICD_BENHPHU,';') as a        left join TM_ICD icd_p on a.s=icd_p.MAICD        group by TENICD        FOR XML PATH ('')        )        end as CHANDOAN        , lt.SOLUUTRU as SOLUUTRU_BGA        , TN.SOBHYT        , DT.TENDOITUONG        from TT_NOITRU_BENHAN ntba        left join TM_ICD icd_nt on ntba.ICD_BENHCHINH = icd_nt.ICD_ID        left join TM_ICD icd_cc on ntba.ICD_KHAMBENH = icd_cc.ICD_ID        left join TT_BENHAN_LUUTRU lt on lt.BENHAN_ID = ntba.BENHAN_ID        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = NTBA.TIEPNHAN_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where BENHNHAN_ID = ''        and ntba.BENHVIEN_ID = 'HLU01'         and           convert(date, ntba.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, ntba.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by BENHAN_ID desc]
2019-08-15 09:38:28,529 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:38:47,356 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190041240']
2019-08-15 09:38:47,411 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:38:47,411 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:38:47,411 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:38:48,272 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190041240']
2019-08-15 09:38:48,330 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:38:48,330 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:38:48,330 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:38:50,249 [1] DEBUG - Statement Id: [DAO00061_GetDSBenhAnByBenhNhanID] PreparedStatement : [select ntba.*        ,case        when ntba.LOAIBENHAN = '1' then icd_cc.MAICD        else icd_nt.MAICD + COALESCE(';' + ICD_BENHPHU,'')        end as MAICD        , case        when ntba.LOAIBENHAN = '1' then icd_cc.TENICD + COALESCE( '; ' + CHANDOANRAVIEN, '')        else icd_nt.TENICD + COALESCE('; ' + CHANDOANRAVIEN,'') + (select '; ' + TENICD from [dbo].[SplitString](ICD_BENHPHU,';') as a        left join TM_ICD icd_p on a.s=icd_p.MAICD        group by TENICD        FOR XML PATH ('')        )        end as CHANDOAN        , lt.SOLUUTRU as SOLUUTRU_BGA        , TN.SOBHYT        , DT.TENDOITUONG        from TT_NOITRU_BENHAN ntba        left join TM_ICD icd_nt on ntba.ICD_BENHCHINH = icd_nt.ICD_ID        left join TM_ICD icd_cc on ntba.ICD_KHAMBENH = icd_cc.ICD_ID        left join TT_BENHAN_LUUTRU lt on lt.BENHAN_ID = ntba.BENHAN_ID        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = NTBA.TIEPNHAN_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where BENHNHAN_ID = '21353'        and ntba.BENHVIEN_ID = 'HLU01'         and           convert(date, ntba.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, ntba.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by BENHAN_ID desc]
--------------------------------------------------------------------------------
2019-08-15 09:40:11,140 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 09:40:12,004 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 09:40:12,050 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 09:40:12,413 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:12,727 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 09:40:25,093 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 09:40:25,127 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 09:40:26,947 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 09:40:27,135 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 09:40:28,410 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 09:40:28,544 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 09:40:28,626 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 09:40:28,706 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 09:40:28,784 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 09:40:28,857 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 09:40:28,931 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 09:40:29,008 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 09:40:29,084 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 09:40:29,593 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 09:40:29,634 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 09:40:29,716 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 09:40:29,761 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 09:40:35,505 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 09:40:35,539 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 09:40:40,248 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 09:40:40,318 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 09:40:40,355 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 09:40:40,437 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 09:40:40,474 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 09:40:40,547 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 09:40:41,538 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:42,458 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 09:40:47,202 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 09:40:47,485 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 09:40:47,561 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:48,033 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:48,241 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 09:40:48,243 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 09:40:48,243 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 09:40:48,280 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 09:40:48,280 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 09:40:48,280 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 09:40:48,410 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:48,586 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:56,907 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:40:57,003 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 09:40:57,318 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 09:41:03,878 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:41:04,132 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:41:05,345 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:41:05,526 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:41:05,527 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:41:05,527 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:41:05,616 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:41:06,047 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:41:06,047 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:41:06,047 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:41:06,838 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:41:06,900 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:41:06,900 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:41:06,900 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:41:12,981 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190041240']
2019-08-15 09:41:13,049 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:41:13,049 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:41:13,049 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:41:15,427 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR12'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:41:15,927 [1] DEBUG - Statement Id: [DAO00061_GetDSBenhAnByBenhNhanID] PreparedStatement : [select ntba.*        ,case        when ntba.LOAIBENHAN = '1' then icd_cc.MAICD        else icd_nt.MAICD + COALESCE(';' + ICD_BENHPHU,'')        end as MAICD        , case        when ntba.LOAIBENHAN = '1' then icd_cc.TENICD + COALESCE( '; ' + CHANDOANRAVIEN, '')        else icd_nt.TENICD + COALESCE('; ' + CHANDOANRAVIEN,'') + (select '; ' + TENICD from [dbo].[SplitString](ICD_BENHPHU,';') as a        left join TM_ICD icd_p on a.s=icd_p.MAICD        group by TENICD        FOR XML PATH ('')        )        end as CHANDOAN        , lt.SOLUUTRU as SOLUUTRU_BGA        , TN.SOBHYT        , DT.TENDOITUONG        from TT_NOITRU_BENHAN ntba        left join TM_ICD icd_nt on ntba.ICD_BENHCHINH = icd_nt.ICD_ID        left join TM_ICD icd_cc on ntba.ICD_KHAMBENH = icd_cc.ICD_ID        left join TT_BENHAN_LUUTRU lt on lt.BENHAN_ID = ntba.BENHAN_ID        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = NTBA.TIEPNHAN_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where ntba.BENHNHAN_ID = '21353'        and ntba.BENHVIEN_ID = 'HLU01'         and           convert(date, ntba.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, ntba.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by ntba.BENHAN_ID desc]
2019-08-15 09:41:22,064 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RPT02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:41:24,130 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RPT01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:41:25,517 [1] DEBUG - Statement Id: [DAO00200_GetDetail] PreparedStatement : [select *              from TM_REPORT              where TM_REPORT.REPORT_CODE  = 'IPD03P00901' AND TM_REPORT.BENHVIEN_ID = 'HLU01']
2019-08-15 09:41:25,673 [1] DEBUG - Statement Id: [DAO00201_GetList] PreparedStatement : [select *              from TM_REPORT_DETAIL               where                             TM_REPORT_DETAIL.REPORT_CODE = 'IPD03P00901'                       and                           TM_REPORT_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by PARAMETER_INDEX]
2019-08-15 09:41:26,220 [1] DEBUG - Statement Id: [DAO00203_GetList] PreparedStatement : [select *              from TM_REPORT_SUB_DEFINITION               where                             TM_REPORT_SUB_DEFINITION.REPORT_CODE = 'IPD03P00901'                       and                           TM_REPORT_SUB_DEFINITION.BENHVIEN_ID = 'HLU01'                                     order by REPORT_SUB_DEFINITION_ID]
2019-08-15 09:41:26,266 [1] DEBUG - Statement Id: [DAO00201_GetListByParentReportID] PreparedStatement : [select RD.*              from TM_REPORT AS R              INNER JOIN TM_REPORT_SUB_DEFINITION AS RS ON R.REPORT_CODE = RS.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              INNER JOIN TM_REPORT_DETAIL AS RD ON RD.REPORT_CODE = RS.SUB_REPORT_CODE AND RD.BENHVIEN_ID = RS.BENHVIEN_ID              where R.REPORT_CODE  = 'IPD03P00901' AND R.BENHVIEN_ID = 'HLU01']
2019-08-15 09:41:26,441 [1] DEBUG - Statement Id: [DAO00203_GetListReportSubFileByReportID] PreparedStatement : [select R.*              from TM_REPORT_SUB_DEFINITION AS RS              inner join TM_REPORT AS R ON RS.SUB_REPORT_CODE = R.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              where RS.REPORT_CODE = 'IPD03P00901' AND RS.BENHVIEN_ID = 'HLU01']
2019-08-15 09:41:26,498 [1] DEBUG - Statement Id: [DAO00204_GetListParameter] PreparedStatement : [SELECT SUBSTRING(p.name, 2, LEN(p.name) - 1) AS PARAMETER, p.parameter_id AS Idx, CONVERT(varchar(1),p.is_nullable) as Allow_Null              FROM sys.procedures sp              INNER JOIN sys.parameters p ON sp.object_id = p.object_id              WHERE sp.name = 'IPD03P009012_BANK'              ORDER BY p.parameter_id]
2019-08-15 09:41:26,575 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [IPD03P009012_BANK]
2019-08-15 09:41:26,576 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@MABENHVIEN=[PARAMETERS.MABENHVIEN,HLU01], @SOTIEPNHAN=[PARAMETERS.SOTIEPNHAN,24800]]
2019-08-15 09:41:26,576 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@MABENHVIEN=[String, System.String], @SOTIEPNHAN=[Int64, System.Int64]]
2019-08-15 09:41:31,462 [1] DEBUG - Statement Id: [DAO00200_GetSettingReportPrinting] PreparedStatement : [SELECT DICTIONARY_CODE AS REPORT_CODE, DICTIONARY_NAME AS COMPUTER_NAME, DICTIONARY_NAME_EN AS NAME_PRINTER          FROM LST_DICTIONARY          WHERE BENHVIEN_ID = 'HLU01' AND ENABLED = '1' AND DICTIONARY_TYPE_CODE = 'Report_Printer_Setting'          AND DICTIONARY_CODE = 'IPD03P00901' AND DICTIONARY_NAME = 'GMC-HAIPN6']
2019-08-15 09:41:31,649 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:41:53,144 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190041240']
2019-08-15 09:41:53,208 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:41:53,208 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:41:53,208 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:43:01,991 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR09'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:43:02,974 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '21353')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:45:11,073 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '21353')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:45:14,168 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR08'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 09:45:15,039 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] PreparedStatement : [select a.* from TT_CLSKETQUA a        join TT_DVYEUCAU b on a.DVYEUCAU_ID = b.DVYEUCAU_ID        where b.BENHNHAN_ID =  @param0  and b.TRANGTHAI = 'HOANTAT'         and           exists (select DICHVU_ID from TM_DICHVU ab join TM_NHOMDICHVU bc on ab.NHOMDICHVU_ID = bc.NHOMDICHVU_ID          where b.DICHVU_ID = ab.DICHVU_ID and left(bc.MANHOMDICHVU,2) in ('02', '03'))                    and a.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and a.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:45:15,039 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:45:15,039 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:47:57,914 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '21353')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:48:02,729 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '21353')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:50:31,753 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '21353')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:53:04,558 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:53:04,613 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:53:04,613 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,21353]]
2019-08-15 09:53:04,613 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:53:04,753 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 09:53:05,172 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:53:05,173 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 09:53:05,173 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 09:53:06,839 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 09:53:06,904 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 09:53:06,904 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 09:53:06,904 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 09:53:17,141 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '23165')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 09:53:53,181 [1] DEBUG - Statement Id: [DAO00200_GetDetail] PreparedStatement : [select *              from TM_REPORT              where TM_REPORT.REPORT_CODE  = 'ORM04P00101' AND TM_REPORT.BENHVIEN_ID = 'HLU01']
2019-08-15 09:53:53,274 [1] DEBUG - Statement Id: [DAO00201_GetList] PreparedStatement : [select *              from TM_REPORT_DETAIL               where                             TM_REPORT_DETAIL.REPORT_CODE = 'ORM04P00101'                       and                           TM_REPORT_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by PARAMETER_INDEX]
2019-08-15 09:53:53,620 [1] DEBUG - Statement Id: [DAO00203_GetList] PreparedStatement : [select *              from TM_REPORT_SUB_DEFINITION               where                             TM_REPORT_SUB_DEFINITION.REPORT_CODE = 'ORM04P00101'                       and                           TM_REPORT_SUB_DEFINITION.BENHVIEN_ID = 'HLU01'                                     order by REPORT_SUB_DEFINITION_ID]
2019-08-15 09:53:53,653 [1] DEBUG - Statement Id: [DAO00201_GetListByParentReportID] PreparedStatement : [select RD.*              from TM_REPORT AS R              INNER JOIN TM_REPORT_SUB_DEFINITION AS RS ON R.REPORT_CODE = RS.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              INNER JOIN TM_REPORT_DETAIL AS RD ON RD.REPORT_CODE = RS.SUB_REPORT_CODE AND RD.BENHVIEN_ID = RS.BENHVIEN_ID              where R.REPORT_CODE  = 'ORM04P00101' AND R.BENHVIEN_ID = 'HLU01']
2019-08-15 09:53:53,726 [1] DEBUG - Statement Id: [DAO00203_GetListReportSubFileByReportID] PreparedStatement : [select R.*              from TM_REPORT_SUB_DEFINITION AS RS              inner join TM_REPORT AS R ON RS.SUB_REPORT_CODE = R.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              where RS.REPORT_CODE = 'ORM04P00101' AND RS.BENHVIEN_ID = 'HLU01']
2019-08-15 09:53:53,799 [1] DEBUG - Statement Id: [DAO00204_GetListParameter] PreparedStatement : [SELECT SUBSTRING(p.name, 2, LEN(p.name) - 1) AS PARAMETER, p.parameter_id AS Idx, CONVERT(varchar(1),p.is_nullable) as Allow_Null              FROM sys.procedures sp              INNER JOIN sys.parameters p ON sp.object_id = p.object_id              WHERE sp.name = 'VN_PORMxx00101_TTPT'              ORDER BY p.parameter_id]
2019-08-15 09:53:53,862 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [VN_PORMxx00101_TTPT]
2019-08-15 09:53:53,862 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@MABENHVIEN=[PARAMETERS.MABENHVIEN,HLU01], @PHAUTHUAT_ID=[PARAMETERS.PHAUTHUAT_ID,3718]]
2019-08-15 09:53:53,862 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@MABENHVIEN=[String, System.String], @PHAUTHUAT_ID=[Int64, System.Int64]]
2019-08-15 09:53:56,060 [1] DEBUG - Statement Id: [DAO00200_GetSettingReportPrinting] PreparedStatement : [SELECT DICTIONARY_CODE AS REPORT_CODE, DICTIONARY_NAME AS COMPUTER_NAME, DICTIONARY_NAME_EN AS NAME_PRINTER          FROM LST_DICTIONARY          WHERE BENHVIEN_ID = 'HLU01' AND ENABLED = '1' AND DICTIONARY_TYPE_CODE = 'Report_Printer_Setting'          AND DICTIONARY_CODE = 'ORM04P00101' AND DICTIONARY_NAME = 'GMC-HAIPN6']
--------------------------------------------------------------------------------
2019-08-15 10:19:43,819 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 10:19:44,118 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:19:44,174 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:19:44,850 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:19:45,309 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:26:23,461 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 10:26:23,624 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:26:26,201 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:26:26,296 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:26:27,244 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 10:26:27,445 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 10:26:27,525 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 10:26:27,617 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 10:26:27,692 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 10:26:27,775 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 10:26:27,852 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 10:26:27,929 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 10:26:28,019 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 10:26:28,522 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 10:26:28,575 [11] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:26:28,675 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 10:26:28,709 [11] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:26:29,475 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 10:26:29,513 [11] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 10:26:31,843 [11] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 10:26:31,910 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 10:26:31,944 [11] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 10:26:32,017 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 10:26:32,049 [11] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 10:26:32,115 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 10:26:33,071 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:26:34,655 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 10:26:39,855 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 10:26:39,891 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 10:26:39,979 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:26:40,092 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:26:40,282 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 10:26:40,283 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:26:40,283 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:26:40,315 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 10:26:40,315 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:26:40,315 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:26:40,452 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:26:40,589 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:26:48,880 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:26:48,975 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 10:26:49,284 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 10:27:32,330 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:27:32,565 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:27:33,297 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:27:33,361 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:27:33,361 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:27:33,361 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:27:33,438 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:27:33,496 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:27:33,496 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:27:33,497 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:27:34,441 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:27:34,500 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:27:34,500 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:27:34,500 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:27:44,019 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 10:27:44,076 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:27:44,076 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:27:44,076 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:27:52,229 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR12'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:27:52,625 [1] DEBUG - Statement Id: [DAO00061_GetDSBenhAnByBenhNhanID] PreparedStatement : [select ntba.*        ,case        when ntba.LOAIBENHAN = '1' then icd_cc.MAICD        else icd_nt.MAICD + COALESCE(';' + ICD_BENHPHU,'')        end as MAICD        , case        when ntba.LOAIBENHAN = '1' then icd_cc.TENICD + COALESCE( '; ' + CHANDOANRAVIEN, '')        else icd_nt.TENICD + COALESCE('; ' + CHANDOANRAVIEN,'') + (select '; ' + TENICD from [dbo].[SplitString](ICD_BENHPHU,';') as a        left join TM_ICD icd_p on a.s=icd_p.MAICD        group by TENICD        FOR XML PATH ('')        )        end as CHANDOAN        , lt.SOLUUTRU as SOLUUTRU_BGA        , TN.SOBHYT        , DT.TENDOITUONG        from TT_NOITRU_BENHAN ntba        left join TM_ICD icd_nt on ntba.ICD_BENHCHINH = icd_nt.ICD_ID        left join TM_ICD icd_cc on ntba.ICD_KHAMBENH = icd_cc.ICD_ID        left join TT_BENHAN_LUUTRU lt on lt.BENHAN_ID = ntba.BENHAN_ID        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = NTBA.TIEPNHAN_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where ntba.BENHNHAN_ID = '23165'        and ntba.BENHVIEN_ID = 'HLU01'         and           convert(date, ntba.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, ntba.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by ntba.BENHAN_ID desc]
2019-08-15 10:27:54,336 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RPT02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:27:55,608 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RPT01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:27:56,265 [1] DEBUG - Statement Id: [DAO00200_GetDetail] PreparedStatement : [select *              from TM_REPORT              where TM_REPORT.REPORT_CODE  = 'IPD03P00901' AND TM_REPORT.BENHVIEN_ID = 'HLU01']
2019-08-15 10:27:56,330 [1] DEBUG - Statement Id: [DAO00201_GetList] PreparedStatement : [select *              from TM_REPORT_DETAIL               where                             TM_REPORT_DETAIL.REPORT_CODE = 'IPD03P00901'                       and                           TM_REPORT_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by PARAMETER_INDEX]
2019-08-15 10:27:56,364 [1] DEBUG - Statement Id: [DAO00203_GetList] PreparedStatement : [select *              from TM_REPORT_SUB_DEFINITION               where                             TM_REPORT_SUB_DEFINITION.REPORT_CODE = 'IPD03P00901'                       and                           TM_REPORT_SUB_DEFINITION.BENHVIEN_ID = 'HLU01'                                     order by REPORT_SUB_DEFINITION_ID]
2019-08-15 10:27:56,397 [1] DEBUG - Statement Id: [DAO00201_GetListByParentReportID] PreparedStatement : [select RD.*              from TM_REPORT AS R              INNER JOIN TM_REPORT_SUB_DEFINITION AS RS ON R.REPORT_CODE = RS.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              INNER JOIN TM_REPORT_DETAIL AS RD ON RD.REPORT_CODE = RS.SUB_REPORT_CODE AND RD.BENHVIEN_ID = RS.BENHVIEN_ID              where R.REPORT_CODE  = 'IPD03P00901' AND R.BENHVIEN_ID = 'HLU01']
2019-08-15 10:27:56,494 [1] DEBUG - Statement Id: [DAO00203_GetListReportSubFileByReportID] PreparedStatement : [select R.*              from TM_REPORT_SUB_DEFINITION AS RS              inner join TM_REPORT AS R ON RS.SUB_REPORT_CODE = R.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              where RS.REPORT_CODE = 'IPD03P00901' AND RS.BENHVIEN_ID = 'HLU01']
2019-08-15 10:27:56,538 [1] DEBUG - Statement Id: [DAO00204_GetListParameter] PreparedStatement : [SELECT SUBSTRING(p.name, 2, LEN(p.name) - 1) AS PARAMETER, p.parameter_id AS Idx, CONVERT(varchar(1),p.is_nullable) as Allow_Null              FROM sys.procedures sp              INNER JOIN sys.parameters p ON sp.object_id = p.object_id              WHERE sp.name = 'IPD03P009012_BANK'              ORDER BY p.parameter_id]
2019-08-15 10:27:56,571 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [IPD03P009012_BANK]
2019-08-15 10:27:56,571 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@MABENHVIEN=[PARAMETERS.MABENHVIEN,HLU01], @SOTIEPNHAN=[PARAMETERS.SOTIEPNHAN,27124]]
2019-08-15 10:27:56,571 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@MABENHVIEN=[String, System.String], @SOTIEPNHAN=[Int64, System.Int64]]
2019-08-15 10:27:56,681 [1] DEBUG - Statement Id: [DAO00200_GetSettingReportPrinting] PreparedStatement : [SELECT DICTIONARY_CODE AS REPORT_CODE, DICTIONARY_NAME AS COMPUTER_NAME, DICTIONARY_NAME_EN AS NAME_PRINTER          FROM LST_DICTIONARY          WHERE BENHVIEN_ID = 'HLU01' AND ENABLED = '1' AND DICTIONARY_TYPE_CODE = 'Report_Printer_Setting'          AND DICTIONARY_CODE = 'IPD03P00901' AND DICTIONARY_NAME = 'GMC-HAIPN6']
2019-08-15 10:27:56,838 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:11,468 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR13'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:12,777 [1] DEBUG - Statement Id: [DAO00062_GetDSYLenhThuocByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, ba.TIEPNHAN_ID, kb.* from TT_NOITRU_KHAMBENH kb        left join TT_NOITRU_BENHAN ba        on kb.BENHAN_ID = ba.BENHAN_ID        where ba.BENHNHAN_ID = '23165'        and kb.ISYLENHVTYT = '0'        and kb.BENHVIEN_ID = 'HLU01'         and           convert(date, NGAYLAP) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYLAP) <= convert(date, '8/15/2019 12:00:00 AM')                 order by KHAMBENH_ID        desc]
2019-08-15 10:28:14,932 [1] DEBUG - Statement Id: [DAO00063_GetList] PreparedStatement : [select *        from TT_NOITRU_TOATHUOC         where                 KHAMBENH_ID = '82613'             and               BENHVIEN_ID = 'HLU01'                     order by TOATHUOC_ID]
2019-08-15 10:28:15,635 [1] DEBUG - Statement Id: [DAO00200_GetDetail] PreparedStatement : [select *              from TM_REPORT              where TM_REPORT.REPORT_CODE  = 'IPD24P01401' AND TM_REPORT.BENHVIEN_ID = 'HLU01']
2019-08-15 10:28:15,702 [1] DEBUG - Statement Id: [DAO00201_GetList] PreparedStatement : [select *              from TM_REPORT_DETAIL               where                             TM_REPORT_DETAIL.REPORT_CODE = 'IPD24P01401'                       and                           TM_REPORT_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by PARAMETER_INDEX]
2019-08-15 10:28:15,744 [1] DEBUG - Statement Id: [DAO00203_GetList] PreparedStatement : [select *              from TM_REPORT_SUB_DEFINITION               where                             TM_REPORT_SUB_DEFINITION.REPORT_CODE = 'IPD24P01401'                       and                           TM_REPORT_SUB_DEFINITION.BENHVIEN_ID = 'HLU01'                                     order by REPORT_SUB_DEFINITION_ID]
2019-08-15 10:28:15,775 [1] DEBUG - Statement Id: [DAO00201_GetListByParentReportID] PreparedStatement : [select RD.*              from TM_REPORT AS R              INNER JOIN TM_REPORT_SUB_DEFINITION AS RS ON R.REPORT_CODE = RS.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              INNER JOIN TM_REPORT_DETAIL AS RD ON RD.REPORT_CODE = RS.SUB_REPORT_CODE AND RD.BENHVIEN_ID = RS.BENHVIEN_ID              where R.REPORT_CODE  = 'IPD24P01401' AND R.BENHVIEN_ID = 'HLU01']
2019-08-15 10:28:15,860 [1] DEBUG - Statement Id: [DAO00203_GetListReportSubFileByReportID] PreparedStatement : [select R.*              from TM_REPORT_SUB_DEFINITION AS RS              inner join TM_REPORT AS R ON RS.SUB_REPORT_CODE = R.REPORT_CODE AND R.BENHVIEN_ID = RS.BENHVIEN_ID              where RS.REPORT_CODE = 'IPD24P01401' AND RS.BENHVIEN_ID = 'HLU01']
2019-08-15 10:28:15,926 [1] DEBUG - Statement Id: [DAO00204_GetListParameter] PreparedStatement : [SELECT SUBSTRING(p.name, 2, LEN(p.name) - 1) AS PARAMETER, p.parameter_id AS Idx, CONVERT(varchar(1),p.is_nullable) as Allow_Null              FROM sys.procedures sp              INNER JOIN sys.parameters p ON sp.object_id = p.object_id              WHERE sp.name = 'IPD24P01401_YLT'              ORDER BY p.parameter_id]
2019-08-15 10:28:15,987 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [IPD24P01401_YLT]
2019-08-15 10:28:15,987 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@SOTIEPNHAN=[PARAMETERS.SOTIEPNHAN,27124], @SOKHAMBENH=[PARAMETERS.SOKHAMBENH,82613], @MABENHVIEN=[PARAMETERS.MABENHVIEN,HLU01]]
2019-08-15 10:28:15,987 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@SOTIEPNHAN=[Int64, System.Int64], @SOKHAMBENH=[Int64, System.Int64], @MABENHVIEN=[String, System.String]]
2019-08-15 10:28:17,468 [1] DEBUG - Statement Id: [DAO00200_GetSettingReportPrinting] PreparedStatement : [SELECT DICTIONARY_CODE AS REPORT_CODE, DICTIONARY_NAME AS COMPUTER_NAME, DICTIONARY_NAME_EN AS NAME_PRINTER          FROM LST_DICTIONARY          WHERE BENHVIEN_ID = 'HLU01' AND ENABLED = '1' AND DICTIONARY_TYPE_CODE = 'Report_Printer_Setting'          AND DICTIONARY_CODE = 'IPD24P01401' AND DICTIONARY_NAME = 'GMC-HAIPN6']
2019-08-15 10:28:29,556 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:30,605 [1] DEBUG - Statement Id: [DAO00062_GetDSYLenhThuocByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, ba.TIEPNHAN_ID, kb.* from TT_NOITRU_KHAMBENH kb        left join TT_NOITRU_BENHAN ba        on kb.BENHAN_ID = ba.BENHAN_ID        where ba.BENHNHAN_ID = '23165'        and kb.ISYLENHVTYT = '1'        and kb.BENHVIEN_ID = 'HLU01'         and           convert(date, NGAYLAP) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYLAP) <= convert(date, '8/15/2019 12:00:00 AM')                 order by KHAMBENH_ID        desc]
2019-08-15 10:28:32,801 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR15'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:33,646 [1] DEBUG - Statement Id: [DAO00078_GetDSBBHoiChanByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, bbhc.*, isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID) as KHOADIEUTRI_ID from TT_BIENBANHOICHAN bbhc          left join TT_NOITRU_BENHAN ba        on bbhc.BENHAN_ID = ba.BENHAN_ID          left join TT_NOITRU_LUUTRU lt        on bbhc.LUUTRU_ID = lt.LUUTRU_ID          where bbhc.BENHNHAN_ID = '23165'        and bbhc.BENHVIEN_ID = 'HLU01'         and           convert(date, THOIGIANHOICHAN) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, THOIGIANHOICHAN) <= convert(date, '8/15/2019 12:00:00 AM')                 order by BIENBANHOICHAN_ID        desc]
2019-08-15 10:28:34,247 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'HinhThucHoiChan'                 order by LST_DICTIONARY.IDX]
2019-08-15 10:28:34,303 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'LyDoHoiChan'                 order by LST_DICTIONARY.IDX]
2019-08-15 10:28:36,027 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR16'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:36,195 [1] DEBUG - Statement Id: [DAO00095_GetDSDocuments] PreparedStatement : [select D.SOBENHAN,A.*            from TT_DOCUMENTS A            inner join TT_BENHNHAN B on A.BENHNHAN_ID =  B.BENHNHAN_ID            inner join TT_TIEPNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID            left join TT_NOITRU_BENHAN D on D.TIEPNHAN_ID = C.TIEPNHAN_ID            where A.BENHNHAN_ID  = '23165'            and A.BENHVIEN_ID  = 'HLU01'             and                   convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:28:36,240 [1] DEBUG - Statement Id: [DAO00116_GetTTDichVuCLS] PreparedStatement : [select clskq.CLSKETQUA_ID, isnull (clskq.BENHAN_ID, pt.BENHAN_ID) as BENHAN_ID,              pt.PHAUTHUAT_ID,              ba.SOBENHAN,              isnull (tn.TIEPNHAN_ID, pt.TIEPNHAN_ID) as TIEPNHAN_ID              from TT_CLSKETQUA clskq              left join TT_TIEPNHAN tn              on clskq.TIEPNHAN_ID = tn.TIEPNHAN_ID              full join TT_PHAUTHUAT pt              on pt.TIEPNHAN_ID = tn.TIEPNHAN_ID              left join TT_NOITRU_BENHAN ba              on (clskq.BENHAN_ID = ba.BENHAN_ID) or (pt.BENHAN_ID = ba.BENHAN_ID)              where tn.BENHNHAN_ID = '23165'               and                   convert(date, clskq.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, clskq.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:28:36,646 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKem] PreparedStatement : [select * from TT_FILE_DINHKEM              where              BENHVIEN_ID = 'HLU01'               and                   (REF_ID = '3718' and REF_TABLE = 'TT_PHAUTHUAT')               and                   (REF_ID = '94469' and REF_TABLE = 'TT_CLSKETQUA')               and                   convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:28:36,681 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKemHSBA] PreparedStatement : [select lt.LOAIHSBA_ID, lt.KIEUHSBA_ID, f.* from TT_FILE_DINHKEM f              left join TT_BENHAN_MUONTRA mt on f.REF_ID = mt.SOTAILIEU              left join TT_BENHAN_LUUTRU lt on lt.HOSO_ID = mt.HOSO_ID              left join TT_NOITRU_BENHAN ba on ba.BENHAN_ID = lt.BENHAN_ID              where f.REF_TABLE = 'TT_BENHAN_MUONTRA'              and f.BENHVIEN_ID = 'HLU01'              and ba.BENHNHAN_ID = '23165'               and                   convert(date, f.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, f.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:28:38,039 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR17'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:39,207 [1] DEBUG - Statement Id: [DAO00217_GetDSTTDichVuByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, isnull(clskq.NGAYGIOTHUCHIEN, pt.THOIGIANBATDAU) as THOIGIANTHUCHIEN, isnull(clskq.BACSITHUCHIEN_ID,pt.NGUOIKHOA_ID) as BACSITHUCHIEN_ID,        tn.SOTIEPNHAN, dv.*, vp.SOLUONG from TT_DVYEUCAU dv        left join TT_NOITRU_BENHAN ba on dv.BENHAN_ID = ba.BENHAN_ID        left join TT_CLSKETQUA clskq on clskq.DVYEUCAU_ID = dv.DVYEUCAU_ID        left join TT_NGOAITRU_KHAMBENH kb on dv.KHAMBENH_NGOAITRU_ID = kb.KHAMBENH_ID        left join TT_PHAUTHUAT pt on pt.PHAUTHUAT_ID in (select PHAUTHUAT_ID from TT_PHAUTHUAT_YEUCAU where DVYEUCAU_ID = dv.DVYEUCAU_ID)        left join TT_TIEPNHAN tn on dv.TIEPNHAN_ID = tn.TIEPNHAN_ID        left join TT_VIENPHI vp on vp.REF_ID = dv.DVYEUCAU_ID and REF_TABLE = 'TT_DVYEUCAU'        where tn.BENHNHAN_ID = '23165'        and dv.BENHVIEN_ID = 'HLU01' and dv.HUYYEUCAU='0'           and           convert(date, NGAYGIOYEUCAU) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYGIOYEUCAU) <= convert(date, '8/15/2019 12:00:00 AM')                 order by DVYEUCAU_ID        desc]
2019-08-15 10:28:42,653 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:42,886 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"203267"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"203267"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:43,956 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:44,056 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5588","DVYEUCAU_ID":"203266"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5588","DVYEUCAU_ID":"203266"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:44,225 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:44,317 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"203265"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"203265"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:44,483 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:44,574 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1474","DVYEUCAU_ID":"203261"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1474","DVYEUCAU_ID":"203261"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:44,747 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:44,837 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1468","DVYEUCAU_ID":"203253"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1468","DVYEUCAU_ID":"203253"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:44,960 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:45,051 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4107","DVYEUCAU_ID":"203252"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4107","DVYEUCAU_ID":"203252"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:45,165 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:45,256 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4873","DVYEUCAU_ID":"203251"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4873","DVYEUCAU_ID":"203251"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:45,401 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:45,491 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"203250"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"203250"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:45,597 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:28:45,685 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"203249"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"203249"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:28:47,051 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR18'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:28:47,608 [1] DEBUG - Statement Id: [DAO00063_GetDSThuocByBenhNhanID] PreparedStatement : [select DUOC_ID, SOLUONG, NGAYTAO, SONGAY from TT_NOITRU_TOATHUOC        where exists (select KHAMBENH_ID from TT_NOITRU_KHAMBENH        where TT_NOITRU_TOATHUOC.KHAMBENH_ID = '' and ISYLENHVTYT = '0'        and exists (select TIEPNHAN_ID from TT_TIEPNHAN where TT_NOITRU_KHAMBENH.TIEPNHAN_ID = '' and BENHNHAN_ID = '23165'))        and BENHVIEN_ID = 'HLU01'           and           convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                   union          select A.DUOC_ID, SOLUONG, A.NGAYTAO, SONGAY        from TT_NGOAITRU_TOATHUOC A        inner join TM_DUOC B on B.DUOC_ID = A.DUOC_ID        left join TM_LOAIDUOC C on C.LOAIDUOC_ID = B.LOAIDUOC_ID        where exists (select KHAMBENH_ID from TT_NGOAITRU_KHAMBENH        where TT_NGOAITRU_KHAMBENH.KHAMBENH_ID = '' and exists (select TIEPNHAN_ID from TT_TIEPNHAN where TT_NGOAITRU_KHAMBENH.TIEPNHAN_ID = '' and BENHNHAN_ID = '23165'))        and A.BENHVIEN_ID = 'HLU01'           and           convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by NGAYTAO]
2019-08-15 10:29:00,665 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR06'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:29:00,893 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '23165'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:29:01,256 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '23165'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:29:01,294 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '23165'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:29:03,697 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR07'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:29:04,581 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] PreparedStatement : [select dvyc.DICHVU_ID as DICHVUCHINH_ID, dvyc.NOIYEUCAU_ID,dvyc.DICHVU_ID        ,KETQUA.[CLSKETQUA_ID]        ,KETQUA.[SOPHIEUXETNGHIEM]        ,KETQUA.[TIEPNHAN_ID]        ,KETQUA.[BENHAN_ID]        ,KETQUA.[LUUTRU_ID]        ,KETQUA.[LUUTRUCHITIET_ID]        ,KETQUA.[SOVAOVIEN]        ,KETQUA.[MAYTE]        ,KETQUA.[TENBENHNHAN]        ,KETQUA.[NAMSINH]        ,KETQUA.[GIOITINH]        ,KETQUA.[DIACHI]        ,KETQUA.[NHOMDICHVU_ID]        ,KETQUA.[NGAYCHIDINH]        ,KETQUA.[NOICHIDINH_ID]        ,KETQUA.[BACSICHIDINH_ID]        ,KETQUA.[BACSICHIDINH]        ,KETQUA.[NGAYTHUCHIEN]        ,ISNULL(KETQUA.[NGAYGIOTHUCHIEN],DVYC.THOIGIANKHOADULIEU) as THOIGIANTHUCHIEN        ,KETQUA.[NGAYGIOTHUCHIEN]        ,KETQUA.[GIOTHUCHIEN]        ,KETQUA.[THANGTHUCHIEN]        ,KETQUA.[NAMTHUCHIEN]        ,KETQUA.[CHUYENKHOATHUCHIEN_ID]        ,ISNULL(KETQUA.[NOITHUCHIEN_ID],DVYC.[NOITHUCHIEN_ID]) AS NOITHUCHIEN_ID        ,KETQUA.[BACSITHUCHIEN_ID]        ,dvyc.NGUOIKHOA_ID AS BACSIKETLUAN_ID        ,KETQUA.[BACSIGMHS_ID]        ,KETQUA.[KYTHUATVIEN01_ID]        ,KETQUA.[KYTHUATVIEN02_ID]        ,KETQUA.[DIEUDUONG_ID]        ,KETQUA.[CHANDOANLAMSANG]        ,KETQUA.[THUCHIENBENNGOAI]        ,KETQUA.[BENHVIENTHUCHIEN_ID]        ,KETQUA.[KHOABENNGOAI_ID]        ,KETQUA.[TENBACSIBENNGOAI]        ,KETQUA.[GUINGOAI]        ,KETQUA.[NOIGUIDEN_ID]        ,KETQUA.[ICD_ID1]        ,KETQUA.[ICD_ID2]        ,KETQUA.[ICD_ID3]        ,KETQUA.[DIUNGTHUOC]        ,KETQUA.[TIENME]        ,KETQUA.[DACBIET]        ,KETQUA.[KQCUOICUNG]        ,KETQUA.[THONGTINNHAN]        ,KETQUA.[KETLUANKSK]        ,KETQUA.[DENGHI]        ,KETQUA.[SINHTHIET]        ,KETQUA.[CLOTEST]        ,KETQUA.[PHOTO]        ,KETQUA.[VIDEO]        ,KETQUA.[TIEMCANQUANG]        ,KETQUA.[VUNGKHAOSAT]        ,KETQUA.[MACH]        ,KETQUA.[HUYETAP]        ,KETQUA.[NHIPTHO]        ,KETQUA.[NHIETDO]        ,KETQUA.[CHIEUCAO]        ,KETQUA.[CANNANG]        ,KETQUA.[BSA]        ,KETQUA.[TINHTRANGDIENNAO]        ,KETQUA.[GPB_AMSO]        ,KETQUA.[GPB_PHANLOAIKETQUA_ID]        ,KETQUA.[GPB_PHUONGPHAPLAYBENHPHAM_ID]        ,KETQUA.[GPB_SOMAU]        ,KETQUA.[GPB_SOLUONGMAU]        ,KETQUA.[GPB_TOPO_ID]        ,KETQUA.[GPB_TOPOREGIONS_ID]        ,KETQUA.[GPB_MORPHO_ID]        ,KETQUA.[GPB_ETIO_ID]        ,KETQUA.[GPB_DAITHE]        ,KETQUA.[GPB_VITHE]        ,KETQUA.[GPB_NHUOM_HE]        ,KETQUA.[GPB_NHUOM_PAS]        ,KETQUA.[GPB_NHUOM_TRI]        ,KETQUA.[GPB_NHUOM_AFB]        ,KETQUA.[GPB_NHUOM_GIEMSA]        ,KETQUA.[GPB_NHUOM_PAPANICOLAOU]        ,KETQUA.[GPB_NHUOM_RETICULINE]        ,KETQUA.[GPB_NHUOM_OTHER]        ,KETQUA.[GPB_HOAMIENDICH]        ,KETQUA.[GPB_HOAMIENDICHHUYNHQUANG]        ,KETQUA.[GPB_HOICHAN]        ,KETQUA.[GPB_MAUTHU]        ,KETQUA.[GPB_NOILAYMAUTHU]        ,KETQUA.[HLVIKHUAN1]        ,KETQUA.[HLVIKHUAN2]        ,KETQUA.[LOAIFILM_ID]        ,KETQUA.[MAPHIM]        ,KETQUA.[SOPHIMSUDUNG]        ,KETQUA.[LOAIFILM_ID2]        ,KETQUA.[SOPHIMSUDUNG2]        ,KETQUA.[LOAIFILM_ID3]        ,KETQUA.[SOPHIMSUDUNG3]        ,KETQUA.[THIETBI_ID]        ,KETQUA.[MAUTHU_ID]        ,KETQUA.[THOIGIANNHAN]        ,KETQUA.[MAU]        ,KETQUA.[LOAITHUOCCANQUANG_ID]        ,KETQUA.[MA]        ,KETQUA.[IDHINH]        ,KETQUA.[SOPHIMHU]        ,KETQUA.[LOAIPHIMHU_ID]        ,KETQUA.[DOSOI]        ,KETQUA.[DOSOI_ID]        ,KETQUA.[BANKINHSOI]        ,KETQUA.[SODT]        ,KETQUA.[KYTHUAT]        ,KETQUA.[KYTHUAT_TEXT]        ,KETQUA.[RESISTANCEMARKERS]        ,KETQUA.[SOTHUOCSUDUNG]        ,KETQUA.[SOLUONGONG]        ,KETQUA.[SOMLMAU]        ,KETQUA.[THOIGIANLAYMAU]        ,KETQUA.[THOIGIANNHANMAU]        ,KETQUA.[THOIGIANCDBENHPHAM]        ,KETQUA.[DUNGDICHCD_ID]        ,KETQUA.[SOONGTHUCNHAN]        ,KETQUA.[VITRISOI]        ,KETQUA.[SAMPLEID]        ,KETQUA.[PHANLOAIKETQUA_ID]        ,KETQUA.[MOTA]        ,KETQUA.[MOTA_TEXT]        ,KETQUA.[KETLUAN]        ,KETQUA.[GHICHU]        ,dvyc.[TRANGTHAI]        ,KETQUA.[KHOADULIEU]        ,KETQUA.[NGAYKHOADULIEU]        ,KETQUA.[THOIGIANKHOADULIEU]        ,KETQUA.[NGUOIKHOA_ID]        ,KETQUA.[MANGUOIKHOA]        ,KETQUA.[TENNGUOIKHOA]        ,KETQUA.[BENHVIEN_ID]        ,KETQUA.[NGAYTAO]        ,KETQUA.[NGUOITAO_ID]        ,KETQUA.[NGAYCAPNHAT]        ,KETQUA.[NGUOICAPNHAT_ID]        ,ISNULL(KETQUA.DVYEUCAU_ID, dvyc.DVYEUCAU_ID) as DVYEUCAUCHINH_ID        from TT_DVYEUCAU dvyc        inner JOIN (select distinct DVYEUCAU_ID, CLSKETQUA_ID from TT_CLSKETQUACHITIET) kq ON dvyc.DVYEUCAU_ID =kq.DVYEUCAU_ID        inner join TM_DICHVU dv on dvyc.DICHVU_ID = dv.DICHVU_ID        inner join TT_CLSKETQUA KETQUA ON KETQUA.CLSKETQUA_ID = KQ.CLSKETQUA_ID        inner join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID                 where        dvyc.BENHNHAN_ID =  @param0  and dvyc.TRANGTHAI = 'HOANTAT'        and LEFT(ndv.MANHOMDICHVU, 2) = '01'                    and dvyc.NGAYYEUCAU >= '2/15/2019 12:00:00 AM'                    and dvyc.NGAYYEUCAU <= '8/15/2019 12:00:00 AM'                 order by dvyc.DVYEUCAU_ID DESC]
2019-08-15 10:29:04,581 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:29:04,581 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
--------------------------------------------------------------------------------
2019-08-15 10:42:14,954 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 10:42:15,307 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:42:15,350 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:42:16,060 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:16,415 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:42:21,731 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 10:42:21,774 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:42:23,512 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:42:23,603 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:42:24,420 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 10:42:24,560 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 10:42:24,645 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 10:42:24,725 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 10:42:24,809 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 10:42:24,894 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 10:42:24,966 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 10:42:25,057 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 10:42:25,378 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 10:42:25,893 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 10:42:25,965 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:42:26,040 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 10:42:26,085 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:42:28,050 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 10:42:28,095 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 10:42:31,779 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 10:42:31,845 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 10:42:32,049 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 10:42:32,123 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 10:42:32,158 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 10:42:32,229 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 10:42:33,164 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:34,108 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 10:42:39,633 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 10:42:39,664 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 10:42:39,769 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:39,914 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:40,053 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 10:42:40,056 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:42:40,056 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:42:40,088 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 10:42:40,088 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:42:40,088 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:42:40,224 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:40,507 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:48,777 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:42:49,115 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 10:42:49,593 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 10:43:28,547 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:43:28,745 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:43:29,299 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:43:29,610 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:43:29,611 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:43:29,611 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:43:29,669 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:43:29,729 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:43:29,729 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:43:29,729 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:43:30,695 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:43:30,757 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:43:30,758 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:43:30,758 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:43:36,090 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 10:43:36,151 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:43:36,151 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:43:36,151 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:43:37,916 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR18'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:43:42,329 [1] DEBUG - Statement Id: [DAO00063_GetDSThuocByBenhNhanID] PreparedStatement : [select TT.DUOC_ID, TT.SOLUONG, TT.NGAYTAO, TT.SONGAY        from TT_NOITRU_TOATHUOC TT        inner join TT_NOITRU_KHAMBENH KB ON KB.KHAMBENH_ID = TT.KHAMBENH_ID        inner join TT_NOITRU_BENHAN BA ON BA.BENHAN_ID = KB.BENHAN_ID        where BA.BENHNHAN_ID = 23165        AND BA.BENHVIEN_ID = 'HLU01'        AND TT.ISYLENHVTYT = '0'         and           convert(date, TT.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, TT.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                   union                     select A.DUOC_ID, A.SOLUONG, A.NGAYTAO, A.SONGAY        from TT_NGOAITRU_TOATHUOC A        inner join TT_NGOAITRU_KHAMBENH KB ON KB.KHAMBENH_ID = A.KHAMBENH_ID        inner join TM_DUOC B on B.DUOC_ID = A.DUOC_ID        left join TM_LOAIDUOC C on C.LOAIDUOC_ID = B.LOAIDUOC_ID        WHERE KB.BENHNHAN_ID = 23165        AND KB.BENHVIEN_ID = 'HLU01'         and           convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by A.NGAYTAO]
2019-08-15 10:43:42,894 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
--------------------------------------------------------------------------------
2019-08-15 10:45:16,161 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 10:45:16,454 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:45:16,508 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:45:17,060 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:45:17,370 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:45:23,248 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 10:45:23,423 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:45:25,227 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:45:25,325 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:45:26,608 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 10:45:26,758 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 10:45:26,840 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 10:45:26,936 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 10:45:27,022 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 10:45:27,106 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 10:45:27,184 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 10:45:27,268 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 10:45:27,655 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 10:45:28,186 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 10:45:29,212 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:45:29,289 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 10:45:29,337 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:45:37,570 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 10:45:37,618 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 10:45:44,543 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 10:45:44,618 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 10:45:44,658 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 10:45:44,748 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 10:45:44,790 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 10:45:44,878 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 10:45:45,813 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:45:46,811 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 10:45:52,001 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 10:45:52,316 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 10:45:52,446 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:45:52,593 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:45:52,720 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 10:45:52,722 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:45:52,722 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:45:52,757 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 10:45:52,757 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:45:52,757 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:45:52,892 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:45:53,084 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:46:01,745 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:46:01,986 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 10:46:02,493 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 10:46:05,887 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:46:06,203 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:46:07,050 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:46:07,113 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:46:07,113 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:46:07,113 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:46:07,178 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:46:07,700 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:46:07,700 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:46:07,700 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:46:08,816 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:46:08,881 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:46:08,881 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:46:08,881 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:46:14,718 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 10:46:14,778 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:46:14,778 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:46:14,778 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:46:16,069 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR18'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:46:20,063 [1] DEBUG - Statement Id: [DAO00063_GetDSThuocByBenhNhanID] PreparedStatement : [select TT.DUOC_ID, TT.SOLUONG, TT.NGAYTAO, TT.SONGAY        from TT_NOITRU_TOATHUOC TT        inner join TT_NOITRU_KHAMBENH KB ON KB.KHAMBENH_ID = TT.KHAMBENH_ID        inner join TT_NOITRU_BENHAN BA ON BA.BENHAN_ID = KB.BENHAN_ID        where BA.BENHNHAN_ID = 23165        AND BA.BENHVIEN_ID = 'HLU01'        AND ISYLENHVTYT = '0'         and           convert(date, TT.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, TT.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                   union                     select A.DUOC_ID, A.SOLUONG, A.NGAYTAO, A.SONGAY        from TT_NGOAITRU_TOATHUOC A        inner join TT_NGOAITRU_KHAMBENH KB ON KB.KHAMBENH_ID = A.KHAMBENH_ID        inner join TM_DUOC B on B.DUOC_ID = A.DUOC_ID        left join TM_LOAIDUOC C on C.LOAIDUOC_ID = B.LOAIDUOC_ID        WHERE KB.BENHNHAN_ID = 23165        AND KB.BENHVIEN_ID = 'HLU01'         and           convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by A.NGAYTAO]
2019-08-15 10:46:20,739 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
--------------------------------------------------------------------------------
2019-08-15 10:48:49,606 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 10:48:49,916 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:48:49,964 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:48:50,444 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:48:50,690 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:48:56,307 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 10:48:56,492 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:48:58,061 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:48:58,219 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:48:59,371 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 10:48:59,520 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 10:48:59,601 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 10:48:59,683 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 10:48:59,759 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 10:48:59,845 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 10:48:59,923 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 10:49:00,001 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 10:49:00,126 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 10:49:00,637 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 10:49:00,675 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:49:00,754 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 10:49:00,789 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:49:09,678 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 10:49:09,720 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 10:49:17,718 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 10:49:17,795 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 10:49:17,835 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 10:49:17,921 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 10:49:17,962 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 10:49:18,051 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 10:49:19,049 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:20,253 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 10:49:25,691 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 10:49:25,722 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 10:49:25,803 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:25,962 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:26,114 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 10:49:26,116 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:49:26,116 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:49:26,149 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 10:49:26,150 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:49:26,150 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:49:26,296 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:26,534 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:35,220 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:35,638 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 10:49:36,132 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 10:49:39,186 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:39,840 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:40,934 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:49:41,798 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:49:41,798 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:49:41,798 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:49:43,284 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:49:43,930 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:49:43,930 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:49:43,930 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:49:45,186 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:49:46,272 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:49:46,272 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:49:46,272 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:49:49,263 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 10:49:49,560 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:49:49,560 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:49:49,560 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:49:51,903 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR18'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:49:55,142 [1] DEBUG - Statement Id: [DAO00063_GetDSThuocByBenhNhanID] PreparedStatement : [SELECT * FROM (        select TT.DUOC_ID, TT.SOLUONG, TT.NGAYTAO, TT.SONGAY, TT.NGAYTAO        from TT_NOITRU_TOATHUOC TT        inner join TT_NOITRU_KHAMBENH KB ON KB.KHAMBENH_ID = TT.KHAMBENH_ID        inner join TT_NOITRU_BENHAN BA ON BA.BENHAN_ID = KB.BENHAN_ID        where BA.BENHNHAN_ID = 23165        AND BA.BENHVIEN_ID = 'HLU01'        AND ISYLENHVTYT = '0'         and           convert(date, TT.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, TT.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                   union                     select A.DUOC_ID, A.SOLUONG, A.NGAYTAO, A.SONGAY, A.NGAYTAO        from TT_NGOAITRU_TOATHUOC A        inner join TT_NGOAITRU_KHAMBENH KB ON KB.KHAMBENH_ID = A.KHAMBENH_ID        inner join TM_DUOC B on B.DUOC_ID = A.DUOC_ID        left join TM_LOAIDUOC C on C.LOAIDUOC_ID = B.LOAIDUOC_ID        WHERE KB.BENHNHAN_ID = 23165        AND KB.BENHVIEN_ID = 'HLU01'         and           convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 ) AS TEMP        ORDER BY TEMP.NGAYTAO]
2019-08-15 10:49:56,266 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
--------------------------------------------------------------------------------
2019-08-15 10:53:32,557 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 10:53:32,857 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:53:32,897 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:53:33,367 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:53:33,671 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:53:39,185 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 10:53:39,268 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 10:53:40,827 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 10:53:40,916 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 10:53:41,763 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 10:53:41,891 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 10:53:41,967 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 10:53:42,043 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 10:53:42,136 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 10:53:42,250 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 10:53:42,336 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 10:53:42,420 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 10:53:42,500 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 10:53:43,016 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 10:53:43,056 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:53:43,134 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 10:53:43,169 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 10:53:44,019 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 10:53:44,055 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 10:53:46,021 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 10:53:46,086 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 10:53:46,120 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 10:53:46,196 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 10:53:46,229 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 10:53:46,312 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 10:53:47,257 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:53:48,203 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 10:53:52,994 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 10:53:54,563 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 10:53:57,161 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:53:57,279 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:53:57,433 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 10:53:57,436 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:53:57,436 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:53:57,521 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 10:53:57,522 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 10:53:57,522 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 10:53:57,671 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:53:57,911 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:05,886 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:06,074 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 10:54:06,373 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 10:54:15,668 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:16,013 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:17,037 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:54:17,158 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:54:17,158 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:54:17,158 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:54:17,220 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:54:17,313 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:54:17,313 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:54:17,313 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:54:18,416 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '']
2019-08-15 10:54:18,843 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:54:18,843 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,null]]
2019-08-15 10:54:18,843 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[System.DBNull, null]]
2019-08-15 10:54:21,917 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 10:54:21,972 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:54:21,973 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:54:21,973 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:54:23,588 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR18'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:28,941 [1] DEBUG - Statement Id: [DAO00063_GetDSThuocByBenhNhanID] PreparedStatement : [SELECT * FROM (        select TT.DUOC_ID, TT.SOLUONG, TT.NGAYTAO, TT.SONGAY        from TT_NOITRU_TOATHUOC TT        inner join TT_NOITRU_KHAMBENH KB ON KB.KHAMBENH_ID = TT.KHAMBENH_ID        inner join TT_NOITRU_BENHAN BA ON BA.BENHAN_ID = KB.BENHAN_ID        where BA.BENHNHAN_ID = 23165        AND BA.BENHVIEN_ID = 'HLU01'        AND ISYLENHVTYT = '0'         and           convert(date, TT.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, TT.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                   union                     select A.DUOC_ID, A.SOLUONG, A.NGAYTAO, A.SONGAY        from TT_NGOAITRU_TOATHUOC A        inner join TT_NGOAITRU_KHAMBENH KB ON KB.KHAMBENH_ID = A.KHAMBENH_ID        inner join TM_DUOC B on B.DUOC_ID = A.DUOC_ID        left join TM_LOAIDUOC C on C.LOAIDUOC_ID = B.LOAIDUOC_ID        WHERE KB.BENHNHAN_ID = 23165        AND KB.BENHVIEN_ID = 'HLU01'         and           convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 ) AS TEMP        ORDER BY TEMP.NGAYTAO]
2019-08-15 10:54:49,547 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR17'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:50,016 [1] DEBUG - Statement Id: [DAO00217_GetDSTTDichVuByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, isnull(clskq.NGAYGIOTHUCHIEN, pt.THOIGIANBATDAU) as THOIGIANTHUCHIEN, isnull(clskq.BACSITHUCHIEN_ID,pt.NGUOIKHOA_ID) as BACSITHUCHIEN_ID,        tn.SOTIEPNHAN, dv.*, vp.SOLUONG from TT_DVYEUCAU dv        left join TT_NOITRU_BENHAN ba on dv.BENHAN_ID = ba.BENHAN_ID        left join TT_CLSKETQUA clskq on clskq.DVYEUCAU_ID = dv.DVYEUCAU_ID        left join TT_NGOAITRU_KHAMBENH kb on dv.KHAMBENH_NGOAITRU_ID = kb.KHAMBENH_ID        left join TT_PHAUTHUAT pt on pt.PHAUTHUAT_ID in (select PHAUTHUAT_ID from TT_PHAUTHUAT_YEUCAU where DVYEUCAU_ID = dv.DVYEUCAU_ID)        left join TT_TIEPNHAN tn on dv.TIEPNHAN_ID = tn.TIEPNHAN_ID        left join TT_VIENPHI vp on vp.REF_ID = dv.DVYEUCAU_ID and REF_TABLE = 'TT_DVYEUCAU'        where tn.BENHNHAN_ID = '23165'        and dv.BENHVIEN_ID = 'HLU01' and dv.HUYYEUCAU='0'           and           convert(date, NGAYGIOYEUCAU) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYGIOYEUCAU) <= convert(date, '8/15/2019 12:00:00 AM')                 order by DVYEUCAU_ID        desc]
2019-08-15 10:54:50,628 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:53,938 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"203267"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"203267"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:54,076 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:54,171 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5588","DVYEUCAU_ID":"203266"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5588","DVYEUCAU_ID":"203266"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:54,900 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:54,996 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"203265"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"203265"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:55,128 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:55,224 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1474","DVYEUCAU_ID":"203261"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1474","DVYEUCAU_ID":"203261"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:55,357 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:55,454 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1468","DVYEUCAU_ID":"203253"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1468","DVYEUCAU_ID":"203253"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:55,537 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:55,635 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4107","DVYEUCAU_ID":"203252"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4107","DVYEUCAU_ID":"203252"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:55,716 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:55,812 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4873","DVYEUCAU_ID":"203251"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4873","DVYEUCAU_ID":"203251"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:56,198 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:56,288 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"203250"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"203250"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:56,362 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 10:54:56,463 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"203249"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"203249"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:54:58,464 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR16'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:54:58,901 [1] DEBUG - Statement Id: [DAO00095_GetDSDocuments] PreparedStatement : [select D.SOBENHAN,A.*            from TT_DOCUMENTS A            inner join TT_BENHNHAN B on A.BENHNHAN_ID =  B.BENHNHAN_ID            inner join TT_TIEPNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID            left join TT_NOITRU_BENHAN D on D.TIEPNHAN_ID = C.TIEPNHAN_ID            where A.BENHNHAN_ID  = '23165'            and A.BENHVIEN_ID  = 'HLU01'             and                   convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:54:58,936 [1] DEBUG - Statement Id: [DAO00116_GetTTDichVuCLS] PreparedStatement : [select clskq.CLSKETQUA_ID, isnull (clskq.BENHAN_ID, pt.BENHAN_ID) as BENHAN_ID,              pt.PHAUTHUAT_ID,              ba.SOBENHAN,              isnull (tn.TIEPNHAN_ID, pt.TIEPNHAN_ID) as TIEPNHAN_ID              from TT_CLSKETQUA clskq              left join TT_TIEPNHAN tn              on clskq.TIEPNHAN_ID = tn.TIEPNHAN_ID              full join TT_PHAUTHUAT pt              on pt.TIEPNHAN_ID = tn.TIEPNHAN_ID              left join TT_NOITRU_BENHAN ba              on (clskq.BENHAN_ID = ba.BENHAN_ID) or (pt.BENHAN_ID = ba.BENHAN_ID)              where tn.BENHNHAN_ID = '23165'               and                   convert(date, clskq.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, clskq.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:54:58,981 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKem] PreparedStatement : [select * from TT_FILE_DINHKEM              where              BENHVIEN_ID = 'HLU01'               and                   (REF_ID = '3718' and REF_TABLE = 'TT_PHAUTHUAT')               and                   (REF_ID = '94469' and REF_TABLE = 'TT_CLSKETQUA')               and                   convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:54:59,069 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKemHSBA] PreparedStatement : [select lt.LOAIHSBA_ID, lt.KIEUHSBA_ID, f.* from TT_FILE_DINHKEM f              left join TT_BENHAN_MUONTRA mt on f.REF_ID = mt.SOTAILIEU              left join TT_BENHAN_LUUTRU lt on lt.HOSO_ID = mt.HOSO_ID              left join TT_NOITRU_BENHAN ba on ba.BENHAN_ID = lt.BENHAN_ID              where f.REF_TABLE = 'TT_BENHAN_MUONTRA'              and f.BENHVIEN_ID = 'HLU01'              and ba.BENHNHAN_ID = '23165'               and                   convert(date, f.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, f.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:55:00,642 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR15'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:01,060 [1] DEBUG - Statement Id: [DAO00078_GetDSBBHoiChanByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, bbhc.*, isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID) as KHOADIEUTRI_ID from TT_BIENBANHOICHAN bbhc          left join TT_NOITRU_BENHAN ba        on bbhc.BENHAN_ID = ba.BENHAN_ID          left join TT_NOITRU_LUUTRU lt        on bbhc.LUUTRU_ID = lt.LUUTRU_ID          where bbhc.BENHNHAN_ID = '23165'        and bbhc.BENHVIEN_ID = 'HLU01'         and           convert(date, THOIGIANHOICHAN) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, THOIGIANHOICHAN) <= convert(date, '8/15/2019 12:00:00 AM')                 order by BIENBANHOICHAN_ID        desc]
2019-08-15 10:55:02,277 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:02,752 [1] DEBUG - Statement Id: [DAO00062_GetDSYLenhThuocByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, ba.TIEPNHAN_ID, kb.* from TT_NOITRU_KHAMBENH kb        left join TT_NOITRU_BENHAN ba        on kb.BENHAN_ID = ba.BENHAN_ID        where ba.BENHNHAN_ID = '23165'        and kb.ISYLENHVTYT = '1'        and kb.BENHVIEN_ID = 'HLU01'         and           convert(date, NGAYLAP) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYLAP) <= convert(date, '8/15/2019 12:00:00 AM')                 order by KHAMBENH_ID        desc]
2019-08-15 10:55:03,456 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR13'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:03,909 [1] DEBUG - Statement Id: [DAO00062_GetDSYLenhThuocByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, ba.TIEPNHAN_ID, kb.* from TT_NOITRU_KHAMBENH kb        left join TT_NOITRU_BENHAN ba        on kb.BENHAN_ID = ba.BENHAN_ID        where ba.BENHNHAN_ID = '23165'        and kb.ISYLENHVTYT = '0'        and kb.BENHVIEN_ID = 'HLU01'         and           convert(date, NGAYLAP) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYLAP) <= convert(date, '8/15/2019 12:00:00 AM')                 order by KHAMBENH_ID        desc]
2019-08-15 10:55:05,007 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR12'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:05,405 [1] DEBUG - Statement Id: [DAO00061_GetDSBenhAnByBenhNhanID] PreparedStatement : [select ntba.*        ,case        when ntba.LOAIBENHAN = '1' then icd_cc.MAICD        else icd_nt.MAICD + COALESCE(';' + ICD_BENHPHU,'')        end as MAICD        , case        when ntba.LOAIBENHAN = '1' then icd_cc.TENICD + COALESCE( '; ' + CHANDOANRAVIEN, '')        else icd_nt.TENICD + COALESCE('; ' + CHANDOANRAVIEN,'') + (select '; ' + TENICD from [dbo].[SplitString](ICD_BENHPHU,';') as a        left join TM_ICD icd_p on a.s=icd_p.MAICD        group by TENICD        FOR XML PATH ('')        )        end as CHANDOAN        , lt.SOLUUTRU as SOLUUTRU_BGA        , TN.SOBHYT        , DT.TENDOITUONG        from TT_NOITRU_BENHAN ntba        left join TM_ICD icd_nt on ntba.ICD_BENHCHINH = icd_nt.ICD_ID        left join TM_ICD icd_cc on ntba.ICD_KHAMBENH = icd_cc.ICD_ID        left join TT_BENHAN_LUUTRU lt on lt.BENHAN_ID = ntba.BENHAN_ID        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = NTBA.TIEPNHAN_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where ntba.BENHNHAN_ID = '23165'        and ntba.BENHVIEN_ID = 'HLU01'         and           convert(date, ntba.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, ntba.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by ntba.BENHAN_ID desc]
2019-08-15 10:55:06,330 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR20'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:06,633 [1] DEBUG - Statement Id: [DAO00097_GetList] PreparedStatement : [select *        from TM_DUOC_HOATCHAT        where BENHVIEN_ID = 'HLU01' AND HOATCHAT = '1']
2019-08-15 10:55:10,268 [1] DEBUG - Statement Id: [DAO00098_GetList] PreparedStatement : [select *              from TT_BENHNHAN_DIUNG_THUOC               where                             TT_BENHNHAN_DIUNG_THUOC.BENHNHAN_ID = '23165'                       and                           TT_BENHNHAN_DIUNG_THUOC.BENHVIEN_ID = 'HLU01'                                     order by BENHNHAN_DI_UNGTHUOC_ID]
2019-08-15 10:55:14,491 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR10'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:14,614 [1] DEBUG - Statement Id: [DAO00013_GetTienSuBenh] PreparedStatement : [select TIENSUBENH, TIENSUDIUNG              from TT_BENHNHAN              where TT_BENHNHAN.BENHNHAN_ID  = '23165']
2019-08-15 10:55:14,672 [1] DEBUG - Statement Id: [DAO00095_GetDSBenhManTinh] PreparedStatement : [select *              from TT_BENHNHAN_BENHMANTINH              where BENHNHAN_ID  = '23165'              and BENHVIEN_ID  = 'HLU01']
2019-08-15 10:55:16,143 [1] DEBUG - Statement Id: [DAO00098_GetList] PreparedStatement : [select *              from TT_BENHNHAN_DIUNG_THUOC               where                             TT_BENHNHAN_DIUNG_THUOC.BENHNHAN_ID = '23165'                       and                           TT_BENHNHAN_DIUNG_THUOC.BENHVIEN_ID = 'HLU01'                                     order by BENHNHAN_DI_UNGTHUOC_ID]
2019-08-15 10:55:17,967 [1] DEBUG - Statement Id: [DAO00013_GetTienSuBenh] PreparedStatement : [select TIENSUBENH, TIENSUDIUNG              from TT_BENHNHAN              where TT_BENHNHAN.BENHNHAN_ID  = '23165']
2019-08-15 10:55:18,026 [1] DEBUG - Statement Id: [DAO00095_GetDSBenhManTinh] PreparedStatement : [select *              from TT_BENHNHAN_BENHMANTINH              where BENHNHAN_ID  = '23165'              and BENHVIEN_ID  = 'HLU01']
2019-08-15 10:55:19,138 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR09'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:21,474 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '23165')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:55:24,137 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR08'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:26,861 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] PreparedStatement : [select a.* from TT_CLSKETQUA a        join TT_DVYEUCAU b on a.DVYEUCAU_ID = b.DVYEUCAU_ID        where b.BENHNHAN_ID =  @param0  and b.TRANGTHAI = 'HOANTAT'         and           exists (select DICHVU_ID from TM_DICHVU ab join TM_NHOMDICHVU bc on ab.NHOMDICHVU_ID = bc.NHOMDICHVU_ID          where b.DICHVU_ID = ab.DICHVU_ID and left(bc.MANHOMDICHVU,2) in ('02', '03'))                    and a.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and a.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:55:26,861 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:55:26,861 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:55:30,157 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR07'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:30,647 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] PreparedStatement : [select dvyc.DICHVU_ID as DICHVUCHINH_ID, dvyc.NOIYEUCAU_ID,dvyc.DICHVU_ID        ,KETQUA.[CLSKETQUA_ID]        ,KETQUA.[SOPHIEUXETNGHIEM]        ,KETQUA.[TIEPNHAN_ID]        ,KETQUA.[BENHAN_ID]        ,KETQUA.[LUUTRU_ID]        ,KETQUA.[LUUTRUCHITIET_ID]        ,KETQUA.[SOVAOVIEN]        ,KETQUA.[MAYTE]        ,KETQUA.[TENBENHNHAN]        ,KETQUA.[NAMSINH]        ,KETQUA.[GIOITINH]        ,KETQUA.[DIACHI]        ,KETQUA.[NHOMDICHVU_ID]        ,KETQUA.[NGAYCHIDINH]        ,KETQUA.[NOICHIDINH_ID]        ,KETQUA.[BACSICHIDINH_ID]        ,KETQUA.[BACSICHIDINH]        ,KETQUA.[NGAYTHUCHIEN]        ,ISNULL(KETQUA.[NGAYGIOTHUCHIEN],DVYC.THOIGIANKHOADULIEU) as THOIGIANTHUCHIEN        ,KETQUA.[NGAYGIOTHUCHIEN]        ,KETQUA.[GIOTHUCHIEN]        ,KETQUA.[THANGTHUCHIEN]        ,KETQUA.[NAMTHUCHIEN]        ,KETQUA.[CHUYENKHOATHUCHIEN_ID]        ,ISNULL(KETQUA.[NOITHUCHIEN_ID],DVYC.[NOITHUCHIEN_ID]) AS NOITHUCHIEN_ID        ,KETQUA.[BACSITHUCHIEN_ID]        ,dvyc.NGUOIKHOA_ID AS BACSIKETLUAN_ID        ,KETQUA.[BACSIGMHS_ID]        ,KETQUA.[KYTHUATVIEN01_ID]        ,KETQUA.[KYTHUATVIEN02_ID]        ,KETQUA.[DIEUDUONG_ID]        ,KETQUA.[CHANDOANLAMSANG]        ,KETQUA.[THUCHIENBENNGOAI]        ,KETQUA.[BENHVIENTHUCHIEN_ID]        ,KETQUA.[KHOABENNGOAI_ID]        ,KETQUA.[TENBACSIBENNGOAI]        ,KETQUA.[GUINGOAI]        ,KETQUA.[NOIGUIDEN_ID]        ,KETQUA.[ICD_ID1]        ,KETQUA.[ICD_ID2]        ,KETQUA.[ICD_ID3]        ,KETQUA.[DIUNGTHUOC]        ,KETQUA.[TIENME]        ,KETQUA.[DACBIET]        ,KETQUA.[KQCUOICUNG]        ,KETQUA.[THONGTINNHAN]        ,KETQUA.[KETLUANKSK]        ,KETQUA.[DENGHI]        ,KETQUA.[SINHTHIET]        ,KETQUA.[CLOTEST]        ,KETQUA.[PHOTO]        ,KETQUA.[VIDEO]        ,KETQUA.[TIEMCANQUANG]        ,KETQUA.[VUNGKHAOSAT]        ,KETQUA.[MACH]        ,KETQUA.[HUYETAP]        ,KETQUA.[NHIPTHO]        ,KETQUA.[NHIETDO]        ,KETQUA.[CHIEUCAO]        ,KETQUA.[CANNANG]        ,KETQUA.[BSA]        ,KETQUA.[TINHTRANGDIENNAO]        ,KETQUA.[GPB_AMSO]        ,KETQUA.[GPB_PHANLOAIKETQUA_ID]        ,KETQUA.[GPB_PHUONGPHAPLAYBENHPHAM_ID]        ,KETQUA.[GPB_SOMAU]        ,KETQUA.[GPB_SOLUONGMAU]        ,KETQUA.[GPB_TOPO_ID]        ,KETQUA.[GPB_TOPOREGIONS_ID]        ,KETQUA.[GPB_MORPHO_ID]        ,KETQUA.[GPB_ETIO_ID]        ,KETQUA.[GPB_DAITHE]        ,KETQUA.[GPB_VITHE]        ,KETQUA.[GPB_NHUOM_HE]        ,KETQUA.[GPB_NHUOM_PAS]        ,KETQUA.[GPB_NHUOM_TRI]        ,KETQUA.[GPB_NHUOM_AFB]        ,KETQUA.[GPB_NHUOM_GIEMSA]        ,KETQUA.[GPB_NHUOM_PAPANICOLAOU]        ,KETQUA.[GPB_NHUOM_RETICULINE]        ,KETQUA.[GPB_NHUOM_OTHER]        ,KETQUA.[GPB_HOAMIENDICH]        ,KETQUA.[GPB_HOAMIENDICHHUYNHQUANG]        ,KETQUA.[GPB_HOICHAN]        ,KETQUA.[GPB_MAUTHU]        ,KETQUA.[GPB_NOILAYMAUTHU]        ,KETQUA.[HLVIKHUAN1]        ,KETQUA.[HLVIKHUAN2]        ,KETQUA.[LOAIFILM_ID]        ,KETQUA.[MAPHIM]        ,KETQUA.[SOPHIMSUDUNG]        ,KETQUA.[LOAIFILM_ID2]        ,KETQUA.[SOPHIMSUDUNG2]        ,KETQUA.[LOAIFILM_ID3]        ,KETQUA.[SOPHIMSUDUNG3]        ,KETQUA.[THIETBI_ID]        ,KETQUA.[MAUTHU_ID]        ,KETQUA.[THOIGIANNHAN]        ,KETQUA.[MAU]        ,KETQUA.[LOAITHUOCCANQUANG_ID]        ,KETQUA.[MA]        ,KETQUA.[IDHINH]        ,KETQUA.[SOPHIMHU]        ,KETQUA.[LOAIPHIMHU_ID]        ,KETQUA.[DOSOI]        ,KETQUA.[DOSOI_ID]        ,KETQUA.[BANKINHSOI]        ,KETQUA.[SODT]        ,KETQUA.[KYTHUAT]        ,KETQUA.[KYTHUAT_TEXT]        ,KETQUA.[RESISTANCEMARKERS]        ,KETQUA.[SOTHUOCSUDUNG]        ,KETQUA.[SOLUONGONG]        ,KETQUA.[SOMLMAU]        ,KETQUA.[THOIGIANLAYMAU]        ,KETQUA.[THOIGIANNHANMAU]        ,KETQUA.[THOIGIANCDBENHPHAM]        ,KETQUA.[DUNGDICHCD_ID]        ,KETQUA.[SOONGTHUCNHAN]        ,KETQUA.[VITRISOI]        ,KETQUA.[SAMPLEID]        ,KETQUA.[PHANLOAIKETQUA_ID]        ,KETQUA.[MOTA]        ,KETQUA.[MOTA_TEXT]        ,KETQUA.[KETLUAN]        ,KETQUA.[GHICHU]        ,dvyc.[TRANGTHAI]        ,KETQUA.[KHOADULIEU]        ,KETQUA.[NGAYKHOADULIEU]        ,KETQUA.[THOIGIANKHOADULIEU]        ,KETQUA.[NGUOIKHOA_ID]        ,KETQUA.[MANGUOIKHOA]        ,KETQUA.[TENNGUOIKHOA]        ,KETQUA.[BENHVIEN_ID]        ,KETQUA.[NGAYTAO]        ,KETQUA.[NGUOITAO_ID]        ,KETQUA.[NGAYCAPNHAT]        ,KETQUA.[NGUOICAPNHAT_ID]        ,ISNULL(KETQUA.DVYEUCAU_ID, dvyc.DVYEUCAU_ID) as DVYEUCAUCHINH_ID        from TT_DVYEUCAU dvyc        inner JOIN (select distinct DVYEUCAU_ID, CLSKETQUA_ID from TT_CLSKETQUACHITIET) kq ON dvyc.DVYEUCAU_ID =kq.DVYEUCAU_ID        inner join TM_DICHVU dv on dvyc.DICHVU_ID = dv.DICHVU_ID        inner join TT_CLSKETQUA KETQUA ON KETQUA.CLSKETQUA_ID = KQ.CLSKETQUA_ID        inner join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID                 where        dvyc.BENHNHAN_ID =  @param0  and dvyc.TRANGTHAI = 'HOANTAT'        and LEFT(ndv.MANHOMDICHVU, 2) = '01'                    and dvyc.NGAYYEUCAU >= '2/15/2019 12:00:00 AM'                    and dvyc.NGAYYEUCAU <= '8/15/2019 12:00:00 AM'                 order by dvyc.DVYEUCAU_ID DESC]
2019-08-15 10:55:30,648 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:55:30,648 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:55:32,040 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'EMR06'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:32,198 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '23165'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:55:32,236 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '23165'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:55:32,272 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '23165'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:55:33,799 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190043048']
2019-08-15 10:55:33,868 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:55:33,869 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,23165]]
2019-08-15 10:55:33,869 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:55:44,327 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD09'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 10:55:48,221 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:55:48,221 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190043048]]
2019-08-15 10:55:48,221 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 10:56:08,647 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:56:08,647 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190043048]]
2019-08-15 10:56:08,647 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 10:56:10,366 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:56:10,366 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190043048]]
2019-08-15 10:56:10,366 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 10:58:31,005 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:58:31,005 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190031740]]
2019-08-15 10:58:31,006 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 10:58:34,390 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhanByMaYTe] PreparedStatement : [select *              from TT_BENHNHAN              where MAYTE  = '190031740']
2019-08-15 10:58:34,507 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] PreparedStatement : [select KB.*, TN.SOBHYT, DT.TENDOITUONG        from TT_NGOAITRU_KHAMBENH KB        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = KB.KHAMBENH_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where KB.BENHNHAN_ID  =  @param0         and KB.BENHVIEN_ID = 'HLU01'                    and KB.NGAYKHAM >= '2/15/2019 12:00:00 AM'                  and KB.NGAYKHAM <= '8/15/2019 12:00:00 AM'               order by KB.THOIGIANKHAM desc]
2019-08-15 10:58:34,507 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,11805]]
2019-08-15 10:58:34,507 [1] DEBUG - Statement Id: [DAO00014_GetTTinKhamBenhByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:58:37,050 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '11805'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:58:37,088 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '11805'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:58:37,121 [1] DEBUG - Statement Id: [DAO00068_GetDSSinhHieuByBenhNhanID] PreparedStatement : [select *              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '11805'              and BENHVIEN_ID = 'HLU01'               and                   NGAYDO >= '2/15/2019 12:00:00 AM'               and                   NGAYDO <= '8/15/2019 12:00:00 AM'                             order by THOIGIANDO desc]
2019-08-15 10:58:38,094 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] PreparedStatement : [select dvyc.DICHVU_ID as DICHVUCHINH_ID, dvyc.NOIYEUCAU_ID,dvyc.DICHVU_ID        ,KETQUA.[CLSKETQUA_ID]        ,KETQUA.[SOPHIEUXETNGHIEM]        ,KETQUA.[TIEPNHAN_ID]        ,KETQUA.[BENHAN_ID]        ,KETQUA.[LUUTRU_ID]        ,KETQUA.[LUUTRUCHITIET_ID]        ,KETQUA.[SOVAOVIEN]        ,KETQUA.[MAYTE]        ,KETQUA.[TENBENHNHAN]        ,KETQUA.[NAMSINH]        ,KETQUA.[GIOITINH]        ,KETQUA.[DIACHI]        ,KETQUA.[NHOMDICHVU_ID]        ,KETQUA.[NGAYCHIDINH]        ,KETQUA.[NOICHIDINH_ID]        ,KETQUA.[BACSICHIDINH_ID]        ,KETQUA.[BACSICHIDINH]        ,KETQUA.[NGAYTHUCHIEN]        ,ISNULL(KETQUA.[NGAYGIOTHUCHIEN],DVYC.THOIGIANKHOADULIEU) as THOIGIANTHUCHIEN        ,KETQUA.[NGAYGIOTHUCHIEN]        ,KETQUA.[GIOTHUCHIEN]        ,KETQUA.[THANGTHUCHIEN]        ,KETQUA.[NAMTHUCHIEN]        ,KETQUA.[CHUYENKHOATHUCHIEN_ID]        ,ISNULL(KETQUA.[NOITHUCHIEN_ID],DVYC.[NOITHUCHIEN_ID]) AS NOITHUCHIEN_ID        ,KETQUA.[BACSITHUCHIEN_ID]        ,dvyc.NGUOIKHOA_ID AS BACSIKETLUAN_ID        ,KETQUA.[BACSIGMHS_ID]        ,KETQUA.[KYTHUATVIEN01_ID]        ,KETQUA.[KYTHUATVIEN02_ID]        ,KETQUA.[DIEUDUONG_ID]        ,KETQUA.[CHANDOANLAMSANG]        ,KETQUA.[THUCHIENBENNGOAI]        ,KETQUA.[BENHVIENTHUCHIEN_ID]        ,KETQUA.[KHOABENNGOAI_ID]        ,KETQUA.[TENBACSIBENNGOAI]        ,KETQUA.[GUINGOAI]        ,KETQUA.[NOIGUIDEN_ID]        ,KETQUA.[ICD_ID1]        ,KETQUA.[ICD_ID2]        ,KETQUA.[ICD_ID3]        ,KETQUA.[DIUNGTHUOC]        ,KETQUA.[TIENME]        ,KETQUA.[DACBIET]        ,KETQUA.[KQCUOICUNG]        ,KETQUA.[THONGTINNHAN]        ,KETQUA.[KETLUANKSK]        ,KETQUA.[DENGHI]        ,KETQUA.[SINHTHIET]        ,KETQUA.[CLOTEST]        ,KETQUA.[PHOTO]        ,KETQUA.[VIDEO]        ,KETQUA.[TIEMCANQUANG]        ,KETQUA.[VUNGKHAOSAT]        ,KETQUA.[MACH]        ,KETQUA.[HUYETAP]        ,KETQUA.[NHIPTHO]        ,KETQUA.[NHIETDO]        ,KETQUA.[CHIEUCAO]        ,KETQUA.[CANNANG]        ,KETQUA.[BSA]        ,KETQUA.[TINHTRANGDIENNAO]        ,KETQUA.[GPB_AMSO]        ,KETQUA.[GPB_PHANLOAIKETQUA_ID]        ,KETQUA.[GPB_PHUONGPHAPLAYBENHPHAM_ID]        ,KETQUA.[GPB_SOMAU]        ,KETQUA.[GPB_SOLUONGMAU]        ,KETQUA.[GPB_TOPO_ID]        ,KETQUA.[GPB_TOPOREGIONS_ID]        ,KETQUA.[GPB_MORPHO_ID]        ,KETQUA.[GPB_ETIO_ID]        ,KETQUA.[GPB_DAITHE]        ,KETQUA.[GPB_VITHE]        ,KETQUA.[GPB_NHUOM_HE]        ,KETQUA.[GPB_NHUOM_PAS]        ,KETQUA.[GPB_NHUOM_TRI]        ,KETQUA.[GPB_NHUOM_AFB]        ,KETQUA.[GPB_NHUOM_GIEMSA]        ,KETQUA.[GPB_NHUOM_PAPANICOLAOU]        ,KETQUA.[GPB_NHUOM_RETICULINE]        ,KETQUA.[GPB_NHUOM_OTHER]        ,KETQUA.[GPB_HOAMIENDICH]        ,KETQUA.[GPB_HOAMIENDICHHUYNHQUANG]        ,KETQUA.[GPB_HOICHAN]        ,KETQUA.[GPB_MAUTHU]        ,KETQUA.[GPB_NOILAYMAUTHU]        ,KETQUA.[HLVIKHUAN1]        ,KETQUA.[HLVIKHUAN2]        ,KETQUA.[LOAIFILM_ID]        ,KETQUA.[MAPHIM]        ,KETQUA.[SOPHIMSUDUNG]        ,KETQUA.[LOAIFILM_ID2]        ,KETQUA.[SOPHIMSUDUNG2]        ,KETQUA.[LOAIFILM_ID3]        ,KETQUA.[SOPHIMSUDUNG3]        ,KETQUA.[THIETBI_ID]        ,KETQUA.[MAUTHU_ID]        ,KETQUA.[THOIGIANNHAN]        ,KETQUA.[MAU]        ,KETQUA.[LOAITHUOCCANQUANG_ID]        ,KETQUA.[MA]        ,KETQUA.[IDHINH]        ,KETQUA.[SOPHIMHU]        ,KETQUA.[LOAIPHIMHU_ID]        ,KETQUA.[DOSOI]        ,KETQUA.[DOSOI_ID]        ,KETQUA.[BANKINHSOI]        ,KETQUA.[SODT]        ,KETQUA.[KYTHUAT]        ,KETQUA.[KYTHUAT_TEXT]        ,KETQUA.[RESISTANCEMARKERS]        ,KETQUA.[SOTHUOCSUDUNG]        ,KETQUA.[SOLUONGONG]        ,KETQUA.[SOMLMAU]        ,KETQUA.[THOIGIANLAYMAU]        ,KETQUA.[THOIGIANNHANMAU]        ,KETQUA.[THOIGIANCDBENHPHAM]        ,KETQUA.[DUNGDICHCD_ID]        ,KETQUA.[SOONGTHUCNHAN]        ,KETQUA.[VITRISOI]        ,KETQUA.[SAMPLEID]        ,KETQUA.[PHANLOAIKETQUA_ID]        ,KETQUA.[MOTA]        ,KETQUA.[MOTA_TEXT]        ,KETQUA.[KETLUAN]        ,KETQUA.[GHICHU]        ,dvyc.[TRANGTHAI]        ,KETQUA.[KHOADULIEU]        ,KETQUA.[NGAYKHOADULIEU]        ,KETQUA.[THOIGIANKHOADULIEU]        ,KETQUA.[NGUOIKHOA_ID]        ,KETQUA.[MANGUOIKHOA]        ,KETQUA.[TENNGUOIKHOA]        ,KETQUA.[BENHVIEN_ID]        ,KETQUA.[NGAYTAO]        ,KETQUA.[NGUOITAO_ID]        ,KETQUA.[NGAYCAPNHAT]        ,KETQUA.[NGUOICAPNHAT_ID]        ,ISNULL(KETQUA.DVYEUCAU_ID, dvyc.DVYEUCAU_ID) as DVYEUCAUCHINH_ID        from TT_DVYEUCAU dvyc        inner JOIN (select distinct DVYEUCAU_ID, CLSKETQUA_ID from TT_CLSKETQUACHITIET) kq ON dvyc.DVYEUCAU_ID =kq.DVYEUCAU_ID        inner join TM_DICHVU dv on dvyc.DICHVU_ID = dv.DICHVU_ID        inner join TT_CLSKETQUA KETQUA ON KETQUA.CLSKETQUA_ID = KQ.CLSKETQUA_ID        inner join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID                 where        dvyc.BENHNHAN_ID =  @param0  and dvyc.TRANGTHAI = 'HOANTAT'        and LEFT(ndv.MANHOMDICHVU, 2) = '01'                    and dvyc.NGAYYEUCAU >= '2/15/2019 12:00:00 AM'                    and dvyc.NGAYYEUCAU <= '8/15/2019 12:00:00 AM'                 order by dvyc.DVYEUCAU_ID DESC]
2019-08-15 10:58:38,094 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,11805]]
2019-08-15 10:58:38,094 [1] DEBUG - Statement Id: [DAO00046_GetDSKQXNByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:58:39,846 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] PreparedStatement : [select a.* from TT_CLSKETQUA a        join TT_DVYEUCAU b on a.DVYEUCAU_ID = b.DVYEUCAU_ID        where b.BENHNHAN_ID =  @param0  and b.TRANGTHAI = 'HOANTAT'         and           exists (select DICHVU_ID from TM_DICHVU ab join TM_NHOMDICHVU bc on ab.NHOMDICHVU_ID = bc.NHOMDICHVU_ID          where b.DICHVU_ID = ab.DICHVU_ID and left(bc.MANHOMDICHVU,2) in ('02', '03'))                    and a.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and a.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:58:39,846 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] Parameters: [@param0=[BENHNHAN_ID,11805]]
2019-08-15 10:58:39,846 [1] DEBUG - Statement Id: [DAO00046_GetDSKQCDHAByBenhNhanID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 10:58:41,422 [1] DEBUG - Statement Id: [DAO00046_GetDSKQPTTTByBenhNhanID] PreparedStatement : [select ptyc.*, pt.MOTA, pt.TIEPNHAN_ID, pt.NGUOITAO_ID as BACSITHUCHIEN_ID, pt.PHONGBANTHUCHIEN_ID as NOITHUCHIEN_ID, pt.NGAYTHUCHIEN as THOIGIANTHUCHIEN, pt.LOAIPHAUTHUAT, ba.SOBENHAN        from TT_PHAUTHUAT_YEUCAU as ptyc        left join TT_PHAUTHUAT as pt on pt.PHAUTHUAT_ID = ptyc.PHAUTHUAT_ID        left join TT_NOITRU_BENHAN ba on pt.BENHAN_ID = ba.BENHAN_ID        where ptyc.DVYEUCAU_ID in        (select DVYEUCAU_ID from TT_DVYEUCAU where BENHNHAN_ID = '11805')                    and pt.NGAYTHUCHIEN >= '2/15/2019 12:00:00 AM'                    and pt.NGAYTHUCHIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 10:58:42,911 [1] DEBUG - Statement Id: [DAO00013_GetTienSuBenh] PreparedStatement : [select TIENSUBENH, TIENSUDIUNG              from TT_BENHNHAN              where TT_BENHNHAN.BENHNHAN_ID  = '11805']
2019-08-15 10:58:42,977 [1] DEBUG - Statement Id: [DAO00095_GetDSBenhManTinh] PreparedStatement : [select *              from TT_BENHNHAN_BENHMANTINH              where BENHNHAN_ID  = '11805'              and BENHVIEN_ID  = 'HLU01']
2019-08-15 10:58:44,168 [1] DEBUG - Statement Id: [DAO00098_GetList] PreparedStatement : [select *              from TT_BENHNHAN_DIUNG_THUOC               where                             TT_BENHNHAN_DIUNG_THUOC.BENHNHAN_ID = '11805'                       and                           TT_BENHNHAN_DIUNG_THUOC.BENHVIEN_ID = 'HLU01'                                     order by BENHNHAN_DI_UNGTHUOC_ID]
2019-08-15 10:58:45,232 [1] DEBUG - Statement Id: [DAO00061_GetDSBenhAnByBenhNhanID] PreparedStatement : [select ntba.*        ,case        when ntba.LOAIBENHAN = '1' then icd_cc.MAICD        else icd_nt.MAICD + COALESCE(';' + ICD_BENHPHU,'')        end as MAICD        , case        when ntba.LOAIBENHAN = '1' then icd_cc.TENICD + COALESCE( '; ' + CHANDOANRAVIEN, '')        else icd_nt.TENICD + COALESCE('; ' + CHANDOANRAVIEN,'') + (select '; ' + TENICD from [dbo].[SplitString](ICD_BENHPHU,';') as a        left join TM_ICD icd_p on a.s=icd_p.MAICD        group by TENICD        FOR XML PATH ('')        )        end as CHANDOAN        , lt.SOLUUTRU as SOLUUTRU_BGA        , TN.SOBHYT        , DT.TENDOITUONG        from TT_NOITRU_BENHAN ntba        left join TM_ICD icd_nt on ntba.ICD_BENHCHINH = icd_nt.ICD_ID        left join TM_ICD icd_cc on ntba.ICD_KHAMBENH = icd_cc.ICD_ID        left join TT_BENHAN_LUUTRU lt on lt.BENHAN_ID = ntba.BENHAN_ID        inner join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = NTBA.TIEPNHAN_ID        left join TM_DOITUONG DT ON DT.DOITUONG_ID = TN.DOITUONG_ID        where ntba.BENHNHAN_ID = '11805'        and ntba.BENHVIEN_ID = 'HLU01'         and           convert(date, ntba.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, ntba.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')                 order by ntba.BENHAN_ID desc]
2019-08-15 10:58:47,270 [1] DEBUG - Statement Id: [DAO00062_GetDSYLenhThuocByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, ba.TIEPNHAN_ID, kb.* from TT_NOITRU_KHAMBENH kb        left join TT_NOITRU_BENHAN ba        on kb.BENHAN_ID = ba.BENHAN_ID        where ba.BENHNHAN_ID = '11805'        and kb.ISYLENHVTYT = '0'        and kb.BENHVIEN_ID = 'HLU01'         and           convert(date, NGAYLAP) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYLAP) <= convert(date, '8/15/2019 12:00:00 AM')                 order by KHAMBENH_ID        desc]
2019-08-15 10:58:50,514 [1] DEBUG - Statement Id: [DAO00062_GetDSYLenhThuocByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, ba.TIEPNHAN_ID, kb.* from TT_NOITRU_KHAMBENH kb        left join TT_NOITRU_BENHAN ba        on kb.BENHAN_ID = ba.BENHAN_ID        where ba.BENHNHAN_ID = '11805'        and kb.ISYLENHVTYT = '1'        and kb.BENHVIEN_ID = 'HLU01'         and           convert(date, NGAYLAP) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYLAP) <= convert(date, '8/15/2019 12:00:00 AM')                 order by KHAMBENH_ID        desc]
2019-08-15 10:58:51,590 [1] DEBUG - Statement Id: [DAO00078_GetDSBBHoiChanByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, bbhc.*, isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID) as KHOADIEUTRI_ID from TT_BIENBANHOICHAN bbhc          left join TT_NOITRU_BENHAN ba        on bbhc.BENHAN_ID = ba.BENHAN_ID          left join TT_NOITRU_LUUTRU lt        on bbhc.LUUTRU_ID = lt.LUUTRU_ID          where bbhc.BENHNHAN_ID = '11805'        and bbhc.BENHVIEN_ID = 'HLU01'         and           convert(date, THOIGIANHOICHAN) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, THOIGIANHOICHAN) <= convert(date, '8/15/2019 12:00:00 AM')                 order by BIENBANHOICHAN_ID        desc]
2019-08-15 10:58:52,704 [1] DEBUG - Statement Id: [DAO00095_GetDSDocuments] PreparedStatement : [select D.SOBENHAN,A.*            from TT_DOCUMENTS A            inner join TT_BENHNHAN B on A.BENHNHAN_ID =  B.BENHNHAN_ID            inner join TT_TIEPNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID            left join TT_NOITRU_BENHAN D on D.TIEPNHAN_ID = C.TIEPNHAN_ID            where A.BENHNHAN_ID  = '11805'            and A.BENHVIEN_ID  = 'HLU01'             and                   convert(date, A.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, A.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:52,757 [1] DEBUG - Statement Id: [DAO00116_GetTTDichVuCLS] PreparedStatement : [select clskq.CLSKETQUA_ID, isnull (clskq.BENHAN_ID, pt.BENHAN_ID) as BENHAN_ID,              pt.PHAUTHUAT_ID,              ba.SOBENHAN,              isnull (tn.TIEPNHAN_ID, pt.TIEPNHAN_ID) as TIEPNHAN_ID              from TT_CLSKETQUA clskq              left join TT_TIEPNHAN tn              on clskq.TIEPNHAN_ID = tn.TIEPNHAN_ID              full join TT_PHAUTHUAT pt              on pt.TIEPNHAN_ID = tn.TIEPNHAN_ID              left join TT_NOITRU_BENHAN ba              on (clskq.BENHAN_ID = ba.BENHAN_ID) or (pt.BENHAN_ID = ba.BENHAN_ID)              where tn.BENHNHAN_ID = '11805'               and                   convert(date, clskq.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, clskq.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:52,879 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKem] PreparedStatement : [select * from TT_FILE_DINHKEM              where              BENHVIEN_ID = 'HLU01'               and                   (REF_ID = '1850' and REF_TABLE = 'TT_PHAUTHUAT')               and                   (REF_ID = '42984' and REF_TABLE = 'TT_CLSKETQUA')               and                   convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:52,906 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKem] PreparedStatement : [select * from TT_FILE_DINHKEM              where              BENHVIEN_ID = 'HLU01'               and                   (REF_ID = '1850' and REF_TABLE = 'TT_PHAUTHUAT')               and                   (REF_ID = '42986' and REF_TABLE = 'TT_CLSKETQUA')               and                   convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:52,940 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKem] PreparedStatement : [select * from TT_FILE_DINHKEM              where              BENHVIEN_ID = 'HLU01'               and                   (REF_ID = '1850' and REF_TABLE = 'TT_PHAUTHUAT')               and                   (REF_ID = '43020' and REF_TABLE = 'TT_CLSKETQUA')               and                   convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:52,967 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKem] PreparedStatement : [select * from TT_FILE_DINHKEM              where              BENHVIEN_ID = 'HLU01'               and                   (REF_ID = '1850' and REF_TABLE = 'TT_PHAUTHUAT')               and                   (REF_ID = '45430' and REF_TABLE = 'TT_CLSKETQUA')               and                   convert(date, NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:52,995 [1] DEBUG - Statement Id: [DAO00116_GetDSFileDinhKemHSBA] PreparedStatement : [select lt.LOAIHSBA_ID, lt.KIEUHSBA_ID, f.* from TT_FILE_DINHKEM f              left join TT_BENHAN_MUONTRA mt on f.REF_ID = mt.SOTAILIEU              left join TT_BENHAN_LUUTRU lt on lt.HOSO_ID = mt.HOSO_ID              left join TT_NOITRU_BENHAN ba on ba.BENHAN_ID = lt.BENHAN_ID              where f.REF_TABLE = 'TT_BENHAN_MUONTRA'              and f.BENHVIEN_ID = 'HLU01'              and ba.BENHNHAN_ID = '11805'               and                   convert(date, f.NGAYTAO) >= convert(date, '2/15/2019 12:00:00 AM')               and                   convert(date, f.NGAYTAO) <= convert(date, '8/15/2019 12:00:00 AM')]
2019-08-15 10:58:53,745 [1] DEBUG - Statement Id: [DAO00217_GetDSTTDichVuByBenhNhanID] PreparedStatement : [select ba.SOBENHAN, isnull(clskq.NGAYGIOTHUCHIEN, pt.THOIGIANBATDAU) as THOIGIANTHUCHIEN, isnull(clskq.BACSITHUCHIEN_ID,pt.NGUOIKHOA_ID) as BACSITHUCHIEN_ID,        tn.SOTIEPNHAN, dv.*, vp.SOLUONG from TT_DVYEUCAU dv        left join TT_NOITRU_BENHAN ba on dv.BENHAN_ID = ba.BENHAN_ID        left join TT_CLSKETQUA clskq on clskq.DVYEUCAU_ID = dv.DVYEUCAU_ID        left join TT_NGOAITRU_KHAMBENH kb on dv.KHAMBENH_NGOAITRU_ID = kb.KHAMBENH_ID        left join TT_PHAUTHUAT pt on pt.PHAUTHUAT_ID in (select PHAUTHUAT_ID from TT_PHAUTHUAT_YEUCAU where DVYEUCAU_ID = dv.DVYEUCAU_ID)        left join TT_TIEPNHAN tn on dv.TIEPNHAN_ID = tn.TIEPNHAN_ID        left join TT_VIENPHI vp on vp.REF_ID = dv.DVYEUCAU_ID and REF_TABLE = 'TT_DVYEUCAU'        where tn.BENHNHAN_ID = '11805'        and dv.BENHVIEN_ID = 'HLU01' and dv.HUYYEUCAU='0'           and           convert(date, NGAYGIOYEUCAU) >= convert(date, '2/15/2019 12:00:00 AM')         and           convert(date, NGAYGIOYEUCAU) <= convert(date, '8/15/2019 12:00:00 AM')                 order by DVYEUCAU_ID        desc]
2019-08-15 10:58:54,859 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:55,207 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5366","DVYEUCAU_ID":"131028"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5366","DVYEUCAU_ID":"131028"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:55,391 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:55,484 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"263","DVYEUCAU_ID":"131027"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"263","DVYEUCAU_ID":"131027"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:55,645 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:55,737 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"334","DVYEUCAU_ID":"131026"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"334","DVYEUCAU_ID":"131026"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:55,895 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:55,991 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5345","DVYEUCAU_ID":"131025"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5345","DVYEUCAU_ID":"131025"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:56,157 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:56,250 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5460","DVYEUCAU_ID":"131024"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5460","DVYEUCAU_ID":"131024"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:56,411 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:56,505 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5485","DVYEUCAU_ID":"131023"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5485","DVYEUCAU_ID":"131023"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:56,683 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:56,784 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"477","DVYEUCAU_ID":"104673"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"477","DVYEUCAU_ID":"104673"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:56,941 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:57,025 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"263","DVYEUCAU_ID":"104672"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"263","DVYEUCAU_ID":"104672"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:57,174 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:57,260 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"104671"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"104671"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:57,406 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:57,506 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"104670"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"104670"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:57,668 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:57,755 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4978","DVYEUCAU_ID":"103734"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4978","DVYEUCAU_ID":"103734"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:57,927 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:58,013 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5250","DVYEUCAU_ID":"103733"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5250","DVYEUCAU_ID":"103733"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:58,185 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:58,273 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4608","DVYEUCAU_ID":"98046"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4608","DVYEUCAU_ID":"98046"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:58,429 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:58,521 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4596","DVYEUCAU_ID":"98045"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4596","DVYEUCAU_ID":"98045"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:58,685 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:58,778 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"98044"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"98044"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:58,941 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:59,033 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"98043"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"98043"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:59,198 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:59,290 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"98042"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"98042"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:59,459 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:59,560 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4422","DVYEUCAU_ID":"98041"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4422","DVYEUCAU_ID":"98041"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:59,718 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:58:59,807 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"477","DVYEUCAU_ID":"92810"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"477","DVYEUCAU_ID":"92810"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:58:59,980 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:00,068 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4137","DVYEUCAU_ID":"92761"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4137","DVYEUCAU_ID":"92761"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:00,243 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:00,339 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"92760"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"92760"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:00,510 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:00,600 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"92759"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"92759"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:00,769 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:00,858 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4873","DVYEUCAU_ID":"92758"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4873","DVYEUCAU_ID":"92758"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:01,028 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:01,120 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"92757"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"92757"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:01,296 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:01,386 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4454","DVYEUCAU_ID":"92756"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4454","DVYEUCAU_ID":"92756"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:01,555 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:01,643 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4451","DVYEUCAU_ID":"92755"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4451","DVYEUCAU_ID":"92755"}' order by ID desc)        order by A.ID desc]
2019-08-15 10:59:01,825 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190428.0000142']
2019-08-15 10:59:01,966 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"92747"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"92747"}' order by ID desc)        order by A.ID desc]
2019-08-15 11:00:58,569 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:00:58,780 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD23'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:00:59,528 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:01:01,230 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '2732']
2019-08-15 11:01:01,274 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 11:01:01,274 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:01:01,274 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:01:01,332 [1] DEBUG - Statement Id: [DAO00077_GetList] PreparedStatement : [select *              from TT_NOITRU_CHAMSOC               where                             TT_NOITRU_CHAMSOC.BENHAN_ID = '2732'                       and                           TT_NOITRU_CHAMSOC.BENHVIEN_ID = 'HLU01'                                     order by CHAMSOC_ID]
2019-08-15 11:01:02,431 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '12885'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '2732']
2019-08-15 11:01:14,446 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:01:16,295 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:01:16,475 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:01:16,576 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:01:16,698 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:01:16,754 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:01:16,754 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:01:16,754 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:01:16,928 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190031740']
2019-08-15 11:01:17,028 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:01:17,286 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:01:17,413 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:01:17,531 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:01:17,531 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:01:17,531 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:01:19,397 [1] DEBUG - Statement Id: [DAO00064_GetVienphiTiepNhan] PreparedStatement : [select distinct C.TRANGTHAI, C.NOITHUCHIEN_ID as PHONGBAN_ID, D.NGAYKHAM,        ISNULL(A.DICHVU_ID, A.DUOC_ID) as NOIDUNG_ID, A.REF_ID as IDREF, A.VIENPHI_ID,        A.SOLUONG as SOLUONG, A.SOLUONG as SOLUONG_NEW, A.DICHVU_ID, A.DUOC_ID, A.BHYT_DONGIA_CHITRA,        A.DONGIA_DOANHTHU, A.DONGIA_DOANHTHU as DONGIADOANHTHU, A.BHYT_DONGIA as DONGIAHOTRO, A.BHYT_THANHTIEN_CHITRA as DONGIAHOTROCHITRA,        A.REF_TABLE as LOAI, A.BHYT_DONGIA, A.BHYT_THANHTIEN, A.BHYT_THANHTIEN_CHITRA, A.BENHNHAN_PHAITHANHTOAN, A.GIATRI_BENHNHAN_DATHANHTOAN, A.BENHVIEN_ID, A.THANHTIEN_DOANHTHU,        A.LOAI_CHIPHI, A.LOAIGIA_ID, REF_TABLE, A.KHAMBENH_ID, A.REF_ID, A.DUOCPHEPTHUCHIEN,        A.HUY, A.KHONGTHUTIEN, A.DATHANHTOAN, A.HOADON_ID, A.ACTIVE, C.DVYEUCAU_ID, C.NGAYYEUCAU, ISNULL(C.BACSICHIDINH_ID, C.NGUOIGIOITHIEU_ID) as BACSICHIDINH_ID, C.NOIYEUCAU_ID        , A.DATHUCHIEN,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID,        ndv.MANHOMDICHVU        from TT_VIENPHI A        left join (select * from TT_DVYEUCAU where TIEPNHAN_ID = '12885') C on C.TIEPNHAN_ID = A.TIEPNHAN_ID and C.DICHVU_ID = A.DICHVU_ID  and C.DVYEUCAU_ID = A.REF_ID        left join (select * from TT_NGOAITRU_KHAMBENH where TIEPNHAN_ID = '12885') D on D.TIEPNHAN_ID = A.TIEPNHAN_ID and D.DICHVU_ID = A.DICHVU_ID        left join TT_NGOAITRU_TOATHUOC E on E.DUOC_ID = A.DUOC_ID and E.TOATHUOC_ID = A.REF_ID        left join TT_DUOC_CHUNGTU_CHITIET  ctct on ctct.CHUNGTUCHITIET_ID = A.REF_ID and A.REF_TABLE = 'TT_DUOC_CHUNGTU_CHITIET'        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        A.TIEPNHAN_ID = '12885' and A.BENHVIEN_ID = 'HLU01' and (A.BENHAN_ID is NULL or A.BENHAN_ID = '') and A.HUY = '0'        and        (        (A.DICHVU_ID is not null and C.HUYYEUCAU != '1')        or (A.DICHVU_ID is null and A.DUOC_ID is not null and A.REF_TABLE != 'TT_DUOC_CHUNGTU_CHITIET')        or (A.DICHVU_ID is null and A.DUOC_ID is not null and A.REF_TABLE = 'TT_DUOC_CHUNGTU_CHITIET' and ctct.CHUNGTUCHITIET_ID is not null)        )        ORDER BY A.VIENPHI_ID]
2019-08-15 11:01:20,226 [1] DEBUG - Statement Id: [DAO00064_GetVienphiTamUngTiepNhan] PreparedStatement : [select * from TT_HOADON         where LOAIHOADON = 'TU' and TIEPNHAN_ID = '12885' and (BENHAN_ID is NULL or BENHAN_ID = '')         and DATHANHTOAN = '1' and HUYHOADON = '0' and HOANTRA = '0']
2019-08-15 11:01:20,562 [1] DEBUG - Statement Id: [DAO00080_CheckConThuocVTYTChuaXuat] PreparedStatement : [IF EXISTS (        select VTYT.KHAMBENH_VTYT_ID        from TT_NGOAITRU_KHAMBENH_VTYT VTYT        inner join TT_NGOAITRU_KHAMBENH KB on KB.KHAMBENH_ID = VTYT.KHAMBENH_ID and KB.BENHVIEN_ID = VTYT.BENHVIEN_ID        where KB.TIEPNHAN_ID = 12885        and KB.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.PHAUTHUAT_VTYT_ID        from TT_PHAUTHUAT_VTYT VTYT        inner join TT_PHAUTHUAT PT on PT.PHAUTHUAT_ID = VTYT.PHAUTHUAT_ID and PT.BENHVIEN_ID = VTYT.BENHVIEN_ID        where PT.TIEPNHAN_ID = 12885        and PT.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.CLSKETQUA_VTYT_ID        from TT_CLSKETQUA_VTYT VTYT        inner join TT_DVYEUCAU YC on YC.DVYEUCAU_ID = VTYT.DVYEUCAU_ID and YC.BENHVIEN_ID = VTYT.BENHVIEN_ID        where YC.TIEPNHAN_ID = 12885        and YC.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL        )        BEGIN        SELECT -1 AS RESULT        END        ELSE        BEGIN        SELECT 1 AS RESULT        END]
2019-08-15 11:01:20,986 [1] DEBUG - Statement Id: [DAO00079_CheckThuocChuaXuat] PreparedStatement : [select TT.*        from TT_NOITRU_TOATHUOC TT        left join TT_NOITRU_TRATHUOC_CHITIET TT_CT on TT_CT.TOATHUOC_ID = TT.TOATHUOC_ID        where TT.TIEPNHAN_ID = 12885        and TT.BENHVIEN_ID = 'HLU01'        and TT.CHUNGTU_ID IS NULL        and TT.SOLUONG != isnull(TT_CT.SOLUONG,0)]
--------------------------------------------------------------------------------
2019-08-15 11:03:10,253 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 11:03:10,554 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 11:03:10,597 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 11:03:11,060 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:11,299 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 11:03:16,674 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 11:03:16,785 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 11:03:18,344 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 11:03:18,502 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 11:03:19,359 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 11:03:19,500 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 11:03:19,584 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 11:03:19,669 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 11:03:19,741 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 11:03:19,815 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 11:03:19,886 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 11:03:19,959 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 11:03:20,038 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 11:03:20,552 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 11:03:20,600 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 11:03:20,734 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 11:03:20,770 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 11:03:21,586 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 11:03:21,636 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 11:03:25,078 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 11:03:25,142 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 11:03:25,178 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 11:03:25,244 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 11:03:25,277 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 11:03:25,361 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 11:03:26,300 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:27,183 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 11:03:32,065 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 11:03:32,095 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 11:03:32,176 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:32,300 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:32,422 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 11:03:32,424 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 11:03:32,424 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 11:03:32,458 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 11:03:32,458 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 11:03:32,458 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 11:03:32,594 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:32,748 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:40,864 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:40,959 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 11:03:41,212 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 11:03:51,874 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD09'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:03:58,214 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 11:03:58,215 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190031740]]
2019-08-15 11:03:58,215 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 11:04:02,239 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:04:02,641 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:04:03,990 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:04:04,354 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:04:04,497 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:04:04,734 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:04:04,816 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:04:04,816 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:04:04,817 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:04:04,933 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190031740']
2019-08-15 11:04:05,017 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:04:05,237 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:04:05,355 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:04:05,400 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:04:05,400 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:04:05,400 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:04:07,123 [1] DEBUG - Statement Id: [DAO00064_GetVienphiTiepNhan] PreparedStatement : [select distinct C.TRANGTHAI, C.NOITHUCHIEN_ID as PHONGBAN_ID, D.NGAYKHAM,        ISNULL(A.DICHVU_ID, A.DUOC_ID) as NOIDUNG_ID, A.REF_ID as IDREF, A.VIENPHI_ID,        A.SOLUONG as SOLUONG, A.SOLUONG as SOLUONG_NEW, A.DICHVU_ID, A.DUOC_ID, A.BHYT_DONGIA_CHITRA,        A.DONGIA_DOANHTHU, A.DONGIA_DOANHTHU as DONGIADOANHTHU, A.BHYT_DONGIA as DONGIAHOTRO, A.BHYT_THANHTIEN_CHITRA as DONGIAHOTROCHITRA,        A.REF_TABLE as LOAI, A.BHYT_DONGIA, A.BHYT_THANHTIEN, A.BHYT_THANHTIEN_CHITRA, A.BENHNHAN_PHAITHANHTOAN, A.GIATRI_BENHNHAN_DATHANHTOAN, A.BENHVIEN_ID, A.THANHTIEN_DOANHTHU,        A.LOAI_CHIPHI, A.LOAIGIA_ID, REF_TABLE, A.KHAMBENH_ID, A.REF_ID, A.DUOCPHEPTHUCHIEN,        A.HUY, A.KHONGTHUTIEN, A.DATHANHTOAN, A.HOADON_ID, A.ACTIVE, C.DVYEUCAU_ID, C.NGAYYEUCAU, ISNULL(C.BACSICHIDINH_ID, C.NGUOIGIOITHIEU_ID) as BACSICHIDINH_ID, C.NOIYEUCAU_ID        , A.DATHUCHIEN,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID,        ndv.MANHOMDICHVU        from TT_VIENPHI A        left join (select * from TT_DVYEUCAU where TIEPNHAN_ID = '12885') C on C.TIEPNHAN_ID = A.TIEPNHAN_ID and C.DICHVU_ID = A.DICHVU_ID  and C.DVYEUCAU_ID = A.REF_ID        left join (select * from TT_NGOAITRU_KHAMBENH where TIEPNHAN_ID = '12885') D on D.TIEPNHAN_ID = A.TIEPNHAN_ID and D.DICHVU_ID = A.DICHVU_ID        left join TT_NGOAITRU_TOATHUOC E on E.DUOC_ID = A.DUOC_ID and E.TOATHUOC_ID = A.REF_ID        left join TT_DUOC_CHUNGTU_CHITIET  ctct on ctct.CHUNGTUCHITIET_ID = A.REF_ID and A.REF_TABLE = 'TT_DUOC_CHUNGTU_CHITIET'        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        A.TIEPNHAN_ID = '12885' and A.BENHVIEN_ID = 'HLU01' and (A.BENHAN_ID is NULL or A.BENHAN_ID = '') and A.HUY = '0'        and        (        (A.DICHVU_ID is not null and C.HUYYEUCAU != '1')        or (A.DICHVU_ID is null and A.DUOC_ID is not null and A.REF_TABLE != 'TT_DUOC_CHUNGTU_CHITIET')        or (A.DICHVU_ID is null and A.DUOC_ID is not null and A.REF_TABLE = 'TT_DUOC_CHUNGTU_CHITIET' and ctct.CHUNGTUCHITIET_ID is not null)        )        ORDER BY A.VIENPHI_ID]
2019-08-15 11:04:07,178 [1] DEBUG - Statement Id: [DAO00064_GetVienphiTamUngTiepNhan] PreparedStatement : [select * from TT_HOADON         where LOAIHOADON = 'TU' and TIEPNHAN_ID = '12885' and (BENHAN_ID is NULL or BENHAN_ID = '')         and DATHANHTOAN = '1' and HUYHOADON = '0' and HOANTRA = '0']
2019-08-15 11:04:07,206 [1] DEBUG - Statement Id: [DAO00080_CheckConThuocVTYTChuaXuat] PreparedStatement : [IF EXISTS (        select VTYT.KHAMBENH_VTYT_ID        from TT_NGOAITRU_KHAMBENH_VTYT VTYT        inner join TT_NGOAITRU_KHAMBENH KB on KB.KHAMBENH_ID = VTYT.KHAMBENH_ID and KB.BENHVIEN_ID = VTYT.BENHVIEN_ID        where KB.TIEPNHAN_ID = 12885        and KB.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.PHAUTHUAT_VTYT_ID        from TT_PHAUTHUAT_VTYT VTYT        inner join TT_PHAUTHUAT PT on PT.PHAUTHUAT_ID = VTYT.PHAUTHUAT_ID and PT.BENHVIEN_ID = VTYT.BENHVIEN_ID        where PT.TIEPNHAN_ID = 12885        and PT.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.CLSKETQUA_VTYT_ID        from TT_CLSKETQUA_VTYT VTYT        inner join TT_DVYEUCAU YC on YC.DVYEUCAU_ID = VTYT.DVYEUCAU_ID and YC.BENHVIEN_ID = VTYT.BENHVIEN_ID        where YC.TIEPNHAN_ID = 12885        and YC.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL        )        BEGIN        SELECT -1 AS RESULT        END        ELSE        BEGIN        SELECT 1 AS RESULT        END]
2019-08-15 11:04:07,326 [1] DEBUG - Statement Id: [DAO00079_CheckThuocChuaXuat] PreparedStatement : [select TT.*        from TT_NOITRU_TOATHUOC TT        left join TT_NOITRU_TRATHUOC_CHITIET TT_CT on TT_CT.TOATHUOC_ID = TT.TOATHUOC_ID        where TT.TIEPNHAN_ID = 12885        and TT.BENHVIEN_ID = 'HLU01'        and TT.CHUNGTU_ID IS NULL        and TT.SOLUONG != isnull(TT_CT.SOLUONG,0)]
2019-08-15 11:04:13,133 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD23'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:04:13,592 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:04:13,765 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '2732']
2019-08-15 11:04:13,806 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 11:04:13,807 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:04:13,807 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:04:13,860 [1] DEBUG - Statement Id: [DAO00077_GetList] PreparedStatement : [select *              from TT_NOITRU_CHAMSOC               where                             TT_NOITRU_CHAMSOC.BENHAN_ID = '2732'                       and                           TT_NOITRU_CHAMSOC.BENHVIEN_ID = 'HLU01'                                     order by CHAMSOC_ID]
2019-08-15 11:04:13,956 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '12885'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '2732']
2019-08-15 11:04:31,713 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD78'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:04:32,378 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:04:32,496 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '12885'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '2732']
2019-08-15 11:04:32,664 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '2732' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:04:58,337 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:05:17,525 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 11:05:17,525 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190031740]]
2019-08-15 11:05:17,525 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 11:05:20,792 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:05:20,946 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:05:21,031 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:05:21,131 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:05:21,232 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:05:21,232 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:05:21,232 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:05:21,319 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190031740']
2019-08-15 11:05:21,409 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:05:21,578 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:05:21,688 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:05:21,733 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:05:21,733 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:05:21,733 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:05:25,272 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:05:25,421 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '12885'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '2732']
2019-08-15 11:05:25,579 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '2732' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
--------------------------------------------------------------------------------
2019-08-15 11:13:54,415 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 11:13:54,742 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 11:13:54,782 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 11:13:55,453 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:13:55,741 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 11:14:00,822 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 11:14:00,856 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 11:14:02,445 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 11:14:02,528 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 11:14:03,358 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 11:14:03,519 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 11:14:03,598 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 11:14:03,679 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 11:14:03,780 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 11:14:03,885 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 11:14:03,978 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 11:14:04,049 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 11:14:04,180 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 11:14:04,693 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 11:14:04,738 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 11:14:04,813 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 11:14:04,846 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 11:14:05,699 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 11:14:05,739 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 11:14:08,260 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 11:14:08,381 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 11:14:08,416 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 11:14:08,503 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 11:14:08,538 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 11:14:08,611 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 11:14:09,547 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:10,690 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 11:14:15,703 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 11:14:15,736 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 11:14:15,816 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:15,961 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:16,133 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 11:14:16,136 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 11:14:16,136 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 11:14:16,166 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 11:14:16,167 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 11:14:16,167 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 11:14:16,346 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:16,505 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:24,585 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:24,676 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 11:14:24,920 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 11:14:27,719 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:28,521 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '25'        and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:14:34,086 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '18'        and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:14:34,265 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] PreparedStatement : [IF EXISTS            (SELECT ACCOUNT_ID FROM TM_SYS_USERS WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1 )            BEGIN            update TM_SYS_USERS set INVENTORY_ID =  @param2 , WORKING_DEPT_ID =  @param3             WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1             END            ELSE            BEGIN            insert into TM_SYS_USERS ([ACCOUNT_ID], [ACCOUNT_NAME], [INVENTORY_ID], [WORKING_DEPT_ID], [HOSPITAL_ID])            values ( @param0 ,  @param4 ,  @param2 ,  @param3 ,  @param1 )            END]
2019-08-15 11:14:34,265 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Parameters: [@param0=[ACCOUNT_ID,113], @param1=[HOSPITAL_ID,HLU01], @param2=[INVENTORY_ID,30], @param3=[WORKING_DEPT_ID,18], @param4=[ACCOUNT_NAME,admin]]
2019-08-15 11:14:34,265 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
2019-08-15 11:14:38,359 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:38,832 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD40'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:39,012 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 11:14:39,183 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 11:14:41,196 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 11:14:41,324 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 11:14:44,063 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:44,237 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:45,662 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '144'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:14:45,750 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '144']
2019-08-15 11:14:45,874 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '144'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:14:45,921 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:14:45,921 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,144]]
2019-08-15 11:14:45,921 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:14:46,009 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190020741']
2019-08-15 11:14:46,281 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '144']
2019-08-15 11:14:46,441 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '144'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:14:46,558 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '144'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:14:46,596 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:14:46,596 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,144]]
2019-08-15 11:14:46,596 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:14:46,703 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 11:14:46,703 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,144]]
2019-08-15 11:14:46,703 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:14:46,738 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 771 and REF_ID = 0             and               BENHAN_ID = '144'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 771 and SOLUONG = 0             and               BENHAN_ID = 144                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '771' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '771' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 11:14:46,738 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,771], @param1=[BENHAN_ID,144]]
2019-08-15 11:14:46,738 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 11:14:48,084 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '771' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '144']
2019-08-15 11:14:49,031 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '144'                 where B.TIEPNHAN_ID = '771') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '771')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '771')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '771')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '771')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '771' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '144'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 11:14:49,325 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 11:14:49,381 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 11:14:49,381 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,771]]
2019-08-15 11:14:49,381 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 11:14:49,439 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '4']
2019-08-15 11:14:49,496 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 771)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 11:14:49,550 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 11:14:49,734 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":20108,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":20000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":40000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":40000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":960}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 11:14:49,951 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 11:14:49,951 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,771]]
2019-08-15 11:14:49,951 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 11:14:50,000 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '4']
2019-08-15 11:14:50,038 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 771)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 11:14:50,076 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 11:14:50,216 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":7451,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":80000.0000,"THANHTIEN_DOANHTHU":80000.00,"BHYT_TL":1.0,"BHYT_DONGIA":33000.0000,"BHYT_THANHTIEN":33000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":33000.0,"BHYT_THANHTIEN_CHITRA":33000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7452,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":5800.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":5800.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7453,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":7900.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7900.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7454,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7456,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":18600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":18600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7457,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":18600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":18600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7458,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":30000.0000,"THANHTIEN_DOANHTHU":30000.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":8600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7459,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":30000.0000,"THANHTIEN_DOANHTHU":30000.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":8600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7460,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":18600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":18600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7461,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":2740.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2740.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7462,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7463,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":1000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7466,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":8000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0,"BHYT_DONGIA":5306.0000,"BHYT_THANHTIEN":5306.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":5306.0,"BHYT_THANHTIEN_CHITRA":5306.00,"BENHNHAN_PHAITHANHTOAN":2694.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2694.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7467,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":15000.0000,"THANHTIEN_DOANHTHU":15000.00,"BHYT_TL":1.0,"BHYT_DONGIA":8295.0000,"BHYT_THANHTIEN":8295.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8295.0,"BHYT_THANHTIEN_CHITRA":8295.00,"BENHNHAN_PHAITHANHTOAN":6705.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6705.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7468,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":2740.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2740.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7469,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":7470,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":1500.00,"BHYT_TL":1.0,"BHYT_DONGIA":348.0000,"BHYT_THANHTIEN":348.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":348.0,"BHYT_THANHTIEN_CHITRA":348.00,"BENHNHAN_PHAITHANHTOAN":1152.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1152.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":10671,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":0.5000,"DONGIA_DOANHTHU":650000.0000,"THANHTIEN_DOANHTHU":325000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":10672,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":38410.0000,"THANHTIEN_DOANHTHU":38410.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":36410.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":36410.00,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":10673,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":509.0000,"THANHTIEN_DOANHTHU":1018.00,"BHYT_TL":1.0,"BHYT_DONGIA":509.0000,"BHYT_THANHTIEN":1018.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":509.0,"BHYT_THANHTIEN_CHITRA":1018.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":10675,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":605000.0000,"THANHTIEN_DOANHTHU":605000.00,"BHYT_TL":1.0,"BHYT_DONGIA":605000.0000,"BHYT_THANHTIEN":605000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":605000.0,"BHYT_THANHTIEN_CHITRA":605000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13327,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4915.0000,"THANHTIEN_DOANHTHU":4915.00,"BHYT_TL":1.0,"BHYT_DONGIA":4915.0000,"BHYT_THANHTIEN":4915.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":4915.0,"BHYT_THANHTIEN_CHITRA":4915.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13328,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13329,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":348.0000,"THANHTIEN_DOANHTHU":348.00,"BHYT_TL":1.0,"BHYT_DONGIA":348.0000,"BHYT_THANHTIEN":348.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":348.0,"BHYT_THANHTIEN_CHITRA":348.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13330,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":6410.0000,"THANHTIEN_DOANHTHU":6410.00,"BHYT_TL":1.0,"BHYT_DONGIA":4410.0000,"BHYT_THANHTIEN":4410.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":4410.0,"BHYT_THANHTIEN_CHITRA":4410.00,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13331,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13332,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":0.2000,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":5000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13333,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":10925.0000,"THANHTIEN_DOANHTHU":10925.00,"BHYT_TL":1.0,"BHYT_DONGIA":8925.0000,"BHYT_THANHTIEN":8925.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8925.0,"BHYT_THANHTIEN_CHITRA":8925.00,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13334,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":11030.0000,"THANHTIEN_DOANHTHU":11030.00,"BHYT_TL":1.0,"BHYT_DONGIA":9030.0000,"BHYT_THANHTIEN":9030.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":9030.0,"BHYT_THANHTIEN_CHITRA":9030.00,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13594,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":8295.0000,"THANHTIEN_DOANHTHU":8295.00,"BHYT_TL":1.0,"BHYT_DONGIA":8295.0000,"BHYT_THANHTIEN":8295.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8295.0,"BHYT_THANHTIEN_CHITRA":8295.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13595,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":8376.0000,"THANHTIEN_DOANHTHU":8376.00,"BHYT_TL":1.0,"BHYT_DONGIA":8376.0000,"BHYT_THANHTIEN":8376.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8376.0,"BHYT_THANHTIEN_CHITRA":8376.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":13596,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":15804,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1000000.0000,"THANHTIEN_DOANHTHU":1000000.00,"BHYT_TL":1.0,"BHYT_DONGIA":628000.0000,"BHYT_THANHTIEN":628000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1000000.00,"GIATRI_HOADON":628000.00,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":372000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"1","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":19217,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":38410.0000,"THANHTIEN_DOANHTHU":38410.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":36410.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":36410.00,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":19218,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":509.0000,"THANHTIEN_DOANHTHU":1018.00,"BHYT_TL":1.0,"BHYT_DONGIA":509.0000,"BHYT_THANHTIEN":1018.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":509.0,"BHYT_THANHTIEN_CHITRA":1018.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":19219,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":19220,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":348.0000,"THANHTIEN_DOANHTHU":348.00,"BHYT_TL":1.0,"BHYT_DONGIA":348.0000,"BHYT_THANHTIEN":348.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":348.0,"BHYT_THANHTIEN_CHITRA":348.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":20107,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":2.0000,"DONGIA_DOANHTHU":152000.0000,"THANHTIEN_DOANHTHU":304000.00,"BHYT_TL":1.0,"BHYT_DONGIA":152000.0000,"BHYT_THANHTIEN":304000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":152000.0,"BHYT_THANHTIEN_CHITRA":304000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":20809,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":8376.0000,"THANHTIEN_DOANHTHU":8376.00,"BHYT_TL":1.0,"BHYT_DONGIA":8376.0000,"BHYT_THANHTIEN":8376.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8376.0,"BHYT_THANHTIEN_CHITRA":8376.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":20834,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":630.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":630.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":630.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":20835,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":22026,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":630.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":630.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":630.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464},{"VIENPHI_ID":22027,"TIEPNHAN_ID":771,"BENHAN_ID":144,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"1","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"DN438470301801638210","SOBHYT_HUONG_ID":1464}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 11:14:50,306 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 11:14:50,306 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,771]]
2019-08-15 11:14:50,306 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:14:56,110 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD78'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:14:56,394 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '771'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '144']
2019-08-15 11:14:56,531 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '144']
2019-08-15 11:14:56,572 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 11:14:56,572 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,144]]
2019-08-15 11:14:56,572 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:14:56,659 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '144' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:16:13,376 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '771'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '144']
2019-08-15 11:16:30,114 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '144']
2019-08-15 11:16:30,222 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 11:16:30,222 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,144]]
2019-08-15 11:16:30,222 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:17:02,846 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '144' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
--------------------------------------------------------------------------------
2019-08-15 11:18:02,413 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 11:18:02,710 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 11:18:02,757 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 11:18:03,315 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:03,632 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 11:18:09,326 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 11:18:09,366 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 11:18:10,919 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 11:18:11,031 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 11:18:11,810 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 11:18:11,971 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 11:18:12,101 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 11:18:12,184 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 11:18:12,552 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 11:18:12,634 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 11:18:12,710 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 11:18:12,790 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 11:18:12,867 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 11:18:13,383 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 11:18:13,433 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 11:18:13,516 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 11:18:13,568 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 11:18:15,613 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 11:18:15,698 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 11:18:19,124 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 11:18:19,195 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 11:18:19,234 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 11:18:19,303 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 11:18:19,350 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 11:18:19,426 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 11:18:20,412 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:21,588 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 11:18:26,528 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 11:18:26,558 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 11:18:26,645 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:26,855 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:27,254 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 11:18:27,256 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 11:18:27,256 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 11:18:27,286 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 11:18:27,286 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 11:18:27,286 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 11:18:27,411 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:27,605 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:35,420 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:35,519 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 11:18:35,859 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 11:18:43,316 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:43,775 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD40'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:43,935 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 11:18:44,062 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 11:18:45,883 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 11:18:46,005 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 11:18:49,036 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:49,217 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:18:50,687 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '254'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:18:50,791 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '254']
2019-08-15 11:18:50,898 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '254'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:18:50,953 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:18:50,953 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,254]]
2019-08-15 11:18:50,953 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:18:51,035 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190021296']
2019-08-15 11:18:51,131 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '254']
2019-08-15 11:18:51,300 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '254'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:18:51,420 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '254'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:18:51,461 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:18:51,462 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,254]]
2019-08-15 11:18:51,462 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:18:51,544 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 11:18:51,544 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,254]]
2019-08-15 11:18:51,544 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:18:51,571 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 1332 and REF_ID = 0             and               BENHAN_ID = '254'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 1332 and SOLUONG = 0             and               BENHAN_ID = 254                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '1332' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '1332' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 11:18:51,571 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,1332], @param1=[BENHAN_ID,254]]
2019-08-15 11:18:51,571 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 11:18:52,587 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '1332' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '254']
2019-08-15 11:18:52,654 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '254'                 where B.TIEPNHAN_ID = '1332') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '1332')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '1332')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '1332')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '1332')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '1332' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '254'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 11:18:52,910 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 11:18:52,959 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 11:18:52,959 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,1332]]
2019-08-15 11:18:52,959 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 11:18:52,995 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '0']
2019-08-15 11:18:53,025 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 1332)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 11:18:53,086 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhVTYTPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_VTYT        where PHAUTHUAT_ID in (select distinct PHAUTHUAT_ID from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 1332)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01'))        and exists (select DUOC_ID from TM_DUOC A left join TM_LOAIDUOC B on A.LOAIDUOC_ID = B.LOAIDUOC_ID where TT_PHAUTHUAT_VTYT.DUOC_ID = DUOC_ID and B.LOAIVATTU_ID = 'V')        order by PHAUTHUAT_VTYT_ID asc]
2019-08-15 11:18:53,248 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 11:18:53,486 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":16227,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":80000.0000,"THANHTIEN_DOANHTHU":80000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":80000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":80000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":16243,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":40000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":40000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":16244,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":16491,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":16492,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":16493,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":1000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":17196,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18114,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":45000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":45000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":45000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18115,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18116,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18117,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18118,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18336,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":140000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":140000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":140000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18337,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19000.0000,"THANHTIEN_DOANHTHU":19000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":19000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":19000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18338,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18339,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18340,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":800.0000,"THANHTIEN_DOANHTHU":1600.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18341,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18395,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":7000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18396,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":9000.0000,"THANHTIEN_DOANHTHU":9000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":9000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":9000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18397,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":25000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":25000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":25000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18398,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18399,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":1500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":18400,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19056,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":3040000.0000,"THANHTIEN_DOANHTHU":3040000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3040000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3040000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19057,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":6000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19058,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19059,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19060,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19066,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":25000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":25000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":25000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19067,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":16000.0000,"THANHTIEN_DOANHTHU":16000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":16000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":16000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19068,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19069,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":100000.0000,"THANHTIEN_DOANHTHU":100000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":100000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":100000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19070,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19071,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":60000.0000,"THANHTIEN_DOANHTHU":60000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":60000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":60000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19092,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":10.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19093,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":50.0000,"DONGIA_DOANHTHU":150.0000,"THANHTIEN_DOANHTHU":7500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":7500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19116,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":10000.0000,"THANHTIEN_DOANHTHU":10000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":10000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":10000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19117,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":0.1000,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":2500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19118,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19119,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19120,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19121,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":150000.0000,"THANHTIEN_DOANHTHU":150000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":150000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":150000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19122,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":7000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19123,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":20.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":60000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":60000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":60000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19124,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":5.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":20000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":20000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":20000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19125,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":6.0000,"DONGIA_DOANHTHU":8000.0000,"THANHTIEN_DOANHTHU":48000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":48000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":48000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19126,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":1500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19127,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":60000.0000,"THANHTIEN_DOANHTHU":60000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":60000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":60000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19128,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19129,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":20000.0000,"THANHTIEN_DOANHTHU":20000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":20000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":20000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19130,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":40000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":40000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19131,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":3.0000,"DONGIA_DOANHTHU":22000.0000,"THANHTIEN_DOANHTHU":66000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":66000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":66000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19132,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":100000.0000,"THANHTIEN_DOANHTHU":100000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":100000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":100000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19133,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":35000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":35000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":35000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19139,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.5000,"DONGIA_DOANHTHU":10000.0000,"THANHTIEN_DOANHTHU":15000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":15000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":15000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19140,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.5000,"DONGIA_DOANHTHU":2400.0000,"THANHTIEN_DOANHTHU":3600.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3600.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3600.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":19141,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":100.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":100000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":100000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":100000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20125,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20126,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20127,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":140000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":140000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":140000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20128,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":0.5000,"DONGIA_DOANHTHU":60000.0000,"THANHTIEN_DOANHTHU":30000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":30000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":30000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20130,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20131,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":7000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20132,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20133,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":8000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20134,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":10.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":30000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":30000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":30000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":20135,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":1500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21091,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":140000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":140000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":140000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21092,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":4.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21093,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":140000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":140000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":140000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21094,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":4.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21170,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21171,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21172,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21188,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21189,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349},{"VIENPHI_ID":21190,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":1349}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 11:18:53,614 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 11:18:53,614 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,1332]]
2019-08-15 11:18:53,614 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 11:18:53,642 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '6']
2019-08-15 11:18:53,669 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 1332)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 11:18:54,013 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhVTYTPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_VTYT        where PHAUTHUAT_ID in (select distinct PHAUTHUAT_ID from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 1332)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01'))        and exists (select DUOC_ID from TM_DUOC A left join TM_LOAIDUOC B on A.LOAIDUOC_ID = B.LOAIDUOC_ID where TT_PHAUTHUAT_VTYT.DUOC_ID = DUOC_ID and B.LOAIVATTU_ID = 'V')        order by PHAUTHUAT_VTYT_ID asc]
2019-08-15 11:18:54,053 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 11:18:54,247 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":37226,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":53000.0000,"THANHTIEN_DOANHTHU":106000.00,"BHYT_TL":1.0,"BHYT_DONGIA":53000.0000,"BHYT_THANHTIEN":106000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":53000.0,"BHYT_THANHTIEN_CHITRA":106000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":37227,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":4.0000,"DONGIA_DOANHTHU":470.0000,"THANHTIEN_DOANHTHU":1880.00,"BHYT_TL":1.0,"BHYT_DONGIA":470.0000,"BHYT_THANHTIEN":1880.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":470.0,"BHYT_THANHTIEN_CHITRA":1880.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":37560,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1030.0000,"THANHTIEN_DOANHTHU":2060.00,"BHYT_TL":1.0,"BHYT_DONGIA":1030.0000,"BHYT_THANHTIEN":2060.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":1030.0,"BHYT_THANHTIEN_CHITRA":2060.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":37561,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":348.0000,"THANHTIEN_DOANHTHU":696.00,"BHYT_TL":1.0,"BHYT_DONGIA":348.0000,"BHYT_THANHTIEN":696.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":348.0,"BHYT_THANHTIEN_CHITRA":696.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":37562,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":40743,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":3.5000,"DONGIA_DOANHTHU":191000.0000,"THANHTIEN_DOANHTHU":668500.00,"BHYT_TL":1.0,"BHYT_DONGIA":191000.0000,"BHYT_THANHTIEN":668500.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":191000.0,"BHYT_THANHTIEN_CHITRA":668500.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":40744,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":3.5000,"DONGIA_DOANHTHU":10000.0000,"THANHTIEN_DOANHTHU":35000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":35000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":35000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":40745,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":1.0000,"DONGIA_DOANHTHU":100000.0000,"THANHTIEN_DOANHTHU":100000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":100000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":100000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790},{"VIENPHI_ID":40746,"TIEPNHAN_ID":1332,"BENHAN_ID":254,"SOLUONG":2.0000,"DONGIA_DOANHTHU":32000.0000,"THANHTIEN_DOANHTHU":64000.00,"BHYT_TL":1.0,"BHYT_DONGIA":32000.0000,"BHYT_THANHTIEN":64000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":32000.0,"BHYT_THANHTIEN_CHITRA":64000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HN238382188512238361","SOBHYT_HUONG_ID":1790}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 11:18:54,303 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 11:18:54,304 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,1332]]
2019-08-15 11:18:54,304 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:18:58,255 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD78'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:19:01,481 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '1332'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '254']
2019-08-15 11:19:01,570 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '254']
2019-08-15 11:19:01,613 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 11:19:01,613 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,254]]
2019-08-15 11:19:01,613 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:19:01,711 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '254' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:19:15,479 [1] DEBUG - Statement Id: [DAO00080_GetLastLuutru_idCuaBenhan] PreparedStatement : [select MAX(LUUTRU_ID) LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID =  @param0]
2019-08-15 11:19:15,479 [1] DEBUG - Statement Id: [DAO00080_GetLastLuutru_idCuaBenhan] Parameters: [@param0=[BENHAN_ID,254]]
2019-08-15 11:19:15,479 [1] DEBUG - Statement Id: [DAO00080_GetLastLuutru_idCuaBenhan] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:19:15,577 [1] DEBUG - Statement Id: [DAO00080_Add_ThongTinDichTruyen] PreparedStatement : [insert into TT_NOITRU_CHAMSOCDICHTRUYEN (        DUOC_ID        , SOLUONG        , BENHVIEN_ID        , NGAYTAO        , NGUOITAO_ID        , TOCDOTRUYEN        , BENHAN_ID        , LUUTRU_ID        , BACSICHIDINH_ID        , DIEUDUONGTHUCHIEN_ID        , THOIGIANBATDAU        , THOIGIANKETTHUC        , SOLOSX        , THOIGIANYLENH        , SOMLCHAYNGUOC        , SOMLGIAOLAI        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         )]
2019-08-15 11:19:15,577 [1] DEBUG - Statement Id: [DAO00080_Add_ThongTinDichTruyen] Parameters: [@param0=[DUOC_ID,1392], @param1=[SOLUONG,1], @param2=[BENHVIEN_ID,HLU01], @param3=[NGAYTAO,8/15/2019 11:19:15 AM], @param4=[NGUOITAO_ID,0], @param5=[TOCDOTRUYEN,], @param6=[BENHAN_ID,254], @param7=[LUUTRU_ID,392], @param8=[BACSICHIDINH_ID,0], @param9=[DIEUDUONGTHUCHIEN_ID,0], @param10=[THOIGIANBATDAU,null], @param11=[THOIGIANKETTHUC,null], @param12=[SOLOSX,1], @param13=[THOIGIANYLENH,8/15/2019 11:19:15 AM], @param14=[SOMLCHAYNGUOC,0], @param15=[SOMLGIAOLAI,0]]
2019-08-15 11:19:15,577 [1] DEBUG - Statement Id: [DAO00080_Add_ThongTinDichTruyen] Types: [@param0=[Int32, System.Int32], @param1=[Decimal, System.Decimal], @param2=[String, System.String], @param3=[DateTime, System.DateTime], @param4=[Int64, System.Int64], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Int32, System.Int32], @param8=[Int32, System.Int32], @param9=[Int32, System.Int32], @param10=[System.DBNull, null], @param11=[System.DBNull, null], @param12=[String, System.String], @param13=[DateTime, System.DateTime], @param14=[Int32, System.Int32], @param15=[Int32, System.Int32]]
2019-08-15 11:19:15,757 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '254' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:19:16,672 [1] DEBUG - Statement Id: [DAO00080_GetChiTietTruyenDich] PreparedStatement : [select DT.DUOC_ID, DT.SOLUONG, DT.SOLOSX, DT.TOCDOTRUYEN, DT.THOIGIANBATDAU, DT.THOIGIANKETTHUC, BS.TENNHANVIEN AS BACSICHIDINH,        DD.TENNHANVIEN AS DIEUDUONG, D.TENDUOCDAYDU, ROW_NUMBER () OVER(ORDER BY D.AUTOCOMPLETEFIELD)  AS STT, DT.CHAMSOCDICHTRUYEN_ID,        DT.BACSICHIDINH_ID, DT.DIEUDUONGTHUCHIEN_ID, DT.SOMLCHAYNGUOC, DT.SOMLGIAOLAI        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TM_NHANVIEN BS on BS.NHANVIEN_ID = DT.BACSICHIDINH_ID and BS.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_NHANVIEN DD on DD.NHANVIEN_ID = DT.DIEUDUONGTHUCHIEN_ID and DD.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_DUOC D on D.DUOC_ID = DT.DUOC_ID and D.BENHVIEN_ID = DT.BENHVIEN_ID        where DT.BENHAN_ID = '254' and DT.LUUTRU_ID = '392'                AND DT.CHAMSOCDICHTRUYEN_ID = '6701'        and DT.BENHVIEN_ID = 'HLU01'        order by D.AUTOCOMPLETEFIELD]
2019-08-15 11:19:29,361 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:19:44,778 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '26703'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5761']
2019-08-15 11:19:44,866 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '5761']
2019-08-15 11:19:44,910 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 11:19:44,910 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,5761]]
2019-08-15 11:19:44,910 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:19:44,980 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '5761' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:19:59,072 [1] DEBUG - Statement Id: [DAO00080_GetLastLuutru_idCuaBenhan] PreparedStatement : [select MAX(LUUTRU_ID) LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID =  @param0]
2019-08-15 11:19:59,072 [1] DEBUG - Statement Id: [DAO00080_GetLastLuutru_idCuaBenhan] Parameters: [@param0=[BENHAN_ID,5761]]
2019-08-15 11:19:59,072 [1] DEBUG - Statement Id: [DAO00080_GetLastLuutru_idCuaBenhan] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:19:59,159 [1] DEBUG - Statement Id: [DAO00080_Add_ThongTinDichTruyen] PreparedStatement : [insert into TT_NOITRU_CHAMSOCDICHTRUYEN (        DUOC_ID        , SOLUONG        , BENHVIEN_ID        , NGAYTAO        , NGUOITAO_ID        , TOCDOTRUYEN        , BENHAN_ID        , LUUTRU_ID        , BACSICHIDINH_ID        , DIEUDUONGTHUCHIEN_ID        , THOIGIANBATDAU        , THOIGIANKETTHUC        , SOLOSX        , THOIGIANYLENH        , SOMLCHAYNGUOC        , SOMLGIAOLAI        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         )]
2019-08-15 11:19:59,159 [1] DEBUG - Statement Id: [DAO00080_Add_ThongTinDichTruyen] Parameters: [@param0=[DUOC_ID,995], @param1=[SOLUONG,1], @param2=[BENHVIEN_ID,HLU01], @param3=[NGAYTAO,8/15/2019 11:19:59 AM], @param4=[NGUOITAO_ID,0], @param5=[TOCDOTRUYEN,], @param6=[BENHAN_ID,5761], @param7=[LUUTRU_ID,9417], @param8=[BACSICHIDINH_ID,0], @param9=[DIEUDUONGTHUCHIEN_ID,0], @param10=[THOIGIANBATDAU,null], @param11=[THOIGIANKETTHUC,null], @param12=[SOLOSX,], @param13=[THOIGIANYLENH,8/15/2019 11:19:59 AM], @param14=[SOMLCHAYNGUOC,0], @param15=[SOMLGIAOLAI,0]]
2019-08-15 11:19:59,159 [1] DEBUG - Statement Id: [DAO00080_Add_ThongTinDichTruyen] Types: [@param0=[Int32, System.Int32], @param1=[Decimal, System.Decimal], @param2=[String, System.String], @param3=[DateTime, System.DateTime], @param4=[Int64, System.Int64], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Int32, System.Int32], @param8=[Int32, System.Int32], @param9=[Int32, System.Int32], @param10=[System.DBNull, null], @param11=[System.DBNull, null], @param12=[String, System.String], @param13=[DateTime, System.DateTime], @param14=[Int32, System.Int32], @param15=[Int32, System.Int32]]
2019-08-15 11:19:59,262 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '5761' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:20:00,297 [1] DEBUG - Statement Id: [DAO00080_GetChiTietTruyenDich] PreparedStatement : [select DT.DUOC_ID, DT.SOLUONG, DT.SOLOSX, DT.TOCDOTRUYEN, DT.THOIGIANBATDAU, DT.THOIGIANKETTHUC, BS.TENNHANVIEN AS BACSICHIDINH,        DD.TENNHANVIEN AS DIEUDUONG, D.TENDUOCDAYDU, ROW_NUMBER () OVER(ORDER BY D.AUTOCOMPLETEFIELD)  AS STT, DT.CHAMSOCDICHTRUYEN_ID,        DT.BACSICHIDINH_ID, DT.DIEUDUONGTHUCHIEN_ID, DT.SOMLCHAYNGUOC, DT.SOMLGIAOLAI        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TM_NHANVIEN BS on BS.NHANVIEN_ID = DT.BACSICHIDINH_ID and BS.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_NHANVIEN DD on DD.NHANVIEN_ID = DT.DIEUDUONGTHUCHIEN_ID and DD.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_DUOC D on D.DUOC_ID = DT.DUOC_ID and D.BENHVIEN_ID = DT.BENHVIEN_ID        where DT.BENHAN_ID = '5761' and DT.LUUTRU_ID = '9417'                AND DT.CHAMSOCDICHTRUYEN_ID = '6702'        and DT.BENHVIEN_ID = 'HLU01'        order by D.AUTOCOMPLETEFIELD]
2019-08-15 11:20:14,961 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD09'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 11:20:17,230 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 11:20:17,231 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190031740]]
2019-08-15 11:20:17,231 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 11:20:20,427 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:20:20,577 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:20:20,660 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:20:20,759 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:20:20,811 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:20:20,811 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:20:20,811 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:20:20,890 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190031740']
2019-08-15 11:20:20,973 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2732']
2019-08-15 11:20:21,314 [1] DEBUG - Statement Id: [DAO00064_GetVienphiTiepNhan] PreparedStatement : [select distinct C.TRANGTHAI, C.NOITHUCHIEN_ID as PHONGBAN_ID, D.NGAYKHAM,        ISNULL(A.DICHVU_ID, A.DUOC_ID) as NOIDUNG_ID, A.REF_ID as IDREF, A.VIENPHI_ID,        A.SOLUONG as SOLUONG, A.SOLUONG as SOLUONG_NEW, A.DICHVU_ID, A.DUOC_ID, A.BHYT_DONGIA_CHITRA,        A.DONGIA_DOANHTHU, A.DONGIA_DOANHTHU as DONGIADOANHTHU, A.BHYT_DONGIA as DONGIAHOTRO, A.BHYT_THANHTIEN_CHITRA as DONGIAHOTROCHITRA,        A.REF_TABLE as LOAI, A.BHYT_DONGIA, A.BHYT_THANHTIEN, A.BHYT_THANHTIEN_CHITRA, A.BENHNHAN_PHAITHANHTOAN, A.GIATRI_BENHNHAN_DATHANHTOAN, A.BENHVIEN_ID, A.THANHTIEN_DOANHTHU,        A.LOAI_CHIPHI, A.LOAIGIA_ID, REF_TABLE, A.KHAMBENH_ID, A.REF_ID, A.DUOCPHEPTHUCHIEN,        A.HUY, A.KHONGTHUTIEN, A.DATHANHTOAN, A.HOADON_ID, A.ACTIVE, C.DVYEUCAU_ID, C.NGAYYEUCAU, ISNULL(C.BACSICHIDINH_ID, C.NGUOIGIOITHIEU_ID) as BACSICHIDINH_ID, C.NOIYEUCAU_ID        , A.DATHUCHIEN,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID,        ndv.MANHOMDICHVU        from TT_VIENPHI A        left join (select * from TT_DVYEUCAU where TIEPNHAN_ID = '12885') C on C.TIEPNHAN_ID = A.TIEPNHAN_ID and C.DICHVU_ID = A.DICHVU_ID  and C.DVYEUCAU_ID = A.REF_ID        left join (select * from TT_NGOAITRU_KHAMBENH where TIEPNHAN_ID = '12885') D on D.TIEPNHAN_ID = A.TIEPNHAN_ID and D.DICHVU_ID = A.DICHVU_ID        left join TT_NGOAITRU_TOATHUOC E on E.DUOC_ID = A.DUOC_ID and E.TOATHUOC_ID = A.REF_ID        left join TT_DUOC_CHUNGTU_CHITIET  ctct on ctct.CHUNGTUCHITIET_ID = A.REF_ID and A.REF_TABLE = 'TT_DUOC_CHUNGTU_CHITIET'        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        A.TIEPNHAN_ID = '12885' and A.BENHVIEN_ID = 'HLU01' and (A.BENHAN_ID is NULL or A.BENHAN_ID = '') and A.HUY = '0'        and        (        (A.DICHVU_ID is not null and C.HUYYEUCAU != '1')        or (A.DICHVU_ID is null and A.DUOC_ID is not null and A.REF_TABLE != 'TT_DUOC_CHUNGTU_CHITIET')        or (A.DICHVU_ID is null and A.DUOC_ID is not null and A.REF_TABLE = 'TT_DUOC_CHUNGTU_CHITIET' and ctct.CHUNGTUCHITIET_ID is not null)        )        ORDER BY A.VIENPHI_ID]
2019-08-15 11:20:21,345 [1] DEBUG - Statement Id: [DAO00064_GetVienphiTamUngTiepNhan] PreparedStatement : [select * from TT_HOADON         where LOAIHOADON = 'TU' and TIEPNHAN_ID = '12885' and (BENHAN_ID is NULL or BENHAN_ID = '')         and DATHANHTOAN = '1' and HUYHOADON = '0' and HOANTRA = '0']
2019-08-15 11:20:21,373 [1] DEBUG - Statement Id: [DAO00080_CheckConThuocVTYTChuaXuat] PreparedStatement : [IF EXISTS (        select VTYT.KHAMBENH_VTYT_ID        from TT_NGOAITRU_KHAMBENH_VTYT VTYT        inner join TT_NGOAITRU_KHAMBENH KB on KB.KHAMBENH_ID = VTYT.KHAMBENH_ID and KB.BENHVIEN_ID = VTYT.BENHVIEN_ID        where KB.TIEPNHAN_ID = 12885        and KB.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.PHAUTHUAT_VTYT_ID        from TT_PHAUTHUAT_VTYT VTYT        inner join TT_PHAUTHUAT PT on PT.PHAUTHUAT_ID = VTYT.PHAUTHUAT_ID and PT.BENHVIEN_ID = VTYT.BENHVIEN_ID        where PT.TIEPNHAN_ID = 12885        and PT.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.CLSKETQUA_VTYT_ID        from TT_CLSKETQUA_VTYT VTYT        inner join TT_DVYEUCAU YC on YC.DVYEUCAU_ID = VTYT.DVYEUCAU_ID and YC.BENHVIEN_ID = VTYT.BENHVIEN_ID        where YC.TIEPNHAN_ID = 12885        and YC.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL        )        BEGIN        SELECT -1 AS RESULT        END        ELSE        BEGIN        SELECT 1 AS RESULT        END]
2019-08-15 11:20:21,455 [1] DEBUG - Statement Id: [DAO00079_CheckThuocChuaXuat] PreparedStatement : [select TT.*        from TT_NOITRU_TOATHUOC TT        left join TT_NOITRU_TRATHUOC_CHITIET TT_CT on TT_CT.TOATHUOC_ID = TT.TOATHUOC_ID        where TT.TIEPNHAN_ID = 12885        and TT.BENHVIEN_ID = 'HLU01'        and TT.CHUNGTU_ID IS NULL        and TT.SOLUONG != isnull(TT_CT.SOLUONG,0)]
2019-08-15 11:20:21,581 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:20:21,690 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2732'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:20:21,736 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:20:21,736 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2732]]
2019-08-15 11:20:21,736 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:21:00,574 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023338'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:21:31,605 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '12885'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '2732']
2019-08-15 11:21:34,169 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '2732' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
2019-08-15 11:21:48,271 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] PreparedStatement : [select B.TENPHONGBAN, C.MAYTE, C.TENBENHNHAN, C.DIACHILIENLAC, D.SOBHYT, A.*        from TT_NOITRU_BENHAN A        inner join TT_BENHNHAN C on C.BENHNHAN_ID = A.BENHNHAN_ID        inner join TT_TIEPNHAN D on D.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TM_PHONGBAN B on B.PHONGBAN_ID = (case when A.LOAIBENHAN = '1' then A.KHOAVAO_ID else A.KHOACHUYENDEN_ID end)        where A.KHOABENHAN = '1' and A.TRANGTHAI = 'DAKHOA'         and           (C.MAYTE like '%' +  @param0  + '%' or C.TENBENHNHAN like '%' +  @param0  + '%' or A.SOBENHAN like '%' +  @param0  + '%')         and           A.NGAYVAOVIEN <= '8/15/2019 12:00:00 AM']
2019-08-15 11:21:48,271 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Parameters: [@param0=[TUKHOA,190031731]]
2019-08-15 11:21:48,271 [1] DEBUG - Statement Id: [DAO00066_DanhSachBenhNhanNoitruDaKhoa] Types: [@param0=[String, System.String]]
2019-08-15 11:21:50,843 [1] DEBUG - Statement Id: [DAO00080_CheckTrangThaiDaXacNhanBHYT] PreparedStatement : [IF EXISTS (        select XACNHANCHIPHI_ID        from TT_XACNHANCHIPHI        where BENHAN_ID = ''        and BENHNHAN_ID = ''        and BENHVIEN_ID = 'HLU01'        )        BEGIN        SELECT -1 AS RESULT        END        ELSE        BEGIN        SELECT 1 AS RESULT        END]
2019-08-15 11:21:51,220 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023325'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:21:51,409 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '2719'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 11:21:51,489 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2719']
2019-08-15 11:21:51,592 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2719'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:21:51,630 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:21:51,630 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2719]]
2019-08-15 11:21:51,630 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:21:51,715 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190031731']
2019-08-15 11:21:51,842 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '2719']
2019-08-15 11:21:52,060 [1] DEBUG - Statement Id: [DAO00080_CheckConThuocVTYTChuaXuat] PreparedStatement : [IF EXISTS (        select VTYT.KHAMBENH_VTYT_ID        from TT_NGOAITRU_KHAMBENH_VTYT VTYT        inner join TT_NGOAITRU_KHAMBENH KB on KB.KHAMBENH_ID = VTYT.KHAMBENH_ID and KB.BENHVIEN_ID = VTYT.BENHVIEN_ID        where KB.TIEPNHAN_ID = 12875        and KB.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.PHAUTHUAT_VTYT_ID        from TT_PHAUTHUAT_VTYT VTYT        inner join TT_PHAUTHUAT PT on PT.PHAUTHUAT_ID = VTYT.PHAUTHUAT_ID and PT.BENHVIEN_ID = VTYT.BENHVIEN_ID        where PT.TIEPNHAN_ID = 12875        and PT.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL          union all          select VTYT.CLSKETQUA_VTYT_ID        from TT_CLSKETQUA_VTYT VTYT        inner join TT_DVYEUCAU YC on YC.DVYEUCAU_ID = VTYT.DVYEUCAU_ID and YC.BENHVIEN_ID = VTYT.BENHVIEN_ID        where YC.TIEPNHAN_ID = 12875        and YC.BENHVIEN_ID = 'HLU01'        and VTYT.CHUNGTU_ID IS NULL        )        BEGIN        SELECT -1 AS RESULT        END        ELSE        BEGIN        SELECT 1 AS RESULT        END]
2019-08-15 11:21:52,185 [1] DEBUG - Statement Id: [DAO00079_CheckThuocChuaXuat] PreparedStatement : [select TT.*        from TT_NOITRU_TOATHUOC TT        left join TT_NOITRU_TRATHUOC_CHITIET TT_CT on TT_CT.TOATHUOC_ID = TT.TOATHUOC_ID        where TT.TIEPNHAN_ID = 12875        and TT.BENHVIEN_ID = 'HLU01'        and TT.CHUNGTU_ID IS NULL        and TT.SOLUONG != isnull(TT_CT.SOLUONG,0)]
2019-08-15 11:21:52,355 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '2719'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 11:21:52,467 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '2719'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 11:21:52,523 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 11:21:52,524 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,2719]]
2019-08-15 11:21:52,524 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 11:21:56,353 [1] DEBUG - Statement Id: [DAO00019_ThongTinBenhNhanBenhAn] PreparedStatement : [select distinct C.SOBENHAN, C.BENHAN_ID, A.SOTIEPNHAN, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT,        B.*        from TT_NOITRU_BENHAN C        inner join TT_TIEPNHAN A on C.TIEPNHAN_ID = A.TIEPNHAN_ID        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'        where                    C.SOBENHAN = '19.023325'                 and A.BENHVIEN_ID = 'HLU01']
2019-08-15 11:21:56,476 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '12875'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '2719']
2019-08-15 11:21:56,659 [1] DEBUG - Statement Id: [DAO00080_GetDSYLenhTruyenDich] PreparedStatement : [select distinct * from (        select DT.THOIGIANYLENH, PB.PHONGBAN_ID, PB.TENPHONGBAN AS KHOACHIDINH, DT.LUUTRU_ID, DT.CHAMSOCDICHTRUYEN_ID, CAST(0 AS bit) AS CHON        from TT_NOITRU_CHAMSOCDICHTRUYEN DT        left join TT_NOITRU_LUUTRU LT on LT.LUUTRU_ID = DT.LUUTRU_ID and LT.BENHVIEN_ID = DT.BENHVIEN_ID        left join TM_PHONGBAN PB on PB.PHONGBAN_ID = LT.PHONGBAN_ID and PB.BENHVIEN_ID = LT.BENHVIEN_ID        where DT.BENHAN_ID = '2719' and DT.BENHVIEN_ID = 'HLU01'        ) tmp        order by THOIGIANYLENH desc]
--------------------------------------------------------------------------------
2019-08-15 14:18:53,232 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 14:18:53,495 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 14:18:53,551 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 14:18:54,096 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:18:54,377 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 14:19:01,868 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 14:19:01,899 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 14:19:05,016 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 14:19:05,118 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 14:19:06,110 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 14:19:06,365 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 14:19:06,538 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 14:19:06,640 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 14:19:06,823 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 14:19:07,022 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 14:19:07,107 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 14:19:07,185 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 14:19:07,262 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 14:19:07,772 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 14:19:07,859 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 14:19:07,934 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 14:19:07,968 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 14:19:08,789 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 14:19:08,849 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 14:19:11,858 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 14:19:12,845 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 14:19:12,879 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 14:19:12,955 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 14:19:12,991 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 14:19:13,060 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 14:19:14,048 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:19:15,673 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 14:19:22,190 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 14:19:22,219 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 14:19:22,307 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:19:22,468 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:19:22,682 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 14:19:22,685 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 14:19:22,685 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 14:19:22,713 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 14:19:22,714 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 14:19:22,714 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 14:19:22,865 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:19:23,031 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:19:36,583 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:19:36,693 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 14:19:37,122 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 14:21:57,857 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:21:58,493 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '18'        and A.BENHVIEN_ID = 'HLU01']
2019-08-15 14:22:01,383 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '61'        and A.BENHVIEN_ID = 'HLU01']
2019-08-15 14:22:01,538 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] PreparedStatement : [IF EXISTS            (SELECT ACCOUNT_ID FROM TM_SYS_USERS WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1 )            BEGIN            update TM_SYS_USERS set INVENTORY_ID =  @param2 , WORKING_DEPT_ID =  @param3             WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1             END            ELSE            BEGIN            insert into TM_SYS_USERS ([ACCOUNT_ID], [ACCOUNT_NAME], [INVENTORY_ID], [WORKING_DEPT_ID], [HOSPITAL_ID])            values ( @param0 ,  @param4 ,  @param2 ,  @param3 ,  @param1 )            END]
2019-08-15 14:22:01,538 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Parameters: [@param0=[ACCOUNT_ID,113], @param1=[HOSPITAL_ID,HLU01], @param2=[INVENTORY_ID,null], @param3=[WORKING_DEPT_ID,61], @param4=[ACCOUNT_NAME,admin]]
2019-08-15 14:22:01,538 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[System.DBNull, null], @param3=[String, System.String], @param4=[String, System.String]]
2019-08-15 14:22:03,232 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 14:22:03,464 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 14:22:04,383 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'KhuVucSong'                 order by LST_DICTIONARY.IDX]
2019-08-15 14:22:05,147 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'QuocGia'                 order by LST_DICTIONARY.IDX]
2019-08-15 14:22:05,516 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2019-08-15 14:22:05,589 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 14:22:05,617 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = 'HLU01' AND TAMNGUNG = '0']
2019-08-15 14:22:05,775 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = 'HLU01'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = 'HLU01'              where pb_dv.BENHVIEN_ID = 'HLU01']
2019-08-15 14:22:06,263 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = 'HLU01' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2019-08-15 14:22:06,677 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI = 'HOANTAT' then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='HLU01' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (65,71,72,41,68,62,177,67,55,81,57,57,58,59,60,63,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,61,69,69,70,70)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
--------------------------------------------------------------------------------
2019-08-15 15:06:57,669 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 15:06:57,971 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:06:58,012 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:06:58,481 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:06:58,765 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:07:52,439 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 15:07:52,468 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:07:54,380 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:07:54,465 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:07:55,402 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 15:07:55,594 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 15:07:55,731 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 15:07:55,839 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 15:07:55,936 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 15:07:56,025 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 15:07:56,106 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 15:07:56,200 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 15:07:56,278 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 15:07:56,822 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 15:07:56,863 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:07:56,947 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 15:07:57,016 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:07:59,768 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 15:07:59,805 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 15:08:04,708 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 15:08:04,774 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 15:08:04,812 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 15:08:04,906 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 15:08:04,952 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 15:08:05,020 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 15:08:05,954 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:08:06,801 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 15:08:11,123 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 15:08:11,156 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 15:08:11,251 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:08:11,378 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:08:11,511 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 15:08:11,513 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:08:11,513 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:08:11,556 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 15:08:11,556 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:08:11,556 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:08:11,690 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:08:11,856 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:08:21,304 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:08:21,392 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 15:08:21,659 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 15:09:18,469 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'HIX20'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:09:19,626 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('8/15/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '1' and '20']
2019-08-15 15:09:19,626 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:19,626 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:20,665 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('8/15/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:09:20,665 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:20,665 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:26,070 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('8/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '1' and '20']
2019-08-15 15:09:26,070 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:26,070 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:26,190 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('8/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:09:26,190 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:26,190 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:34,678 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '1' and '20']
2019-08-15 15:09:34,678 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:34,678 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:35,352 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:09:35,353 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:35,353 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:44,133 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '21' and '40']
2019-08-15 15:09:44,134 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:44,134 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:44,333 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:09:44,333 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:44,333 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:47,240 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '41' and '60']
2019-08-15 15:09:47,240 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:47,240 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:09:47,426 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:09:47,426 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:09:47,426 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
--------------------------------------------------------------------------------
2019-08-15 15:12:59,948 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 15:13:00,976 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:13:01,029 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:13:01,529 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:02,285 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:13:10,153 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 15:13:10,200 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:13:12,092 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:13:12,261 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:13:13,328 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 15:13:13,509 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 15:13:13,618 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 15:13:13,722 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 15:13:13,864 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 15:13:13,960 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 15:13:14,032 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 15:13:14,132 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 15:13:14,213 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 15:13:14,732 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 15:13:14,768 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:13:14,858 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 15:13:14,906 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:13:19,085 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 15:13:19,135 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 15:13:22,651 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 15:13:22,716 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 15:13:22,923 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 15:13:23,006 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 15:13:23,055 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 15:13:23,141 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 15:13:24,085 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:25,163 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 15:13:30,650 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 15:13:30,680 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 15:13:31,018 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:31,173 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:31,317 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 15:13:31,320 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:13:31,320 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:13:31,348 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 15:13:31,348 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:13:31,348 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:13:31,495 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:31,658 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:40,705 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:13:40,796 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 15:13:41,210 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 15:14:55,839 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'HIX20'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:14:56,967 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('8/15/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '1' and '20']
2019-08-15 15:14:56,967 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:14:56,967 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:14:57,012 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('8/15/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:14:57,013 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:14:57,013 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:15:04,070 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('7/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '1' and '20']
2019-08-15 15:15:04,070 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:15:04,070 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:15:04,208 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('7/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:15:04,208 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:15:04,208 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:15:10,317 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] PreparedStatement : [select * from        (        select COUNT(*) OVER() as TOTALROWS,  ROW_NUMBER() OVER(order by T.ID desc) as ROWNUMBER, * from        (        select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(X.THOIGIANBATDAU AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                     )T        )R        where R.ROWNUMBER between '1' and '20']
2019-08-15 15:15:10,317 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:15:10,317 [1] DEBUG - Statement Id: [DAO09820_GetDanhSachHoSoDaXuatBHXH] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:15:10,440 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:15:10,440 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:15:10,440 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
--------------------------------------------------------------------------------
2019-08-15 15:15:50,150 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 15:15:50,482 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:15:50,536 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:15:50,980 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:15:51,303 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:15:56,406 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 15:15:56,738 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:15:58,285 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:15:58,442 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:15:59,321 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 15:15:59,490 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 15:15:59,591 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 15:15:59,670 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 15:15:59,764 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 15:15:59,858 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 15:15:59,958 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 15:16:00,058 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 15:16:00,157 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 15:16:00,668 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 15:16:00,715 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:16:00,806 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 15:16:00,860 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:16:03,366 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 15:16:03,410 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 15:16:07,170 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 15:16:07,239 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 15:16:07,272 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 15:16:07,348 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 15:16:07,381 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 15:16:07,462 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 15:16:08,401 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:16:09,362 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 15:16:14,484 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 15:16:14,516 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 15:16:14,614 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:16:14,746 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:16:14,938 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 15:16:14,940 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:16:14,940 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:16:14,974 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 15:16:14,975 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:16:14,975 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:16:15,102 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:16:15,282 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:16:24,102 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:16:24,193 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 15:16:24,734 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 15:19:43,954 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'HIX20'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:19:44,970 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('8/15/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:19:44,970 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:19:44,970 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:19:52,637 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:19:52,638 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:19:52,638 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:25:38,712 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 15:25:39,149 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:25:39,176 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:25:39,284 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:25:39,395 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:25:54,638 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 15:25:54,683 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:25:56,295 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:25:56,787 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:25:57,267 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 15:25:57,355 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 15:25:57,443 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 15:25:57,796 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 15:25:57,877 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 15:25:58,432 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 15:25:58,515 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 15:25:58,604 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 15:25:58,698 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 15:25:59,209 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 15:25:59,243 [27] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:25:59,320 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 15:25:59,355 [27] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:26:01,671 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 15:26:01,716 [27] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 15:26:04,200 [27] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 15:26:04,270 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 15:26:04,317 [27] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 15:26:04,407 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 15:26:04,448 [27] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 15:26:04,523 [27] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 15:26:05,418 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:05,512 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 15:26:05,614 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 15:26:05,649 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 15:26:05,722 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:05,811 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:05,883 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 15:26:05,883 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:26:05,883 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:26:05,909 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 15:26:05,909 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:26:05,909 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:26:05,984 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:06,161 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:07,024 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:07,090 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 15:26:07,336 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 15:26:53,812 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'HIX20'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:26:54,211 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('8/15/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:26:54,211 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:26:54,212 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
2019-08-15 15:26:59,743 [1] DEBUG - Statement Id: [DAO09820_GetListAll] PreparedStatement : [select distinct X.ID, X.BENHVIEN_ID, X.BENHNHAN_ID, X.TIEPNHAN_ID, X.SOTHE, BN.TENBENHNHAN, pb.TENPHONGBAN        , CASE WHEN X.LOAIBANGKE = 'BangKe01' then N'Bảng kê 01'        WHEN X.LOAIBANGKE = 'BangKe02' then N'Bảng kê 02'        ELSE N'' END AS LOAIBANGKE        , xn.thoigianxacnhan AS NGAYXACNHAN        , X.THOIGIANBATDAU, X.THOIGIANKETTHUC        , CASE WHEN X.TRANGTHAI = 'CHOXULY' THEN N'Chờ xử lý'        WHEN X.TRANGTHAI = 'LOIDULIEU' THEN N'Lỗi dữ liệu'        WHEN X.TRANGTHAI = 'CHOUPLOAD' THEN N'Đã xuất'        WHEN X.TRANGTHAI = 'UPLOADTHANHCONG' THEN N'Upload thành công'        WHEN X.TRANGTHAI = 'UPLOADTHATBAI' THEN N'Upload thất bại'        WHEN X.TRANGTHAI = 'CHOXUATLAI' THEN N'Chờ xuất lại'        ELSE NULL END AS TRANGTHAI        , X.LYDO, X.SOLANRETRY, X.TENFILE, X.XUATLAI, BN.MAYTE, BA.SOBENHAN, X.XUATLAI AS XUATLAI_ORG, X.VALID_MSG, X.LOAIBANGKE AS LOAIBANGKE_CODE, BA.BENHAN_ID        , TN.THOIGIANTIEPNHAN AS NGAYVAO        , CASE WHEN X.LOAIBANGKE = 'BangKe01' THEN XN.THOIGIANXACNHAN        ELSE BA.THOIGIANRAVIEN        END AS NGAYRA        from TM_SYS_UPLOAD_BHYT_XML X        left join TT_BENHNHAN BN on BN.BENHNHAN_ID = X.BENHNHAN_ID and X.BENHVIEN_ID = BN.BENHVIEN_ID        left join TT_NOITRU_BENHAN BA on BA.TIEPNHAN_ID = X.TIEPNHAN_ID and BA.BENHVIEN_ID = X.BENHVIEN_ID        left join TM_PHONGBAN pb on pb.PHONGBAN_ID = isnull(ba.KHOACHUYENDEN_ID, ba.KHOAVAO_ID)        left join tt_xacnhanchiphi xn on x.tiepnhan_id = xn.tiepnhan_id        left join TT_TIEPNHAN TN ON TN.TIEPNHAN_ID = X.TIEPNHAN_ID          WHERE ((CAST( @param0  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe02') OR CAST( @param1  AS BIT) = 1 AND X.LOAIBANGKE = 'BangKe01')        and xn.xacnhanchiphi_id is not null        AND X.BENHVIEN_ID = 'HLU01'        AND XN.XACNHANCHIPHI_ID IS NOT NULL           AND                 CAST(XN.thoigianxacnhan AS DATE) BETWEEN CAST('6/1/2019 12:00:00 AM' AS DATE) AND CAST('8/15/2019 12:00:00 AM' AS DATE)                   ORDER BY X.THOIGIANBATDAU DESC]
2019-08-15 15:26:59,743 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Parameters: [@param0=[ISNOITRU,True], @param1=[ISNGOAITRU,True]]
2019-08-15 15:26:59,743 [1] DEBUG - Statement Id: [DAO09820_GetListAll] Types: [@param0=[Boolean, System.Boolean], @param1=[Boolean, System.Boolean]]
--------------------------------------------------------------------------------
2019-08-15 15:35:49,772 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 15:35:50,171 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:35:50,218 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:35:50,665 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:35:50,966 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:35:58,537 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 15:35:58,579 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:36:00,437 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:36:00,559 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:36:01,712 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 15:36:02,159 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 15:36:02,297 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 15:36:02,497 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 15:36:02,630 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 15:36:02,737 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 15:36:02,959 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 15:36:03,112 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 15:36:03,259 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 15:36:03,831 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 15:36:04,002 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:36:04,261 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 15:36:04,381 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:36:13,115 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 15:36:13,157 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 15:36:19,242 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 15:36:19,312 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 15:36:19,344 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 15:36:19,435 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 15:36:19,475 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 15:36:19,551 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 15:36:20,505 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:36:21,497 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 15:36:26,474 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 15:36:26,512 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 15:36:26,597 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:36:26,755 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:36:26,952 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 15:36:26,956 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:36:26,956 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:36:26,998 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 15:36:26,998 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:36:26,998 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:36:27,160 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:36:27,346 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:36:36,135 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:36:36,625 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 15:36:37,696 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 15:37:04,663 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:37:06,925 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2019-08-15 15:37:06,964 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 15:37:06,993 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = 'HLU01' AND TAMNGUNG = '0']
2019-08-15 15:37:07,204 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = 'HLU01'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = 'HLU01'              where pb_dv.BENHVIEN_ID = 'HLU01']
2019-08-15 15:37:07,245 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = 'HLU01' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2019-08-15 15:37:07,344 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI = 'HOANTAT' then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='HLU01' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (65,71,72,41,68,62,177,67,55,81,57,57,58,59,60,63,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,61,69,69,70,70)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2019-08-15 15:37:32,053 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 15:37:32,490 [1] DEBUG - Statement Id: [DAO00013_GetDetail] PreparedStatement : [select distinct TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH,TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH            from TT_BENHNHAN            left join TT_BENHNHAN_BHYT on TT_BENHNHAN_BHYT.BENHNHAN_BHYT_ID = (SELECT TOP 1 BENHNHAN_BHYT_ID FROM TT_BENHNHAN_BHYT WHERE BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID ORDER BY BENHNHAN_BHYT_ID DESC)                       WHERE                        TT_BENHNHAN.TENBENHNHAN = N'Test Bhyt111'                   AND                       convert(varchar(10),TT_BENHNHAN.NGAYSINH, 103) = convert(varchar(10),'04/01/1995', 103)                       AND                       TT_BENHNHAN.GIOITINH = '1']
2019-08-15 15:38:51,207 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%']
2019-08-15 15:38:51,207 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2019-08-15 15:38:51,207 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2019-08-15 15:38:51,369 [1] DEBUG - Statement Id: [DAO00013_GetDetail] PreparedStatement : [select distinct TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH,TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH            from TT_BENHNHAN            left join TT_BENHNHAN_BHYT on TT_BENHNHAN_BHYT.BENHNHAN_BHYT_ID = (SELECT TOP 1 BENHNHAN_BHYT_ID FROM TT_BENHNHAN_BHYT WHERE BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID ORDER BY BENHNHAN_BHYT_ID DESC)                       WHERE                      TT_BENHNHAN_BHYT.SOTHE = 'DN452342352525238288']
2019-08-15 15:39:11,351 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%']
2019-08-15 15:39:11,351 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2019-08-15 15:39:11,352 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
--------------------------------------------------------------------------------
2019-08-15 15:39:55,442 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 15:39:55,714 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:39:55,751 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:39:56,126 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:39:56,404 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:40:25,143 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 15:40:25,185 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 15:40:27,085 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 15:40:27,172 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 15:40:28,009 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 15:40:28,225 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 15:40:28,310 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 15:40:28,393 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 15:40:28,509 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 15:40:28,586 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 15:40:28,709 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 15:40:28,807 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 15:40:28,904 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 15:40:29,426 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 15:40:29,463 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:40:29,545 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 15:40:29,581 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 15:40:36,488 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 15:40:36,569 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 15:40:41,541 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 15:40:41,650 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 15:40:41,694 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 15:40:41,780 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 15:40:41,828 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 15:40:41,917 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 15:40:42,862 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:40:43,842 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 15:40:48,921 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 15:40:48,964 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 15:40:49,057 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:40:49,177 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:40:49,335 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 15:40:49,337 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:40:49,337 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:40:49,377 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 15:40:49,377 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 15:40:49,377 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 15:40:49,524 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:40:49,687 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:40:57,298 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:40:57,388 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 15:40:57,677 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 15:41:02,160 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG14'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:41:03,496 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'PhanLoaiTiepNhan'                 order by LST_DICTIONARY.IDX]
2019-08-15 15:41:03,533 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 15:41:03,564 [1] DEBUG - Statement Id: [DAO00019_GetListCongTyChiTra] PreparedStatement : [select *        from TM_CONGTYCHITRA        where        BENHVIEN_ID = 'HLU01' AND TAMNGUNG = '0']
2019-08-15 15:41:03,793 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = 'HLU01'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '' and dv.BENHVIEN_ID = 'HLU01'              where pb_dv.BENHVIEN_ID = 'HLU01']
2019-08-15 15:41:03,847 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = 'HLU01' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2019-08-15 15:41:03,945 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI = 'HOANTAT' then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='HLU01' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (65,71,72,41,68,62,177,67,55,81,57,57,58,59,60,63,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,61,69,69,70,70)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2019-08-15 15:41:23,647 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 15:41:23,791 [1] DEBUG - Statement Id: [DAO00013_GetDetail] PreparedStatement : [select distinct TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH,TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH            from TT_BENHNHAN            left join TT_BENHNHAN_BHYT on TT_BENHNHAN_BHYT.BENHNHAN_BHYT_ID = (SELECT TOP 1 BENHNHAN_BHYT_ID FROM TT_BENHNHAN_BHYT WHERE BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID ORDER BY BENHNHAN_BHYT_ID DESC)                       WHERE                        TT_BENHNHAN.TENBENHNHAN = N'Test Bhyt111'                   AND                       convert(varchar(10),TT_BENHNHAN.NGAYSINH, 103) = convert(varchar(10),'04/12/1995', 103)                       AND                       TT_BENHNHAN.GIOITINH = '1']
2019-08-15 15:41:39,234 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%']
2019-08-15 15:41:39,234 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2019-08-15 15:41:39,234 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2019-08-15 15:41:45,290 [1] DEBUG - Statement Id: [DAO00013_GetDetail] PreparedStatement : [select distinct TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH,TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH            from TT_BENHNHAN            left join TT_BENHNHAN_BHYT on TT_BENHNHAN_BHYT.BENHNHAN_BHYT_ID = (SELECT TOP 1 BENHNHAN_BHYT_ID FROM TT_BENHNHAN_BHYT WHERE BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID ORDER BY BENHNHAN_BHYT_ID DESC)                       WHERE                      TT_BENHNHAN_BHYT.SOTHE = 'DN452354234234538289']
2019-08-15 15:41:51,380 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%']
2019-08-15 15:41:51,380 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2019-08-15 15:41:51,380 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2019-08-15 15:41:58,244 [1] DEBUG - Statement Id: [DAO00013_GetDetail] PreparedStatement : [select distinct TT_BENHNHAN.*, ISNULL(TT_BENHNHAN.NGAYSINH,TT_BENHNHAN.NAMSINH) AS NGAYNAMSINH            from TT_BENHNHAN            left join TT_BENHNHAN_BHYT on TT_BENHNHAN_BHYT.BENHNHAN_BHYT_ID = (SELECT TOP 1 BENHNHAN_BHYT_ID FROM TT_BENHNHAN_BHYT WHERE BENHNHAN_ID = TT_BENHNHAN.BENHNHAN_ID ORDER BY BENHNHAN_BHYT_ID DESC)                       WHERE                      TT_BENHNHAN_BHYT.SOTHE = 'DN452354234234538288']
2019-08-15 15:42:23,394 [1] DEBUG - Statement Id: [DAO00019_GetLoaiGiaLoaiKhachHang] PreparedStatement : [select A.*, B.DICTIONARY_CODE MAKHACHHANG, C.TENLOAIGIA        from TM_NGUONKHACHHANG_LOAIGIA A        left join LST_DICTIONARY B on A.NGUONKHACHHANG_BENHNHAN_ID = B.DICTIONARY_ID        inner join TM_LOAIGIA C on C.LOAIGIA_ID = A.LOAIGIA_ID and CAPTREN_ID  = (select LOAIGIA_ID from TM_LOAIGIA where MALOAIGIA = 'GiaDichVu')        left join TM_DICHVU_DONGIA dvdg on dvdg.LOAIGIA_ID = A.LOAIGIA_ID        where B.DICTIONARY_TYPE_CODE = 'NguonKhachHang' and dvdg.DICHVU_ID  =  @param0]
2019-08-15 15:42:23,394 [1] DEBUG - Statement Id: [DAO00019_GetLoaiGiaLoaiKhachHang] Parameters: [@param0=[DICHVU_ID,5436]]
2019-08-15 15:42:23,394 [1] DEBUG - Statement Id: [DAO00019_GetLoaiGiaLoaiKhachHang] Types: [@param0=[Int64, System.Int64]]
2019-08-15 15:42:24,265 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '4'                            and A.DICHVU_ID = '5436'                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 15:42:24,522 [1] DEBUG - Statement Id: [DAO00017_GetListPhongKham] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from [TM_PHONGBAN_DICHVU] as pb_dv              inner join [TM_PHONGBAN] as pb on pb.PHONGBAN_ID = pb_dv.PHONGBAN_ID and pb.BENHVIEN_ID = 'HLU01'              inner join [TM_DICHVU] dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.MADICHVU = '5436' and dv.BENHVIEN_ID = 'HLU01'              where pb_dv.BENHVIEN_ID = 'HLU01']
2019-08-15 15:42:24,655 [1] DEBUG - Statement Id: [DAO00019_GetListPhongKham_REG13] PreparedStatement : [select pb.PHONGBAN_ID, pb.TENPHONGBAN, case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI        from TM_PHONGBAN pb        left join TM_PHONGBAN_DICHVU pb_dv on pb_dv.PHONGBAN_ID = pb.PHONGBAN_ID and pb_dv.BENHVIEN_ID = pb.BENHVIEN_ID        left join TM_DICHVU dv on dv.DICHVU_ID = pb_dv.DICHVU_ID and dv.BENHVIEN_ID = pb_dv.BENHVIEN_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and ndv.BENHVIEN_ID = dv.BENHVIEN_ID        where pb.BENHVIEN_ID = 'HLU01' and ndv.MANHOMDICHVU = '04' and dv.DICHVU_ID IS NOT NULL]
2019-08-15 15:42:24,765 [1] DEBUG - Statement Id: [DAO00019_LayThongTinSoluongDichVuPhongKham_REG13] PreparedStatement : [select PHONGBAN_ID, TENPHONGBAN, NOITHUCHIEN_ID, SUM(CHUAKETQUA) AS CHUAKETQUA, SUM(HOANTAT) AS HOANTAT, SUM(DANGTHUCHIEN) AS DANGTHUCHIEN        from (        select B.PHONGBAN_ID, B.TENPHONGBAN, A.NOITHUCHIEN_ID,        case when A.TRANGTHAI = 'CHUAKETQUA' then 1 else 0 end AS CHUAKETQUA,        case when A.TRANGTHAI = 'HOANTAT' then 1 else 0 end AS HOANTAT,        case when A.TRANGTHAI = 'DANGTHUCHIEN' then 1 else 0 end AS DANGTHUCHIEN        from TM_PHONGBAN B        left join TT_DVYEUCAU A on A.NOITHUCHIEN_ID = B.PHONGBAN_ID and A.BENHVIEN_ID = B.BENHVIEN_ID and A.NGAYYEUCAU = CONVERT(date, getdate())        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where B.BENHVIEN_ID ='HLU01' and Left(ndv.MANHOMDICHVU,2) = '04'        and B.PHONGBAN_ID in (65,71,72,41,68,62,177,67,55,81,57,57,58,59,60,63,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,61,69,69,70,70)        ) tmp        group by tmp.NOITHUCHIEN_ID, tmp.TENPHONGBAN, tmp.PHONGBAN_ID]
2019-08-15 15:42:25,027 [1] DEBUG - Statement Id: [DAO00000_GetDICHVU_DONGIA_LOAIGIA] PreparedStatement : [select A.LOAIGIA_ID, A.BANGGIA_ID, A.GIAVON, A.TYLEVAT  as TYLE_VAT, A.TYLE_LOINHUAN,            A.DONGIA as DONGIA_DOANHTHU, NULL as DONGIA_KHAC, isnull(D.MAPHANNHOMDICHVU, 'TT') as LOAI_CHIPHI            from TM_DICHVU_DONGIA A            inner join TM_BANGGIA B on B.LOAIGIA_ID = A.LOAIGIA_ID AND B.BENHVIEN_ID = 'HLU01'            left join (select B.MAPHANNHOMDICHVU, A.* from TM_DICHVU_PHANNHOMDICHVU A            inner join TM_PHANNHOMDICHVU B on  B.PHANNHOMDICHVU_ID = A.PHANNHOMDICHVU_ID            where A.DICHVU_ID = '5436' AND A.BENHVIEN_ID = 'HLU01') D on A.DICHVU_ID = D.DICHVU_ID            where A.LOAIGIA_ID = '2' and A.DICHVU_ID = '5436'            union            select A.LOAIGIA_ID, null as BANGGIA_ID, null as GIAVON, null as TYLE_VAT, null as TYLE_LOINHUAN,            null as DONGIA_DOANHTHU, C.DONGIA as DONGIA_KHAC, isnull(D.MAPHANNHOMDICHVU, 'TT') as LOAI_CHIPHI            from TM_DOITUONG_GIADICHVU A            inner join TM_BANGGIA B on B.LOAIGIA_ID = A.LOAIGIA_ID AND B.BENHVIEN_ID = 'HLU01'            left join TM_DICHVU_DONGIA C on C.LOAIGIA_ID = A.LOAIGIA_ID AND C.BENHVIEN_ID = 'HLU01'            and C.BANGGIA_ID = B.BANGGIA_ID and C.DICHVU_ID = A.DICHVU_ID            left join (select B.MAPHANNHOMDICHVU, A.* from TM_DICHVU_PHANNHOMDICHVU A            inner join TM_PHANNHOMDICHVU B on  B.PHANNHOMDICHVU_ID = A.PHANNHOMDICHVU_ID            where A.DICHVU_ID = '5436' AND A.BENHVIEN_ID = 'HLU01') D on A.DICHVU_ID = D.DICHVU_ID            where A.DOITUONG_ID = '4'  and A.DICHVU_ID = '5436' and A.LOAIGIA_ID            in (select top 1 LOAIGIA_ID from TM_DOITUONG_LOAIGIA            where DOITUONG_ID = '4' and GIAHOTRO = '1'  AND BENHVIEN_ID = 'HLU01'            and LOAIGIA_ID            in (select LOAIGIA_ID from TM_BANGGIA            where LOAIBANGGIA in            (select LOAIBANGGIA from TM_BANGGIA where LOAIGIA_ID = '2'  AND BENHVIEN_ID = 'HLU01')            and TAMNGUNG = '0')  AND BENHVIEN_ID = 'HLU01'            )]
2019-08-15 15:42:25,256 [1] DEBUG - Statement Id: [DAO00024_TM_TIEPNHAN_BANGGIA_DICHVU_getlist] PreparedStatement : [select * from TM_TIEPNHAN_BANGGIA_DICHVU where TAMNGUNG != '1' and BENHVIEN_ID = 'HLU01']
2019-08-15 15:42:27,060 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] PreparedStatement : [select * from TM_DOITUONG where NHOMTHE LIKE '%' +  @param0  + '%']
2019-08-15 15:42:27,061 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Parameters: [@param0=[MATHEBHYT,DN4]]
2019-08-15 15:42:27,061 [1] DEBUG - Statement Id: [DAO00000_GetKyHieuBHYT] Types: [@param0=[String, System.String]]
2019-08-15 15:42:27,219 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:42:30,436 [1] DEBUG - Statement Id: [DAO00013_Add_BenhNhan] PreparedStatement : [declare @keyValue int, @BenhVienId varchar(10), @yearNow int, @Mayte varchar(20), @SoVaoVien varchar(20), @fid varchar(20),            @Bnid int, @Manoisinh varchar(10), @Namsinh int, @Ngaysinh smalldatetime, @Gioitinh int, @Thangsinh int, @Daysinh int, @beginpatient int            declare @InsertedRows TABLE (BENHNHAN_ID INT, MAYTE varchar(20), MANOISINH varchar(10), NAMSINH int, NGAYSINH smalldatetime, GIOITINH int )            set @keyValue = 0;            set @Thangsinh = 0;            set @Daysinh = 0;            set @beginpatient = 0;            set @fid = 'F';            set @BenhVienId = 'HLU01'            set @yearNow = YEAR(getdate())                        select @beginpatient = isnull(VALUE, 0) from TM_SYS_APPSETTINGS where CODE = 'COM_FIRST_NUMBER_PATIENTCODE_INTHEYEAR'              select @keyValue = KEYVALUE from LST_KEYDATA            where KEYTYPE = 'MAYTE' and KEYYEAR = @yearNow                        if @keyValue = 0            Insert into LST_KEYDATA values ('MAYTE', @yearNow, '0', '0', '0', '0', '0', @beginpatient, @BenhVienId);            Update LST_KEYDATA set KEYVALUE = KEYVALUE + 1, @keyValue = (KEYVALUE + 1) where KEYTYPE = 'MAYTE' and KEYYEAR = @yearNow                          set @SoVaoVien = right('0000000'+convert(varchar(7), @keyValue), 7)              set @Mayte = RIGHT(@yearNow, 2) + @SoVaoVien                            insert into TT_BENHNHAN (              MAYTE              , SOVAOVIEN              , TENBENHNHAN              , HO              , TEN              , GIOITINH              , NGAYSINH              , NAMSINH              , MANOISINH              , SONHA              , DIACHI              , SODIENTHOAI              , XAPHUONG_ID              , QUANHUYEN_ID              , TINHTHANH_ID              , DANTOC_ID              , QUOCTICH_ID              , SOLUUTRUNOITRU              , SOLUUTRUNGOAITRU              , NGHENGHIEP_ID              , CMND              , HOCHIEU              , VIETKIEU              , NGUOINUOCNGOAI              , DIACHITHUONGTRU              , DIACHILIENLAC              , DIACHICOQUAN              , EMAIL              , NHOMMAU_ID              , YEUTORH_ID              , TIENSUDIUNG              , TIENSUBENH              , TIENSUHUTTHUOCLA              , TUVONG              , NGAYTUVONG              , THOIGIANTUVONG              , NGUYENNHANTUVONG_ID              , NGUOIGHINHANTUVONG_ID              , THOIGIANGHINHANTUVONG              , NHANVIEN_ID              , DONVICONGTAC_ID              , DIENTHOAIBAN              , TINHTRANGHONNHAN_ID              , NGUOILIENHE_ID              , MOIQUANHE_ID              , NGUOILIENHE              , THONGTIN_NLH              , GHICHU              , HINHANH_DAIDIEN              , SITE_ID              , PID              , ACTIVE              , BENHVIEN_ID              , NGAYTAO              , NGUOITAO_ID              , NGAYGIOSINH              )                            values (              @Mayte              , @SoVaoVien              ,  @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               ,  @param17               ,  @param18               ,  @param19               ,  @param20               ,  @param21               ,  @param22               ,  @param23               ,  @param24               ,  @param25               ,  @param26               ,  @param27               ,  @param28               ,  @param29               ,  @param30               ,  @param31               ,  @param32               ,  @param33               ,  @param34               ,  @param35               ,  @param36               ,  @param37               ,  @param38               ,  @param39               ,  @param40               ,  @param41               ,  @param42               ,  @param43               ,  @param44               ,  @param45               ,  @param46               ,  @param47               ,  @param48               , '1'              ,  @param49               ,  @param50               ,  @param51               ,  @param52               );              set @Bnid = SCOPE_IDENTITY()                            select @Manoisinh = MANOISINH, @Namsinh = NAMSINH, @Ngaysinh = NGAYSINH, @Gioitinh = GIOITINH from @InsertedRows;              IF (@Ngaysinh is not Null)              BEGIN              set @Thangsinh = MONTH(@Ngaysinh);              set @Daysinh = DAY(@Ngaysinh);              END              IF (@Manoisinh is Null) set @Manoisinh = '0'              set @fid = right('000'+convert(varchar(3), @Manoisinh), 3) + convert(varchar(1), @Gioitinh) + RIGHT(@Namsinh, 2) + right('00'+convert(varchar(2), @Thangsinh), 2) + right('00'+convert(varchar(2), @Daysinh), 2) + right('000000000'+convert(varchar(9), @Bnid), 9) + convert(varchar(1), 'F');                            update TT_BENHNHAN set FID = @fid where BENHNHAN_ID = @Bnid;                          select @Bnid]
2019-08-15 15:42:30,437 [1] DEBUG - Statement Id: [DAO00013_Add_BenhNhan] Parameters: [@param0=[TENBENHNHAN,Test Bhyt111], @param1=[HO,Test], @param2=[TEN,Bhyt111], @param3=[GIOITINH,1], @param4=[NGAYSINH,12/4/1995 12:00:00 AM], @param5=[NAMSINH,1995], @param6=[MANOISINH,null], @param7=[SONHA,null], @param8=[DIACHI,null], @param9=[SODIENTHOAI,null], @param10=[XAPHUONG_ID,16432], @param11=[QUANHUYEN_ID,null], @param12=[TINHTHANH_ID,null], @param13=[DANTOC_ID,332], @param14=[QUOCTICH_ID,291], @param15=[SOLUUTRUNOITRU,null], @param16=[SOLUUTRUNGOAITRU,null], @param17=[NGHENGHIEP_ID,null], @param18=[CMND,null], @param19=[HOCHIEU,null], @param20=[VIETKIEU,null], @param21=[NGUOINUOCNGOAI,null], @param22=[DIACHITHUONGTRU,Xã Đông Tân, Thành phố Thanh Hóa, Tỉnh Thanh Hóa], @param23=[DIACHILIENLAC,Xã Đông Tân, Thành phố Thanh Hóa, Tỉnh Thanh Hóa], @param24=[DIACHICOQUAN,null], @param25=[EMAIL,null], @param26=[NHOMMAU_ID,null], @param27=[YEUTORH_ID,null], @param28=[TIENSUDIUNG,null], @param29=[TIENSUBENH,null], @param30=[TIENSUHUTTHUOCLA,null], @param31=[TUVONG,null], @param32=[NGAYTUVONG,null], @param33=[THOIGIANTUVONG,null], @param34=[NGUYENNHANTUVONG_ID,null], @param35=[NGUOIGHINHANTUVONG_ID,null], @param36=[THOIGIANGHINHANTUVONG,null], @param37=[NHANVIEN_ID,null], @param38=[DONVICONGTAC_ID,null], @param39=[DIENTHOAIBAN,null], @param40=[TINHTRANGHONNHAN_ID,null], @param41=[NGUOILIENHE_ID,null], @param42=[MOIQUANHE_ID,null], @param43=[NGUOILIENHE,null], @param44=[THONGTIN_NLH,null], @param45=[GHICHU,null], @param46=[HINHANH_DAIDIEN,imgMale.png], @param47=[SITE_ID,HLU01], @param48=[PID,null], @param49=[BENHVIEN_ID,HLU01], @param50=[NGAYTAO,8/15/2019 3:42:30 PM], @param51=[NGUOITAO_ID,1], @param52=[NGAYGIOSINH,null]]
2019-08-15 15:42:30,437 [1] DEBUG - Statement Id: [DAO00013_Add_BenhNhan] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[DateTime, System.DateTime], @param5=[Int64, System.Int64], @param6=[System.DBNull, null], @param7=[System.DBNull, null], @param8=[System.DBNull, null], @param9=[System.DBNull, null], @param10=[String, System.String], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[Int64, System.Int64], @param14=[Int64, System.Int64], @param15=[System.DBNull, null], @param16=[System.DBNull, null], @param17=[System.DBNull, null], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[String, System.String], @param23=[String, System.String], @param24=[System.DBNull, null], @param25=[System.DBNull, null], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[System.DBNull, null], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[System.DBNull, null], @param40=[System.DBNull, null], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[String, System.String], @param47=[String, System.String], @param48=[System.DBNull, null], @param49=[String, System.String], @param50=[DateTime, System.DateTime], @param51=[String, System.String], @param52=[System.DBNull, null]]
2019-08-15 15:42:30,648 [1] DEBUG - Statement Id: [DAO00013_GetTTBenhNhan_byBenhNhanId] PreparedStatement : [select *              from TT_BENHNHAN              where BENHNHAN_ID = '23419'              order by BENHNHAN_ID]
2019-08-15 15:42:30,694 [1] DEBUG - Statement Id: [DAO00013_GetBenhNhanToDB] PreparedStatement : [select ROW_NUMBER() OVER(order by a.MAYTE) as ROWNUMBER, *,          CASE          WHEN A.GIOITINH = 1 THEN 'Nam'          WHEN A.GIOITINH = 2 THEN N'Nữ'          END as TENGIOITINH          from TT_BENHNHAN A          where  ACTIVE = '1' and MAYTE = '190043300']
2019-08-15 15:42:31,351 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] PreparedStatement : [if not exists (select 1              from TT_BENHNHAN_BHYT              where SOTHE = 'DN452354234234538288' and BENHNHAN_ID = '23419')              insert into TT_BENHNHAN_BHYT (              BENHNHAN_ID              , LOAIBHYT              , SOTHE              , NGAYCAP              , NGAYHIEULUC              , NGAYHETHIEULUC              , TINHTHANH_CAPTHE_ID              , BENHVIEN_ID              , BENHVIEN_KCB_ID              , TREN3NAM              , TREN5NAM              , TREN6THANG              , NGAYMIENDONGCHITRA              , TAMNGUNG              , NGAYTAO              , NGUOITAO_ID              , KHUVUCSONG_ID              ) values (               @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               )              else              update TT_BENHNHAN_BHYT set              LOAIBHYT =  @param1               , SOTHE =  @param2               , NGAYCAP =  @param3               , NGAYHIEULUC =  @param4               , NGAYHETHIEULUC =  @param5               , TINHTHANH_CAPTHE_ID =  @param6               , BENHVIEN_ID =  @param7               , BENHVIEN_KCB_ID =  @param8               , TREN3NAM =  @param9               , TREN5NAM =  @param10               , TREN6THANG =  @param11               , NGAYMIENDONGCHITRA =  @param12               , TAMNGUNG =  @param13               , NGAYCAPNHAT =  @param17               , NGUOICAPNHAT_ID =  @param18               , KHUVUCSONG_ID =  @param16               where              SOTHE = 'DN452354234234538288' and BENHNHAN_ID = '23419']
2019-08-15 15:42:31,352 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Parameters: [@param0=[BENHNHAN_ID,23419], @param1=[LOAIBHYT,null], @param2=[SOTHE,DN452354234234538288], @param3=[NGAYCAP,null], @param4=[NGAYHIEULUC,1/1/2019 12:00:00 AM], @param5=[NGAYHETHIEULUC,12/31/2019 12:00:00 AM], @param6=[TINHTHANH_CAPTHE_ID,null], @param7=[BENHVIEN_ID,HLU01], @param8=[BENHVIEN_KCB_ID,38288], @param9=[TREN3NAM,0], @param10=[TREN5NAM,0], @param11=[TREN6THANG,null], @param12=[NGAYMIENDONGCHITRA,null], @param13=[TAMNGUNG,null], @param14=[NGAYTAO,8/15/2019 3:42:31 PM], @param15=[NGUOITAO_ID,1], @param16=[KHUVUCSONG_ID,0], @param17=[NGAYCAPNHAT,8/15/2019 3:42:31 PM], @param18=[NGUOICAPNHAT_ID,1]]
2019-08-15 15:42:31,352 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Types: [@param0=[Int32, System.Int32], @param1=[System.DBNull, null], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[DateTime, System.DateTime], @param5=[DateTime, System.DateTime], @param6=[System.DBNull, null], @param7=[String, System.String], @param8=[String, System.String], @param9=[String, System.String], @param10=[String, System.String], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[Int64, System.Int64], @param17=[DateTime, System.DateTime], @param18=[String, System.String]]
2019-08-15 15:42:31,420 [1] DEBUG - Statement Id: [DAO00118_Add_BenhNhan] PreparedStatement : [if not exists (select 1 from TT_BENHNHAN where BENHNHAN_ID = '23419')              insert into TT_BENHNHAN (              BENHNHAN_ID              , MAYTE              , SOVAOVIEN              , TENBENHNHAN              , HO              , TEN              , GIOITINH              , NGAYSINH              , NAMSINH              , SONHA              , DIACHI              , SODIENTHOAI              , XAPHUONG_ID              , QUANHUYEN_ID              , TINHTHANH_ID              , DANTOC_ID              , QUOCTICH_ID              , SOLUUTRUNOITRU              , SOLUUTRUNGOAITRU              , NGHENGHIEP_ID              , CMND              , HOCHIEU              , VIETKIEU              , NGUOINUOCNGOAI              , DIACHITHUONGTRU              , DIACHILIENLAC              , DIACHICOQUAN              , EMAIL              , NHOMMAU_ID              , YEUTORH_ID              , TIENSUDIUNG              , TIENSUBENH              , TIENSUHUTTHUOCLA              , TUVONG              , NGAYTUVONG              , THOIGIANTUVONG              , NGUYENNHANTUVONG_ID              , NGUOIGHINHANTUVONG_ID              , THOIGIANGHINHANTUVONG              , NHANVIEN_ID              , DONVICONGTAC_ID              , DIENTHOAIBAN              , TINHTRANGHONNHAN_ID              , NGUOILIENHE_ID              , MOIQUANHE_ID              , NGUOILIENHE              , THONGTIN_NLH              , GHICHU              , HINHANH_DAIDIEN              , BENHVIEN_ID              , NGAYTAO              , NGUOITAO_ID              , NGAYGIOSINH              ) values (               @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               ,  @param17               ,  @param18               ,  @param19               ,  @param20               ,  @param21               ,  @param22               ,  @param23               ,  @param24               ,  @param25               ,  @param26               ,  @param27               ,  @param28               ,  @param29               ,  @param30               ,  @param31               ,  @param32               ,  @param33               ,  @param34               ,  @param35               ,  @param36               ,  @param37               ,  @param38               ,  @param39               ,  @param40               ,  @param41               ,  @param42               ,  @param43               ,  @param44               ,  @param45               ,  @param46               ,  @param47               ,  @param48               ,  @param49               ,  @param50               ,  @param51               ,  @param52               )              else              update TT_BENHNHAN set              MAYTE =  @param1                ,                   SOVAOVIEN =  @param2                ,                   TENBENHNHAN =  @param3                ,                   HO =  @param4                ,                   TEN =  @param5                ,                   GIOITINH =  @param6                ,                   NGAYSINH =  @param7                ,                   NAMSINH =  @param8                ,                   SONHA =  @param9                ,                   SODIENTHOAI =  @param11                ,                   XAPHUONG_ID =  @param12                ,                   DANTOC_ID =  @param15                ,                   QUOCTICH_ID =  @param16                ,                   NGHENGHIEP_ID =  @param19                ,                   NGUOINUOCNGOAI =  @param23                ,                   DIACHITHUONGTRU =  @param24                ,                   DIACHILIENLAC =  @param25                ,                   NGUOILIENHE_ID =  @param43                ,                   MOIQUANHE_ID =  @param44                ,                   NGUOILIENHE =  @param45                ,                   THONGTIN_NLH =  @param46                ,                   GHICHU =  @param47                ,                   BENHVIEN_ID =  @param49                ,                   NGUOICAPNHAT_ID =  @param53                              where              BENHNHAN_ID = '23419']
2019-08-15 15:42:31,421 [1] DEBUG - Statement Id: [DAO00118_Add_BenhNhan] Parameters: [@param0=[BENHNHAN_ID,23419], @param1=[MAYTE,190043300], @param2=[SOVAOVIEN,0043300], @param3=[TENBENHNHAN,Test Bhyt111], @param4=[HO,Test], @param5=[TEN,Bhyt111], @param6=[GIOITINH,1], @param7=[NGAYSINH,12/4/1995 12:00:00 AM], @param8=[NAMSINH,1995], @param9=[SONHA,null], @param10=[DIACHI,null], @param11=[SODIENTHOAI,null], @param12=[XAPHUONG_ID,16432], @param13=[QUANHUYEN_ID,null], @param14=[TINHTHANH_ID,null], @param15=[DANTOC_ID,332], @param16=[QUOCTICH_ID,291], @param17=[SOLUUTRUNOITRU,null], @param18=[SOLUUTRUNGOAITRU,null], @param19=[NGHENGHIEP_ID,null], @param20=[CMND,null], @param21=[HOCHIEU,null], @param22=[VIETKIEU,null], @param23=[NGUOINUOCNGOAI,null], @param24=[DIACHITHUONGTRU,Xã Đông Tân, Thành phố Thanh Hóa, Tỉnh Thanh Hóa], @param25=[DIACHILIENLAC,Xã Đông Tân, Thành phố Thanh Hóa, Tỉnh Thanh Hóa], @param26=[DIACHICOQUAN,null], @param27=[EMAIL,null], @param28=[NHOMMAU_ID,null], @param29=[YEUTORH_ID,null], @param30=[TIENSUDIUNG,null], @param31=[TIENSUBENH,null], @param32=[TIENSUHUTTHUOCLA,null], @param33=[TUVONG,null], @param34=[NGAYTUVONG,null], @param35=[THOIGIANTUVONG,null], @param36=[NGUYENNHANTUVONG_ID,null], @param37=[NGUOIGHINHANTUVONG_ID,null], @param38=[THOIGIANGHINHANTUVONG,null], @param39=[NHANVIEN_ID,null], @param40=[DONVICONGTAC_ID,null], @param41=[DIENTHOAIBAN,null], @param42=[TINHTRANGHONNHAN_ID,null], @param43=[NGUOILIENHE_ID,null], @param44=[MOIQUANHE_ID,null], @param45=[NGUOILIENHE,null], @param46=[THONGTIN_NLH,null], @param47=[GHICHU,null], @param48=[HINHANH_DAIDIEN,imgMale.png], @param49=[BENHVIEN_ID,HLU01], @param50=[NGAYTAO,null], @param51=[NGUOITAO_ID,1], @param52=[NGAYGIOSINH,null], @param53=[NGUOICAPNHAT_ID,1]]
2019-08-15 15:42:31,421 [1] DEBUG - Statement Id: [DAO00118_Add_BenhNhan] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[DateTime, System.DateTime], @param8=[Int64, System.Int64], @param9=[System.DBNull, null], @param10=[System.DBNull, null], @param11=[System.DBNull, null], @param12=[String, System.String], @param13=[System.DBNull, null], @param14=[System.DBNull, null], @param15=[Int64, System.Int64], @param16=[Int64, System.Int64], @param17=[System.DBNull, null], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[System.DBNull, null], @param23=[System.DBNull, null], @param24=[String, System.String], @param25=[String, System.String], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[System.DBNull, null], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[System.DBNull, null], @param40=[System.DBNull, null], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[System.DBNull, null], @param47=[System.DBNull, null], @param48=[String, System.String], @param49=[String, System.String], @param50=[System.DBNull, null], @param51=[String, System.String], @param52=[System.DBNull, null], @param53=[String, System.String]]
2019-08-15 15:42:31,494 [1] DEBUG - Statement Id: [DAO00118_Add_Update_BHYT] PreparedStatement : [if not exists (select 1              from TT_BENHNHAN_BHYT              where SOTHE = 'DN452354234234538288' and BENHNHAN_ID = '23419')              insert into TT_BENHNHAN_BHYT (              BENHNHAN_ID              , LOAIBHYT              , SOTHE              , NGAYCAP              , NGAYHIEULUC              , NGAYHETHIEULUC              , TINHTHANH_CAPTHE_ID              , BENHVIEN_ID              , BENHVIEN_KCB_ID              , TREN3NAM              , TREN5NAM              , TREN6THANG              , NGAYMIENDONGCHITRA              , TAMNGUNG              , NGAYTAO              , NGUOITAO_ID              , KHUVUCSONG_ID              ) values (               @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               )              else              update TT_BENHNHAN_BHYT set              LOAIBHYT =  @param1               , SOTHE =  @param2               , NGAYCAP =  @param3               , NGAYHIEULUC =  @param4               , NGAYHETHIEULUC =  @param5               , TINHTHANH_CAPTHE_ID =  @param6               , BENHVIEN_ID =  @param7               , BENHVIEN_KCB_ID =  @param8               , TREN3NAM =  @param9               , TREN5NAM =  @param10               , TREN6THANG =  @param11               , NGAYMIENDONGCHITRA =  @param12               , TAMNGUNG =  @param13               , NGAYCAPNHAT =  @param17               , NGUOICAPNHAT_ID =  @param18               , KHUVUCSONG_ID =  @param16               where              SOTHE = 'DN452354234234538288' and BENHNHAN_ID = '23419']
2019-08-15 15:42:31,495 [1] DEBUG - Statement Id: [DAO00118_Add_Update_BHYT] Parameters: [@param0=[BENHNHAN_ID,23419], @param1=[LOAIBHYT,null], @param2=[SOTHE,DN452354234234538288], @param3=[NGAYCAP,null], @param4=[NGAYHIEULUC,1/1/2019 12:00:00 AM], @param5=[NGAYHETHIEULUC,12/31/2019 12:00:00 AM], @param6=[TINHTHANH_CAPTHE_ID,null], @param7=[BENHVIEN_ID,HLU01], @param8=[BENHVIEN_KCB_ID,38288], @param9=[TREN3NAM,False], @param10=[TREN5NAM,False], @param11=[TREN6THANG,null], @param12=[NGAYMIENDONGCHITRA,null], @param13=[TAMNGUNG,null], @param14=[NGAYTAO,8/15/2019 3:42:31 PM], @param15=[NGUOITAO_ID,1], @param16=[KHUVUCSONG_ID,0], @param17=[NGAYCAPNHAT,8/15/2019 3:42:31 PM], @param18=[NGUOICAPNHAT_ID,1]]
2019-08-15 15:42:31,495 [1] DEBUG - Statement Id: [DAO00118_Add_Update_BHYT] Types: [@param0=[Int32, System.Int32], @param1=[System.DBNull, null], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[DateTime, System.DateTime], @param5=[DateTime, System.DateTime], @param6=[System.DBNull, null], @param7=[String, System.String], @param8=[String, System.String], @param9=[Boolean, System.Boolean], @param10=[Boolean, System.Boolean], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[Int64, System.Int64], @param17=[DateTime, System.DateTime], @param18=[String, System.String]]
2019-08-15 15:42:31,579 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] PreparedStatement : [if not exists (select 1              from TT_BENHNHAN_BHYT              where SOTHE = 'DN452354234234538288' and BENHNHAN_ID = '23419')              insert into TT_BENHNHAN_BHYT (              BENHNHAN_ID              , LOAIBHYT              , SOTHE              , NGAYCAP              , NGAYHIEULUC              , NGAYHETHIEULUC              , TINHTHANH_CAPTHE_ID              , BENHVIEN_ID              , BENHVIEN_KCB_ID              , TREN3NAM              , TREN5NAM              , TREN6THANG              , NGAYMIENDONGCHITRA              , TAMNGUNG              , NGAYTAO              , NGUOITAO_ID              , KHUVUCSONG_ID              ) values (               @param0               ,  @param1               ,  @param2               ,  @param3               ,  @param4               ,  @param5               ,  @param6               ,  @param7               ,  @param8               ,  @param9               ,  @param10               ,  @param11               ,  @param12               ,  @param13               ,  @param14               ,  @param15               ,  @param16               )              else              update TT_BENHNHAN_BHYT set              LOAIBHYT =  @param1               , SOTHE =  @param2               , NGAYCAP =  @param3               , NGAYHIEULUC =  @param4               , NGAYHETHIEULUC =  @param5               , TINHTHANH_CAPTHE_ID =  @param6               , BENHVIEN_ID =  @param7               , BENHVIEN_KCB_ID =  @param8               , TREN3NAM =  @param9               , TREN5NAM =  @param10               , TREN6THANG =  @param11               , NGAYMIENDONGCHITRA =  @param12               , TAMNGUNG =  @param13               , NGAYCAPNHAT =  @param17               , NGUOICAPNHAT_ID =  @param18               , KHUVUCSONG_ID =  @param16               where              SOTHE = 'DN452354234234538288' and BENHNHAN_ID = '23419']
2019-08-15 15:42:31,579 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Parameters: [@param0=[BENHNHAN_ID,23419], @param1=[LOAIBHYT,4], @param2=[SOTHE,DN452354234234538288], @param3=[NGAYCAP,null], @param4=[NGAYHIEULUC,1/1/2019 12:00:00 AM], @param5=[NGAYHETHIEULUC,12/31/2019 12:00:00 AM], @param6=[TINHTHANH_CAPTHE_ID,null], @param7=[BENHVIEN_ID,HLU01], @param8=[BENHVIEN_KCB_ID,38288], @param9=[TREN3NAM,0], @param10=[TREN5NAM,0], @param11=[TREN6THANG,null], @param12=[NGAYMIENDONGCHITRA,null], @param13=[TAMNGUNG,null], @param14=[NGAYTAO,8/15/2019 3:42:31 PM], @param15=[NGUOITAO_ID,1], @param16=[KHUVUCSONG_ID,0], @param17=[NGAYCAPNHAT,8/15/2019 3:42:31 PM], @param18=[NGUOICAPNHAT_ID,1]]
2019-08-15 15:42:31,579 [1] DEBUG - Statement Id: [DAO00013_Add_Update_BHYT] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[DateTime, System.DateTime], @param5=[DateTime, System.DateTime], @param6=[System.DBNull, null], @param7=[String, System.String], @param8=[String, System.String], @param9=[String, System.String], @param10=[String, System.String], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[Int64, System.Int64], @param17=[DateTime, System.DateTime], @param18=[String, System.String]]
2019-08-15 15:42:31,809 [1] DEBUG - Statement Id: [DAOWF001_Laythongtingateways] PreparedStatement : [select * from TM_PROCESS_GATEWAYS]
2019-08-15 15:42:32,199 [1] DEBUG - Statement Id: [DAO00019_Add] PreparedStatement : [declare        @keyValue int, @BenhVienId varchar(10),        @yearNow int, @monthNow varchar(2), @dayNow varchar(2),        @Sotiepnhan varchar(20), @SoThuTu varchar(20)        set @keyValue = 0;        set @BenhVienId = 'HLU01'        set @yearNow = YEAR(getdate())        set @monthNow = RIGHT('00' + convert(varchar(2), MONTH(getdate())),2)        set @dayNow = RIGHT('00' + convert(varchar(2), DAY(getdate())),2)        BEGIN        select @keyValue = KEYVALUE from LST_KEYDATA        where KEYTYPE = 'SOTIEPNHAN' and KEYYEAR = @yearNow and KEYMONTH = @monthNow and KEYDAY = @dayNow        and BENHVIEN_ID = @BenhVienId        if @keyValue = 0        Insert into LST_KEYDATA values ('SOTIEPNHAN', @yearNow, @monthNow, @dayNow, '0', '0', '0', 0, @BenhVienId);        Update LST_KEYDATA set KEYVALUE = (KEYVALUE + 1), @keyValue = (KEYVALUE + 1) where KEYTYPE = 'SOTIEPNHAN' and KEYYEAR = @yearNow and KEYMONTH = @monthNow and KEYDAY = @dayNow and BENHVIEN_ID = @BenhVienId        set @SoThuTu = right('0000000'+convert(varchar(7), @keyValue), 7)        set @Sotiepnhan = 'TN' + RIGHT(@yearNow, 2) + @monthNow  + @dayNow + '.' + @SoThuTu                         insert into TT_TIEPNHAN (        SOTIEPNHAN        , UUTIEN        , BENHNHAN_ID        , BENHVIEN_ID        , TUYENKHAMBENH_ID        , NOITIEPNHAN_ID        , NGAYTIEPNHAN        , THOIGIANTIEPNHAN        , NAMTIEPNHAN        , THANGTIEPNHAN        , DOITUONG_ID        , LYDOTIEPNHAN_ID        , HINHTHUCDENKHAM_ID        , TINHTRANGHEN        , XACNHANCHIPHI_ID        , THUTIENTRUOC        , TAIKHAM        , SOBHYT        , BHYTTUNGAY        , BHYTDENNGAY        , BHYTNGAYCAP        , BHYTTREN3NAM        , BHYTTREN5NAM        , NGAYMIENDONGCHITRA        , LOAIBHYT        , NGAYBHYT2        , SOCHUYENVIEN        , HINHTHUCCHUYENVIEN_ID        , NOIGIOITHIEU_ID        , NGUOIGIOITHIEU_ID        , THOIGIANCHUYENTUYEN        , LYDOCHUYENVIEN_ID        , ICDNOIGIOITHIEU_ID        , CHANDOANNGT        , TRAITUYEN        , DIACHILIENHE        , XAPHUONG_ID        , QUANHUYEN_ID        , TINHTHANH_ID        , PROCESS_ID        , TRANGTHAI        , KHUVUCSONG_ID        , THANHVIEN_ID        , THE_ID        , LOAITHANHVIEN_ID        , SUDUNG_BHTN        , VIP        , GHICHU_TIEPNHAN        , BAOLANH_VIENPHI        , CONGTY_CHITRA_ID        , NGUON_BENHNHAN_ID        , LOAITIEPNHAN_ID        , THONGTIN_KCB_BHYT        , NGAYTAO        , NGUOITAO_ID        , LYDODENKHAM         ,           NGUOINUOCNGOAI         ,           ISTHONGTUYEN                 )        OUTPUT INSERTED.TIEPNHAN_ID, INSERTED.SOTIEPNHAN        values (        @Sotiepnhan        ,  @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45         ,  @param46         ,  @param47         ,  @param48         ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54          ,            @param55          ,            @param56                  )        end]
2019-08-15 15:42:32,200 [1] DEBUG - Statement Id: [DAO00019_Add] Parameters: [@param0=[UUTIEN,0], @param1=[BENHNHAN_ID,23419], @param2=[BENHVIEN_ID,HLU01], @param3=[TUYENKHAMBENH_ID,null], @param4=[NOITIEPNHAN_ID,61], @param5=[NGAYTIEPNHAN,8/15/2019 12:00:00 AM], @param6=[THOIGIANTIEPNHAN,8/15/2019 3:41:03 PM], @param7=[NAMTIEPNHAN,2019], @param8=[THANGTIEPNHAN,8], @param9=[DOITUONG_ID,4], @param10=[LYDOTIEPNHAN_ID,null], @param11=[HINHTHUCDENKHAM_ID,461], @param12=[TINHTRANGHEN,null], @param13=[XACNHANCHIPHI_ID,null], @param14=[THUTIENTRUOC,null], @param15=[TAIKHAM,0], @param16=[SOBHYT,DN452354234234538288], @param17=[BHYTTUNGAY,1/1/2019 12:00:00 AM], @param18=[BHYTDENNGAY,12/31/2019 12:00:00 AM], @param19=[BHYTNGAYCAP,null], @param20=[BHYTTREN3NAM,0], @param21=[BHYTTREN5NAM,0], @param22=[NGAYMIENDONGCHITRA,null], @param23=[LOAIBHYT,null], @param24=[NGAYBHYT2,null], @param25=[SOCHUYENVIEN,], @param26=[HINHTHUCCHUYENVIEN_ID,null], @param27=[NOIGIOITHIEU_ID,null], @param28=[NGUOIGIOITHIEU_ID,null], @param29=[THOIGIANCHUYENTUYEN,null], @param30=[LYDOCHUYENVIEN_ID,null], @param31=[ICDNOIGIOITHIEU_ID,null], @param32=[CHANDOANNGT,], @param33=[TRAITUYEN,1], @param34=[DIACHILIENHE,null], @param35=[XAPHUONG_ID,16432], @param36=[QUANHUYEN_ID,null], @param37=[TINHTHANH_ID,null], @param38=[PROCESS_ID,P02], @param39=[TRANGTHAI,DATIEPNHAN], @param40=[KHUVUCSONG_ID,0], @param41=[THANHVIEN_ID,null], @param42=[THE_ID,null], @param43=[LOAITHANHVIEN_ID,null], @param44=[SUDUNG_BHTN,0], @param45=[VIP,0], @param46=[GHICHU_TIEPNHAN,null], @param47=[BAOLANH_VIENPHI,0], @param48=[CONGTY_CHITRA_ID,null], @param49=[NGUON_BENHNHAN_ID,null], @param50=[LOAITIEPNHAN_ID,8351], @param51=[THONGTIN_KCB_BHYT,null], @param52=[NGAYTAO,8/15/2019 3:42:32 PM], @param53=[NGUOITAO_ID,1], @param54=[LYDODENKHAM,null], @param55=[NGUOINUOCNGOAI,null], @param56=[ISTHONGTUYEN,0]]
2019-08-15 15:42:32,200 [1] DEBUG - Statement Id: [DAO00019_Add] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[System.DBNull, null], @param4=[String, System.String], @param5=[DateTime, System.DateTime], @param6=[DateTime, System.DateTime], @param7=[Int32, System.Int32], @param8=[Int32, System.Int32], @param9=[Int64, System.Int64], @param10=[System.DBNull, null], @param11=[Int64, System.Int64], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[System.DBNull, null], @param15=[Int32, System.Int32], @param16=[String, System.String], @param17=[DateTime, System.DateTime], @param18=[DateTime, System.DateTime], @param19=[System.DBNull, null], @param20=[String, System.String], @param21=[String, System.String], @param22=[System.DBNull, null], @param23=[System.DBNull, null], @param24=[System.DBNull, null], @param25=[String, System.String], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[String, System.String], @param33=[String, System.String], @param34=[System.DBNull, null], @param35=[String, System.String], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[String, System.String], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[String, System.String], @param45=[String, System.String], @param46=[System.DBNull, null], @param47=[String, System.String], @param48=[System.DBNull, null], @param49=[System.DBNull, null], @param50=[Int64, System.Int64], @param51=[System.DBNull, null], @param52=[DateTime, System.DateTime], @param53=[String, System.String], @param54=[System.DBNull, null], @param55=[System.DBNull, null], @param56=[String, System.String]]
2019-08-15 15:42:32,269 [1] DEBUG - Statement Id: [DAO00019_GetTTTiepNhan_byTiepNhanId] PreparedStatement : [select *        from TT_TIEPNHAN        where TIEPNHAN_ID = '27474'        order by TIEPNHAN_ID]
2019-08-15 15:42:32,312 [1] DEBUG - Statement Id: [DAO00080_Add_KhamBenh_CapCuu] PreparedStatement : [insert into TT_KHAMBENH_VAOVIEN (        SOPHIEU        , TIEPNHAN_ID        , KHAMBENH_ID        , BENHNHAN_ID        , NGUOILIENHE        , DIENTHOAILIENHE        , NOILAMVIEC        , CHANDOANNOIGIOITHIEU        , NGAYKHAM        , THOIGIANKHAM        , LYDOVAOVIEN        , QUATRINHBENHLY        , TIENSUBANTHAN        , TIENSUGIADINH        , KHAMXETTOANTHAN        , KHAMXETCACBOPHAN        , KHAMXETKQLS        , CHANDOANVAO        , ICDKHAMXET_ID        , DAXULY        , NGAYRA        , THOIGIANRA        , NHAPKHOA_ID        , CHUYENVIEN_ID        , CHUY        , MACH        , NHIETDO        , HUYETAPCAO        , HUYETAPTHAP        , NHIPTHO        , CANNANG        , CHIEUCAO        , BACSI_ID        , XUTRUKHAMBENH_ID        , CAPCUU        , NGAYTAINAN        , THOIGIANTAINAN        , NOITAINAN_TINHTHANH_ID        , NOITAINAN_QUANHUYEN_ID        , NOITAINAN_PHUONGXA_ID        , NOITAINAN_DIACHI        , DIADIEMTAINAN_ID        , BOPHANBITHUONG_ID        , MUCDO_ID        , DIENBIENSAUTN_ID        , XUTRISAUTN_ID        , NGUYENNHAN_ID        , NGUYENNHANCHITIET_ID        , ICD_NGUYENNHAN        , NGAYTAO        , NGUOITAO_ID        , NGAYCAPNHAT        , NGUOICAPNHAT_ID        , BENHANCHUYENKHOA        , CHANDOANVAOVIEN        , CHANDOANRAVIEN        , DIEUTRITUNGAY        , DIEUTRIDENNGAY        , DIENBIENLS        , KQXETNGHIEM        , PHAUTHUAT        , THUTHUAT        , TINHTRANGNGUOIBENH        , HUONGDIEUTRI        , NGUOIGIAO_ID        , NGUOINHAN_ID        , XQUANG        , CTSCANNER        , SIEUAM        , XETNGHIEM        , KHAC        , TOANBOHS        , LOAICHUYENKHOA        , CONGANCANTHIEP        , CDRR_BENHCHINH        , CDRR_BENHKEM        , ICD_BENHCHINH        , ICD_BENHKEMTHEO        , PHUONGPHAPDIEUTRI        , FIELD_1        , FIELD_2        , FIELD_3        , FIELD_4        , FIELD_5        , FIELD_6        , FIELD_7        , FIELD_8        , FIELD_9        , FIELD_10        , FIELD_11        , FIELD_12        , FIELD_13        , FIELD_14        , FIELD_15        , FIELD_27        , FIELD_28        , FIELD_29        , FIELD_30        , FIELD_31        , FIELD_32        , FIELD_33        , FIELD_34        , FIELD_35        , FIELD_36        , FIELD_37        , FIELD_38        , FIELD_39        , FIELD_40        , FIELD_41        , FIELD_42        , FIELD_43        , FIELD_44        , FIELD_45        , FIELD_46        , FIELD_47        , FIELD_48        , FIELD_49        , FIELD_50        , FIELD_51        , FIELD_52        , FIELD_53        , FIELD_54        , FIELD_55        , FIELD_56        , BENHVIEN_ID        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45         ,  @param46         ,  @param47         ,  @param48         ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55         ,  @param56         ,  @param57         ,  @param58         ,  @param59         ,  @param60         ,  @param61         ,  @param62         ,  @param63         ,  @param64         ,  @param65         ,  @param66         ,  @param67         ,  @param68         ,  @param69         ,  @param70         ,  @param71         ,  @param72         ,  @param73         ,  @param74         ,  @param75         ,  @param76         ,  @param77         ,  @param78         ,  @param79         ,  @param80         ,  @param81         ,  @param82         ,  @param83         ,  @param84         ,  @param85         ,  @param86         ,  @param87         ,  @param88         ,  @param89         ,  @param90         ,  @param91         ,  @param92         ,  @param93         ,  @param94         ,  @param95         ,  @param96         ,  @param97         ,  @param98         ,  @param99         ,  @param100         ,  @param101         ,  @param102         ,  @param103         ,  @param104         ,  @param105         ,  @param106         ,  @param107         ,  @param108         ,  @param109         ,  @param110         ,  @param111         ,  @param112         ,  @param113         ,  @param114         ,  @param115         ,  @param116         ,  @param117         ,  @param118         ,  @param119         ,  @param120         ,  @param121         ,  @param122         ,  @param123         ,  @param124         )]
2019-08-15 15:42:32,312 [1] DEBUG - Statement Id: [DAO00080_Add_KhamBenh_CapCuu] Parameters: [@param0=[SOPHIEU,null], @param1=[TIEPNHAN_ID,27474], @param2=[KHAMBENH_ID,null], @param3=[BENHNHAN_ID,23419], @param4=[NGUOILIENHE,null], @param5=[DIENTHOAILIENHE,null], @param6=[NOILAMVIEC,null], @param7=[CHANDOANNOIGIOITHIEU,null], @param8=[NGAYKHAM,8/15/2019 12:00:00 AM], @param9=[THOIGIANKHAM,8/15/2019 3:41:03 PM], @param10=[LYDOVAOVIEN,null], @param11=[QUATRINHBENHLY,null], @param12=[TIENSUBANTHAN,null], @param13=[TIENSUGIADINH,null], @param14=[KHAMXETTOANTHAN,null], @param15=[KHAMXETCACBOPHAN,null], @param16=[KHAMXETKQLS,null], @param17=[CHANDOANVAO,null], @param18=[ICDKHAMXET_ID,null], @param19=[DAXULY,null], @param20=[NGAYRA,null], @param21=[THOIGIANRA,null], @param22=[NHAPKHOA_ID,61], @param23=[CHUYENVIEN_ID,null], @param24=[CHUY,null], @param25=[MACH,null], @param26=[NHIETDO,null], @param27=[HUYETAPCAO,null], @param28=[HUYETAPTHAP,null], @param29=[NHIPTHO,null], @param30=[CANNANG,null], @param31=[CHIEUCAO,null], @param32=[BACSI_ID,null], @param33=[XUTRUKHAMBENH_ID,null], @param34=[CAPCUU,null], @param35=[NGAYTAINAN,null], @param36=[THOIGIANTAINAN,null], @param37=[NOITAINAN_TINHTHANH_ID,null], @param38=[NOITAINAN_QUANHUYEN_ID,null], @param39=[NOITAINAN_PHUONGXA_ID,null], @param40=[NOITAINAN_DIACHI,null], @param41=[DIADIEMTAINAN_ID,null], @param42=[BOPHANBITHUONG_ID,null], @param43=[MUCDO_ID,null], @param44=[DIENBIENSAUTN_ID,null], @param45=[XUTRISAUTN_ID,null], @param46=[NGUYENNHAN_ID,null], @param47=[NGUYENNHANCHITIET_ID,null], @param48=[ICD_NGUYENNHAN,null], @param49=[NGAYTAO,8/15/2019 3:42:32 PM], @param50=[NGUOITAO_ID,1], @param51=[NGAYCAPNHAT,8/15/2019 3:42:32 PM], @param52=[NGUOICAPNHAT_ID,1], @param53=[BENHANCHUYENKHOA,null], @param54=[CHANDOANVAOVIEN,null], @param55=[CHANDOANRAVIEN,null], @param56=[DIEUTRITUNGAY,null], @param57=[DIEUTRIDENNGAY,null], @param58=[DIENBIENLS,null], @param59=[KQXETNGHIEM,null], @param60=[PHAUTHUAT,null], @param61=[THUTHUAT,null], @param62=[TINHTRANGNGUOIBENH,null], @param63=[HUONGDIEUTRI,null], @param64=[NGUOIGIAO_ID,null], @param65=[NGUOINHAN_ID,null], @param66=[XQUANG,null], @param67=[CTSCANNER,null], @param68=[SIEUAM,null], @param69=[XETNGHIEM,null], @param70=[KHAC,null], @param71=[TOANBOHS,null], @param72=[LOAICHUYENKHOA,null], @param73=[CONGANCANTHIEP,null], @param74=[CDRR_BENHCHINH,null], @param75=[CDRR_BENHKEM,null], @param76=[ICD_BENHCHINH,null], @param77=[ICD_BENHKEMTHEO,null], @param78=[PHUONGPHAPDIEUTRI,null], @param79=[FIELD_1,null], @param80=[FIELD_2,null], @param81=[FIELD_3,null], @param82=[FIELD_4,null], @param83=[FIELD_5,null], @param84=[FIELD_6,null], @param85=[FIELD_7,null], @param86=[FIELD_8,null], @param87=[FIELD_9,null], @param88=[FIELD_10,null], @param89=[FIELD_11,null], @param90=[FIELD_12,null], @param91=[FIELD_13,null], @param92=[FIELD_14,null], @param93=[FIELD_15,null], @param94=[FIELD_27,null], @param95=[FIELD_28,null], @param96=[FIELD_29,null], @param97=[FIELD_30,null], @param98=[FIELD_31,null], @param99=[FIELD_32,null], @param100=[FIELD_33,null], @param101=[FIELD_34,null], @param102=[FIELD_35,null], @param103=[FIELD_36,null], @param104=[FIELD_37,null], @param105=[FIELD_38,null], @param106=[FIELD_39,null], @param107=[FIELD_40,null], @param108=[FIELD_41,null], @param109=[FIELD_42,null], @param110=[FIELD_43,null], @param111=[FIELD_44,null], @param112=[FIELD_45,null], @param113=[FIELD_46,null], @param114=[FIELD_47,null], @param115=[FIELD_48,null], @param116=[FIELD_49,null], @param117=[FIELD_50,null], @param118=[FIELD_51,null], @param119=[FIELD_52,null], @param120=[FIELD_53,null], @param121=[FIELD_54,null], @param122=[FIELD_55,null], @param123=[FIELD_56,null], @param124=[BENHVIEN_ID,HLU01]]
2019-08-15 15:42:32,312 [1] DEBUG - Statement Id: [DAO00080_Add_KhamBenh_CapCuu] Types: [@param0=[System.DBNull, null], @param1=[Int32, System.Int32], @param2=[System.DBNull, null], @param3=[Int32, System.Int32], @param4=[System.DBNull, null], @param5=[System.DBNull, null], @param6=[System.DBNull, null], @param7=[System.DBNull, null], @param8=[DateTime, System.DateTime], @param9=[DateTime, System.DateTime], @param10=[System.DBNull, null], @param11=[System.DBNull, null], @param12=[System.DBNull, null], @param13=[System.DBNull, null], @param14=[System.DBNull, null], @param15=[System.DBNull, null], @param16=[System.DBNull, null], @param17=[System.DBNull, null], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[String, System.String], @param23=[System.DBNull, null], @param24=[System.DBNull, null], @param25=[System.DBNull, null], @param26=[System.DBNull, null], @param27=[System.DBNull, null], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[System.DBNull, null], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[System.DBNull, null], @param40=[System.DBNull, null], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[System.DBNull, null], @param47=[System.DBNull, null], @param48=[System.DBNull, null], @param49=[DateTime, System.DateTime], @param50=[String, System.String], @param51=[DateTime, System.DateTime], @param52=[String, System.String], @param53=[System.DBNull, null], @param54=[System.DBNull, null], @param55=[System.DBNull, null], @param56=[System.DBNull, null], @param57=[System.DBNull, null], @param58=[System.DBNull, null], @param59=[System.DBNull, null], @param60=[System.DBNull, null], @param61=[System.DBNull, null], @param62=[System.DBNull, null], @param63=[System.DBNull, null], @param64=[System.DBNull, null], @param65=[System.DBNull, null], @param66=[System.DBNull, null], @param67=[System.DBNull, null], @param68=[System.DBNull, null], @param69=[System.DBNull, null], @param70=[System.DBNull, null], @param71=[System.DBNull, null], @param72=[System.DBNull, null], @param73=[System.DBNull, null], @param74=[System.DBNull, null], @param75=[System.DBNull, null], @param76=[System.DBNull, null], @param77=[System.DBNull, null], @param78=[System.DBNull, null], @param79=[System.DBNull, null], @param80=[System.DBNull, null], @param81=[System.DBNull, null], @param82=[System.DBNull, null], @param83=[System.DBNull, null], @param84=[System.DBNull, null], @param85=[System.DBNull, null], @param86=[System.DBNull, null], @param87=[System.DBNull, null], @param88=[System.DBNull, null], @param89=[System.DBNull, null], @param90=[System.DBNull, null], @param91=[System.DBNull, null], @param92=[System.DBNull, null], @param93=[System.DBNull, null], @param94=[System.DBNull, null], @param95=[System.DBNull, null], @param96=[System.DBNull, null], @param97=[System.DBNull, null], @param98=[System.DBNull, null], @param99=[System.DBNull, null], @param100=[System.DBNull, null], @param101=[System.DBNull, null], @param102=[System.DBNull, null], @param103=[System.DBNull, null], @param104=[System.DBNull, null], @param105=[System.DBNull, null], @param106=[System.DBNull, null], @param107=[System.DBNull, null], @param108=[System.DBNull, null], @param109=[System.DBNull, null], @param110=[System.DBNull, null], @param111=[System.DBNull, null], @param112=[System.DBNull, null], @param113=[System.DBNull, null], @param114=[System.DBNull, null], @param115=[System.DBNull, null], @param116=[System.DBNull, null], @param117=[System.DBNull, null], @param118=[System.DBNull, null], @param119=[System.DBNull, null], @param120=[System.DBNull, null], @param121=[System.DBNull, null], @param122=[System.DBNull, null], @param123=[System.DBNull, null], @param124=[String, System.String]]
2019-08-15 15:42:32,362 [1] DEBUG - Statement Id: [DAO00000_GetMucHuongDOITUONGBHYT] PreparedStatement : [select * from TM_DOITUONG          where BENHVIEN_ID = 'HLU01'           and             NHOMTHE like '%' +  @param0  +'%']
2019-08-15 15:42:32,362 [1] DEBUG - Statement Id: [DAO00000_GetMucHuongDOITUONGBHYT] Parameters: [@param0=[NHOMTHE,DN4]]
2019-08-15 15:42:32,362 [1] DEBUG - Statement Id: [DAO00000_GetMucHuongDOITUONGBHYT] Types: [@param0=[String, System.String]]
2019-08-15 15:42:32,408 [1] DEBUG - Statement Id: [DAO00019_Add_TT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [INSERT INTO TT_TIEPNHAN_SOTHEBHYT        (TIEPNHAN_ID        ,BENHNHAN_ID        ,BENHAN_ID        ,DOITUONG_ID        ,SOBHYT        ,BHYTTUNGAY        ,BHYTDENNGAY        ,BHYTNGAYCAP        ,BHYTTREN3NAM        ,BHYTTREN5NAM        ,NGAYMIENDONGCHITRA        ,TRAITUYEN        ,BENHVIEN_ID        ,NOITAO_ID        ,NGAYTAO        ,NGUOITAO_ID        ,NGAYCAPNHAT        ,NGUOICAPNHAT_ID        ,TYLE_VUOT_LCB        ,TYLE_TRAITUYEN        ,GIOIHAN_VUOT_LCB        ,LUONG_COSO        ,TYLE_THUOC_UT        ,MADOITUONG)        VALUES        ( @param0         , @param1         , @param2         , @param3         , @param4         , @param5         , @param6         , @param7         , @param8         , @param9         , @param10         , @param11         , @param12         , @param13         , @param14         , @param15         , @param16         , @param17         , @param18         , @param19         , @param20         , @param21         , @param22         , @param23 )]
2019-08-15 15:42:32,408 [1] DEBUG - Statement Id: [DAO00019_Add_TT_TIEPNHAN_SOTHEBHYT] Parameters: [@param0=[TIEPNHAN_ID,27474], @param1=[BENHNHAN_ID,23419], @param2=[BENHAN_ID,null], @param3=[DOITUONG_ID,4], @param4=[SOBHYT,DN452354234234538288], @param5=[BHYTTUNGAY,1/1/2019 12:00:00 AM], @param6=[BHYTDENNGAY,12/31/2019 12:00:00 AM], @param7=[BHYTNGAYCAP,null], @param8=[BHYTTREN3NAM,0], @param9=[BHYTTREN5NAM,0], @param10=[NGAYMIENDONGCHITRA,null], @param11=[TRAITUYEN,1], @param12=[BENHVIEN_ID,HLU01], @param13=[NOITAO_ID,61], @param14=[NGAYTAO,8/15/2019 3:42:32 PM], @param15=[NGUOITAO_ID,1], @param16=[NGAYCAPNHAT,8/15/2019 3:42:32 PM], @param17=[NGUOICAPNHAT_ID,1], @param18=[TYLE_VUOT_LCB,0.80], @param19=[TYLE_TRAITUYEN,0.60], @param20=[GIOIHAN_VUOT_LCB,208500.00], @param21=[LUONG_COSO,1300000.00], @param22=[TYLE_THUOC_UT,0.50], @param23=[MADOITUONG,BHYT4]]
2019-08-15 15:42:32,408 [1] DEBUG - Statement Id: [DAO00019_Add_TT_TIEPNHAN_SOTHEBHYT] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[System.DBNull, null], @param3=[Int32, System.Int32], @param4=[String, System.String], @param5=[DateTime, System.DateTime], @param6=[DateTime, System.DateTime], @param7=[System.DBNull, null], @param8=[String, System.String], @param9=[String, System.String], @param10=[System.DBNull, null], @param11=[String, System.String], @param12=[String, System.String], @param13=[String, System.String], @param14=[DateTime, System.DateTime], @param15=[String, System.String], @param16=[DateTime, System.DateTime], @param17=[String, System.String], @param18=[Decimal, System.Decimal], @param19=[Decimal, System.Decimal], @param20=[Decimal, System.Decimal], @param21=[Decimal, System.Decimal], @param22=[Decimal, System.Decimal], @param23=[String, System.String]]
2019-08-15 15:42:32,547 [1] DEBUG - Statement Id: [DAO00027_GetListTiepNhanAllCOM30] PreparedStatement : [select distinct A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, isnull(C.SOBENHAN,NULL) as SOBENHAN,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI, A.SOBHYT, CONVERT(VARCHAR(11),A.NGAYTIEPNHAN,103) as NGAYTIEPNHAN,        B.*        , A.UUTIEN        from TT_TIEPNHAN A        inner join (select * from TT_BENHNHAN where MAYTE = '190043300' and ACTIVE = '1') B on B.BENHNHAN_ID = A.BENHNHAN_ID  and B.ACTIVE = '1'        left join TT_NOITRU_BENHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        where A.TIEPNHAN_ID = '27474' and A.BENHVIEN_ID = 'HLU01' and (A.TRANGTHAI not in ('HUY','CAPCUU', 'NOITRU', 'NGOAITRU'))]
2019-08-15 15:42:32,907 [1] DEBUG - Statement Id: [DAOWF001_LaythongtinProcess] PreparedStatement : [select * from TM_PROCESS        where        PROCESS_CODE = 'P02']
2019-08-15 15:42:32,957 [1] DEBUG - Statement Id: [DAOWF001_Kiemtrathongtindayeucau] PreparedStatement : [select * from TT_REQUEST        where        PROCESS_CODE = 'P02'        AND PARA = '{"HOSPITAL_ID":"HLU01","SOTIEPNHAN":"TN190815.0000001"}'        AND CURR_STATE_CODE = '7'        AND ISACTIVE = '1']
2019-08-15 15:42:34,310 [1] DEBUG - Statement Id: [DAOWF002_Add] PreparedStatement : [DECLARE @IDRequestOld int        DECLARE @IDRequestNew int        select top 1 @IDRequestOld = ID from TT_REQUEST where PARA =  @param0  order by ID desc          insert into TT_REQUEST (        PROCESS_CODE        , PARA        , CURR_STATE_CODE        ) values (         @param1         ,  @param0         ,  @param2         )        SELECT @IDRequestNew = SCOPE_IDENTITY()        if (@IDRequestOld is not null)        begin        update TT_REQUEST_SERVICE set REQUEST_ID = @IDRequestNew, PROCESS_CODE =  @param1  where REQUEST_ID = @IDRequestOld        update TT_REQUEST set ISACTIVE = '0' where ID = @IDRequestOld        update TT_REQUEST_SERVICE_DETAIL set REQUEST_ID = @IDRequestNew where REQUEST_ID = @IDRequestOld        end          select @IDRequestNew]
2019-08-15 15:42:34,310 [1] DEBUG - Statement Id: [DAOWF002_Add] Parameters: [@param0=[PARA,{"HOSPITAL_ID":"HLU01","SOTIEPNHAN":"TN190815.0000001"}], @param1=[PROCESS_CODE,P02], @param2=[CURR_STATE_CODE,7]]
2019-08-15 15:42:34,310 [1] DEBUG - Statement Id: [DAOWF002_Add] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String]]
2019-08-15 15:42:34,470 [1] DEBUG - Statement Id: [DAO00020_GetNhomdichvuIDByManhom] PreparedStatement : [select NHOMDICHVU_ID from TM_NHOMDICHVU where MANHOMDICHVU = '04']
2019-08-15 15:42:34,509 [1] DEBUG - Statement Id: [DAO00020_Add] PreparedStatement : [declare        @keyValue int, @BenhVienId varchar(10), @yearNow int, @SoPhieuYeu varchar(20), @SoRender varchar(20), @MaNhomDichVu varchar(20)        set @keyValue = 0;        set @BenhVienId = 'HLU01'        set @yearNow = YEAR(getdate())        set @MaNhomDichVu = '5'                 select @keyValue = KEYVALUE from LST_KEYDATA        where KEYTYPE = 'SOPHIEUYEUCAU' and KEYYEAR = @yearNow and SEGMENT_1 = @MaNhomDichVu and BENHVIEN_ID = @BenhVienId        if @keyValue = 0        Insert into LST_KEYDATA values ('SOPHIEUYEUCAU', @yearNow, '0', '0', @MaNhomDichVu, '0', '0', 0, @BenhVienId);          Update LST_KEYDATA set KEYVALUE = KEYVALUE + 1, @keyValue = (KEYVALUE + 1) where KEYTYPE = 'SOPHIEUYEUCAU' and KEYYEAR = @yearNow and SEGMENT_1 = @MaNhomDichVu and BENHVIEN_ID = @BenhVienId        set @SoRender = right('000000'+convert(varchar(6), @keyValue), 6)        set @SoPhieuYeu = RIGHT(@yearNow, 2) + '.' + @MaNhomDichVu + '.' + @SoRender                 insert into TT_DVYEUCAU (        TIEPNHAN_ID        , BENHAN_ID        , KHAMBENH_ID        , SODICHVUYEUCAU        , KHAMBENH_NGOAITRU_ID        , SOPHIEUYEUCAU        , BENHNHAN_ID        , DOITUONG_ID        , DICHVU_ID         ,           NGUOICHIDINH_ID                 , BACSICHIDINH_ID        , GIOYEUCAU        , NGAYYEUCAU        , THANGYEUCAU        , NAMYEUCAU        , NGAYGIOYEUCAU        , THUTUYEUCAU        , NOIYEUCAU_ID        , NOITHUCHIEN_ID        , TRANGTHAI_HANGDOI        , NOIDUNGCHITIET        , CHANDOAN        , LUUTRU_ID        , SODICHVUDONGTIEN        , DICHVU_KHAMBENH_ID        , DALAYMAU        , SINHTHIET        , CLOTEST        , TIEMCANQUANG        , TRIEUCHUNG        , DAITHE        , VITHE        , BENHPHAM        , DANHANBENHPHAM        , NGAYNHANBENHPHAM        , THOIGIANNHANBENHPHAM        , NGUOINHANBENHPHAM_ID        , MANGUOINHAPBENHPHAM        , TENNGUOINHAPBENHPHAM        , KETQUAXNKHAC        , YEUCAUBENNGOAI        , THUCHIENBENNGOAI        , DONVIBENNGOAI_ID        , BACSIBENNGOAI_ID        , TENBACSIBENNGOAI        , KHOABENNGOAI_ID        , KHOABENNGOAI                 , NOITHUCHIENTHAYDOI_ID        , LOAIKHACHHANG_ID        , THE_ID        , BARCODEID        , HOPDONG_ID        , HOPDONG_BENHNHAN_ID        , HINHTHUCTHANHTOAN_ID        , DANGKY_ID        , DANGKY_CHITIET_ID        , LICHHEN_ID        , THOIGIANLICHHEN        , BNKHONGDENBV        , GHICHU        , THANHTOANTRUOC        , KHAN        , DUOCPHEPTHUCHIEN        , HUYYEUCAU        , LYDOHUY        , TRANGTHAI        , KHOADULIEU        , NGAYKHOADULIEU        , THOIGIANKHOADULIEU        , NGUOIKHOA_ID        , MANGUOIKHOA        , TENNGUOIKHOA        , BENHVIEN_ID        , NGAYTAO        , NGUOITAO_ID        , NGAYHENCLS        , CREATININEMAU        , VUNGCANKHAOSAT        , BHYTDONGTIEN        , THUTIENSAU                 , DVKEMTHEO        , DVKEMTHEO_KHACEKIP        , LIENCHUYENKHOA                 )        OUTPUT INSERTED.DVYEUCAU_ID, INSERTED.SOPHIEUYEUCAU        values (         @param0         ,  @param1         ,  @param2         ,  @param3         ,  @param4         , @SoPhieuYeu        ,  @param5         ,  @param6         ,  @param7          ,            @param8                  ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36         ,  @param37         ,  @param38         ,  @param39         ,  @param40         ,  @param41         ,  @param42         ,  @param43         ,  @param44         ,  @param45                  ,  @param46         ,  @param47         ,  @param48         ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55         ,  @param56         ,  @param57         ,  @param58         ,  @param59         ,  @param60         ,  @param61         ,  @param62         ,  @param63         ,  @param64         ,  @param65         ,  @param66         ,  @param67         ,  @param68         ,  @param69         ,  @param70         ,  @param71         ,  @param72         ,  @param73         ,  @param74         ,  @param75         ,  @param76         ,  @param77         ,  @param78                  ,  @param79         ,  @param80         ,  @param81                  );]
2019-08-15 15:42:34,510 [1] DEBUG - Statement Id: [DAO00020_Add] Parameters: [@param0=[TIEPNHAN_ID,27474], @param1=[BENHAN_ID,null], @param2=[KHAMBENH_ID,null], @param3=[SODICHVUYEUCAU,1], @param4=[KHAMBENH_NGOAITRU_ID,null], @param5=[BENHNHAN_ID,23419], @param6=[DOITUONG_ID,4], @param7=[DICHVU_ID,5436], @param8=[NGUOICHIDINH_ID,1], @param9=[BACSICHIDINH_ID,1], @param10=[GIOYEUCAU,15], @param11=[NGAYYEUCAU,8/15/2019 12:00:00 AM], @param12=[THANGYEUCAU,8], @param13=[NAMYEUCAU,2019], @param14=[NGAYGIOYEUCAU,8/15/2019 3:41:03 PM], @param15=[THUTUYEUCAU,1], @param16=[NOIYEUCAU_ID,61], @param17=[NOITHUCHIEN_ID,61], @param18=[TRANGTHAI_HANGDOI,null], @param19=[NOIDUNGCHITIET,null], @param20=[CHANDOAN,null], @param21=[LUUTRU_ID,null], @param22=[SODICHVUDONGTIEN,0], @param23=[DICHVU_KHAMBENH_ID,null], @param24=[DALAYMAU,null], @param25=[SINHTHIET,0], @param26=[CLOTEST,0], @param27=[TIEMCANQUANG,0], @param28=[TRIEUCHUNG,null], @param29=[DAITHE,null], @param30=[VITHE,null], @param31=[BENHPHAM,null], @param32=[DANHANBENHPHAM,0], @param33=[NGAYNHANBENHPHAM,null], @param34=[THOIGIANNHANBENHPHAM,null], @param35=[NGUOINHANBENHPHAM_ID,null], @param36=[MANGUOINHAPBENHPHAM,null], @param37=[TENNGUOINHAPBENHPHAM,null], @param38=[KETQUAXNKHAC,null], @param39=[YEUCAUBENNGOAI,0], @param40=[THUCHIENBENNGOAI,0], @param41=[DONVIBENNGOAI_ID,null], @param42=[BACSIBENNGOAI_ID,null], @param43=[TENBACSIBENNGOAI,null], @param44=[KHOABENNGOAI_ID,null], @param45=[KHOABENNGOAI,null], @param46=[NOITHUCHIENTHAYDOI_ID,null], @param47=[LOAIKHACHHANG_ID,null], @param48=[THE_ID,null], @param49=[BARCODEID,null], @param50=[HOPDONG_ID,null], @param51=[HOPDONG_BENHNHAN_ID,null], @param52=[HINHTHUCTHANHTOAN_ID,null], @param53=[DANGKY_ID,null], @param54=[DANGKY_CHITIET_ID,null], @param55=[LICHHEN_ID,null], @param56=[THOIGIANLICHHEN,null], @param57=[BNKHONGDENBV,null], @param58=[GHICHU,null], @param59=[THANHTOANTRUOC,1], @param60=[KHAN,0], @param61=[DUOCPHEPTHUCHIEN,0], @param62=[HUYYEUCAU,0], @param63=[LYDOHUY,null], @param64=[TRANGTHAI,CHUAKETQUA], @param65=[KHOADULIEU,null], @param66=[NGAYKHOADULIEU,null], @param67=[THOIGIANKHOADULIEU,null], @param68=[NGUOIKHOA_ID,null], @param69=[MANGUOIKHOA,null], @param70=[TENNGUOIKHOA,null], @param71=[BENHVIEN_ID,HLU01], @param72=[NGAYTAO,8/15/2019 3:42:34 PM], @param73=[NGUOITAO_ID,1], @param74=[NGAYHENCLS,null], @param75=[CREATININEMAU,null], @param76=[VUNGCANKHAOSAT,null], @param77=[BHYTDONGTIEN,null], @param78=[THUTIENSAU,0], @param79=[DVKEMTHEO,0], @param80=[DVKEMTHEO_KHACEKIP,null], @param81=[LIENCHUYENKHOA,null]]
2019-08-15 15:42:34,510 [1] DEBUG - Statement Id: [DAO00020_Add] Types: [@param0=[String, System.String], @param1=[System.DBNull, null], @param2=[System.DBNull, null], @param3=[Int32, System.Int32], @param4=[System.DBNull, null], @param5=[Int32, System.Int32], @param6=[Int64, System.Int64], @param7=[Int64, System.Int64], @param8=[Int64, System.Int64], @param9=[Int64, System.Int64], @param10=[Int32, System.Int32], @param11=[DateTime, System.DateTime], @param12=[Int32, System.Int32], @param13=[Int32, System.Int32], @param14=[DateTime, System.DateTime], @param15=[Int32, System.Int32], @param16=[String, System.String], @param17=[Int64, System.Int64], @param18=[System.DBNull, null], @param19=[System.DBNull, null], @param20=[System.DBNull, null], @param21=[System.DBNull, null], @param22=[Int32, System.Int32], @param23=[System.DBNull, null], @param24=[System.DBNull, null], @param25=[Int32, System.Int32], @param26=[Int32, System.Int32], @param27=[Int32, System.Int32], @param28=[System.DBNull, null], @param29=[System.DBNull, null], @param30=[System.DBNull, null], @param31=[System.DBNull, null], @param32=[Int32, System.Int32], @param33=[System.DBNull, null], @param34=[System.DBNull, null], @param35=[System.DBNull, null], @param36=[System.DBNull, null], @param37=[System.DBNull, null], @param38=[System.DBNull, null], @param39=[Int32, System.Int32], @param40=[Int32, System.Int32], @param41=[System.DBNull, null], @param42=[System.DBNull, null], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[System.DBNull, null], @param46=[System.DBNull, null], @param47=[System.DBNull, null], @param48=[System.DBNull, null], @param49=[System.DBNull, null], @param50=[System.DBNull, null], @param51=[System.DBNull, null], @param52=[System.DBNull, null], @param53=[System.DBNull, null], @param54=[System.DBNull, null], @param55=[System.DBNull, null], @param56=[System.DBNull, null], @param57=[System.DBNull, null], @param58=[System.DBNull, null], @param59=[Int32, System.Int32], @param60=[Int32, System.Int32], @param61=[Int32, System.Int32], @param62=[Int32, System.Int32], @param63=[System.DBNull, null], @param64=[String, System.String], @param65=[System.DBNull, null], @param66=[System.DBNull, null], @param67=[System.DBNull, null], @param68=[System.DBNull, null], @param69=[System.DBNull, null], @param70=[System.DBNull, null], @param71=[String, System.String], @param72=[DateTime, System.DateTime], @param73=[String, System.String], @param74=[System.DBNull, null], @param75=[System.DBNull, null], @param76=[System.DBNull, null], @param77=[System.DBNull, null], @param78=[String, System.String], @param79=[Int32, System.Int32], @param80=[System.DBNull, null], @param81=[System.DBNull, null]]
2019-08-15 15:42:35,380 [1] DEBUG - Statement Id: [DAO00027_ThongTinTiepNhanCOM006] PreparedStatement : [select distinct CONVERT(VARCHAR(11),A.NGAYTIEPNHAN,103) as NGAYYEUCAU, C.DICHVU_ID, C.DVYEUCAU_ID, D.TENDICHVU, C.NOITHUCHIEN_ID,        A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU'   or A.TRANGTHAI = 'NGOAITRU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,        CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU, A.SOBHYT,        B.*,        CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU        , A.UUTIEN        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU'  or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID        left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID        where C.NGAYHENCLS is NULL and A.TIEPNHAN_ID = '27474' and C.DICHVU_ID = '5436' and A.BENHVIEN_ID = 'HLU01'         and           C.DVYEUCAU_ID = '205416']
2019-08-15 15:42:35,741 [1] DEBUG - Statement Id: [DAO00027_ThongTinTiepNhanCOM015] PreparedStatement : [SELECT * FROM        (        SELECT        (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID)) AS acss_lookupID,        ROW_NUMBER() OVER        (PARTITION BY (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID))        ORDER BY (A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID)))        as num,        A.SOTIEPNHAN + (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END) + LTRIM(C.NOITHUCHIEN_ID) as KEYCOM15,        C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,        CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,        CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU, A.SOBHYT,        B.*, F.TRANGTHAI as TRANGTHAI_BENHAN_NOITRU,        A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,        CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU        , A.UUTIEN        from TT_TIEPNHAN A        inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU') and B.ACTIVE = '1'        inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID        left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID        left join TT_NOITRU_BENHAN F on F.TIEPNHAN_ID = A.TIEPNHAN_ID        where C.NGAYHENCLS is NULL and A.TIEPNHAN_ID = '27474' and A.BENHVIEN_ID = 'HLU01'        ) a where a.num = 1]
2019-08-15 15:42:36,217 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190815.0000001']
2019-08-15 15:42:36,291 [1] DEBUG - Statement Id: [DAOWF001_Kiemtrathongtindayeucaudacochua] PreparedStatement : [select * from TT_REQUEST        where        PARA = '{"HOSPITAL_ID":"HLU01","SOTIEPNHAN":"TN190815.0000001"}'        AND ISACTIVE = '1']
2019-08-15 15:42:36,341 [1] DEBUG - Statement Id: [DAOWF001_Kiemtrathongtindichvudayeucau] PreparedStatement : [select top 1 * from TT_REQUEST_SERVICE        where        PARA = '{"DICHVU_ID":"5436","DVYEUCAU_ID":"205416"}'                AND ISACTIVE = '1' order by ID desc]
2019-08-15 15:42:36,437 [1] DEBUG - Statement Id: [DAOWF001_KiemtrathongtinchitietDichvuYeucau] PreparedStatement : [select * from TT_REQUEST_SERVICE_DETAIL        where        REQUEST_SERVICE_ID = '']
2019-08-15 15:42:36,501 [1] DEBUG - Statement Id: [DAOWF001_GetStartStateOfProcess] PreparedStatement : [select STATE_CODE from TM_STATE where TYPE_CODE = 'S' and PROCESS_CODE = 'P02']
2019-08-15 15:42:36,535 [1] DEBUG - Statement Id: [DAOWF001_Laythongtinwithstatecode] PreparedStatement : [select A.*, B.STATUS_CODE from        TM_STATE_ACTION A        left join TM_STATE B on B.STATE_CODE = A.NEXT_STATE_CODE and A.PROCESS_CODE = B.PROCESS_CODE        where        A.CURR_STATE_CODE = '7'        AND A.PROCESS_CODE = 'P02'        Order By ORDER_ID ASC]
2019-08-15 15:42:36,576 [1] DEBUG - Statement Id: [DAOWF003_Add] PreparedStatement : [insert into TT_REQUEST_SERVICE (        REQUEST_ID        , PARA        , CURR_STATE_CODE        , PROCESS_CODE        ) values (         @param0         ,  @param1         ,  @param2         ,  @param3         )        SELECT SCOPE_IDENTITY()]
2019-08-15 15:42:36,576 [1] DEBUG - Statement Id: [DAOWF003_Add] Parameters: [@param0=[REQUEST_ID,31775], @param1=[SERVICEPARA,{"DICHVU_ID":"5436","DVYEUCAU_ID":"205416"}], @param2=[CURR_STATE_CODE,0], @param3=[PROCESS_CODE,P02]]
2019-08-15 15:42:36,576 [1] DEBUG - Statement Id: [DAOWF003_Add] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String]]
2019-08-15 15:42:36,614 [1] DEBUG - Statement Id: [DAOWF005_Add] PreparedStatement : [insert into TT_REQUEST_SERVICE_DETAIL (        REQUEST_ID        ,REQUEST_SERVICE_ID        , OLD_STATE_CODE        , CURR_STATE_CODE        ) values (         @param0         , @param1         ,  @param2         ,  @param3         )        SELECT SCOPE_IDENTITY()]
2019-08-15 15:42:36,614 [1] DEBUG - Statement Id: [DAOWF005_Add] Parameters: [@param0=[REQUEST_ID,31775], @param1=[REQUEST_SERVICE_ID,147384], @param2=[OLD_STATE_CODE,null], @param3=[CURR_STATE_CODE,0]]
2019-08-15 15:42:36,614 [1] DEBUG - Statement Id: [DAOWF005_Add] Types: [@param0=[String, System.String], @param1=[Int64, System.Int64], @param2=[System.DBNull, null], @param3=[String, System.String]]
2019-08-15 15:42:36,643 [1] DEBUG - Statement Id: [DAOWF005_Add_History] PreparedStatement : [insert into TT_REQUEST_SERVICE_HISTORY (        REQUEST_ID        ,REQUEST_SERVICE_ID        , OLD_STATE_CODE        , CURR_STATE_CODE        ) values (         @param0         , @param1         ,  @param2         ,  @param3         )]
2019-08-15 15:42:36,643 [1] DEBUG - Statement Id: [DAOWF005_Add_History] Parameters: [@param0=[REQUEST_ID,31775], @param1=[REQUEST_SERVICE_ID,147384], @param2=[OLD_STATE_CODE,null], @param3=[CURR_STATE_CODE,0]]
2019-08-15 15:42:36,643 [1] DEBUG - Statement Id: [DAOWF005_Add_History] Types: [@param0=[String, System.String], @param1=[Int64, System.Int64], @param2=[System.DBNull, null], @param3=[String, System.String]]
2019-08-15 15:42:36,994 [1] DEBUG - Statement Id: [DAO00009_TT_DVYEUCAU_Update] PreparedStatement : [Update TT_DVYEUCAU set TRANGTHAI_WFL = 'CHUAKETQUA' where DVYEUCAU_ID = '205416']
2019-08-15 15:42:37,026 [1] DEBUG - Statement Id: [DAO00026_GetListDanhSachDichVuGhiNhanVTYT_COM25_WithTN] PreparedStatement : [select distinct CONVERT(VARCHAR(11),C.NGAYYEUCAU,103) as NGAYYEUCAU, C.DICHVU_ID, C.DVYEUCAU_ID, D.TENDICHVU, C.NOITHUCHIEN_ID, A.SOTIEPNHAN, A.TRAITUYEN, A.NGAYMIENDONGCHITRA, A.TIEPNHAN_ID, A.DOITUONG_ID, A.TRANGTHAI,            A.LOAITHANHVIEN_ID, A.SUDUNG_BHTN, A.THE_ID, A.THANHVIEN_ID, A.VIP, A.NGUON_BENHNHAN_ID, A.BAOLANH_VIENPHI,            CASE WHEN (A.TRANGTHAI = 'NOITRU' OR A.TRANGTHAI = 'CAPCUU') THEN 'IN' ELSE 'OUT' END AS LOAIBENHAN,            CASE WHEN (C.TRANGTHAI = 'CHUAKETQUA') THEN 'CHUAKETQUA' ELSE 'HOANTAT' END AS TRANGTHAIDICHVU,            B.*, isnull(ntba.SOBENHAN, '') SOBENHAN, isnull(ntba.BENHAN_ID, 0) BENHAN_ID,            CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END AS MANHOMDICHVU            from TT_TIEPNHAN A            inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.ACTIVE = '1'            inner join TT_DVYEUCAU C on C.TIEPNHAN_ID = A.TIEPNHAN_ID                        left join TM_DICHVU D on D.DICHVU_ID = C.DICHVU_ID            left join TM_NHOMDICHVU E on E.NHOMDICHVU_ID = D.NHOMDICHVU_ID            left join TT_NOITRU_BENHAN ntba on ntba.BENHAN_ID = C.BENHAN_ID              where            C.NGAYHENCLS is NULL and A.BENHVIEN_ID = 'HLU01'            and (A.TRANGTHAI = 'DATIEPNHAN' or A.TRANGTHAI = 'NOITRU' or A.TRANGTHAI = 'CAPCUU' or A.TRANGTHAI = 'NGOAITRU')            and (CASE WHEN Left(E.MANHOMDICHVU,2) = '03' THEN '02' ELSE Left(E.MANHOMDICHVU,2) END in ('02', '04'))            and A.TIEPNHAN_ID = '27474']
2019-08-15 15:42:37,463 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27474']
2019-08-15 15:42:37,514 [1] DEBUG - Statement Id: [DAO00064_GetTopTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select top 1 stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27474' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'              order by SOBHYT_HUONG_ID desc]
2019-08-15 15:42:37,568 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '4']
2019-08-15 15:42:37,610 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27474)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 15:42:37,678 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 15:42:37,753 [1] DEBUG - Statement Id: [DAO00023_Add] PreparedStatement : [insert into TT_VIENPHI (        TIEPNHAN_ID        , BENHAN_ID         ,           BENHNHAN_ID         ,           DOTDIEUTRI_ID                 , KHAMBENH_ID        , REF_ID        , REF_TABLE        , DICHVU_ID        , DUOC_ID        , LOAI_CHIPHI        , LOAIGIA_ID        , SOLUONG        , DONGIA_DOANHTHU        , THANHTIEN_DOANHTHU        , BHYT_TL        , BHYT_DONGIA        , BHYT_THANHTIEN        , BHYT_DONGIA_CHITRA        , BHYT_THANHTIEN_CHITRA        , BENHNHAN_PHAITHANHTOAN        , GIATRI_HOADON        , GIATRI_HOADON_DATHANHTOAN        , GIATRI_BIENLAI        , GIATRI_BIENLAI_DATHANHTOAN        , GIATRI_BENHNHAN_DATHANHTOAN        , GIATRI_THATTHU        , MIENGIAM_TL        , MIENGIAM_GIATRI        , NGANSACH_TL        , NGANSACH_GIATRI        , TAITRO_TL        , TAITRO_GIATRI        , BHTN_TL        , BHTN_DONGIA        , BHTN_THANHTIEN        , BHTN_DONGIA_CHITRA        , BHTN_THANHTIEN_CHITRA         ,           DUOCPHEPTHUCHIEN         ,           HUY         ,           DATHANHTOAN         ,           DATHUCHIEN         ,           KHONGTHUTIEN         ,           BHYTDONGTIEN                 , DUYET        , HOADON_ID         ,           ACTIVE         ,           TYLE_VAT         ,           GIAVON         ,           BANGGIA_ID                 , BENHVIEN_ID        , NGUOITAO_ID        , NGAYTAO        , NGUOICAPNHAT_ID        , NGAYCAPNHAT        , DONGIA_BHYT_BANDAU        , DONGIADOANHTHU_BANDAU         ,           YEUCAUVP         ,           DOITUONG_HUONG_ID         ,           SOBHYT_HUONG_ID         ,           DICHVU_TL                 ) values (         @param0         ,  @param1          ,            @param2          ,            @param3                  ,  @param4         ,  @param5         ,  @param6         ,  @param7         ,  @param8         ,  @param9         ,  @param10         ,  @param11         ,  @param12         ,  @param13         ,  @param14         ,  @param15         ,  @param16         ,  @param17         ,  @param18         ,  @param19         ,  @param20         ,  @param21         ,  @param22         ,  @param23         ,  @param24         ,  @param25         ,  @param26         ,  @param27         ,  @param28         ,  @param29         ,  @param30         ,  @param31         ,  @param32         ,  @param33         ,  @param34         ,  @param35         ,  @param36          ,            @param37          ,            @param38          ,            @param39          ,            @param40          ,            @param41          ,            @param42                  ,  @param43         ,  @param44          ,            @param45          ,            @param46          ,            @param47          ,            @param48                  ,  @param49         ,  @param50         ,  @param51         ,  @param52         ,  @param53         ,  @param54         ,  @param55          ,            @param56          ,            @param57          ,            @param58          ,            @param59                  )        SELECT SCOPE_IDENTITY()]
2019-08-15 15:42:37,754 [1] DEBUG - Statement Id: [DAO00023_Add] Parameters: [@param0=[TIEPNHAN_ID,27474], @param1=[BENHAN_ID,null], @param2=[BENHNHAN_ID,23419], @param3=[DOTDIEUTRI_ID,0], @param4=[KHAMBENH_ID,null], @param5=[REF_ID,205416], @param6=[REF_TABLE,TT_DVYEUCAU], @param7=[DICHVU_ID,5436], @param8=[DUOC_ID,null], @param9=[LOAI_CHIPHI,TT], @param10=[LOAIGIA_ID,2], @param11=[SOLUONG,1], @param12=[DONGIA_DOANHTHU,33000], @param13=[THANHTIEN_DOANHTHU,33000], @param14=[BHYT_TL,0.48000000], @param15=[BHYT_DONGIA,33000], @param16=[BHYT_THANHTIEN,33000], @param17=[BHYT_DONGIA_CHITRA,15840.00], @param18=[BHYT_THANHTIEN_CHITRA,15840.00], @param19=[BENHNHAN_PHAITHANHTOAN,17160.00], @param20=[GIATRI_HOADON,17160.00], @param21=[GIATRI_HOADON_DATHANHTOAN,0], @param22=[GIATRI_BIENLAI,0], @param23=[GIATRI_BIENLAI_DATHANHTOAN,0], @param24=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param25=[GIATRI_THATTHU,0], @param26=[MIENGIAM_TL,0], @param27=[MIENGIAM_GIATRI,0], @param28=[NGANSACH_TL,0], @param29=[NGANSACH_GIATRI,0], @param30=[TAITRO_TL,0], @param31=[TAITRO_GIATRI,0], @param32=[BHTN_TL,0], @param33=[BHTN_DONGIA,0], @param34=[BHTN_THANHTIEN,0], @param35=[BHTN_DONGIA_CHITRA,0], @param36=[BHTN_THANHTIEN_CHITRA,0], @param37=[DUOCPHEPTHUCHIEN,0], @param38=[HUY,0], @param39=[DATHANHTOAN,0], @param40=[DATHUCHIEN,0], @param41=[KHONGTHUTIEN,0], @param42=[BHYTDONGTIEN,0], @param43=[DUYET,null], @param44=[HOADON_ID,null], @param45=[ACTIVE,1], @param46=[TYLE_VAT,0], @param47=[GIAVON,0], @param48=[BANGGIA_ID,996], @param49=[BENHVIEN_ID,HLU01], @param50=[NGUOITAO_ID,1], @param51=[NGAYTAO,8/15/2019 3:42:37 PM], @param52=[NGUOICAPNHAT_ID,1], @param53=[NGAYCAPNHAT,8/15/2019 3:42:37 PM], @param54=[DONGIA_BHYT_BANDAU,33000], @param55=[DONGIADOANHTHU_BANDAU,33000], @param56=[YEUCAUVP,0], @param57=[DOITUONG_HUONG_ID,4], @param58=[SOBHYT_HUONG_ID,28497], @param59=[DICHVU_TL,1]]
2019-08-15 15:42:37,754 [1] DEBUG - Statement Id: [DAO00023_Add] Types: [@param0=[Int32, System.Int32], @param1=[System.DBNull, null], @param2=[Int32, System.Int32], @param3=[Int32, System.Int32], @param4=[System.DBNull, null], @param5=[Int32, System.Int32], @param6=[String, System.String], @param7=[Int32, System.Int32], @param8=[System.DBNull, null], @param9=[String, System.String], @param10=[Int32, System.Int32], @param11=[Decimal, System.Decimal], @param12=[Decimal, System.Decimal], @param13=[Decimal, System.Decimal], @param14=[Decimal, System.Decimal], @param15=[Decimal, System.Decimal], @param16=[Decimal, System.Decimal], @param17=[Decimal, System.Decimal], @param18=[Decimal, System.Decimal], @param19=[Decimal, System.Decimal], @param20=[Decimal, System.Decimal], @param21=[Decimal, System.Decimal], @param22=[Decimal, System.Decimal], @param23=[Decimal, System.Decimal], @param24=[Decimal, System.Decimal], @param25=[Decimal, System.Decimal], @param26=[Decimal, System.Decimal], @param27=[Decimal, System.Decimal], @param28=[Decimal, System.Decimal], @param29=[Decimal, System.Decimal], @param30=[Decimal, System.Decimal], @param31=[Decimal, System.Decimal], @param32=[Decimal, System.Decimal], @param33=[Decimal, System.Decimal], @param34=[Decimal, System.Decimal], @param35=[Decimal, System.Decimal], @param36=[Decimal, System.Decimal], @param37=[Int32, System.Int32], @param38=[Int32, System.Int32], @param39=[Int32, System.Int32], @param40=[Int32, System.Int32], @param41=[String, System.String], @param42=[String, System.String], @param43=[System.DBNull, null], @param44=[System.DBNull, null], @param45=[Int32, System.Int32], @param46=[Int32, System.Int32], @param47=[Decimal, System.Decimal], @param48=[Int32, System.Int32], @param49=[String, System.String], @param50=[String, System.String], @param51=[DateTime, System.DateTime], @param52=[String, System.String], @param53=[DateTime, System.DateTime], @param54=[Decimal, System.Decimal], @param55=[Decimal, System.Decimal], @param56=[String, System.String], @param57=[Int32, System.Int32], @param58=[Int32, System.Int32], @param59=[Decimal, System.Decimal]]
2019-08-15 15:42:38,188 [1] DEBUG - Statement Id: [DAO00064_GetREGListVienphiTiepNhan] PreparedStatement : [select A.*, B.THUTIENSAU        from TT_VIENPHI A        left join TT_DVYEUCAU B on A.REF_ID =  B.DVYEUCAU_ID and A.REF_TABLE = 'TT_DVYEUCAU' and B.HUYYEUCAU = '0'        where        A.TIEPNHAN_ID = '27474' and A.BENHVIEN_ID = 'HLU01' and (A.BENHAN_ID is NULL or A.BENHAN_ID = '')        and A.HUY = '0'        ORDER BY A.VIENPHI_ID]
2019-08-15 15:42:38,242 [1] DEBUG - Statement Id: [DAO00064_GetTopTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select top 1 stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27474' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'              order by SOBHYT_HUONG_ID desc]
2019-08-15 15:42:38,276 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '4']
2019-08-15 15:42:38,303 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27474)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 15:42:38,336 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 15:42:38,375 [1] DEBUG - Statement Id: [DAO00023_Update_VPTiepnhan] PreparedStatement : [update TT_VIENPHI set        TIEPNHAN_ID =  @param0                ,           BENHNHAN_ID =  @param1          ,           REF_ID =  @param2                  , REF_TABLE =  @param3         , DICHVU_ID =  @param4         , DUOC_ID =  @param5         , LOAI_CHIPHI =  @param6         , LOAIGIA_ID =  @param7         , SOLUONG =  @param8         , DONGIA_DOANHTHU =  @param9         , THANHTIEN_DOANHTHU =  @param10         , BHYT_TL =  @param11         , BHYT_DONGIA =  @param12         , BHYT_THANHTIEN =  @param13         , BHYT_DONGIA_CHITRA =  @param14         , BHYT_THANHTIEN_CHITRA =  @param15         , BENHNHAN_PHAITHANHTOAN =  @param16         , GIATRI_HOADON =  @param17         , GIATRI_HOADON_DATHANHTOAN =  @param18         , GIATRI_BIENLAI =  @param19         , GIATRI_BIENLAI_DATHANHTOAN =  @param20         , GIATRI_BENHNHAN_DATHANHTOAN =  @param21         , GIATRI_THATTHU =  @param22         , MIENGIAM_TL =  @param23         , NGANSACH_TL =  @param24         , NGANSACH_GIATRI =  @param25         , TAITRO_TL =  @param26         , TAITRO_GIATRI =  @param27         , BHTN_TL =  @param28         , BHTN_DONGIA =  @param29         , BHTN_THANHTIEN =  @param30         , BHTN_DONGIA_CHITRA =  @param31         , BHTN_THANHTIEN_CHITRA =  @param32          ,           TYLE_VAT =  @param33          ,           GIAVON =  @param34          ,           BANGGIA_ID =  @param35          ,           BHYTDONGTIEN =  @param36          ,           BHYT_DONGIA_CONGKHAM_DAU =  @param37          ,           BHYT_CONGKHAM_DAU_TYLE =  @param38                  , BENHVIEN_ID =  @param39         , NGUOICAPNHAT_ID =  @param40         , NGAYCAPNHAT =  @param41          ,           YEUCAUVP =  @param42                        where                    VIENPHI_ID = '674700']
2019-08-15 15:42:38,375 [1] DEBUG - Statement Id: [DAO00023_Update_VPTiepnhan] Parameters: [@param0=[TIEPNHAN_ID,27474], @param1=[BENHNHAN_ID,23419], @param2=[REF_ID,205416], @param3=[REF_TABLE,TT_DVYEUCAU], @param4=[DICHVU_ID,5436], @param5=[DUOC_ID,null], @param6=[LOAI_CHIPHI,TT], @param7=[LOAIGIA_ID,2], @param8=[SOLUONG,1.0000], @param9=[DONGIA_DOANHTHU,33000.0000], @param10=[THANHTIEN_DOANHTHU,33000.00], @param11=[BHYT_TL,0.48000000], @param12=[BHYT_DONGIA,33000.0000], @param13=[BHYT_THANHTIEN,33000.00], @param14=[BHYT_DONGIA_CHITRA,15840], @param15=[BHYT_THANHTIEN_CHITRA,15840.00], @param16=[BENHNHAN_PHAITHANHTOAN,17160.00], @param17=[GIATRI_HOADON,17160.00], @param18=[GIATRI_HOADON_DATHANHTOAN,0], @param19=[GIATRI_BIENLAI,0], @param20=[GIATRI_BIENLAI_DATHANHTOAN,0], @param21=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param22=[GIATRI_THATTHU,0], @param23=[MIENGIAM_TL,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[TYLE_VAT,0], @param34=[GIAVON,0.0000], @param35=[BANGGIA_ID,996], @param36=[BHYTDONGTIEN,0], @param37=[BHYT_DONGIA_CONGKHAM_DAU,33000.0000], @param38=[BHYT_CONGKHAM_DAU_TYLE,1], @param39=[BENHVIEN_ID,HLU01], @param40=[NGUOICAPNHAT_ID,1], @param41=[NGAYCAPNHAT,8/15/2019 3:42:38 PM], @param42=[YEUCAUVP,0]]
2019-08-15 15:42:38,375 [1] DEBUG - Statement Id: [DAO00023_Update_VPTiepnhan] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[Int32, System.Int32], @param5=[System.DBNull, null], @param6=[String, System.String], @param7=[Int32, System.Int32], @param8=[Decimal, System.Decimal], @param9=[Decimal, System.Decimal], @param10=[Decimal, System.Decimal], @param11=[Decimal, System.Decimal], @param12=[Decimal, System.Decimal], @param13=[Decimal, System.Decimal], @param14=[Decimal, System.Decimal], @param15=[Decimal, System.Decimal], @param16=[Decimal, System.Decimal], @param17=[Decimal, System.Decimal], @param18=[Decimal, System.Decimal], @param19=[Decimal, System.Decimal], @param20=[Decimal, System.Decimal], @param21=[Decimal, System.Decimal], @param22=[Decimal, System.Decimal], @param23=[Decimal, System.Decimal], @param24=[Decimal, System.Decimal], @param25=[Decimal, System.Decimal], @param26=[Decimal, System.Decimal], @param27=[Decimal, System.Decimal], @param28=[Decimal, System.Decimal], @param29=[Decimal, System.Decimal], @param30=[Decimal, System.Decimal], @param31=[Decimal, System.Decimal], @param32=[Decimal, System.Decimal], @param33=[Int32, System.Int32], @param34=[Decimal, System.Decimal], @param35=[Int32, System.Int32], @param36=[String, System.String], @param37=[Decimal, System.Decimal], @param38=[Decimal, System.Decimal], @param39=[String, System.String], @param40=[Int32, System.Int32], @param41=[DateTime, System.DateTime], @param42=[String, System.String]]
2019-08-15 15:42:38,496 [1] DEBUG - Statement Id: [DAO00019_GetDetails_TiepNhan] PreparedStatement : [select tn.TIEPNHAN_ID, tn.SOTIEPNHAN, tn.SOBHYT as SOTHE, tn.BHYTTUNGAY as NGAYHIEULUC,        tn.BHYTDENNGAY as NGAYHETHIEULUC, tn.BHYTNGAYCAP as NGAYCAP, tn.BHYTTREN3NAM as TREN3NAM, tn.KHUVUCSONG_ID,        tn.BHYTTREN5NAM as TREN5NAM,tn.NGAYMIENDONGCHITRA,tn.NOIGIOITHIEU_ID, tn.NGUOIGIOITHIEU_ID, tn.CHANDOANNGT,        tn.NOITIEPNHAN_ID, tn.DOITUONG_ID, tn.TRAITUYEN, tn.HINHTHUCDENKHAM_ID, tn.THOIGIANTIEPNHAN,        dv.DVYEUCAU_ID, dv.DICHVU_ID, dv.NOITHUCHIEN_ID as PHONGBAN_ID,        dv.NGUOITAO_ID as DV_NGUOITAO_ID, dv.NGAYTAO as DV_NGAYTAO, dv.THUTIENSAU, dv.BACSICHIDINH_ID, dv.NGUOICHIDINH_ID,        dv.NGUOICAPNHAT_ID as DV_NGUOICAPNHAT_ID, dv.NGAYCAPNHAT as DV_NGAYCAPNHAT,        vp.VIENPHI_ID, vp.KHONGTHUTIEN, vp.LOAI_CHIPHI, vp.LOAIGIA_ID as LOAIGIA,        vp.DATHUCHIEN, vp.DATHANHTOAN, vp.DONGIA_DOANHTHU,        dv.NOITHUCHIEN_ID, dv.TRANGTHAI,        vp.NGUOITAO_ID as VP_NGUOITAO_ID, vp.BHYT_DONGIA, vp.TYLE_VAT, vp.BANGGIA_ID, vp.GIAVON,        tn.NGAYTAO as TN_NGAYTAO,        vp.NGAYTAO as VP_NGAYTAO, vp.NGUOICAPNHAT_ID as VP_NGUOICAPNHAT_ID, vp.NGAYCAPNHAT as VP_NGAYCAPNHAT,        tn.SOCHUYENVIEN, tn.THOIGIANCHUYENTUYEN, tn.HINHTHUCCHUYENVIEN_ID, tn.LYDOCHUYENVIEN_ID, tn.ICDNOIGIOITHIEU_ID,        tn.SUDUNG_BHTN, tn.THE_ID, tn.LOAITHANHVIEN_ID, tn.THANHVIEN_ID, tn.VIP, tn.GHICHU_TIEPNHAN, tn.BAOLANH_VIENPHI        , tn.CONGTY_CHITRA_ID, tn.TRANGTHAI as TRANGTHAI_TIEPNHAN, tn.NGUOITAO_ID as TN_NGUOITAO_ID, tn.TINHTRANGHEN        , tn.NGUON_BENHNHAN_ID, tn.THONGTIN_KCB_BHYT, tn.LOAITIEPNHAN_ID, tn.LYDODENKHAM, vp.YEUCAUVP        from (        select top 1 *        from TT_TIEPNHAN        where BENHVIEN_ID = 'HLU01'                 order by                 SOTIEPNHAN desc        ) as tn        left join TT_DVYEUCAU dv on dv.TIEPNHAN_ID = tn.TIEPNHAN_ID and dv.HUYYEUCAU = '0'        left join TT_VIENPHI vp on vp.TIEPNHAN_ID = tn.TIEPNHAN_ID and vp.DICHVU_ID = dv.DICHVU_ID  and dv.DVYEUCAU_ID = vp.REF_ID]
2019-08-15 15:42:38,845 [1] DEBUG - Statement Id: [DAO00056_GetList] PreparedStatement : [select * from TM_LOAIGIA where BENHVIEN_ID = 'HLU01']
2019-08-15 15:43:48,469 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'ADM05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:43:49,790 [1] DEBUG - Statement Id: [DAO00205_GetAllWithoutDeactive] PreparedStatement : [SELECT DISTINCT C.CATEGORY_ID AS CATEGORY_ID            , ISNULL(C.PARENT_ID,0) AS PARENT_ID            , C.CATEGORY_CODE AS CATEGORY_CODE            , C.CATEGORY_NAME AS CATEGORY_NAME            , C.FOLDER_LEVEL            , C.IS_FOLDER            , C.FOLDER_CODE            , CASE WHEN (C.FOLDER_CODE IS NULL OR C.FOLDER_CODE = 'ROOT' OR C.FOLDER_CODE = '' )            THEN NULL ELSE C.FOLDER_CODE END AS PARENT_CODE            , C.CATEGORY_TYPE            FROM TM_CATEGORY AS C            WHERE C.ENABLED = '1'            AND C.BENHVIEN_ID = 'HLU01' AND C.CATEGORY_ID != 0            ORDER BY C.CATEGORY_ID]
2019-08-15 15:58:17,294 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '61'        and A.BENHVIEN_ID = 'HLU01']
2019-08-15 15:58:25,551 [1] DEBUG - Statement Id: [DAO00020_ListKhoDuocOfPhongBan] PreparedStatement : [select B.* from TM_PHONGBAN_KHODUOC A        inner join TM_KHODUOC B on B.KHODUOC_ID = A.KHODUOC_ID        where        A.PHONGBAN_ID = '18'        and A.BENHVIEN_ID = 'HLU01']
2019-08-15 15:58:25,677 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] PreparedStatement : [IF EXISTS            (SELECT ACCOUNT_ID FROM TM_SYS_USERS WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1 )            BEGIN            update TM_SYS_USERS set INVENTORY_ID =  @param2 , WORKING_DEPT_ID =  @param3             WHERE ACCOUNT_ID =  @param0  and HOSPITAL_ID =  @param1             END            ELSE            BEGIN            insert into TM_SYS_USERS ([ACCOUNT_ID], [ACCOUNT_NAME], [INVENTORY_ID], [WORKING_DEPT_ID], [HOSPITAL_ID])            values ( @param0 ,  @param4 ,  @param2 ,  @param3 ,  @param1 )            END]
2019-08-15 15:58:25,677 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Parameters: [@param0=[ACCOUNT_ID,113], @param1=[HOSPITAL_ID,HLU01], @param2=[INVENTORY_ID,30], @param3=[WORKING_DEPT_ID,18], @param4=[ACCOUNT_NAME,admin]]
2019-08-15 15:58:25,677 [1] DEBUG - Statement Id: [DAO00008_UpdateUserIdPhongBanKhoDuoc] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
2019-08-15 15:58:29,694 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:58:30,045 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD40'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:58:30,220 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 15:58:30,494 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 15:58:31,290 [1] DEBUG - Statement Id: [DAO00069_GetCountDanhSachNoiTru] PreparedStatement : [select count(A.SOBENHAN) as TOTALROWS        from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by BENHAN_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')]
2019-08-15 15:58:31,412 [1] DEBUG - Statement Id: [DAO00069_GetDanhSachNoiTru] PreparedStatement : [select * from        (        SELECT ROW_NUMBER() OVER(order by B.SOTIEPNHAN) as ROWNUMBER,          A.SOBENHAN, A.BENHAN_ID, A.SOLUUTRU                 , E.NOILAP_ID as KHOAVAO_ID        , A.TRANGTHAI, IsNull(A.BACSIDIEUTRI_ID, E.BACSICHIDINH_ID) as BACSIDIEUTRI_ID,        B.TIEPNHAN_ID, B.SOTIEPNHAN, B.SOBHYT as SOTHE, B.DOITUONG_ID, A.NGAYVAOKHOA as NGAYCAPCUU, A.THOIGIANVAOKHOA as THOIGIANCAPCUU,        C.TENBENHNHAN, C.NGAYSINH, C.NAMSINH, C.BENHNHAN_ID, C.MAYTE, F.GIUONGBENH_ID, A.THOIGIANRAVIEN    , DIACHITHUONGTRU, DANTOC_ID        ,BENHVIEN_STT_ID                from TT_NOITRU_BENHAN A        inner join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID and (B.TRANGTHAI = 'NOITRU' or B.TRANGTHAI = 'HOANTHANH')        inner join TT_BENHNHAN C on C.BENHNHAN_ID = B.BENHNHAN_ID        left join TT_NOITRU_LUUTRU D on D.BENHAN_ID = A.BENHAN_ID        and D.LUUTRU_ID = ( select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = A.BENHAN_ID order by LUUTRU_ID desc)        left join TT_NOITRU_XACNHAN E on E.BENHAN_ID = A.BENHAN_ID        left join TT_NOITRU_LUUTRUCHITIET F on D.LUUTRU_ID = F.LUUTRU_ID and F.LUUTRUCHITIET_CURRENT = '1'        and F.LUUTRUCHITIET_ID in (select top 1 LUUTRUCHITIET_ID from TT_NOITRU_LUUTRUCHITIET where LUUTRU_ID = D.LUUTRU_ID order by LUUTRUCHITIET_ID desc)        left join (select MABENHVIEN, BENHVIEN_STT_ID from TM_BENHVIEN) H on SUBSTRING(B.SOBHYT, 16, 5)=H.MABENHVIEN        where        A.KHOACHUYENDEN_ID is not null  and        (E.TRANGTHAI = 'DAXACNHAN' OR E.TRANGTHAI = 'HUYXACNHAN')         and           cast(A.NGAYVAOKHOA as date) <= cast('8/15/2019 12:00:00 AM' as date)                 and B.BENHVIEN_ID = 'HLU01' and A.KHOACHUYENDEN_ID = '18'          AND             A.TRANGTHAI in ('DANGDIEUTRI')                   ) lst        where        lst.ROWNUMBER between 1 and 20        order by lst.SOTIEPNHAN]
2019-08-15 15:58:33,290 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:58:33,467 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:58:34,918 [1] DEBUG - Statement Id: [DAO00080_KiemtraBenhAnDaThanhToan] PreparedStatement : [select DAXACNHANDOANHTHU        from TT_NOITRU_BENHAN where        BENHAN_ID = '179'        and BENHVIEN_ID = 'HLU01'        Order By BENHAN_ID Desc]
2019-08-15 15:58:35,008 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '179']
2019-08-15 15:58:35,124 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '179'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 15:58:35,187 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 15:58:35,187 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,179]]
2019-08-15 15:58:35,187 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 15:58:35,312 [1] DEBUG - Statement Id: [DAO00013_GetDetailP] PreparedStatement : [select *              from TT_BENHNHAN               WHERE                        TT_BENHNHAN.MAYTE  = '190020995']
2019-08-15 15:58:35,411 [1] DEBUG - Statement Id: [DAO00061_GetBenhAnDetailByID] PreparedStatement : [select A.*, B.NOIGIOITHIEU_ID, C.KHOADIEUTRI_ID, A.ICD_BENHCHINH AS ICD_BENHCHINH_BAK, A.CDRAVIEN_CHINH AS CHANDOANRAVIEN1, B.THOIGIANTIEPNHAN        , A.CDRAVIEN_CHINH AS CHANDOANRAVIEN_BAK        from TT_NOITRU_BENHAN A        left join TT_TIEPNHAN B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join TT_NOITRU_NHAPVIEN C on C.TIEPNHAN_ID = B.TIEPNHAN_ID        where A.BENHAN_ID = '179']
2019-08-15 15:58:35,619 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruBenhAnChiTiet] PreparedStatement : [select *        from TT_NOITRU_BENHAN_CHITIET where        BENHAN_ID = '179'        and BENHVIEN_ID = 'HLU01'        Order By BENHANCHITIET_ID DESC]
2019-08-15 15:58:35,725 [1] DEBUG - Statement Id: [DAO00080_GetNoiTruLuuTruBenhAn] PreparedStatement : [select *        from TT_NOITRU_LUUTRU where        BENHAN_ID = '179'        and BENHVIEN_ID = 'HLU01'        Order By LUUTRU_ID ASC]
2019-08-15 15:58:35,758 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] PreparedStatement : [select *        from TT_NOITRU_GIUONGBENH where        BENHAN_ID =  @param0]
2019-08-15 15:58:35,758 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Parameters: [@param0=[BENHAN_ID,179]]
2019-08-15 15:58:35,758 [1] DEBUG - Statement Id: [DAO00080_GetGiuongBenhCuaBenhAn] Types: [@param0=[Int64, System.Int64]]
2019-08-15 15:58:35,866 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 15:58:35,867 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,179]]
2019-08-15 15:58:35,867 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 15:58:35,890 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 1029 and REF_ID = 0             and               BENHAN_ID = '179'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 1029 and SOLUONG = 0             and               BENHAN_ID = 179                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '1029' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '1029' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 15:58:35,890 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,1029], @param1=[BENHAN_ID,179]]
2019-08-15 15:58:35,890 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 15:58:37,200 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '1029' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '179']
2019-08-15 15:58:37,286 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '179'                 where B.TIEPNHAN_ID = '1029') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '1029')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '1029')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '1029')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '1029')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '1029' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '179'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 15:58:37,512 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 15:58:37,512 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,1029]]
2019-08-15 15:58:37,512 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 15:58:37,537 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '0']
2019-08-15 15:58:37,564 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 1029)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 15:58:37,616 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 15:58:37,742 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":10422,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":80000.0000,"THANHTIEN_DOANHTHU":80000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":80000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":80000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":80000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":10423,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":50000.0000,"THANHTIEN_DOANHTHU":50000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":50000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":50000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":50000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":10424,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":40000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":40000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":40000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":10467,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":10468,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":10469,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":1000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":10892,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1000000.0000,"THANHTIEN_DOANHTHU":1000000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1000000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1000000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13304,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":9000.0000,"THANHTIEN_DOANHTHU":9000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":9000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":9000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13305,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13306,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13307,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":7000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13308,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":0.2000,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":5000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":5000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":5000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13309,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":1500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13310,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13311,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13312,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":140000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":140000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":140000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13313,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13314,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":45000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":45000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":45000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":13315,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15151,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15152,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":140000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":140000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":140000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15153,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15187,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15188,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":4.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":280000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":280000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":280000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15189,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15215,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":14000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":14000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":14000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15216,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15217,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15218,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15239,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":14000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":14000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":14000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15240,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15241,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15242,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15271,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15272,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":14000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":14000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":14000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15273,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":15274,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":20187,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":20188,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":4.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":280000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":280000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":280000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":20189,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28269,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":27000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":27000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28270,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28271,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":4.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":280000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":280000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":280000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28289,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":14000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":14000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":14000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28290,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28291,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039},{"VIENPHI_ID":28299,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0000,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":null,"SOBHYT_HUONG_ID":1039}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 15:58:37,885 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 15:58:37,885 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,1029]]
2019-08-15 15:58:37,885 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 15:58:37,914 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '4']
2019-08-15 15:58:37,938 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 1029)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 15:58:37,975 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 15:58:38,016 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":31988,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":4.0000,"DONGIA_DOANHTHU":152000.0000,"THANHTIEN_DOANHTHU":608000.00,"BHYT_TL":0.0,"BHYT_DONGIA":152000.0000,"BHYT_THANHTIEN":608000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":608000.00,"GIATRI_HOADON":608000.00,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HS438382442063138266","SOBHYT_HUONG_ID":2337},{"VIENPHI_ID":31989,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":4.0000,"DONGIA_DOANHTHU":20000.0000,"THANHTIEN_DOANHTHU":80000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":80000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":80000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HS438382442063138266","SOBHYT_HUONG_ID":2337},{"VIENPHI_ID":32238,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":2.0000,"DONGIA_DOANHTHU":53000.0000,"THANHTIEN_DOANHTHU":106000.00,"BHYT_TL":0.0,"BHYT_DONGIA":53000.0000,"BHYT_THANHTIEN":106000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":106000.00,"GIATRI_HOADON":106000.00,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HS438382442063138266","SOBHYT_HUONG_ID":2337},{"VIENPHI_ID":168391,"TIEPNHAN_ID":1029,"BENHAN_ID":179,"SOLUONG":1.0000,"DONGIA_DOANHTHU":32000.0000,"THANHTIEN_DOANHTHU":32000.00,"BHYT_TL":0.0,"BHYT_DONGIA":32000.0000,"BHYT_THANHTIEN":32000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":32000.00,"GIATRI_HOADON":32000.00,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HS438382442063138266","SOBHYT_HUONG_ID":2337}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 15:58:38,151 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 15:58:38,151 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,1029]]
2019-08-15 15:58:38,151 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 15:58:44,696 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD36'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 15:58:44,823 [1] DEBUG - Statement Id: [DAO00018_GetList] PreparedStatement : [select A.*, B.DICTIONARY_NAME, B.DICTIONARY_CODE, B.DICTIONARY_NAME_EN CHUCDANH, (B.DICTIONARY_NAME_EN + '. ' + A.TENNHANVIEN) TENHOCVIHOCHAM            from TM_NHANVIEN A            left join (select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE = 'chucdanh' and DICTIONARY_NAME_EN is not null) B on A.CHUCDANH_ID = B.DICTIONARY_ID            where A.BENHVIEN_ID = 'HLU01' and A.TAMNGUNG = '0']
2019-08-15 15:58:46,086 [1] DEBUG - Statement Id: [DAO00067_GetDanhsachInTodieutri] PreparedStatement : [select FORMAT( NGAYTAO, 'dd/MM/yyyy HH:mm', 'en-US' )  as NGAYIN_DIEUTRI, *          from TT_NOITRU_SOKET          where          BENHAN_ID = '179']
2019-08-15 15:58:46,603 [1] DEBUG - Statement Id: [DAO00067_GetDanhsachDichvuKhongKhambenh] PreparedStatement : [select B.TENDICHVU          from TT_DVYEUCAU A          left join TM_DICHVU B on A.DICHVU_ID = B.DICHVU_ID          left join TM_NHOMDICHVU C on C.NHOMDICHVU_ID = B.NHOMDICHVU_ID          where LEFT(C.MANHOMDICHVU,2) != '04' and A.HUYYEUCAU = '0'           and             A.BENHAN_ID = '179'           and             A.TIEPNHAN_ID = '1029']
2019-08-15 16:00:46,159 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MPI04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:00:46,627 [1] DEBUG - Statement Id: [DAO00095_GetDanhSachBenhNhan_Count] PreparedStatement : [select count(*) as TOTALROWS from TT_BENHNHAN              where BENHVIEN_ID = 'HLU01']
2019-08-15 16:00:47,083 [1] DEBUG - Statement Id: [DAO00095_GetDanhSachBenhNhan] PreparedStatement : [select *              from              (              select ROW_NUMBER() OVER(order by MAYTE) as ROWNUMBER, TT_BENHNHAN.*, B.DESCRIPTION as TENGIOITINH              from TT_BENHNHAN              left join TM_GENDER as B on TT_BENHNHAN.GIOITINH = B.ID              where TT_BENHNHAN.BENHVIEN_ID = 'HLU01'                             ) lst                                  where                  lst.ROWNUMBER between 1 and 20                             order by lst.MAYTE asc]
2019-08-15 16:00:54,815 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MPI03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:01:08,071 [1] DEBUG - Statement Id: [DAO00095_LayThongTinSearch] PreparedStatement : [select            B.MAYTE, A.SOTIEPNHAN, C.SOBENHAN, B.TENBENHNHAN, F.TENPHONGBAN as KHOADIEUTRI,            E.TENDOITUONG, A.SOBHYT, B.SODIENTHOAI, B.DIACHILIENLAC, G.MAGIUONG, B.NGUOILIENHE,            ISNULL(CONVERT(VARCHAR(10), B.NGAYSINH, 103),CAST(B.NAMSINH AS varchar)) as NGAYSINH,            A.THOIGIANTIEPNHAN, C.NGAYVAOVIEN, C.NGAYRAVIEN, A.TRANGTHAI, C.TRANGTHAI TRANGTHAI_NT, '' TRANGTHAI_TIEPNHAN, '' TRANGTHAI_BENHAN            from TT_TIEPNHAN A            inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.BENHVIEN_ID = 'HLU01'            left join TT_NOITRU_BENHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID            left join TT_NOITRU_LUUTRUCHITIET D            on D.LUUTRU_ID in (select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = C.BENHAN_ID order by LUUTRU_ID desc)            left join TM_DOITUONG E on E.DOITUONG_ID = A.DOITUONG_ID            left join TM_PHONGBAN F on F.PHONGBAN_ID = ISNULL(C.KHOACHUYENDEN_ID, C.KHOAVAO_ID)            left join TM_GIUONGBENH G on G.GIUONGBENH_ID = D.GIUONGBENH_ID            where            A.BENHVIEN_ID = 'HLU01' AND            (C.SOBENHAN like '%' +  @param0  + '%' or A.SOTIEPNHAN like '%' +  @param0  + '%'            or B.TENBENHNHAN like '%' +  @param0  + '%' or B.SODIENTHOAI like '%' +  @param0  + '%'            or B.DIACHILIENLAC like '%' +  @param0  + '%' or A.SOBHYT like '%' +  @param0  + '%'            or B.HO like '%' +  @param0  + '%' or B.TEN like '%' +  @param0  + '%' or B.MAYTE like '%' +  @param0  + '%')]
2019-08-15 16:01:08,071 [1] DEBUG - Statement Id: [DAO00095_LayThongTinSearch] Parameters: [@param0=[THONGTINTIMKIEM,huy]]
2019-08-15 16:01:08,071 [1] DEBUG - Statement Id: [DAO00095_LayThongTinSearch] Types: [@param0=[String, System.String]]
2019-08-15 16:11:56,542 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 16:11:56,698 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 16:11:56,735 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 16:11:56,873 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:11:56,954 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 16:12:01,527 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 16:12:01,582 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 16:12:03,052 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 16:12:03,159 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 16:12:03,839 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 16:12:03,960 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 16:12:04,040 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 16:12:04,126 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 16:12:04,203 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 16:12:04,273 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 16:12:04,374 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 16:12:04,464 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 16:12:04,560 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 16:12:05,356 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 16:12:05,394 [11] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 16:12:05,469 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 16:12:05,674 [11] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 16:12:07,243 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 16:12:07,294 [11] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 16:12:09,821 [11] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 16:12:09,889 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 16:12:09,923 [11] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 16:12:09,996 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 16:12:10,028 [11] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 16:12:10,112 [11] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 16:12:11,011 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:11,111 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 16:12:11,381 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 16:12:11,412 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 16:12:11,475 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:11,846 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:11,987 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 16:12:11,987 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 16:12:11,987 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 16:12:12,013 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 16:12:12,013 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 16:12:12,013 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 16:12:12,082 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:12,228 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:13,092 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:13,159 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 16:12:13,380 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 16:12:19,929 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MPI03'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:12:24,279 [1] DEBUG - Statement Id: [DAO00095_LayThongTinSearch] PreparedStatement : [select            B.MAYTE, A.SOTIEPNHAN, C.SOBENHAN, B.TENBENHNHAN, F.TENPHONGBAN as KHOADIEUTRI,            E.TENDOITUONG, A.SOBHYT, B.SODIENTHOAI, B.DIACHILIENLAC, G.MAGIUONG, B.NGUOILIENHE,            ISNULL(CONVERT(VARCHAR(10), B.NGAYSINH, 103),CAST(B.NAMSINH AS varchar)) as NGAYSINH,            A.THOIGIANTIEPNHAN, C.NGAYVAOVIEN, C.NGAYRAVIEN, A.TRANGTHAI, C.TRANGTHAI TRANGTHAI_NT, '' TRANGTHAI_TIEPNHAN, '' TRANGTHAI_BENHAN            from TT_TIEPNHAN A            inner join TT_BENHNHAN B on B.BENHNHAN_ID = A.BENHNHAN_ID and B.BENHVIEN_ID = 'HLU01'            left join TT_NOITRU_BENHAN C on C.TIEPNHAN_ID = A.TIEPNHAN_ID            left join TT_NOITRU_LUUTRUCHITIET D            on D.LUUTRU_ID in (select top 1 LUUTRU_ID from TT_NOITRU_LUUTRU where BENHAN_ID = C.BENHAN_ID order by LUUTRU_ID desc)            left join TM_DOITUONG E on E.DOITUONG_ID = A.DOITUONG_ID            left join TM_PHONGBAN F on F.PHONGBAN_ID = ISNULL(C.KHOACHUYENDEN_ID, C.KHOAVAO_ID)            left join TM_GIUONGBENH G on G.GIUONGBENH_ID = D.GIUONGBENH_ID            where            A.BENHVIEN_ID = 'HLU01' AND            (C.SOBENHAN like '%' +  @param0  + '%' or A.SOTIEPNHAN like '%' +  @param0  + '%'            or B.TENBENHNHAN like '%' +  @param0  + '%' or B.SODIENTHOAI like '%' +  @param0  + '%'            or B.DIACHILIENLAC like '%' +  @param0  + '%' or A.SOBHYT like '%' +  @param0  + '%'            or B.HO like '%' +  @param0  + '%' or B.TEN like '%' +  @param0  + '%' or B.MAYTE like '%' +  @param0  + '%')]
2019-08-15 16:12:24,279 [1] DEBUG - Statement Id: [DAO00095_LayThongTinSearch] Parameters: [@param0=[THONGTINTIMKIEM,huy]]
2019-08-15 16:12:24,279 [1] DEBUG - Statement Id: [DAO00095_LayThongTinSearch] Types: [@param0=[String, System.String]]
--------------------------------------------------------------------------------
2019-08-15 16:35:45,699 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 16:35:46,162 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 16:35:46,203 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 16:35:46,705 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:35:47,607 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 16:35:54,334 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 16:35:54,360 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 16:35:56,059 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 16:35:56,200 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 16:35:56,997 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 16:35:57,140 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 16:35:57,209 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 16:35:57,291 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 16:35:57,379 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 16:35:57,468 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 16:35:57,543 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 16:35:57,618 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 16:35:57,690 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 16:35:58,212 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 16:35:58,247 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 16:35:58,332 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 16:35:58,372 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 16:36:00,117 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 16:36:00,167 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 16:36:02,378 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 16:36:02,443 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 16:36:02,478 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 16:36:02,552 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 16:36:02,582 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 16:36:02,648 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 16:36:03,582 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:36:04,765 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 16:36:10,155 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 16:36:10,182 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 16:36:10,272 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:36:10,384 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:36:10,529 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 16:36:10,530 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 16:36:10,530 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 16:36:10,557 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 16:36:10,557 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 16:36:10,557 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 16:36:10,707 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:36:10,862 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:36:19,645 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:36:19,835 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 16:36:20,371 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 16:37:04,954 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'ADM05'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:37:06,964 [1] DEBUG - Statement Id: [DAO00205_GetAllWithoutDeactive] PreparedStatement : [SELECT DISTINCT C.CATEGORY_ID AS CATEGORY_ID            , ISNULL(C.PARENT_ID,0) AS PARENT_ID            , C.CATEGORY_CODE AS CATEGORY_CODE            , C.CATEGORY_NAME AS CATEGORY_NAME            , C.FOLDER_LEVEL            , C.IS_FOLDER            , C.FOLDER_CODE            , CASE WHEN (C.FOLDER_CODE IS NULL OR C.FOLDER_CODE = 'ROOT' OR C.FOLDER_CODE = '' )            THEN NULL ELSE C.FOLDER_CODE END AS PARENT_CODE            , C.CATEGORY_TYPE            FROM TM_CATEGORY AS C            WHERE C.ENABLED = '1'            AND C.BENHVIEN_ID = 'HLU01' AND C.CATEGORY_ID != 0            ORDER BY C.CATEGORY_ID]
2019-08-15 16:37:18,491 [1] DEBUG - Statement Id: [DAO00205_GetDetail] PreparedStatement : [select *              from TM_CATEGORY              where TM_CATEGORY.CATEGORY_ID  = '138'              order by CATEGORY_ID]
2019-08-15 16:37:18,563 [1] DEBUG - Statement Id: [DAO00206_GetList] PreparedStatement : [select *              from TM_CATEGORY_DETAIL               where                             TM_CATEGORY_DETAIL.CATEGORY_ID = '138'                       and                           TM_CATEGORY_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by FIELD_INDEX]
2019-08-15 16:37:18,888 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY_TYPE'              ORDER BY c.column_id]
2019-08-15 16:37:18,952 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:19,011 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_TYPE_ID,DICTIONARY_TYPE_ID AS DISPLAY              FROM LST_DICTIONARY_TYPE              WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:19,503 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY_TYPE'              ORDER BY c.column_id]
2019-08-15 16:37:19,549 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:19,583 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_TYPE_ID,DICTIONARY_TYPE_ID AS DISPLAY              FROM LST_DICTIONARY_TYPE              WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:20,672 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY'              ORDER BY c.column_id]
2019-08-15 16:37:20,720 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:20,766 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_ID, DICTIONARY_TYPE_ID, DICTIONARY_TYPE_CODE, DICTIONARY_CODE, DICTIONARY_NAME, DICTIONARY_NAME_EN, DICTIONARY_NAME_RU, PARENT_ID, IDX, ENABLED, LATIN_NAME, ATTRIBUTE1, ATTRIBUTE2, ATTRIBUTE3, ATTRIBUTE4              FROM LST_DICTIONARY               WHERE DICTIONARY_TYPE_ID = 237 AND DICTIONARY_TYPE_CODE = 'DuocTheoNoiSuDung']
2019-08-15 16:37:24,242 [1] DEBUG - Statement Id: [DAO00205_GetDetail] PreparedStatement : [select *              from TM_CATEGORY              where TM_CATEGORY.CATEGORY_ID  = '154'              order by CATEGORY_ID]
2019-08-15 16:37:24,297 [1] DEBUG - Statement Id: [DAO00206_GetList] PreparedStatement : [select *              from TM_CATEGORY_DETAIL               where                             TM_CATEGORY_DETAIL.CATEGORY_ID = '154'                       and                           TM_CATEGORY_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by FIELD_INDEX]
2019-08-15 16:37:24,896 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'TM_PHAMVI'              ORDER BY c.column_id]
2019-08-15 16:37:24,931 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:24,961 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, PHAMVI_ID, MAPHAMVI, TENPHAMVI, TENPHAMVI_EN, TENPHAMVI_RU, TAMNGUNG, TENKHONGDAU              FROM TM_PHAMVI               WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:29,656 [1] DEBUG - Statement Id: [DAO00205_GetDetail] PreparedStatement : [select *              from TM_CATEGORY              where TM_CATEGORY.CATEGORY_ID  = '153'              order by CATEGORY_ID]
2019-08-15 16:37:29,708 [1] DEBUG - Statement Id: [DAO00206_GetList] PreparedStatement : [select *              from TM_CATEGORY_DETAIL               where                             TM_CATEGORY_DETAIL.CATEGORY_ID = '153'                       and                           TM_CATEGORY_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by FIELD_INDEX]
2019-08-15 16:37:30,389 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'TM_NHOMLOAIDUOC'              ORDER BY c.column_id]
2019-08-15 16:37:30,750 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:30,779 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, NHOMLOAIDUOC_ID, MANHOMLOAIDUOC, TENNHOMLOAIDUOC, TENNHOMLOAIDUOC_EN, TENNHOMLOAIDUOC_RU, IDX, TAMNGUNG, TENKHONGDAU              FROM TM_NHOMLOAIDUOC               WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:31,666 [1] DEBUG - Statement Id: [DAO00205_GetDetail] PreparedStatement : [select *              from TM_CATEGORY              where TM_CATEGORY.CATEGORY_ID  = '155'              order by CATEGORY_ID]
2019-08-15 16:37:31,715 [1] DEBUG - Statement Id: [DAO00206_GetList] PreparedStatement : [select *              from TM_CATEGORY_DETAIL               where                             TM_CATEGORY_DETAIL.CATEGORY_ID = '155'                       and                           TM_CATEGORY_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by FIELD_INDEX]
2019-08-15 16:37:32,093 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [sp_sys_GetListComboData]
2019-08-15 16:37:32,093 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@LANGUAGE_ID=[PARAMETERS.LANGUAGE_ID,VI], @USER_ID=[PARAMETERS.USER_ID,null], @DATA_GROUP=[PARAMETERS.DATA_GROUP,REF_KHODUOC], @BENHVIEN_ID=[PARAMETERS.BENHVIEN_ID,HLU01], @ADDITIONPARA_1=[PARAMETERS.ADDITIONPARA_1,null], @ADDITIONPARA_2=[PARAMETERS.ADDITIONPARA_2,null], @ADDITIONPARA_3=[PARAMETERS.ADDITIONPARA_3,null]]
2019-08-15 16:37:32,093 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@LANGUAGE_ID=[String, System.String], @USER_ID=[System.DBNull, null], @DATA_GROUP=[String, System.String], @BENHVIEN_ID=[String, System.String], @ADDITIONPARA_1=[System.DBNull, null], @ADDITIONPARA_2=[System.DBNull, null], @ADDITIONPARA_3=[System.DBNull, null]]
2019-08-15 16:37:32,206 [1] DEBUG - Statement Id: [DAO00204_GetReportData] PreparedStatement : [sp_sys_GetListComboData]
2019-08-15 16:37:32,207 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Parameters: [@LANGUAGE_ID=[PARAMETERS.LANGUAGE_ID,VI], @USER_ID=[PARAMETERS.USER_ID,null], @DATA_GROUP=[PARAMETERS.DATA_GROUP,REF_KHODUOC], @BENHVIEN_ID=[PARAMETERS.BENHVIEN_ID,HLU01], @ADDITIONPARA_1=[PARAMETERS.ADDITIONPARA_1,null], @ADDITIONPARA_2=[PARAMETERS.ADDITIONPARA_2,null], @ADDITIONPARA_3=[PARAMETERS.ADDITIONPARA_3,null]]
2019-08-15 16:37:32,207 [1] DEBUG - Statement Id: [DAO00204_GetReportData] Types: [@LANGUAGE_ID=[String, System.String], @USER_ID=[System.DBNull, null], @DATA_GROUP=[String, System.String], @BENHVIEN_ID=[String, System.String], @ADDITIONPARA_1=[System.DBNull, null], @ADDITIONPARA_2=[System.DBNull, null], @ADDITIONPARA_3=[System.DBNull, null]]
2019-08-15 16:37:33,031 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'TM_PHAMVIDUOCPHAM'              ORDER BY c.column_id]
2019-08-15 16:37:33,072 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:33,106 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, PHAMVIDUOCPHAM_ID, MAPHAMVI, TENPHAMVI, TENPHAMVI_EN, TENPHAMVI_RU, KHODUOC_ID, TINHCHAT, TAMNGUNG, ATTRIBUTE1, ATTRIBUTE2, ATTRIBUTE3, STT              FROM TM_PHAMVIDUOCPHAM               WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:43,014 [1] DEBUG - Statement Id: [DAO00205_GetDetail] PreparedStatement : [select *              from TM_CATEGORY              where TM_CATEGORY.CATEGORY_ID  = '159'              order by CATEGORY_ID]
2019-08-15 16:37:43,065 [1] DEBUG - Statement Id: [DAO00206_GetList] PreparedStatement : [select *              from TM_CATEGORY_DETAIL               where                             TM_CATEGORY_DETAIL.CATEGORY_ID = '159'                       and                           TM_CATEGORY_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by FIELD_INDEX]
2019-08-15 16:37:43,194 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY_TYPE'              ORDER BY c.column_id]
2019-08-15 16:37:43,223 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:43,251 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_TYPE_ID,DICTIONARY_TYPE_ID AS DISPLAY              FROM LST_DICTIONARY_TYPE              WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:43,352 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY_TYPE'              ORDER BY c.column_id]
2019-08-15 16:37:43,380 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:43,408 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_TYPE_ID,DICTIONARY_TYPE_ID AS DISPLAY              FROM LST_DICTIONARY_TYPE              WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:37:44,402 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'LST_DICTIONARY'              ORDER BY c.column_id]
2019-08-15 16:37:44,440 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:44,468 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, DICTIONARY_ID, DICTIONARY_TYPE_ID, DICTIONARY_TYPE_CODE, DICTIONARY_CODE, DICTIONARY_NAME, DICTIONARY_NAME_EN, DICTIONARY_NAME_RU, PARENT_ID, IDX, ENABLED, LATIN_NAME, ATTRIBUTE1, ATTRIBUTE2, ATTRIBUTE3, ATTRIBUTE4              FROM LST_DICTIONARY               WHERE DICTIONARY_TYPE_ID = 1335 AND DICTIONARY_TYPE_CODE = 'PhamVi_BookingDuoc']
2019-08-15 16:37:49,936 [1] DEBUG - Statement Id: [DAO00205_GetDetail] PreparedStatement : [select *              from TM_CATEGORY              where TM_CATEGORY.CATEGORY_ID  = '2307'              order by CATEGORY_ID]
2019-08-15 16:37:49,987 [1] DEBUG - Statement Id: [DAO00206_GetList] PreparedStatement : [select *              from TM_CATEGORY_DETAIL               where                             TM_CATEGORY_DETAIL.CATEGORY_ID = '2307'                       and                           TM_CATEGORY_DETAIL.BENHVIEN_ID = 'HLU01'                                     order by FIELD_INDEX]
2019-08-15 16:37:50,656 [1] DEBUG - Statement Id: [DAO00205_GetTableColumns] PreparedStatement : [SELECT c.name AS COLUMN_NAME, t.name AS TABLE_NAME, d.definition AS COLUMN_DEFAULT, CAST(c.is_nullable AS char(1)) AS IS_NULLABLE              , dt.name AS DATA_TYPE, c.max_length AS CHARACTER_MAXIMUM_LENGTH, CAST(c.is_identity AS char(1)) AS IS_IDENTITY              , CHARACTER_SET_NAME = (case dt.name when 'nvarchar' then 'UNICODE' else NULL end), t2.name as PRIMARY_TABLE, c2.name as PRIMARY_COLUMN              , IS_PRIMARY = CASE WHEN i.column_id IS NULL THEN 0 ELSE 1 END              FROM sys.columns as c              inner join sys.tables as t on c.object_id = t.object_id              left join sys.default_constraints as d on d.object_id = c.default_object_id              inner join sys.types as dt on c.system_type_id = dt.system_type_id and c.user_type_id = dt.user_type_id              left join sys.foreign_key_columns as fk on fk.parent_object_id = c.object_id and c.column_id = fk.parent_column_id              left join sys.tables as t2 on t2.object_id = fk.referenced_object_id              left join sys.columns as c2 on c2.object_id = t2.object_id and c2.column_id = fk.referenced_column_id              left join sys.key_constraints as k on k.parent_object_id = t.object_id and k.type = 'PK'              left join sys.index_columns as i on i.object_id = t.object_id and i.index_id = k.unique_index_id and i.column_id = c.column_id              WHERE t.name = 'TM_DUOC_PHAMVISUDUNG'              ORDER BY c.column_id]
2019-08-15 16:37:50,685 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'DM_Columns_Properties'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:37:50,714 [1] DEBUG - Statement Id: [DAO00208_GetDataByCategory] PreparedStatement : [SELECT ROW_NUMBER() OVER(ORDER BY(SELECT 1)) AS PRIMARY_ID, PHAMVI_ID, MAPHAMVI, TENPHAMVI, TAMNGUNG, T, V, H, O              FROM TM_DUOC_PHAMVISUDUNG               WHERE BENHVIEN_ID = 'HLU01']
2019-08-15 16:38:17,238 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:38:17,441 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'IPD60'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:38:18,607 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] PreparedStatement : [select A.*, dc.TENDUOCDAYDU, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ld.MALOAIDUOC, dd.DICTIONARY_NAME DUONGDUNG, dc.TAMNGUNG            from TT_TOATHUOCMAU A            left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID            left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID            left join (select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE like 'DuongDung') dd on dd.DICTIONARY_ID = dc.DUONGDUNG_ID            where (1=1)              and A.LOAITOATHUOC in  (                        @param0                   ,                           @param1                   ,                           @param2                   )]
2019-08-15 16:38:18,608 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] Parameters: [@param0=[LSTLOAITOATHUOC[0],RVBV], @param1=[LSTLOAITOATHUOC[1],RVMN], @param2=[LSTLOAITOATHUOC[2],VTYT]]
2019-08-15 16:38:18,608 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String]]
2019-08-15 16:38:19,665 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] PreparedStatement : [select A.*, dc.TENDUOCDAYDU, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ld.MALOAIDUOC, dd.DICTIONARY_NAME DUONGDUNG, dc.TAMNGUNG            from TT_TOATHUOCMAU A            left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID            left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID            left join (select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE like 'DuongDung') dd on dd.DICTIONARY_ID = dc.DUONGDUNG_ID            where (1=1)              and A.LOAITOATHUOC in  (                        @param0                   ,                           @param1                   ,                           @param2                   )]
2019-08-15 16:38:19,665 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] Parameters: [@param0=[LSTLOAITOATHUOC[0],RVBV], @param1=[LSTLOAITOATHUOC[1],RVMN], @param2=[LSTLOAITOATHUOC[2],VTYT]]
2019-08-15 16:38:19,665 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String]]
2019-08-15 16:38:20,643 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaByDoiTuongId] PreparedStatement : [select dtlg.DOUUTIEN, dtlg.DOITUONG_ID, lg.LOAIGIA_ID, lg.TENLOAIGIA, lg.MALOAIGIA              from TM_LOAIGIA lg              left join TM_DOITUONG_LOAIGIA dtlg              on lg.LOAIGIA_ID = dtlg.LOAIGIA_ID and dtlg.BENHVIEN_ID = 'HLU01'              where lg.TAMNGUNG = 0 and lg.BENHVIEN_ID = 'HLU01'                             order by dtlg.DOUUTIEN]
2019-08-15 16:38:20,829 [1] DEBUG - Statement Id: [DAO00063_GetListKhoThuocPhongBanPhamvi] PreparedStatement : [select distinct dpv.*        from TM_DUOC_PHAMVISD_MAPPING dmap        left join TM_DUOC_PHAMVISUDUNG dpv on dpv.PHAMVI_ID = dmap.PHAMVI_ID        where dmap.KHODUOC_ID in (select KHODUOC_ID from TM_PHONGBAN_KHODUOC where PHONGBAN_ID = '18')]
2019-08-15 16:38:20,912 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1027']
2019-08-15 16:38:20,951 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1030']
2019-08-15 16:38:20,979 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1032']
2019-08-15 16:38:21,003 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1057']
2019-08-15 16:38:21,034 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1027']
2019-08-15 16:38:21,062 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1030']
2019-08-15 16:38:21,086 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1032']
2019-08-15 16:38:21,110 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1057']
2019-08-15 16:38:21,134 [1] DEBUG - Statement Id: [DAO00063_GetListPhamviTuKhoThuocVaPhongBan] PreparedStatement : [select distinct dpv.*, dmap.KHODUOC_ID        from TM_DUOC_PHAMVISD_MAPPING dmap        left join TM_DUOC_PHAMVISUDUNG dpv on dpv.PHAMVI_ID = dmap.PHAMVI_ID and dpv.TAMNGUNG != '1'        where dmap.KHODUOC_ID in (select KHODUOC_ID from TM_PHONGBAN_KHODUOC where PHONGBAN_ID = '18')        and dmap.KHODUOC_ID = '30' and dpv.MAPHAMVI is not null]
2019-08-15 16:38:21,189 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] PreparedStatement : [select distinct tk.DUOC_KEY, tk.SOLUONG        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where  d.BENHVIEN_ID = 'HLU01' and tk.PHAMVI_ID =  @param0]
2019-08-15 16:38:21,190 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] Parameters: [@param0=[PHAMVI_ID,1027]]
2019-08-15 16:38:21,190 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:38:21,788 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] PreparedStatement : [select distinct tk.DUOC_KEY, tk.SOLUONG        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where  d.BENHVIEN_ID = 'HLU01' and tk.PHAMVI_ID =  @param0]
2019-08-15 16:38:21,788 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] Parameters: [@param0=[PHAMVI_ID,1027]]
2019-08-15 16:38:21,788 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:38:37,675 [1] DEBUG - Statement Id: [DAO00096_GetList] PreparedStatement : [select *        from TM_DUOC_THANHPHANHOATCHAT        where BENHVIEN_ID = 'HLU01']
2019-08-15 16:38:44,971 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] PreparedStatement : [select A.*, dc.TENDUOCDAYDU, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ld.MALOAIDUOC, dd.DICTIONARY_NAME DUONGDUNG, dc.TAMNGUNG            from TT_TOATHUOCMAU A            left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID            left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID            left join (select * from LST_DICTIONARY where DICTIONARY_TYPE_CODE like 'DuongDung') dd on dd.DICTIONARY_ID = dc.DUONGDUNG_ID            where (1=1)              and A.LOAITOATHUOC in  (                        @param0                   ,                           @param1                   ,                           @param2                   )]
2019-08-15 16:38:44,971 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] Parameters: [@param0=[LSTLOAITOATHUOC[0],RVBV], @param1=[LSTLOAITOATHUOC[1],RVMN], @param2=[LSTLOAITOATHUOC[2],VTYT]]
2019-08-15 16:38:44,971 [1] DEBUG - Statement Id: [DAO00040_LayListToaMau] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String]]
2019-08-15 16:38:45,577 [1] DEBUG - Statement Id: [DAO00063_GetListKhoThuocPhongBanPhamvi] PreparedStatement : [select distinct dpv.*        from TM_DUOC_PHAMVISD_MAPPING dmap        left join TM_DUOC_PHAMVISUDUNG dpv on dpv.PHAMVI_ID = dmap.PHAMVI_ID        where dmap.KHODUOC_ID in (select KHODUOC_ID from TM_PHONGBAN_KHODUOC where PHONGBAN_ID = '18')]
2019-08-15 16:38:45,605 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1027']
2019-08-15 16:38:45,638 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1030']
2019-08-15 16:38:45,662 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1032']
2019-08-15 16:38:45,687 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1057']
2019-08-15 16:38:45,721 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1027']
2019-08-15 16:38:45,744 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1030']
2019-08-15 16:38:45,768 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1032']
2019-08-15 16:38:45,793 [1] DEBUG - Statement Id: [DAO00063_GetKhoduocUuTienTuPhamvi] PreparedStatement : [select top 1 dmap.*        from TM_DUOC_PHAMVISD_MAPPING dmap        where dmap.PHAMVI_ID = '1057']
2019-08-15 16:38:45,817 [1] DEBUG - Statement Id: [DAO00063_GetListPhamviTuKhoThuocVaPhongBan] PreparedStatement : [select distinct dpv.*, dmap.KHODUOC_ID        from TM_DUOC_PHAMVISD_MAPPING dmap        left join TM_DUOC_PHAMVISUDUNG dpv on dpv.PHAMVI_ID = dmap.PHAMVI_ID and dpv.TAMNGUNG != '1'        where dmap.KHODUOC_ID in (select KHODUOC_ID from TM_PHONGBAN_KHODUOC where PHONGBAN_ID = '18')        and dmap.KHODUOC_ID = '30' and dpv.MAPHAMVI is not null]
2019-08-15 16:38:45,860 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] PreparedStatement : [select distinct tk.DUOC_KEY, tk.SOLUONG        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where  d.BENHVIEN_ID = 'HLU01' and tk.PHAMVI_ID =  @param0]
2019-08-15 16:38:45,860 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] Parameters: [@param0=[PHAMVI_ID,1027]]
2019-08-15 16:38:45,860 [1] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBookingCOM23UpdateRedis_TheoPhamvi] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:38:46,160 [1] DEBUG - Statement Id: [DAO00063_Getlist_Thuoc_Tamngung] PreparedStatement : [select DUOC_ID FROM TM_DUOC where TAMNGUNG = '1']
2019-08-15 16:38:46,207 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '5761']
2019-08-15 16:38:46,241 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 16:38:46,241 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,5761]]
2019-08-15 16:38:46,241 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:38:46,313 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 6 and MADOITUONG like '%BHYT%']
2019-08-15 16:38:46,394 [1] DEBUG - Statement Id: [DAO00068_GetLastedSinhHieuInfo] PreparedStatement : [select top (1) *, CHISOBMI as BMI              from TT_NGOAITRU_KHAMBENH_SINHHIEU              where BENHNHAN_ID = '22844'              order by KHAMBENH_SINHHIEU_ID desc]
2019-08-15 16:38:46,428 [1] DEBUG - Statement Id: [DAO00013_GetTienSuBenh] PreparedStatement : [select TIENSUBENH, TIENSUDIUNG              from TT_BENHNHAN              where TT_BENHNHAN.BENHNHAN_ID  = '22844']
2019-08-15 16:38:46,712 [1] DEBUG - Statement Id: [DAO00095_GetTTDiUngThuoc] PreparedStatement : [select *              from TT_BENHNHAN_DIUNG_THUOC              where BENHNHAN_ID = '22844'              and BENHVIEN_ID = 'HLU01']
2019-08-15 16:38:46,740 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 16:38:46,827 [1] DEBUG - Statement Id: [DAO00062_GetKhamBenhByTiepNhanID] PreparedStatement : [select *        from TT_NOITRU_KHAMBENH        where BENHAN_ID in        (select BENHAN_ID from TT_NOITRU_BENHAN        where TIEPNHAN_ID = '26703')        and ISYLENHVTYT = '0'         and           BENHAN_ID = '5761'                 order by KHAMBENH_ID desc]
2019-08-15 16:38:46,903 [1] DEBUG - Statement Id: [DAO00063_GetTrangThaiYLenhTheoTiepnhanId] PreparedStatement : [select tt.CHUNGTU_ID, tt.PHIEULINH_ID, tt.TRANGTHAI, pl.DUYET as DUYETPHIEULINH,        ct.CHUNGTU_ID as CHUNGTUXUATNOIBO_ID, ct.LOAICHUNGTU, tt.KHAMBENH_ID, tt.DUOC_ID, tt.SOLUONG        from TT_NOITRU_TOATHUOC tt        left join TT_DUOC_PHIEULINH pl on tt.PHIEULINH_ID = pl.CHUNGTU_ID        left join TT_DUOC_CHUNGTU ct on pl.CHUNGTU_ID = ct.PHIEULINH_ID        where tt.TIEPNHAN_ID = '26703'        and (tt.PHIEULINH_ID is not null or tt.CHUNGTU_ID is not null or (tt.TRANGTHAI = 'DADUYET'))        order by tt.CHUNGTU_ID DESC]
2019-08-15 16:38:47,169 [1] DEBUG - Statement Id: [DAO00063_GetDanhsachTrathuocTheoBenhanId] PreparedStatement : [select A.KHAMBENH_ID, B.TOATHUOC_ID, B.DUOC_ID, SUM(B.SOLUONG) SOLUONG        from TT_NOITRU_TRATHUOC A        left join TT_NOITRU_TRATHUOC_CHITIET B on A.TRATHUOC_ID = B.TRATHUOC_ID        where A.BENHAN_ID = '5761'         group by A.KHAMBENH_ID, B.TOATHUOC_ID, B.DUOC_ID]
2019-08-15 16:38:47,227 [1] DEBUG - Statement Id: [DAO00061_GetLuuTruIDByBenhAnID] PreparedStatement : [select lt.LUUTRU_ID, ba.BACSIDIEUTRI_ID as BACSIDIEUTRICHINH_ID        from TT_NOITRU_LUUTRU lt        left join TT_NOITRU_BENHAN ba on lt.BENHAN_ID = ba.BENHAN_ID        where lt.BENHAN_ID = '5761']
2019-08-15 16:38:47,261 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] PreparedStatement : [DECLARE @ICDPHU NVARCHAR(2000)=''        DECLARE @LISTICDPHU NVARCHAR(200)        DECLARE @CHANDOANRAVIEN NVARCHAR(500)        DECLARE @ICDKHAMBENH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_KHAMBENH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        DECLARE @ICDCHINH NVARCHAR(500) = (SELECT ICD.TENICD + '('+ISNULL(ICD.MAICD,'')+')'        FROM TT_NOITRU_BENHAN BA INNER JOIN TM_ICD ICD        ON BA.ICD_BENHCHINH = ICD.ICD_ID WHERE BA.BENHAN_ID =  @param0 )        SELECT @CHANDOANRAVIEN = BA.CHANDOANRAVIEN, @LISTICDPHU = BA.ICD_BENHPHU        FROM TT_NOITRU_BENHAN BA WHERE BA.BENHAN_ID =  @param0         SELECT @ICDPHU = @ICDPHU + ISNULL(TENICD, '') +'(' +ISNULL(MAICD,'')+ '); ' FROM TM_ICD WHERE MAICD IN (SELECT S FROM SplitString(@LISTICDPHU,';'))        SELECT ICD_KHAMBENH, CHANDOANKHAMBENH, CHANDOANVAOKHOA, CHANDOANRAVIEN, CHANDOANKHAC        ,ISNULL(@ICDCHINH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') + '; ' + ISNULL(@ICDPHU,'') AS CHANDOANNOITRU        ,CASE WHEN @ICDKHAMBENH IS NULL AND (@CHANDOANRAVIEN IS NULL OR @CHANDOANRAVIEN = '') THEN ''        ELSE ISNULL(@ICDKHAMBENH, '') + '; ' + ISNULL(@CHANDOANRAVIEN, '') END        AS CHANDOANCAPCUU        FROM TT_NOITRU_BENHAN BA LEFT JOIN TM_ICD ICD ON BA.ICD_KHAMBENH = ICD.ICD_ID        WHERE BENHAN_ID =  @param0]
2019-08-15 16:38:47,261 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Parameters: [@param0=[BENHAN_ID,5761]]
2019-08-15 16:38:47,262 [1] DEBUG - Statement Id: [DAO00061_GetChanDoanBenhAnID] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:38:47,331 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '26703'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5761']
2019-08-15 16:49:22,113 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'BIL11'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:49:23,040 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:49:25,306 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '26703'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5761']
2019-08-15 16:49:25,487 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 16:49:25,701 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 16:49:25,701 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5761]]
2019-08-15 16:49:25,701 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:49:25,733 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 26703 and REF_ID = 0             and               BENHAN_ID = '5761'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 26703 and SOLUONG = 0             and               BENHAN_ID = 5761                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '26703' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '26703' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 16:49:25,733 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761]]
2019-08-15 16:49:25,733 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 16:49:26,453 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '26703' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5761']
2019-08-15 16:49:26,519 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5761'                 where B.TIEPNHAN_ID = '26703') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '26703' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5761'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 16:49:26,803 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 16:49:26,803 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,26703]]
2019-08-15 16:49:26,803 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 16:49:26,849 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '6']
2019-08-15 16:49:26,887 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 26703)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 16:49:26,949 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 16:49:27,042 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":658799,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":1.0,"BHYT_DONGIA":33000.0000,"BHYT_THANHTIEN":33000.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":33000.0,"BHYT_THANHTIEN_CHITRA":33000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658800,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658801,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658804,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658805,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658806,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":665427,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668466,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0,"BHYT_DONGIA":8925.0000,"BHYT_THANHTIEN":8925.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8925.0,"BHYT_THANHTIEN_CHITRA":8925.00,"BENHNHAN_PHAITHANHTOAN":4575.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4575.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668467,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0,"BHYT_DONGIA":8715.0000,"BHYT_THANHTIEN":17430.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8715.0,"BHYT_THANHTIEN_CHITRA":17430.00,"BENHNHAN_PHAITHANHTOAN":9570.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":9570.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668468,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0,"BHYT_DONGIA":4410.0000,"BHYT_THANHTIEN":4410.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":4410.0,"BHYT_THANHTIEN_CHITRA":4410.00,"BENHNHAN_PHAITHANHTOAN":2590.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2590.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668469,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":671251,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 16:49:27,121 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 16:49:27,121 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,26703]]
2019-08-15 16:49:27,121 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:49:27,227 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 6 and MADOITUONG like '%BHYT%']
2019-08-15 16:49:27,326 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '22844'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 16:49:27,590 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '26703'         and           BENHAN_ID = '5761'                 ORDER BY NGAYCHIPHI]
2019-08-15 16:49:27,627 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '26703'         and           BENHAN_ID = '5761']
2019-08-15 16:49:27,675 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5761']
2019-08-15 16:49:27,735 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5761']
2019-08-15 16:49:27,769 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '26703'           and           VP.BENHAN_ID = '5761'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '26703'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '26703'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '26703')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '26703')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '26703'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '26703'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 16:49:28,211 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:49:28,329 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"200288"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"200288"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:49:28,623 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:49:28,706 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"200289"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"200289"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:49:28,819 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:49:28,921 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"200290"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"200290"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:49:29,050 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:49:29,149 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4039","DVYEUCAU_ID":"202421"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4039","DVYEUCAU_ID":"202421"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:49:29,338 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:49:29,420 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204469"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204469"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:49:29,626 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '6'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 16:49:30,037 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '26703']
2019-08-15 16:49:30,081 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '22844' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 16:49:30,121 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '22844' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 16:49:33,906 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:49:33,981 [1] DEBUG - Statement Id: [DAO00034_GetList] PreparedStatement : [select *              from TM_BENHVIEN]
2019-08-15 16:49:36,469 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'HinhThucChuyenVien'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:49:36,570 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'LyDoChuyenVien'                 order by LST_DICTIONARY.IDX]
2019-08-15 16:49:36,697 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 16:51:45,215 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '26703'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 16:51:45,295 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 26703)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 16:51:47,106 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '26703'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5761']
2019-08-15 16:51:47,202 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '26703']
2019-08-15 16:51:47,256 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '26703'                order by SOBHYT_HUONG_ID desc]
2019-08-15 16:51:47,295 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '658799']
2019-08-15 16:51:47,295 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[REF_ID,200288], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,33000], @param12=[BHYT_THANHTIEN,33000], @param13=[BHYT_DONGIA_CHITRA,33000], @param14=[BHYT_THANHTIEN_CHITRA,33000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,6], @param43=[SOBHYT_HUONG_ID,27723], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 4:51:47 PM]]
2019-08-15 16:51:47,295 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 16:51:47,352 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 16:51:47,352 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761], @param2=[VIENPHI_ID,658799], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,33000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 16:51:47,352 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 16:51:47,714 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '658800']
2019-08-15 16:51:47,715 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[REF_ID,200289], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,6], @param43=[SOBHYT_HUONG_ID,27723], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 4:51:47 PM]]
2019-08-15 16:51:47,715 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 16:51:47,769 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 16:51:47,769 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761], @param2=[VIENPHI_ID,658800], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 16:51:47,769 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 16:51:47,798 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '658801']
2019-08-15 16:51:47,798 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[REF_ID,200290], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,6], @param43=[SOBHYT_HUONG_ID,27723], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 4:51:47 PM]]
2019-08-15 16:51:47,798 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 16:51:47,846 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 16:51:47,846 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761], @param2=[VIENPHI_ID,658801], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 16:51:47,846 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 16:51:47,871 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '665427']
2019-08-15 16:51:47,872 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[REF_ID,202421], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4039], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,6], @param43=[SOBHYT_HUONG_ID,27723], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 4:51:47 PM]]
2019-08-15 16:51:47,872 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 16:51:47,920 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 16:51:47,920 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761], @param2=[VIENPHI_ID,665427], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 16:51:47,920 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 16:51:47,950 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671251']
2019-08-15 16:51:47,950 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[REF_ID,204469], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,6], @param43=[SOBHYT_HUONG_ID,27723], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 4:51:47 PM]]
2019-08-15 16:51:47,950 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 16:51:47,999 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 16:51:47,999 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761], @param2=[VIENPHI_ID,671251], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 16:51:47,999 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 16:51:48,165 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '26703'         and           BENHAN_ID = '5761'                 ORDER BY NGAYCHIPHI]
2019-08-15 16:51:48,197 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '26703'         and           BENHAN_ID = '5761']
2019-08-15 16:51:48,223 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5761']
2019-08-15 16:51:48,250 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5761']
2019-08-15 16:51:48,274 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '26703'           and           VP.BENHAN_ID = '5761'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '26703'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '26703'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '26703')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '26703')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '26703'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '26703'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 16:51:48,325 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:48,418 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"200288"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"200288"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:48,481 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:48,566 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"200289"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"200289"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:48,632 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:48,715 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"200290"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"200290"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:48,806 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:48,914 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4039","DVYEUCAU_ID":"202421"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4039","DVYEUCAU_ID":"202421"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:49,050 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:49,141 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204469"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204469"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:49,289 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '6'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 16:51:57,675 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '26703'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5761']
2019-08-15 16:51:57,749 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 16:51:57,774 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 16:51:57,774 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5761]]
2019-08-15 16:51:57,774 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:51:57,816 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 26703 and REF_ID = 0             and               BENHAN_ID = '5761'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 26703 and SOLUONG = 0             and               BENHAN_ID = 5761                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '26703' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '26703' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 16:51:57,816 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,26703], @param1=[BENHAN_ID,5761]]
2019-08-15 16:51:57,817 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 16:51:58,133 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '26703' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5761']
2019-08-15 16:51:58,194 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5761'                 where B.TIEPNHAN_ID = '26703') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '26703')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '26703' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5761'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 16:51:58,229 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 16:51:58,229 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,26703]]
2019-08-15 16:51:58,229 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 16:51:58,261 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '6']
2019-08-15 16:51:58,290 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 26703)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 16:51:58,325 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 16:51:58,404 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":658799,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":1.0,"BHYT_DONGIA":33000.0000,"BHYT_THANHTIEN":33000.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":33000.0,"BHYT_THANHTIEN_CHITRA":33000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658800,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658801,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658804,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":1.0,"BHYT_DONGIA":630.0000,"BHYT_THANHTIEN":1260.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":630.0,"BHYT_THANHTIEN_CHITRA":1260.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658805,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":658806,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":665427,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668466,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0,"BHYT_DONGIA":8925.0000,"BHYT_THANHTIEN":8925.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8925.0,"BHYT_THANHTIEN_CHITRA":8925.00,"BENHNHAN_PHAITHANHTOAN":4575.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4575.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668467,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":2.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":27000.00,"BHYT_TL":1.0,"BHYT_DONGIA":8715.0000,"BHYT_THANHTIEN":17430.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":8715.0,"BHYT_THANHTIEN_CHITRA":17430.00,"BENHNHAN_PHAITHANHTOAN":9570.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":9570.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668468,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0,"BHYT_DONGIA":4410.0000,"BHYT_THANHTIEN":4410.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":4410.0,"BHYT_THANHTIEN_CHITRA":4410.00,"BENHNHAN_PHAITHANHTOAN":2590.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2590.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":668469,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723},{"VIENPHI_ID":671251,"TIEPNHAN_ID":26703,"BENHAN_ID":5761,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":33000.0000,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"HT238669707504638289","SOBHYT_HUONG_ID":27723}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 16:51:58,773 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 16:51:58,773 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,26703]]
2019-08-15 16:51:58,773 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 16:51:58,882 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 6 and MADOITUONG like '%BHYT%']
2019-08-15 16:51:58,969 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '22844'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 16:51:59,103 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '26703'         and           BENHAN_ID = '5761'                 ORDER BY NGAYCHIPHI]
2019-08-15 16:51:59,136 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '26703'         and           BENHAN_ID = '5761']
2019-08-15 16:51:59,162 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5761']
2019-08-15 16:51:59,188 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5761']
2019-08-15 16:51:59,214 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '26703'           and           VP.BENHAN_ID = '5761'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '26703' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '26703'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '26703'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '26703')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '26703')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '26703'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '26703'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 16:51:59,266 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:59,391 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"200288"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"200288"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:59,454 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:59,548 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"200289"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"200289"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:59,640 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:59,728 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"200290"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"200290"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:51:59,842 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:51:59,936 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4039","DVYEUCAU_ID":"202421"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4039","DVYEUCAU_ID":"202421"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:52:00,076 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000005']
2019-08-15 16:52:00,161 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204469"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204469"}' order by ID desc)        order by A.ID desc]
2019-08-15 16:52:00,292 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '6'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 16:52:00,459 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '26703']
2019-08-15 16:52:00,503 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '22844' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 16:52:00,527 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '22844' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
--------------------------------------------------------------------------------
2019-08-15 17:48:38,409 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 17:48:38,689 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 17:48:38,739 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 17:48:39,139 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:48:39,527 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 17:48:50,410 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 17:48:50,436 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 17:48:51,943 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 17:48:52,023 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 17:48:52,778 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 17:48:52,950 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 17:48:53,029 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 17:48:53,100 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 17:48:53,172 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 17:48:53,243 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 17:48:53,334 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 17:48:53,407 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 17:48:53,474 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 17:48:53,981 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 17:48:54,015 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 17:48:54,088 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 17:48:54,123 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 17:48:55,447 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 17:48:55,484 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 17:48:57,433 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 17:48:57,504 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 17:48:57,538 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 17:48:57,597 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 17:48:57,629 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 17:48:57,697 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 17:48:58,630 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:48:59,615 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 17:49:05,168 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 17:49:05,194 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 17:49:05,267 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:05,384 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:05,516 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 17:49:05,518 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 17:49:05,518 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 17:49:05,546 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 17:49:05,547 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 17:49:05,547 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 17:49:05,678 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:05,992 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:14,080 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:14,230 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 17:49:14,480 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 17:49:28,311 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:28,453 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'BIL11'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:29,373 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 17:49:34,992 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 17:49:35,154 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 17:49:35,182 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 17:49:35,183 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 17:49:35,183 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:49:35,208 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 17:49:35,208 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 17:49:35,208 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 17:49:35,804 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 17:49:35,873 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 17:49:36,085 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 17:49:36,143 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 17:49:36,143 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 17:49:36,143 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 17:49:36,176 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 17:49:36,201 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 17:49:36,253 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 17:49:36,376 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 17:49:36,442 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 17:49:36,442 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 17:49:36,442 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:49:36,539 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 17:49:36,618 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 17:49:36,741 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 17:49:36,778 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 17:49:36,813 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 17:49:36,908 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 17:49:36,944 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 17:49:37,301 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:37,454 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:37,702 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:37,786 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:37,903 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:37,990 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:38,144 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:38,232 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:38,386 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:38,468 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:38,619 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:38,702 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:38,853 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:38,935 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:39,094 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:39,177 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:39,327 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:39,412 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:39,571 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:39,675 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:39,828 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:49:39,912 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:49:40,161 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 17:49:40,572 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 17:49:40,611 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:49:40,646 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:49:47,772 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:49:48,041 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:52:58,409 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 17:52:58,434 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 17:52:58,461 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 17:52:58,587 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:52:58,670 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 17:53:02,881 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 17:53:02,907 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 17:53:04,156 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 17:53:04,259 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 17:53:04,725 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 17:53:04,806 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 17:53:04,878 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 17:53:04,949 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 17:53:05,020 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 17:53:05,094 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 17:53:05,169 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 17:53:05,245 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 17:53:05,329 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 17:53:05,813 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 17:53:05,843 [20] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 17:53:05,911 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 17:53:05,948 [20] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 17:53:07,738 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 17:53:07,768 [20] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 17:53:09,977 [20] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 17:53:10,042 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 17:53:10,073 [20] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 17:53:10,138 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 17:53:10,173 [20] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 17:53:10,240 [20] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 17:53:11,262 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:11,427 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 17:53:11,488 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 17:53:11,514 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 17:53:11,908 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:12,151 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:12,239 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 17:53:12,239 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 17:53:12,239 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 17:53:12,265 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 17:53:12,265 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 17:53:12,265 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 17:53:12,437 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:12,697 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:13,739 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:13,822 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 17:53:14,008 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 17:53:20,120 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:20,301 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'BIL11'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:21,013 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 17:53:24,034 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27124'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5836']
2019-08-15 17:53:24,108 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 17:53:24,132 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 17:53:24,133 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5836]]
2019-08-15 17:53:24,133 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:53:24,157 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27124 and REF_ID = 0             and               BENHAN_ID = '5836'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27124 and SOLUONG = 0             and               BENHAN_ID = 5836                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27124' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27124' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 17:53:24,157 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27124], @param1=[BENHAN_ID,5836]]
2019-08-15 17:53:24,157 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 17:53:24,579 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27124' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5836']
2019-08-15 17:53:24,648 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5836'                 where B.TIEPNHAN_ID = '27124') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27124')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27124')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27124')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27124')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27124' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5836'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 17:53:24,892 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 17:53:24,893 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27124]]
2019-08-15 17:53:24,893 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 17:53:24,926 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '0']
2019-08-15 17:53:24,957 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27124)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 17:53:25,020 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 17:53:25,135 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":668868,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":80000.0000,"THANHTIEN_DOANHTHU":80000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":80000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":80000.0000,"GIATRI_BIENLAI":80000.00,"GIATRI_BIENLAI_DATHANHTOAN":80000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":80000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668869,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":45000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":45000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":45000.0000,"GIATRI_BIENLAI":45000.00,"GIATRI_BIENLAI_DATHANHTOAN":45000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":45000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668870,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":70000.0000,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":70000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":70000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668871,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":70000.0000,"THANHTIEN_DOANHTHU":70000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":70000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":70000.0000,"GIATRI_BIENLAI":70000.00,"GIATRI_BIENLAI_DATHANHTOAN":70000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":70000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668872,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":65000.0000,"THANHTIEN_DOANHTHU":65000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":65000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":65000.0000,"GIATRI_BIENLAI":65000.00,"GIATRI_BIENLAI_DATHANHTOAN":65000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":65000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668873,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":4000.0000,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":4000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":4000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668874,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":8000.0000,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":8000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":8000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668875,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":2000.0000,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":2000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":2000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668876,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":20.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":40000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":40000.0000,"GIATRI_BIENLAI":40000.00,"GIATRI_BIENLAI_DATHANHTOAN":40000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":40000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":668877,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":10000.0000,"THANHTIEN_DOANHTHU":10000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":10000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":10000.0000,"GIATRI_BIENLAI":10000.00,"GIATRI_BIENLAI_DATHANHTOAN":10000.0000,"GIATRI_BENHNHAN_DATHANHTOAN":10000.0000,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669007,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":700000.0000,"THANHTIEN_DOANHTHU":700000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":700000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":700000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669014,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":13500.0000,"THANHTIEN_DOANHTHU":13500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":13500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":13500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669015,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":6000.0000,"THANHTIEN_DOANHTHU":6000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669016,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":22000.0000,"THANHTIEN_DOANHTHU":22000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":22000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":22000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669017,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":5000.0000,"THANHTIEN_DOANHTHU":5000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":5000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":5000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669018,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":0.2500,"DONGIA_DOANHTHU":25000.0000,"THANHTIEN_DOANHTHU":6250.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":6250.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":6250.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669019,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":10000.0000,"THANHTIEN_DOANHTHU":10000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":10000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":10000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669020,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":60000.0000,"THANHTIEN_DOANHTHU":60000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":60000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":60000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669021,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669022,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669023,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":100.0000,"DONGIA_DOANHTHU":50.0000,"THANHTIEN_DOANHTHU":5000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":5000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":5000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669024,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":120000.0000,"THANHTIEN_DOANHTHU":120000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":120000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":120000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669025,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":35000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":35000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":35000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669026,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669027,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":20.0000,"DONGIA_DOANHTHU":3000.0000,"THANHTIEN_DOANHTHU":60000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":60000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":60000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669028,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":5.0000,"DONGIA_DOANHTHU":6000.0000,"THANHTIEN_DOANHTHU":30000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":30000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":30000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669029,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":5.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":20000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":20000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":20000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669030,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":3.0000,"DONGIA_DOANHTHU":8000.0000,"THANHTIEN_DOANHTHU":24000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":24000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":24000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669031,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":1500.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1500.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1500.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669032,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":20000.0000,"THANHTIEN_DOANHTHU":20000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":20000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":20000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669033,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":40000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":40000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669034,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":50.0000,"DONGIA_DOANHTHU":35.0000,"THANHTIEN_DOANHTHU":1750.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1750.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1750.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669035,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":7000.0000,"THANHTIEN_DOANHTHU":7000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":7000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":7000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669036,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":9000.0000,"THANHTIEN_DOANHTHU":9000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":9000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":9000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669037,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":10000.0000,"THANHTIEN_DOANHTHU":10000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":10000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":10000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669038,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":2400.0000,"THANHTIEN_DOANHTHU":2400.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2400.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2400.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669039,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":0.5000,"DONGIA_DOANHTHU":200000.0000,"THANHTIEN_DOANHTHU":100000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":100000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":100000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669040,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669041,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":35000.0000,"THANHTIEN_DOANHTHU":35000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":35000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":35000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669042,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669043,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669044,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669045,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669046,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":669047,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":1.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":672917,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":672918,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1500.0000,"THANHTIEN_DOANHTHU":3000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":3000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":3000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":672919,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":2000.0000,"THANHTIEN_DOANHTHU":4000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":4000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":4000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151},{"VIENPHI_ID":672920,"TIEPNHAN_ID":27124,"BENHAN_ID":5836,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":1.0000,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":0.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"","SOBHYT_HUONG_ID":28151}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 17:53:25,327 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 17:53:25,328 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27124]]
2019-08-15 17:53:25,328 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:53:25,607 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 1 and MADOITUONG like '%BHYT%']
2019-08-15 17:53:25,702 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27124'         and           BENHAN_ID = '5836'                 ORDER BY NGAYCHIPHI]
2019-08-15 17:53:25,976 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27124'         and           BENHAN_ID = '5836']
2019-08-15 17:53:26,014 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5836']
2019-08-15 17:53:26,054 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5836']
2019-08-15 17:53:26,091 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27124'           and           VP.BENHAN_ID = '5836'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27124' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27124' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27124' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27124' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27124'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27124'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27124')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27124')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27124'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27124'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 17:53:26,407 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 17:53:26,502 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1474","DVYEUCAU_ID":"203261"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"1474","DVYEUCAU_ID":"203261"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:26,720 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 17:53:26,803 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"203265"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5363","DVYEUCAU_ID":"203265"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:26,927 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 17:53:27,011 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5588","DVYEUCAU_ID":"203266"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5588","DVYEUCAU_ID":"203266"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:27,132 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190603.0000425']
2019-08-15 17:53:27,214 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"203267"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5602","DVYEUCAU_ID":"203267"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:27,378 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '1'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 17:53:27,599 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27124']
2019-08-15 17:53:27,623 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23165' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:53:27,659 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23165' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:53:33,396 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 17:53:33,469 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 17:53:33,495 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 17:53:33,495 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 17:53:33,495 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:53:33,522 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 17:53:33,523 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 17:53:33,523 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 17:53:33,724 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 17:53:33,777 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 17:53:33,815 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 17:53:33,815 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 17:53:33,815 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 17:53:33,840 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 17:53:33,865 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 17:53:33,901 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 17:53:33,987 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 17:53:34,022 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 17:53:34,022 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 17:53:34,022 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:53:34,116 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 17:53:34,191 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 17:53:34,321 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 17:53:34,346 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 17:53:34,373 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 17:53:34,401 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 17:53:34,426 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 17:53:34,480 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:34,566 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:34,639 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:34,736 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:34,835 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:34,918 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:35,052 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:35,140 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:35,265 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:35,356 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:35,475 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:35,568 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:35,686 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:35,771 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:35,902 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:36,001 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:36,131 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:36,213 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:36,329 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:36,412 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:36,774 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:53:36,857 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:53:36,988 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 17:53:37,129 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 17:53:37,156 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:53:37,181 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:53:39,004 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:53:39,220 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
--------------------------------------------------------------------------------
2019-08-15 17:55:54,924 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 17:55:55,596 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 17:55:55,631 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 17:55:56,010 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:55:56,244 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 17:56:01,441 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 17:56:01,472 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 17:56:03,026 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 17:56:03,151 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 17:56:03,964 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 17:56:04,098 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 17:56:04,172 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 17:56:04,238 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 17:56:04,310 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 17:56:04,377 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 17:56:04,441 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 17:56:04,512 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 17:56:04,578 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 17:56:05,096 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 17:56:05,128 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 17:56:05,199 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 17:56:05,232 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 17:56:05,973 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 17:56:06,005 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 17:56:08,462 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 17:56:08,530 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 17:56:08,572 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 17:56:08,640 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 17:56:08,669 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 17:56:08,734 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 17:56:09,658 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:10,545 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 17:56:15,365 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 17:56:15,624 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 17:56:15,699 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:15,838 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:15,984 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 17:56:15,986 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 17:56:15,986 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 17:56:16,014 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 17:56:16,014 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 17:56:16,014 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 17:56:16,134 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:16,304 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:23,682 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:23,780 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 17:56:24,022 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 17:56:29,572 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:29,853 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'BIL11'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:56:30,775 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 17:56:56,948 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 17:56:57,094 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 17:56:57,121 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 17:56:57,121 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 17:56:57,121 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:56:57,145 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 17:56:57,145 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 17:56:57,145 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 17:56:57,352 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 17:56:57,405 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 17:56:57,440 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 17:56:57,494 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 17:56:57,494 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 17:56:57,494 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 17:56:57,525 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 17:56:57,552 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 17:56:57,586 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 17:56:57,730 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 17:56:57,809 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 17:56:57,809 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 17:56:57,809 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 17:56:57,907 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 17:56:57,982 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 17:56:58,107 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 17:56:58,131 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 17:56:58,162 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 17:56:58,262 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 17:56:58,290 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 17:56:58,387 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:58,526 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:56:58,728 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:58,811 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:56:58,889 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:58,972 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:56:59,092 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:59,175 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:56:59,290 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:59,419 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:56:59,550 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:59,657 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:56:59,790 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:56:59,883 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:57:00,015 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:57:00,114 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:57:00,235 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:57:00,324 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:57:00,459 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:57:00,542 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:57:00,672 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:57:00,762 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:57:01,006 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 17:57:01,392 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 17:57:01,437 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:57:01,472 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 17:57:04,053 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:57:04,291 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 17:58:39,727 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 17:58:39,802 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 17:58:44,312 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 17:58:44,391 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] PreparedStatement : [update TT_TIEPNHAN set        CHANDOANNGT =  @param0 ,        ICDNOIGIOITHIEU_ID =  @param1 ,        LYDOCHUYENVIEN_ID =  @param2 ,        NOIGIOITHIEU_ID =  @param3 ,        HINHTHUCCHUYENVIEN_ID =  @param4 ,        THOIGIANCHUYENTUYEN =  @param5 ,        SOCHUYENVIEN =  @param6         where TIEPNHAN_ID = '27327']
2019-08-15 17:58:44,391 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] Parameters: [@param0=[CHANDOANNGT,Viêm phế quản cấp], @param1=[ICDNOIGIOITHIEU_ID,3990], @param2=[LYDOCHUYENVIEN_ID,1021], @param3=[NOIGIOITHIEU_ID,15056], @param4=[HINHTHUCCHUYENVIEN_ID,6978], @param5=[THOIGIANCHUYENTUYEN,8/15/2019 5:57:04 PM], @param6=[SOCHUYENVIEN,123]]
2019-08-15 17:58:44,391 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] Types: [@param0=[String, System.String], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[String, System.String], @param5=[DateTime, System.DateTime], @param6=[String, System.String]]
2019-08-15 17:58:44,436 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327']
2019-08-15 17:58:44,488 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327'                order by SOBHYT_HUONG_ID desc]
2019-08-15 17:58:44,517 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '670984']
2019-08-15 17:58:44,518 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204342], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,0], @param11=[BHYT_DONGIA,0], @param12=[BHYT_THANHTIEN,0], @param13=[BHYT_DONGIA_CHITRA,0], @param14=[BHYT_THANHTIEN_CHITRA,0], @param15=[BENHNHAN_PHAITHANHTOAN,33000], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,33000], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,518 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:44,566 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:44,566 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,670984], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,0], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:44,566 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:44,591 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671017']
2019-08-15 17:58:44,591 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204364], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,591 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:44,638 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:44,638 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,671017], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:44,638 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:44,663 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672718']
2019-08-15 17:58:44,664 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204870], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,664 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:44,711 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:44,712 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672718], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:44,712 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:44,738 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672719']
2019-08-15 17:58:44,739 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204871], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4722], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,739 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:44,786 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:44,786 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672719], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:44,786 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:44,812 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672720']
2019-08-15 17:58:44,813 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204872], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4668], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,813 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:44,860 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:44,860 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672720], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:44,860 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:44,885 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672721']
2019-08-15 17:58:44,885 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204873], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4642], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,885 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:44,932 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:44,932 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672721], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:44,932 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:44,957 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672722']
2019-08-15 17:58:44,958 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204874], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4641], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:44 PM]]
2019-08-15 17:58:44,958 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:45,005 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:45,005 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672722], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:45,005 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:45,031 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672724']
2019-08-15 17:58:45,031 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204876], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:45 PM]]
2019-08-15 17:58:45,031 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:45,078 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:45,078 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672724], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:45,079 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:45,104 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672725']
2019-08-15 17:58:45,105 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204877], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4129], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,64200], @param9=[THANHTIEN_DOANHTHU,64200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,64200], @param12=[BHYT_THANHTIEN,64200], @param13=[BHYT_DONGIA_CHITRA,64200], @param14=[BHYT_THANHTIEN_CHITRA,64200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:45 PM]]
2019-08-15 17:58:45,105 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:45,151 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:45,152 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672725], @param3=[DONGIA_DOANHTHU,64200], @param4=[BHYT_DONGIA,64200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:45,152 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:45,178 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672881']
2019-08-15 17:58:45,179 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204915], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4683], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,19200], @param9=[THANHTIEN_DOANHTHU,19200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,19200], @param12=[BHYT_THANHTIEN,19200], @param13=[BHYT_DONGIA_CHITRA,19200], @param14=[BHYT_THANHTIEN_CHITRA,19200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:45 PM]]
2019-08-15 17:58:45,179 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:45,232 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:45,232 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672881], @param3=[DONGIA_DOANHTHU,19200], @param4=[BHYT_DONGIA,19200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:45,233 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:45,257 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '673566']
2019-08-15 17:58:45,258 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,205093], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4747], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,27300], @param9=[THANHTIEN_DOANHTHU,27300], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,27300], @param12=[BHYT_THANHTIEN,27300], @param13=[BHYT_DONGIA_CHITRA,27300], @param14=[BHYT_THANHTIEN_CHITRA,27300], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 5:58:45 PM]]
2019-08-15 17:58:45,259 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 17:58:45,305 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 17:58:45,305 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,673566], @param3=[DONGIA_DOANHTHU,27300], @param4=[BHYT_DONGIA,27300], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 17:58:45,305 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 17:58:45,441 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 17:58:45,466 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 17:58:45,496 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 17:58:45,527 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 17:58:45,551 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 17:58:45,600 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:45,993 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:46,057 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:46,142 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:46,235 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:46,318 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:46,461 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:46,550 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:46,675 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:46,766 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:46,889 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:46,972 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:47,120 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:47,233 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:47,367 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:47,449 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:47,576 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:47,661 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:47,802 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:47,884 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:48,003 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 17:58:48,083 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 17:58:48,250 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:01:27,472 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:01:27,544 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:01:27,568 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:01:27,568 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:01:27,568 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:01:27,594 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:01:27,594 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:01:27,594 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:01:27,813 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:01:27,867 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:01:27,928 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:01:27,928 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:01:27,928 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:01:27,952 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:01:27,976 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:01:28,010 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:01:28,073 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:01:28,276 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:01:28,277 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:01:28,277 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:01:28,386 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:01:28,465 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:01:28,583 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:01:28,610 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:01:28,635 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:01:28,667 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:01:28,692 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:01:28,750 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:28,840 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:28,905 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:29,423 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:29,520 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:29,601 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:29,726 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:29,809 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:29,926 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:30,009 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:30,133 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:30,232 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:30,456 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:30,549 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:30,674 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:30,760 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:30,949 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:31,042 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:31,167 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:31,250 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:31,369 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:01:31,459 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:01:31,587 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:01:31,725 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:01:31,756 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:01:31,781 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
--------------------------------------------------------------------------------
2019-08-15 18:08:04,070 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 18:08:04,327 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 18:08:04,368 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 18:08:04,851 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:05,107 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 18:08:10,943 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 18:08:10,970 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 18:08:12,437 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 18:08:12,515 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 18:08:13,338 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 18:08:13,520 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 18:08:13,597 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 18:08:13,667 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 18:08:13,748 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 18:08:13,818 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 18:08:13,891 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 18:08:13,963 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 18:08:14,031 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 18:08:14,548 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 18:08:14,586 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 18:08:14,694 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 18:08:14,727 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 18:08:15,501 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 18:08:15,540 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 18:08:17,880 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 18:08:17,944 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 18:08:17,975 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 18:08:18,042 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 18:08:18,070 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 18:08:18,132 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 18:08:19,063 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:20,013 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 18:08:24,784 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 18:08:24,810 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 18:08:24,886 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:25,011 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:25,167 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 18:08:25,169 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 18:08:25,169 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 18:08:25,195 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 18:08:25,195 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 18:08:25,196 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 18:08:25,345 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:25,493 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:34,690 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:08:34,782 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 18:08:35,006 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 18:09:00,782 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:09:00,932 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'BIL11'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:09:01,801 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 18:11:04,763 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:11:04,921 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:11:04,959 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:11:04,959 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:11:04,960 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:11:04,984 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:11:04,984 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:11:04,984 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:11:05,192 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:11:05,245 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:11:05,280 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 18:11:05,326 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:11:05,326 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:11:05,326 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:11:05,357 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:11:05,381 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:11:05,417 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:11:05,547 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:11:05,599 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:11:05,600 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:11:05,600 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:11:05,699 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:11:05,782 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:11:05,913 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:11:05,938 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:11:05,970 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:11:06,083 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:11:06,109 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:11:06,215 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:06,353 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:06,543 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:06,626 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:06,720 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:06,804 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:06,939 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:07,021 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:07,148 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:07,231 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:07,386 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:07,472 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:07,607 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:07,692 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:07,814 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:07,897 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:08,020 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:08,103 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:08,231 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:08,315 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:08,464 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:08,546 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:08,784 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:11:09,172 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:11:09,208 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:11:09,233 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:11:11,623 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:11:11,892 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:11:55,639 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 18:11:55,834 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 18:11:57,753 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:11:57,840 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327']
2019-08-15 18:11:57,887 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327'                order by SOBHYT_HUONG_ID desc]
2019-08-15 18:11:57,914 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '670984']
2019-08-15 18:11:57,914 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204342], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,0], @param11=[BHYT_DONGIA,0], @param12=[BHYT_THANHTIEN,0], @param13=[BHYT_DONGIA_CHITRA,0], @param14=[BHYT_THANHTIEN_CHITRA,0], @param15=[BENHNHAN_PHAITHANHTOAN,33000], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,33000], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:57 PM]]
2019-08-15 18:11:57,914 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:57,940 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:57,940 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,670984], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,0], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:57,940 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:57,965 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671017']
2019-08-15 18:11:57,965 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204364], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:57 PM]]
2019-08-15 18:11:57,965 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:57,991 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:57,991 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,671017], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:57,991 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,016 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672718']
2019-08-15 18:11:58,017 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204870], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,017 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,042 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,042 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672718], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,042 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,068 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672719']
2019-08-15 18:11:58,068 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204871], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4722], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,069 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,095 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,095 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672719], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,095 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,120 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672720']
2019-08-15 18:11:58,121 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204872], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4668], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,121 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,147 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,147 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672720], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,147 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,172 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672721']
2019-08-15 18:11:58,172 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204873], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4642], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,172 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,199 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,200 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672721], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,200 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,224 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672722']
2019-08-15 18:11:58,225 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204874], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4641], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,225 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,251 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,252 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672722], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,252 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,276 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672724']
2019-08-15 18:11:58,277 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204876], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,277 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,303 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,304 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672724], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,304 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,329 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672725']
2019-08-15 18:11:58,330 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204877], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4129], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,64200], @param9=[THANHTIEN_DOANHTHU,64200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,64200], @param12=[BHYT_THANHTIEN,64200], @param13=[BHYT_DONGIA_CHITRA,64200], @param14=[BHYT_THANHTIEN_CHITRA,64200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,330 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,356 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,356 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672725], @param3=[DONGIA_DOANHTHU,64200], @param4=[BHYT_DONGIA,64200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,356 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,382 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672881']
2019-08-15 18:11:58,383 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204915], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4683], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,19200], @param9=[THANHTIEN_DOANHTHU,19200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,19200], @param12=[BHYT_THANHTIEN,19200], @param13=[BHYT_DONGIA_CHITRA,19200], @param14=[BHYT_THANHTIEN_CHITRA,19200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,384 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,410 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,410 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672881], @param3=[DONGIA_DOANHTHU,19200], @param4=[BHYT_DONGIA,19200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,411 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,436 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '673566']
2019-08-15 18:11:58,437 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,205093], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4747], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,27300], @param9=[THANHTIEN_DOANHTHU,27300], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,27300], @param12=[BHYT_THANHTIEN,27300], @param13=[BHYT_DONGIA_CHITRA,27300], @param14=[BHYT_THANHTIEN_CHITRA,27300], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:11:58 PM]]
2019-08-15 18:11:58,437 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:11:58,463 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:11:58,463 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,673566], @param3=[DONGIA_DOANHTHU,27300], @param4=[BHYT_DONGIA,27300], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:11:58,463 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:11:58,592 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:11:58,616 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:11:58,643 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:11:58,671 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:11:58,696 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:11:58,741 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:58,824 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:58,895 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:58,980 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:59,068 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:59,151 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:59,279 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:59,367 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:59,489 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:59,575 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:59,690 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:59,786 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:11:59,913 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:11:59,998 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:12:00,197 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:12:00,280 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:12:00,406 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:12:00,492 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:12:00,614 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:12:00,696 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:12:00,818 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:12:00,901 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:12:01,067 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:13:13,768 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:13:13,888 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:13:13,912 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:13:13,912 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:13:13,912 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:13:13,938 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:13:13,938 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:13:13,938 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:13:14,239 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:13:14,289 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:13:14,321 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:13:14,321 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:13:14,322 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:13:14,345 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:13:14,369 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:13:14,405 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:13:14,461 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:13:14,507 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:13:14,508 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:13:14,508 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:13:14,585 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:13:14,655 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:13:14,769 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:13:14,793 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:13:14,820 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:13:14,849 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:13:14,872 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:13:14,917 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:15,000 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:15,062 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:15,143 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:15,228 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:15,309 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:15,434 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:15,515 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:15,663 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:15,745 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:15,866 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:15,949 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:16,075 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:16,157 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:16,277 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:16,359 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:16,482 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:16,563 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:16,684 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:16,766 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:16,889 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:16,970 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:17,109 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:13:17,243 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:13:17,281 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:13:17,307 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:13:53,541 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 18:13:53,615 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 18:13:55,431 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:13:55,529 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327']
2019-08-15 18:13:55,576 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327'                order by SOBHYT_HUONG_ID desc]
2019-08-15 18:13:55,600 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '670984']
2019-08-15 18:13:55,601 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204342], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,0], @param11=[BHYT_DONGIA,0], @param12=[BHYT_THANHTIEN,0], @param13=[BHYT_DONGIA_CHITRA,0], @param14=[BHYT_THANHTIEN_CHITRA,0], @param15=[BENHNHAN_PHAITHANHTOAN,33000], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,33000], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,601 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,628 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,628 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,670984], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,0], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,628 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,653 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671017']
2019-08-15 18:13:55,653 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204364], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,653 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,679 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,679 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,671017], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,679 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,704 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672718']
2019-08-15 18:13:55,705 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204870], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,705 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,731 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,731 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672718], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,731 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,760 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672719']
2019-08-15 18:13:55,761 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204871], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4722], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,761 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,786 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,787 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672719], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,787 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,812 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672720']
2019-08-15 18:13:55,812 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204872], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4668], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,812 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,838 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,838 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672720], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,838 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,864 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672721']
2019-08-15 18:13:55,864 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204873], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4642], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,865 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,890 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,890 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672721], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,890 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,917 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672722']
2019-08-15 18:13:55,918 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204874], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4641], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,918 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,943 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,944 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672722], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,944 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:55,969 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672724']
2019-08-15 18:13:55,970 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204876], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:55 PM]]
2019-08-15 18:13:55,970 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:55,997 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:55,997 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672724], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:55,997 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:56,021 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672725']
2019-08-15 18:13:56,022 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204877], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4129], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,64200], @param9=[THANHTIEN_DOANHTHU,64200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,64200], @param12=[BHYT_THANHTIEN,64200], @param13=[BHYT_DONGIA_CHITRA,64200], @param14=[BHYT_THANHTIEN_CHITRA,64200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:56 PM]]
2019-08-15 18:13:56,022 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:56,064 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:56,064 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672725], @param3=[DONGIA_DOANHTHU,64200], @param4=[BHYT_DONGIA,64200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:56,065 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:56,090 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672881']
2019-08-15 18:13:56,090 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204915], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4683], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,19200], @param9=[THANHTIEN_DOANHTHU,19200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,19200], @param12=[BHYT_THANHTIEN,19200], @param13=[BHYT_DONGIA_CHITRA,19200], @param14=[BHYT_THANHTIEN_CHITRA,19200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:56 PM]]
2019-08-15 18:13:56,090 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:56,116 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:56,117 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672881], @param3=[DONGIA_DOANHTHU,19200], @param4=[BHYT_DONGIA,19200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:56,117 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:56,142 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '673566']
2019-08-15 18:13:56,142 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,205093], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4747], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,27300], @param9=[THANHTIEN_DOANHTHU,27300], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,27300], @param12=[BHYT_THANHTIEN,27300], @param13=[BHYT_DONGIA_CHITRA,27300], @param14=[BHYT_THANHTIEN_CHITRA,27300], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:13:56 PM]]
2019-08-15 18:13:56,142 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:13:56,168 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:13:56,168 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,673566], @param3=[DONGIA_DOANHTHU,27300], @param4=[BHYT_DONGIA,27300], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:13:56,168 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:13:56,267 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:13:56,291 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:13:56,317 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:13:56,345 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:13:56,372 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:13:56,422 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:56,509 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:56,581 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:56,662 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:56,757 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:56,839 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:56,970 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:57,052 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:57,176 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:57,261 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:57,385 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:57,467 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:57,592 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:57,675 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:57,796 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:57,880 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:58,002 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:58,099 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:58,223 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:58,305 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:58,437 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:13:58,520 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:13:58,693 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:14:48,447 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:14:48,520 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:14:48,544 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:14:48,544 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:14:48,544 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:14:48,568 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:14:48,568 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:14:48,568 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:14:48,781 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:14:48,832 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:14:48,868 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:14:48,869 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:14:48,869 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:14:48,893 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:14:48,917 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:14:48,949 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:14:49,020 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:14:49,211 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:14:49,211 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:14:49,211 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:14:49,305 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:14:49,377 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:14:49,495 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:14:49,519 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:14:49,545 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:14:49,574 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:14:49,598 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:14:49,670 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:49,756 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:49,824 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:49,906 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:49,996 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:50,077 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:50,201 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:50,283 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:50,406 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:50,489 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:50,647 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:50,730 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:50,843 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:50,926 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:51,062 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:51,144 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:51,271 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:51,357 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:51,481 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:51,567 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:51,688 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:14:51,771 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:14:51,910 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:14:52,045 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:14:52,079 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:14:52,103 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:15:09,074 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 18:15:09,146 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 18:15:23,508 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:15:23,588 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327']
2019-08-15 18:15:23,635 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327'                order by SOBHYT_HUONG_ID desc]
2019-08-15 18:15:23,659 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '670984']
2019-08-15 18:15:23,660 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204342], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,0], @param11=[BHYT_DONGIA,0], @param12=[BHYT_THANHTIEN,0], @param13=[BHYT_DONGIA_CHITRA,0], @param14=[BHYT_THANHTIEN_CHITRA,0], @param15=[BENHNHAN_PHAITHANHTOAN,33000], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,33000], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,660 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,686 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,686 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,670984], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,0], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,686 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:23,711 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671017']
2019-08-15 18:15:23,711 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204364], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,712 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,738 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,738 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,671017], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,738 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:23,764 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672718']
2019-08-15 18:15:23,764 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204870], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,765 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,789 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,790 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672718], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,790 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:23,815 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672719']
2019-08-15 18:15:23,816 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204871], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4722], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,816 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,843 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,843 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672719], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,843 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:23,869 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672720']
2019-08-15 18:15:23,869 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204872], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4668], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,870 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,894 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,894 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672720], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,894 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:23,919 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672721']
2019-08-15 18:15:23,920 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204873], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4642], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,920 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,945 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,945 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672721], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,945 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:23,969 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672722']
2019-08-15 18:15:23,970 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204874], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4641], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:23 PM]]
2019-08-15 18:15:23,970 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:23,996 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:23,996 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672722], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:23,997 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:24,022 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672724']
2019-08-15 18:15:24,023 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204876], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:24 PM]]
2019-08-15 18:15:24,023 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:24,051 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:24,052 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672724], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:24,052 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:24,079 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672725']
2019-08-15 18:15:24,079 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204877], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4129], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,64200], @param9=[THANHTIEN_DOANHTHU,64200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,64200], @param12=[BHYT_THANHTIEN,64200], @param13=[BHYT_DONGIA_CHITRA,64200], @param14=[BHYT_THANHTIEN_CHITRA,64200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:24 PM]]
2019-08-15 18:15:24,079 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:24,105 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:24,105 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672725], @param3=[DONGIA_DOANHTHU,64200], @param4=[BHYT_DONGIA,64200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:24,105 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:24,131 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672881']
2019-08-15 18:15:24,131 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204915], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4683], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,19200], @param9=[THANHTIEN_DOANHTHU,19200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,19200], @param12=[BHYT_THANHTIEN,19200], @param13=[BHYT_DONGIA_CHITRA,19200], @param14=[BHYT_THANHTIEN_CHITRA,19200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:24 PM]]
2019-08-15 18:15:24,131 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:24,157 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:24,157 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672881], @param3=[DONGIA_DOANHTHU,19200], @param4=[BHYT_DONGIA,19200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:24,157 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:24,182 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '673566']
2019-08-15 18:15:24,183 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,205093], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4747], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,27300], @param9=[THANHTIEN_DOANHTHU,27300], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,27300], @param12=[BHYT_THANHTIEN,27300], @param13=[BHYT_DONGIA_CHITRA,27300], @param14=[BHYT_THANHTIEN_CHITRA,27300], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:15:24 PM]]
2019-08-15 18:15:24,183 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:15:24,208 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:15:24,208 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,673566], @param3=[DONGIA_DOANHTHU,27300], @param4=[BHYT_DONGIA,27300], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:15:24,208 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:15:24,342 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:15:24,366 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:15:24,391 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:15:24,420 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:15:24,445 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:15:24,499 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:24,582 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:24,649 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:24,736 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:24,806 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:24,887 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:25,001 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:25,084 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:25,206 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:25,288 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:25,402 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:25,485 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:25,605 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:25,690 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:25,815 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:25,898 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:26,016 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:26,100 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:26,214 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:26,296 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:26,423 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:26,505 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:26,652 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:15:44,131 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:15:44,205 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:15:44,230 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:15:44,230 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:15:44,230 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:15:44,254 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:15:44,254 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:15:44,254 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:15:44,455 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:15:44,508 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:15:44,541 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:15:44,542 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:15:44,542 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:15:44,576 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:15:44,600 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:15:44,632 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:15:44,699 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:15:44,891 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:15:44,892 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:15:44,892 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:15:44,984 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:15:45,058 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:15:45,176 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:15:45,200 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:15:45,225 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:15:45,252 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:15:45,276 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:15:45,334 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:45,416 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:45,482 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:45,865 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:45,953 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:46,036 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:46,164 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:46,247 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:46,394 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:46,477 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:46,604 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:46,689 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:46,814 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:46,896 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:47,019 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:47,102 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:47,230 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:47,312 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:47,436 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:47,519 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:47,643 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:15:47,726 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:15:47,870 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:15:48,011 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:15:48,051 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:15:48,077 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:16:10,025 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 18:16:10,097 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 18:16:34,207 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
--------------------------------------------------------------------------------
2019-08-15 18:22:26,927 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = '_SYSTEM_' and TYPE = 'D']
2019-08-15 18:22:27,250 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = '_SYSTEM_' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 18:22:27,284 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = '_SYSTEM_')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = '_SYSTEM_' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 18:22:27,644 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_SCREEN.PAGE = 'LOGIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:22:27,840 [1] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = '_SYSTEM_'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 18:22:41,314 [1] DEBUG - Statement Id: [DAO00001_DBList] PreparedStatement : [select *              from TM_SYS_SERVER              where HOSPITAL_ID = 'HLU01' and TYPE = 'D']
2019-08-15 18:22:41,341 [1] DEBUG - Statement Id: [DAO00001_DaoList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC              on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              where HOSPITAL_ID = 'HLU01' AND TYPE = 'D' AND ACTIVE = '1'              order by DB_NAME]
2019-08-15 18:22:42,756 [1] DEBUG - Statement Id: [DAO00001_ServiceList] PreparedStatement : [select              TM_SYS_SERVICEMAP.ID,              TM_SYS_SERVICEMAP.HOSPITAL_ID,              TM_SYS_SERVICEMAP.DB_NAME,              TM_SYS_SERVICEMAP.TYPE,              TM_SYS_SERVICEMAP.NAME,              TM_SYS_SERVICEMAP.CLASS,              (TM_SYS_DIC.VALUE + '.' + TM_SYS_SERVICEMAP.CLASS) as CLASSFULL,              TM_SYS_SERVICEMAP.ASSEMBLY,              TM_SYS_SERVER.URL              from TM_SYS_SERVICEMAP              inner join TM_SYS_DIC on TM_SYS_SERVICEMAP.NAMESPACE = TM_SYS_DIC.ID              inner join TM_SYS_SERVER on (TM_SYS_SERVICEMAP.DB_NAME = TM_SYS_SERVER.NAME) and (TM_SYS_SERVER.HOSPITAL_ID = 'HLU01')              where TM_SYS_SERVICEMAP.HOSPITAL_ID = 'HLU01' AND TM_SYS_SERVICEMAP.TYPE = 'S'  AND ACTIVE = '1'              order by URL]
2019-08-15 18:22:42,842 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1']
2019-08-15 18:22:43,606 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM005']
2019-08-15 18:22:43,729 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM015']
2019-08-15 18:22:43,804 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM067']
2019-08-15 18:22:43,874 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM008']
2019-08-15 18:22:43,944 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM068']
2019-08-15 18:22:44,014 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM006']
2019-08-15 18:22:44,094 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM030']
2019-08-15 18:22:44,164 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM025']
2019-08-15 18:22:44,234 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM024']
2019-08-15 18:22:44,742 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM033']
2019-08-15 18:22:44,778 [5] DEBUG - Statement Id: [DAO00027_GetListDuocKyGuiTonKho] PreparedStatement : [select  distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,TM_DUOC.PHAMVI,        TM_DUOC.TENHOATCHAT, TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,TT_TONKHO.SOLUONG, TT_TONKHO.NGUONDUOC_ID, NH.TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID,A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_KYGUI_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(A.NGUONDUOC_ID), A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID)        TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' AND TT_TONKHO.SOLUONG >= 0]
2019-08-15 18:22:44,847 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM018']
2019-08-15 18:22:44,877 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKho] PreparedStatement : [select distinct TT_TONKHO.DUOC_KEY, LTRIM(TT_TONKHO.KHODUOC_ID) as KHODUOC_ID, TM_DUOC.DUOC_ID, TM_LOAIDUOC.MALOAIDUOC,TM_DUOC.SOVISA,TM_DUOC.TYLE_VAT,TM_DUOC.COTOA,        TM_DUOC.MADUOC, TM_DUOC.TENHANG, TM_DUOC.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH,  TM_DUOC.DONVITINH_ID,TM_DUOC.BHYT,                TM_DUOC.TENHOATCHAT,          TM_DUOC.HAMLUONG, TM_DUOC.HANGSANXUAT, TM_DUOC.QUOCGIA, TM_DUOC.LOAIDUOC_ID, TM_DUOC.DUONGDUNG_ID,        TM_TENDUOC.TENDUOC, TM_TENDUOC.TENDUOC_EN, TM_TENDUOC.MAQUOCTE, TM_TENDUOC.MAQUOCTEBT,        TM_LOAIDUOC.LOAIVATTU_ID, TM_DUOC.BENHVIEN_ID,        TT_TONKHO.SOLUONG, TM_DUOC.VTYT_PHANLOAI, TM_DUOC.PHAMVI, TT_TONKHO.NGUONDUOC_ID, NG.TENNGUONDUOC AS TENNGUONDUOC        , TAMNGUNG = CASE WHEN TM_DUOC.TAMNGUNG = '1' OR NG.TAMNGUNG = '1' OR KD.TAMNGUNG = '1' THEN '1' ELSE '0' END        , TM_DUOC.DANGTRINHBAY        from TM_DUOC        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = TM_DUOC.DONVITINH_ID        left join TM_TENDUOC on TM_DUOC.TENDUOC_ID = TM_TENDUOC.TENDUOC_ID and TM_DUOC.BENHVIEN_ID = 'HLU01' and TM_DUOC.TAMNGUNG = '0'        left join TM_LOAIDUOC on TM_LOAIDUOC.LOAIDUOC_ID = TM_DUOC.LOAIDUOC_ID and TM_LOAIDUOC.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG on (TM_LOAIDUOC.LOAIVATTU_ID = TM_DUOC_HANDUNG.LOAIDUOC and TM_DUOC_HANDUNG.BENHVIEN_ID = 'HLU01')        inner join        (select LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')) as DUOC_KEY, A.KHODUOC_ID, A.DUOC_ID, A.NGUONDUOC_ID,        SUM(isnull(A.SOLUONG,0)) as SOLUONG        from        (select SUM(SOLUONG) as SOLUONG, KHODUOC_ID, DUOC_ID, NGUONDUOC_ID from TT_DUOC_TONKHO        where BENHVIEN_ID = 'HLU01' group by KHODUOC_ID, DUOC_ID, NGUONDUOC_ID) A        group by LTRIM(A.KHODUOC_ID) + '_' + LTRIM(A.DUOC_ID) + '_' + LTRIM(ISNULL(A.NGUONDUOC_ID,'')), A.KHODUOC_ID, A.DUOC_ID, NGUONDUOC_ID        ) TT_TONKHO on TT_TONKHO.DUOC_ID = TM_DUOC.DUOC_ID        LEFT JOIN TM_NGUONHANG NG ON NG.NGUONDUOC_ID = TT_TONKHO.NGUONDUOC_ID        LEFT JOIN TM_KHODUOC KD ON KD.KHODUOC_ID = TT_TONKHO.KHODUOC_ID        where TM_DUOC.BENHVIEN_ID = 'HLU01' and TT_TONKHO.SOLUONG >= 0]
2019-08-15 18:22:45,833 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM023']
2019-08-15 18:22:45,864 [5] DEBUG - Statement Id: [DAO00027_GetListDuocTonKhoVaBooking] PreparedStatement : [declare @TOAMUANGOAI int = 0;        select @TOAMUANGOAI = isnull(VALUE,0) from TM_SYS_APPSETTINGS where CODE = 'OPD_TOAMUANGOAI_DUNGDANHMUC_DUOC'                if @TOAMUANGOAI = 1        begin        select  distinct '0' + '_' + LTRIM(d.DUOC_ID) + '_' + '0' as DUOC_KEY, 0 as PHAMVI_ID, 0 as NGUONDUOC_ID, null as TENNGUONDUOC, null as TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        '' as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        999999999 as SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        union all        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, dvt.TENDONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0         end                else        begin        select  distinct tk.DUOC_KEY, LTRIM(tk.PHAMVI_ID) as PHAMVI_ID, tk.NGUONDUOC_ID, nh.TENNGUONDUOC, nh.TINHTIEN, d.DUOC_ID, ld.MALOAIDUOC,        d.SOVISA,d.TYLE_VAT,d.COTOA, d.MADUOC, d.TENHANG, d.TENDUOCDAYDU, d.DONVITINH as DONVITINH, d.BHYT,        d.TENHOATCHAT, d.HAMLUONG, d.HANGSANXUAT, d.QUOCGIA, d.LOAIDUOC_ID, d.DUONGDUNG_ID, d.TINHTIEN_PTTT,        ten.TENDUOC, ten.TENDUOC_EN, ten.MAQUOCTE, ten.MAQUOCTEBT,        CASE WHEN d.BHYT = '1' THEN 'BHYT' ELSE '' END as BHYT_TEXT        , ld.LOAIVATTU_ID        , d.BENHVIEN_ID,        tk.SOLUONG, d.VTYT_PHANLOAI, d.PHAMVI, d.SUASOLUONGTONGHOP, d.MADUOCBV, d.DANGTRINHBAY        , TAMNGUNG = CASE WHEN d.TAMNGUNG = '1' OR nh.TAMNGUNG = '1' OR kd.TAMNGUNG = '1' THEN '1' ELSE '0' END        from TM_DUOC d        left join TM_DONVITINH dvt on dvt.DONVITINH_ID = d.DONVITINH_ID        left join TM_TENDUOC ten on d.TENDUOC_ID = ten.TENDUOC_ID        left join TM_LOAIDUOC ld on ld.LOAIDUOC_ID = d.LOAIDUOC_ID and ld.BENHVIEN_ID = 'HLU01'        left join TM_DUOC_HANDUNG hd on (ld.LOAIVATTU_ID = hd.LOAIDUOC  and hd.BENHVIEN_ID = 'HLU01')        inner join        (        select  LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')) DUOC_KEY, (SUM(dtk.SOLUONG) - isnull(sum(A.SOLUONG),0) - isnull(sum(B.SOLUONG),0)) SOLUONG, pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        from (select sum(soluong) soluong,duoc_id,nguonduoc_id,khoduoc_id,benhvien_id from TT_DUOC_TONKHO  group by duoc_id,nguonduoc_id,khoduoc_id,benhvien_id) dtk        inner join TM_DUOC_PHAMVISD_MAPPING pvsd on dtk.KHODUOC_ID = pvsd.KHODUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NOITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) B on B.DUOC_ID = dtk.DUOC_ID and B.SOLUONG > 0 and B.PHAMVI_ID = pvsd.PHAMVI_ID and B.NGUONHANG_ID = dtk.NGUONDUOC_ID        left join (select sum(SOLUONG) SOLUONG, PHAMVI_ID, DUOC_ID, NGUONHANG_ID from  TT_DUOC_TONKHO_BOOK_NGOAITRU where TRANGTHAI != 'HUY'        group by  PHAMVI_ID, DUOC_ID, NGUONHANG_ID) A on A.DUOC_ID = dtk.DUOC_ID and A.SOLUONG > 0 and A.PHAMVI_ID = pvsd.PHAMVI_ID and A.NGUONHANG_ID = dtk.NGUONDUOC_ID        where dtk.SOLUONG > 0 and dtk.BENHVIEN_ID = 'HLU01'        group by LTRIM(pvsd.PHAMVI_ID)  + '_' + LTRIM(dtk.DUOC_ID) + '_' + LTRIM(ISNULL(dtk.NGUONDUOC_ID,'')), pvsd.PHAMVI_ID, dtk.NGUONDUOC_ID, dtk.DUOC_ID        ) tk on tk.DUOC_ID = d.DUOC_ID        left join TM_DUOC_PHAMVISUDUNG kd on kd.PHAMVI_ID = tk.PHAMVI_ID and kd.BENHVIEN_ID = 'HLU01'        left join TM_NGUONHANG nh on nh.NGUONDUOC_ID = tk.NGUONDUOC_ID and nh.BENHVIEN_ID = 'HLU01'        where d.BENHVIEN_ID = 'HLU01'  and tk.SOLUONG >= 0        end]
2019-08-15 18:22:47,759 [5] DEBUG - Statement Id: [DAO00320_GetList] PreparedStatement : [select M.*            from TM_MAU M            LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID            where            M.TAMNGUNG = '0'            and M.BENHVIEN_ID = 'HLU01'            order by M.TENMAU]
2019-08-15 18:22:47,821 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM071']
2019-08-15 18:22:47,890 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoForCreateCached] PreparedStatement : [SELECT DISTINCT          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,          SUM(tk.SOLUONG) AS SOLUONG,K.TENKHO,DVT.TENDONVITINH          FROM TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          JOIN TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          JOIN TM_MAU M on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID          WHERE TK.SOLUONG > 0          GROUP BY TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID,          TK.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT,TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID, M.DONVITINH_ID,K.TENKHO,DVT.TENDONVITINH]
2019-08-15 18:22:47,959 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM073']
2019-08-15 18:22:47,992 [5] DEBUG - Statement Id: [DAO00322_GetListMauTonKhoTruBooking] PreparedStatement : [select distinct          TK.MAU_KEY, TK.KHOMAU_ID, M.MAU_ID, M.MAMAU, M.TENMAU, M.NHOM_ABO, M.NHOM_RH, M.LOAIMAU_ID, M.DONVITINH_ID,          TK.SOLONHAP_ID, TK.SOLONHAP, TK.SOKIEMSOAT,M.PHAMVI, TK.NGUONHANG_ID, NG.TENNGUONMAU, M.BENHVIEN_ID,          TK.SOLUONG,TK.TENKHO,DVT.TENDONVITINH          from TM_MAU M          JOIN          (          select          A.MAU_KEY, A.KHOMAU_ID, A.MAU_ID ,a.NGUONHANG_ID, A.SOLONHAP_ID, A.SOLONHAP, A.SOKIEMSOAT, A.SOLUONG,A.TENKHO          from          (          select KHOMAU_ID, TK.MAU_ID, TK.NGUONHANG_ID, TK.MAU_KEY, SLN.SOLONHAP_ID, SLN.SOLONHAP, SLN.SOKIEMSOAT, ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) as SOLUONG,K.TENKHO          from TT_MAU_TONKHO TK          JOIN TM_KHO K ON TK.KHOMAU_ID = K.KHO_ID          inner join TT_MAU_CHUNGTU_SOLONHAP SLN ON TK.SOLONHAP_ID = SLN.SOLONHAP_ID          left join dbo.TT_MAU_TONKHO_BOOK book ON book.MAU_KEY = TK.MAU_KEY AND book.TRANGTHAI = 'HIEULUC'          where ISNULL(TK.SOLUONG,0) - ISNULL(book.SOLUONG,0) > 0          ) A          )TK on TK.MAU_ID = M.MAU_ID and M.TAMNGUNG = '0'          LEFT JOIN TM_MAU_DONVITINH DVT on M.DONVITINH_ID=DVT.DONVITINH_ID          LEFT JOIN TM_NGUONMAU NG ON NG.NGUONMAU_ID = TK.NGUONHANG_ID]
2019-08-15 18:22:48,060 [5] DEBUG - Statement Id: [DAO00003_CacheList] PreparedStatement : [select *              from TM_SYS_CACHE              where HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_CACHE.ACTIVE = '1'               AND                   TM_SYS_CACHE.DAO_ID = 'COM072']
2019-08-15 18:22:48,992 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MAIN'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:22:49,895 [1] DEBUG - Statement Id: [DAO00002_FormList] PreparedStatement : [select              TM_SYS_FORM.HOSPITAL_ID,              TM_SYS_FORM.NAME,              TM_SYS_FORM.CLASS,              TM_SYS_FORM.ASSEMBLY,              TM_SYS_FORM.TITLE_VI as TITLE              from TM_SYS_FORM              where HOSPITAL_ID = 'HLU01']
2019-08-15 18:22:54,774 [1] DEBUG - Statement Id: [DAO00300_GetShortcutListByUserID] PreparedStatement : [SELECT S.SHORTCUT_CODE, S.SHORTCUT_VALUE              FROM TM_SHORTCUT AS S              WHERE S.BENHVIEN_ID = 'HLU01' AND S.USER_ID = '1' AND TAMNGUNG = '0']
2019-08-15 18:22:54,806 [1] DEBUG - Statement Id: [DAO00087_GetList] PreparedStatement : [select CODE, VALUE, BENHVIEN_ID              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01'              order by SETTING_ID]
2019-08-15 18:22:54,892 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG01'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:22:55,014 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MSG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:22:55,139 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] PreparedStatement : [select A.*, B.TENKHO , C.TENPHONGBAN, B.MAKHO, C.MAPHONGBAN          from TM_SYS_USERS A          left join TM_KHODUOC B on B.KHODUOC_ID = A.INVENTORY_ID          left join TM_PHONGBAN C on (C.PHONGBAN_ID = A.WORKING_DEPT_ID and C.BENHVIEN_ID =  @param0 )          left join TM_SYS_USERKHO D on (D.ACCOUNT_ID = A.ACCOUNT_ID and D.HOSPITAL_ID =  @param0 )          where          A.HOSPITAL_ID =  @param0            and                 A.ACCOUNT_ID =  @param1]
2019-08-15 18:22:55,141 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 18:22:55,142 [1] DEBUG - Statement Id: [DAO00008_GetUserSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 18:22:55,169 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] PreparedStatement : [select A.*, B.TENKHO, B.MAKHO, B.LOAIKHO_ID, B.KHOQUANLY_ID          from TM_SYS_USERKHO A          left join TM_KHO B on B.MODULE_ID = A.MODULE_ID and B.KHO_ID = A.KHO_ID          where A.HOSPITAL_ID =  @param0  and A.ACCOUNT_ID =  @param1           order by B.TENKHO]
2019-08-15 18:22:55,169 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Parameters: [@param0=[HOSPITAL_ID,HLU01], @param1=[ACCOUNT_ID,113]]
2019-08-15 18:22:55,169 [1] DEBUG - Statement Id: [DAO00008_GetUserInvSettings] Types: [@param0=[String, System.String], @param1=[String, System.String]]
2019-08-15 18:22:55,317 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM30'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:22:55,483 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'RIS04'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:23:02,842 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'MENU1'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:23:02,924 [1] DEBUG - Statement Id: [DAO00011_GetList] PreparedStatement : [select              TM_SYS_MENU.ID,              TM_SYS_MENU.PARENTID,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.DESCRIPTION,              TM_SYS_MENU.TYPE,              TM_SYS_MENU.TITLE_VI as TITLE              from TM_SYS_MENU              where TM_SYS_MENU.HOSPITAL_ID = 'HLU01' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             order by TM_SYS_MENU.ORDERNUM]
2019-08-15 18:23:03,145 [1] DEBUG - Statement Id: [DAO00011_usermenu_list] PreparedStatement : [select              TM_SYS_HOMEMENU.MENUID as ID,              TM_SYS_MENU.TITLE_VI as TITLE,              TM_SYS_MENU.SCREEN,              TM_SYS_MENU.SMALLIMAGE,              TM_SYS_MENU.LARGEIMAGE,              TM_SYS_MENU.TYPE              from TM_SYS_HOMEMENU              left join TM_SYS_MENU on TM_SYS_MENU.ID = TM_SYS_HOMEMENU.MENUID and TM_SYS_MENU.HOSPITAL_ID = TM_SYS_HOMEMENU.HOSPITAL_ID              where TM_SYS_HOMEMENU.HOSPITAL_ID = 'HLU01' and TM_SYS_HOMEMENU.USERID = '113' and TM_SYS_MENU.ACTIVE = '1'               AND                   (TM_SYS_MENU.TYPE & '8' = '8')                             ORDER BY TM_SYS_HOMEMENU.ORDERNUM]
2019-08-15 18:23:09,230 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM31'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:23:09,375 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'BIL11'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:23:10,397 [1] DEBUG - Statement Id: [DAO00012_GetList] PreparedStatement : [select        DICTIONARY_ID,        DICTIONARY_CODE,        DICTIONARY_NAME,        ATTRIBUTE1,        ATTRIBUTE2,        DICTIONARY_NAME_EN        from LST_DICTIONARY        where LST_DICTIONARY.Enabled = '1'         AND           LST_DICTIONARY.DICTIONARY_TYPE_CODE = 'NguonBN'                 order by LST_DICTIONARY.IDX]
2019-08-15 18:23:25,838 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:23:25,971 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:23:25,998 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:23:25,998 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:23:25,998 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:23:26,022 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:23:26,022 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:23:26,022 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:23:26,226 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:23:26,277 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:23:26,312 [1] DEBUG - Statement Id: [DAO00087_GetServiceParams] PreparedStatement : [select CODE, VALUE              from TM_SYS_APPSETTINGS              where LOCKED = '0' and BENHVIEN_ID = 'HLU01']
2019-08-15 18:23:26,356 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:23:26,356 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:23:26,356 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:23:26,391 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:23:26,428 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:23:26,468 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:23:26,575 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:23:26,633 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:23:26,633 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:23:26,633 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:23:26,725 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:23:26,802 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:23:26,915 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:23:26,941 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:23:26,969 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:23:27,091 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:23:27,119 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:23:27,244 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:27,374 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:27,560 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:27,651 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:27,751 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:27,832 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:27,948 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:28,031 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:28,153 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:28,235 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:28,360 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:28,443 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:28,573 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:28,654 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:28,783 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:28,869 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:28,983 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:29,065 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:29,189 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:29,271 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:29,396 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:23:29,479 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:23:29,717 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:23:30,074 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:23:30,107 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:23:30,132 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:23:35,573 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'REG02'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:23:35,867 [1] DEBUG - Statement Id: [DAO00002_ScreenList] PreparedStatement : [select TM_SYS_SCREEN.*                             from TM_SYS_SCREEN                             where TM_SYS_SCREEN.HOSPITAL_ID = 'HLU01'               AND                   TM_SYS_SCREEN.PAGE = 'COM98'                             order by TM_SYS_SCREEN.ID, TM_SYS_SCREEN.PARENTNAME, TM_SYS_SCREEN.TABINDEX]
2019-08-15 18:24:29,386 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 18:24:29,505 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 18:24:34,921 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:24:39,654 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] PreparedStatement : [update TT_TIEPNHAN set        CHANDOANNGT =  @param0 ,        ICDNOIGIOITHIEU_ID =  @param1 ,        LYDOCHUYENVIEN_ID =  @param2 ,        NOIGIOITHIEU_ID =  @param3 ,        HINHTHUCCHUYENVIEN_ID =  @param4 ,        THOIGIANCHUYENTUYEN =  @param5 ,        SOCHUYENVIEN =  @param6         where TIEPNHAN_ID = '27327']
2019-08-15 18:24:39,654 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] Parameters: [@param0=[CHANDOANNGT,], @param1=[ICDNOIGIOITHIEU_ID,null], @param2=[LYDOCHUYENVIEN_ID,null], @param3=[NOIGIOITHIEU_ID,null], @param4=[HINHTHUCCHUYENVIEN_ID,null], @param5=[THOIGIANCHUYENTUYEN,null], @param6=[SOCHUYENVIEN,]]
2019-08-15 18:24:39,654 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] Types: [@param0=[String, System.String], @param1=[System.DBNull, null], @param2=[System.DBNull, null], @param3=[System.DBNull, null], @param4=[System.DBNull, null], @param5=[System.DBNull, null], @param6=[String, System.String]]
2019-08-15 18:24:40,977 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327']
2019-08-15 18:24:41,025 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327'                order by SOBHYT_HUONG_ID desc]
2019-08-15 18:24:41,051 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '670984']
2019-08-15 18:24:41,051 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204342], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,0], @param11=[BHYT_DONGIA,0], @param12=[BHYT_THANHTIEN,0], @param13=[BHYT_DONGIA_CHITRA,0], @param14=[BHYT_THANHTIEN_CHITRA,0], @param15=[BENHNHAN_PHAITHANHTOAN,33000], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,33000], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,051 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,079 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,079 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,670984], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,0], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,079 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,105 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671017']
2019-08-15 18:24:41,105 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204364], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,105 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,132 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,133 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,671017], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,133 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,159 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672718']
2019-08-15 18:24:41,160 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204870], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,160 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,186 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,186 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672718], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,186 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,210 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672719']
2019-08-15 18:24:41,211 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204871], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4722], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,211 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,237 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,237 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672719], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,237 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,263 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672720']
2019-08-15 18:24:41,263 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204872], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4668], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,263 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,290 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,290 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672720], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,291 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,316 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672721']
2019-08-15 18:24:41,317 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204873], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4642], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,317 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,342 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,342 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672721], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,342 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,368 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672722']
2019-08-15 18:24:41,369 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204874], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4641], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,369 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,395 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,395 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672722], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,395 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,420 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672724']
2019-08-15 18:24:41,420 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204876], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,420 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,447 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,447 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672724], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,447 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,471 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672725']
2019-08-15 18:24:41,471 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204877], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4129], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,64200], @param9=[THANHTIEN_DOANHTHU,64200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,64200], @param12=[BHYT_THANHTIEN,64200], @param13=[BHYT_DONGIA_CHITRA,64200], @param14=[BHYT_THANHTIEN_CHITRA,64200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,471 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,497 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,497 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672725], @param3=[DONGIA_DOANHTHU,64200], @param4=[BHYT_DONGIA,64200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,497 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,522 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672881']
2019-08-15 18:24:41,522 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204915], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4683], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,19200], @param9=[THANHTIEN_DOANHTHU,19200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,19200], @param12=[BHYT_THANHTIEN,19200], @param13=[BHYT_DONGIA_CHITRA,19200], @param14=[BHYT_THANHTIEN_CHITRA,19200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,522 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,547 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,547 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672881], @param3=[DONGIA_DOANHTHU,19200], @param4=[BHYT_DONGIA,19200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,547 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,571 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '673566']
2019-08-15 18:24:41,571 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,205093], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4747], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,27300], @param9=[THANHTIEN_DOANHTHU,27300], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,27300], @param12=[BHYT_THANHTIEN,27300], @param13=[BHYT_DONGIA_CHITRA,27300], @param14=[BHYT_THANHTIEN_CHITRA,27300], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:24:41 PM]]
2019-08-15 18:24:41,571 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:24:41,598 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:24:41,598 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,673566], @param3=[DONGIA_DOANHTHU,27300], @param4=[BHYT_DONGIA,27300], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:24:41,598 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:24:41,746 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:24:41,773 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:24:41,803 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:24:41,840 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:24:41,866 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:24:41,912 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:41,997 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:42,059 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:42,140 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:42,215 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:42,297 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:42,425 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:42,507 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:42,628 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:42,710 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:42,834 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:42,916 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:43,045 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:43,128 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:43,248 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:43,330 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:43,454 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:43,536 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:43,657 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:43,739 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:43,863 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:24:43,944 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:24:44,099 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:25:31,620 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:25:31,692 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_GetList_DSDichVuChuaThuTien] PreparedStatement : [SELECT TOP 1 VIENPHI_ID              FROM TT_VIENPHI              WHERE              DATHANHTOAN = 0]
2019-08-15 18:25:31,716 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] PreparedStatement : [select isnull(TRANGTHAI, '') TRANGTHAI from TT_NOITRU_BENHAN where BENHAN_ID =  @param0]
2019-08-15 18:25:31,716 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Parameters: [@param0=[BENHAN_ID,5849]]
2019-08-15 18:25:31,716 [1] DEBUG - Statement Id: [DAO00067_laytrangthaibenhannoitru] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:25:31,749 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] PreparedStatement : [delete from TT_VIENPHI where TIEPNHAN_ID = 27327 and REF_ID = 0             and               BENHAN_ID = '5849'                         update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_DVYEUCAU' and TIEPNHAN_ID =  @param0             and not exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_VIENPHI.REF_ID = DVYEUCAU_ID and TIEPNHAN_ID =  @param0 )                           update TT_VIENPHI set SOLUONG = 0            where REF_TABLE = 'TT_NGOAITRU_TOATHUOC'            and TIEPNHAN_ID =  @param0             and HOADON_ID is null and TIEPNHAN_ID =  @param0             and not exists (select TOATHUOC_ID from TT_NGOAITRU_TOATHUOC where TT_VIENPHI.REF_ID = TOATHUOC_ID and TIEPNHAN_ID =  @param0 )                              update TT_VIENPHI              set SOLUONG = (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)              from (select distinct nttt.SOLUONG, ttct.TOATHUOC_ID, ttct.DUOC_ID , ttct.SOLUONG SOLUONG_NGUNG              from TT_NOITRU_TRATHUOC_CHITIET ttct              left join TT_NOITRU_TRATHUOC tt on tt.TRATHUOC_ID = ttct.TRATHUOC_ID              left join TT_NOITRU_TOATHUOC nttt on nttt.TOATHUOC_ID = ttct.TOATHUOC_ID              where tt.BENHAN_ID =  @param1 ) TraThuoc              where TT_VIENPHI.REF_ID = TraThuoc.TOATHUOC_ID and TT_VIENPHI.DUOC_ID = TraThuoc.DUOC_ID              and TT_VIENPHI.REF_TABLE = 'TT_NOITRU_TOATHUOC' and TT_VIENPHI.BENHAN_ID =  @param1               and TT_VIENPHI.SOLUONG > (TraThuoc.SOLUONG - TraThuoc.SOLUONG_NGUNG)                             update TT_VIENPHI set SOLUONG = 0              where REF_TABLE = 'TT_NOITRU_TOATHUOC'              and TIEPNHAN_ID =  @param0               and KHAMBENH_ID not in (select KHAMBENH_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 )              and HOADON_ID is null and BENHAN_ID =  @param1                        delete TT_DUOC_TONKHO_BOOK_NOITRU where REF_TABLE = 'TT_NOITRU_TOATHUOC' and (REF_ID is null or REF_ID = 0)          delete TT_DUOC_TONKHO_BOOK_NGOAITRU where REF_ID is null or REF_ID = 0                                  update TT_VIENPHI            set BENHAN_ID =  @param1             from (select TOATHUOC_ID from TT_NOITRU_TOATHUOC where TIEPNHAN_ID =  @param0 ) nttt            where REF_TABLE = 'TT_NOITRU_TOATHUOC' and REF_ID = nttt.TOATHUOC_ID and isnull(BENHAN_ID, 0) = 0            and TIEPNHAN_ID =  @param0               update TT_VIENPHI            set TT_VIENPHI.BENHAN_ID =  @param1             from (select DVYEUCAU_ID, BENHAN_ID from TT_DVYEUCAU where TIEPNHAN_ID =  @param0 ) nttt            where TT_VIENPHI.REF_TABLE = 'TT_DVYEUCAU' and TT_VIENPHI.REF_ID = nttt.DVYEUCAU_ID            and isnull(TT_VIENPHI.BENHAN_ID, 0) = 0 and isnull(nttt.BENHAN_ID, 0) > 0            and TT_VIENPHI.TIEPNHAN_ID =  @param0                                   update TT_VIENPHI set            THANHTIEN_DOANHTHU = 0, BHYT_THANHTIEN = 0, BHYT_THANHTIEN_CHITRA = 0            , GIATRI_BENHNHAN_DATHANHTOAN = 0, BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = 27327 and SOLUONG = 0             and               BENHAN_ID = 5849                           update TT_VIENPHI set            GIATRI_BENHNHAN_DATHANHTOAN = 0            where TIEPNHAN_ID = '27327' and GIATRI_BENHNHAN_DATHANHTOAN is null              update TT_VIENPHI set            BENHNHAN_PHAITHANHTOAN = 0            where TIEPNHAN_ID = '27327' and BENHNHAN_PHAITHANHTOAN is null]
2019-08-15 18:25:31,749 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849]]
2019-08-15 18:25:31,749 [1] DEBUG - Statement Id: [DAO00067_ClearDataVienPhi] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64]]
2019-08-15 18:25:31,954 [1] DEBUG - Statement Id: [DAO00064_GetlistTT_TIEPNHAN_SOTHEBHYT] PreparedStatement : [select stbhyt.*, ba.SOBENHAN,         tn.SOTIEPNHAN, tn.LOAITHANHVIEN_ID, tn.THE_ID, tn.THANHVIEN_ID,        tn.SUDUNG_BHTN, tn.BAOLANH_VIENPHI, tn.VIP, tn.NGUOINUOCNGOAI        from TT_TIEPNHAN_SOTHEBHYT stbhyt        left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        left join TT_NOITRU_BENHAN ba on ba.TIEPNHAN_ID = stbhyt.TIEPNHAN_ID        where         stbhyt.TIEPNHAN_ID = '27327' and isnull(stbhyt.KHONGSUDUNG, '0') = '0'         and           ba.BENHAN_ID = '5849']
2019-08-15 18:25:32,023 [1] DEBUG - Statement Id: [DAO00064_GetListVienPhiByTiepNnan] PreparedStatement : [select distinct        B.DOITUONG_ID, B.NGAYMIENDONGCHITRA, B.BENHNHAN_ID as TIEPNHAN_BENHNHAN_ID, B.TRAITUYEN,        B.BHYTTREN3NAM as TREN3NAM, B.BHYTTREN5NAM as TREN5NAM, B.SOTIEPNHAN, B.SOBENHAN,        B.LOAITHANHVIEN_ID, B.SUDUNG_BHTN, B.THE_ID, B.THANHVIEN_ID, B.BAOLANH_VIENPHI, B.VIP, B.NGUOINUOCNGOAI,        C.GIATRIMIENGIAM as GIATRIMIENGIAM, D.GIATRIMIENGIAM as GIATRIMIENGIAM_BHTN, E.GIATRIMIENGIAM as GIATRIMIENGIAM_THANHVIEN,        F.GIATRIMIENGIAM as GIATRIMIENGIAM_CONGTY, DVYC.THE_ID as DVDUNGTHE, DVYC.TRANGTHAI as TRANGTHAIDICHVU, ndv.MANHOMDICHVU,        A.* from TT_VIENPHI A        left join        (select B.*, C.SOBENHAN, C.BENHAN_ID        from TT_TIEPNHAN B        left join TT_NOITRU_BENHAN C on B.TIEPNHAN_ID = C.TIEPNHAN_ID         and           C.BENHAN_ID = '5849'                 where B.TIEPNHAN_ID = '27327') B on B.TIEPNHAN_ID = A.TIEPNHAN_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM'        and exists (select MIENGIAM_ID from TT_MIENGIAM where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) C on C.REF_TABLE = 'TT_MIENGIAM' and C.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_BHTN'        and exists (select MIENGIAM_BHTN_ID from TT_MIENGIAM_BHTN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_BHTN_ID and  TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) D on D.REF_TABLE = 'TT_MIENGIAM_BHTN' and D.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        and exists (select MIENGIAM_THANHVIEN_ID from TT_MIENGIAM_THANHVIEN where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_THANHVIEN_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) E on E.REF_TABLE = 'TT_MIENGIAM_THANHVIEN' and E.VIENPHI_ID = A.VIENPHI_ID        left join (select sum(GIATRIMIENGIAM) as GIATRIMIENGIAM, VIENPHI_ID, REF_TABLE        from TT_MIENGIAM_CHITIET        where REF_TABLE = 'TT_MIENGIAM_CONGTY'        and exists (select MIENGIAM_CONGTY_ID from TT_MIENGIAM_CONGTY where TT_MIENGIAM_CHITIET.MIENGIAM_ID = MIENGIAM_CONGTY_ID and TINHTRANG = 1 and TIEPNHAN_ID = '27327')        group by VIENPHI_ID, REF_TABLE) F on F.REF_TABLE = 'TT_MIENGIAM_CONGTY' and F.VIENPHI_ID = A.VIENPHI_ID        left join TT_DVYEUCAU DVYC on DVYC.DVYEUCAU_ID = A.REF_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_DICHVU DV on DVYC.DICHVU_ID = DV.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = DV.NHOMDICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        where        A.TIEPNHAN_ID = '27327' and ((DVYC.HUYYEUCAU = '0' and A.DICHVU_ID is not null)        or A.DUOC_ID is not null or A.REF_TABLE = 'TT_NUT_XACNHANSUATAN_CHITIET')        and A.ACTIVE = '1'         and           A.BENHAN_ID = '5849'                 and A.BENHVIEN_ID = 'HLU01'        order by A.VIENPHI_ID]
2019-08-15 18:25:32,074 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] PreparedStatement : [select LOAIBENHAN from TT_NOITRU_BENHAN where TIEPNHAN_ID =  @param0]
2019-08-15 18:25:32,074 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:25:32,074 [1] DEBUG - Statement Id: [DAO00080_LayLoaiBenhanCuNoitru] Types: [@param0=[Int32, System.Int32]]
2019-08-15 18:25:32,101 [1] DEBUG - Statement Id: [DAO00006_GetListDuocTyle] PreparedStatement : [select DUOC_ID, DOITUONG_ID, (TYLE/100) as TYLE, DONGIA MUCTRAN_THANHTOAN from TM_DOITUONG_GIADUOC_TYLE            where            BENHVIEN_ID = 'HLU01'            and DOITUONG_ID = '3']
2019-08-15 18:25:32,147 [1] DEBUG - Statement Id: [DAO00027_GetListTuongTrinhDichVuPhauThuatCuaTiepNhan] PreparedStatement : [select distinct * from TT_PHAUTHUAT_YEUCAU        where                exists (select PHAUTHUAT_ID from TT_PHAUTHUAT where TT_PHAUTHUAT_YEUCAU.PHAUTHUAT_ID = PHAUTHUAT_ID and TIEPNHAN_ID = 27327)        and exists (select NHOMDICHVU_ID from TM_NHOMDICHVU where TT_PHAUTHUAT_YEUCAU.NHOMDICHVU_ID = NHOMDICHVU_ID and left(MANHOMDICHVU, 2) = '05' and BENHVIEN_ID = 'HLU01')]
2019-08-15 18:25:32,199 [1] DEBUG - Statement Id: [DAO00006_GetList] PreparedStatement : [select dv.*, loaiDV.MALOAIDICHVU, captren.NHOMDICHVU_ID as NHOMDICHVU_CAPTREN_ID, captren.TENNHOMDICHVU as NHOMDICHVU_CAPTREN,              nhom_dv.TENNHOMDICHVU as TENNHOMDICHVU, nhom_dv.MANHOMDICHVU,              case when dv.ATTRIBUTE5 is null then 'TT' else 'KTC' end as LOAI_CHIPHI              from TM_DICHVU as dv              left join TM_NHOMDICHVU as nhom_dv on nhom_dv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID and nhom_dv.BENHVIEN_ID = 'HLU01'              left join TM_NHOMDICHVU as captren on nhom_dv.CAPTREN_ID = captren.NHOMDICHVU_ID and captren.BENHVIEN_ID = 'HLU01'              left join TM_LOAIDICHVU loaiDV on nhom_dv.LOAIDICHVU_ID = loaiDV.LOAIDICHVU_ID and loaiDV.BENHVIEN_ID = 'HLU01'              where nhom_dv.TAMNGUNG = '0' and dv.BENHVIEN_ID = 'HLU01'              and dv.TAMNGUNG = '0'               AND                   loaiDV.MALOAIDICHVU = 'KhamBenh']
2019-08-15 18:25:32,296 [1] DEBUG - Statement Id: [DAO00023_UpdateNhieuVP] PreparedStatement : [declare @jsonVienPhi nvarchar(max) = N'[{"VIENPHI_ID":670984,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":33000.0000,"THANHTIEN_DOANHTHU":33000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":33000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":33000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671017,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":40000.0000,"THANHTIEN_DOANHTHU":40000.00,"BHYT_TL":1.0,"BHYT_DONGIA":40000.0000,"BHYT_THANHTIEN":40000.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":40000.0,"BHYT_THANHTIEN_CHITRA":40000.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671375,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":630.0000,"THANHTIEN_DOANHTHU":1260.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":1260.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":1260.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671376,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":4000.0000,"THANHTIEN_DOANHTHU":8000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":8000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":8000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671377,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":1000.0000,"THANHTIEN_DOANHTHU":2000.00,"BHYT_TL":0.0,"BHYT_DONGIA":0.0,"BHYT_THANHTIEN":0.0,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":0.0,"BHYT_THANHTIEN_CHITRA":0.0,"BENHNHAN_PHAITHANHTOAN":2000.00000000,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":2000.00000000,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671742,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":2.0000,"DONGIA_DOANHTHU":45000.0000,"THANHTIEN_DOANHTHU":90000.00,"BHYT_TL":1.0,"BHYT_DONGIA":36410.0000,"BHYT_THANHTIEN":72820.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":36410.0,"BHYT_THANHTIEN_CHITRA":72820.00,"BENHNHAN_PHAITHANHTOAN":17180.00,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":17180.00,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":671761,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":720.0000,"THANHTIEN_DOANHTHU":720.00,"BHYT_TL":1.0,"BHYT_DONGIA":720.0000,"BHYT_THANHTIEN":720.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":720.0,"BHYT_THANHTIEN_CHITRA":720.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":0.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672718,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672719,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672720,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672721,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672722,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":21400.0000,"THANHTIEN_DOANHTHU":21400.00,"BHYT_TL":1.0,"BHYT_DONGIA":21400.0000,"BHYT_THANHTIEN":21400.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":21400.0,"BHYT_THANHTIEN_CHITRA":21400.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672724,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":42100.0000,"THANHTIEN_DOANHTHU":42100.00,"BHYT_TL":1.0,"BHYT_DONGIA":42100.0000,"BHYT_THANHTIEN":42100.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":42100.0,"BHYT_THANHTIEN_CHITRA":42100.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672725,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":64200.0000,"THANHTIEN_DOANHTHU":64200.00,"BHYT_TL":1.0,"BHYT_DONGIA":64200.0000,"BHYT_THANHTIEN":64200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":64200.0,"BHYT_THANHTIEN_CHITRA":64200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":672881,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":19200.0000,"THANHTIEN_DOANHTHU":19200.00,"BHYT_TL":1.0,"BHYT_DONGIA":19200.0000,"BHYT_THANHTIEN":19200.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":19200.0,"BHYT_THANHTIEN_CHITRA":19200.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"1","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354},{"VIENPHI_ID":673566,"TIEPNHAN_ID":27327,"BENHAN_ID":5849,"SOLUONG":1.0000,"DONGIA_DOANHTHU":27300.0000,"THANHTIEN_DOANHTHU":27300.00,"BHYT_TL":1.0,"BHYT_DONGIA":27300.0000,"BHYT_THANHTIEN":27300.00,"BHYT_DONGIA_CONGKHAM_DAU":0.0,"BHYT_CONGKHAM_DAU_TYLE":1.0,"BHYT_DONGIA_CHITRA":27300.0,"BHYT_THANHTIEN_CHITRA":27300.00,"BENHNHAN_PHAITHANHTOAN":0.0,"GIATRI_HOADON":0.0,"GIATRI_HOADON_DATHANHTOAN":0.0,"GIATRI_BIENLAI":0.0,"GIATRI_BIENLAI_DATHANHTOAN":0.0,"GIATRI_BENHNHAN_DATHANHTOAN":0.0,"DATHUCHIEN":"0","KHONGTHUTIEN":"0","BHYTDONGTIEN":"0","DICHVU_TL":1.0,"BHYT_DONGIA_DONGCT_DAU":0.0,"SOBHYT":"CN338382379621138289","SOBHYT_HUONG_ID":28354}]';        begin        UPDATE TT_VIENPHI        SET        SOLUONG = json.SOLUONG,        DONGIA_DOANHTHU = json.DONGIA_DOANHTHU,        THANHTIEN_DOANHTHU = json.THANHTIEN_DOANHTHU,        BHYT_TL = json.BHYT_TL,        BHYT_DONGIA = json.BHYT_DONGIA,        BHYT_THANHTIEN = json.BHYT_THANHTIEN,        BHYT_DONGIA_CONGKHAM_DAU = json.BHYT_DONGIA_CONGKHAM_DAU,        BHYT_CONGKHAM_DAU_TYLE = json.BHYT_CONGKHAM_DAU_TYLE,        BHYT_DONGIA_CHITRA = json.BHYT_DONGIA_CHITRA,        BHYT_THANHTIEN_CHITRA = json.BHYT_THANHTIEN_CHITRA,        BENHNHAN_PHAITHANHTOAN = json.BENHNHAN_PHAITHANHTOAN,        GIATRI_HOADON = json.GIATRI_HOADON,                GIATRI_BIENLAI = json.GIATRI_BIENLAI,                DATHUCHIEN = json.DATHUCHIEN,                DICHVU_TL = json.DICHVU_TL,        BHYT_DONGIA_DONGCT_DAU = json.BHYT_DONGIA_DONGCT_DAU,        NGAYCAPNHAT = GETDATE()        FROM OPENJSON (@jsonVienPhi)        WITH (        VIENPHI_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CONGKHAM_DAU numeric(25, 4),        BHYT_CONGKHAM_DAU_TYLE numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        GIATRI_HOADON numeric(25, 4),                GIATRI_BIENLAI numeric(25, 4),                DATHUCHIEN char(1),        KHONGTHUTIEN char(1),        BHYTDONGTIEN char(1),        DICHVU_TL numeric(25, 4),        BHYT_DONGIA_DONGCT_DAU numeric(25, 4))  json        WHERE TT_VIENPHI.VIENPHI_ID = json.VIENPHI_ID                        insert into TT_TINH_VIENPHI_LOG        SELECT json.VIENPHI_ID, json.TIEPNHAN_ID, json.BENHAN_ID, json.SOLUONG, json.BHYT_TL, json.DONGIA_DOANHTHU,        json.THANHTIEN_DOANHTHU, json.BHYT_DONGIA, json.BHYT_THANHTIEN, json.BHYT_DONGIA_CHITRA, json.BHYT_THANHTIEN_CHITRA, json.BENHNHAN_PHAITHANHTOAN,        json.SOBHYT_HUONG_ID, json.SOBHYT, GETDATE(), -1, 'HLU01'        FROM OPENJSON(@jsonVienPhi)        WITH (        VIENPHI_ID int,        TIEPNHAN_ID int,        BENHAN_ID int,        SOLUONG numeric(25, 4),        DONGIA_DOANHTHU numeric(25, 4),        THANHTIEN_DOANHTHU numeric(25, 4),        BHYT_TL numeric(25, 4),        BHYT_DONGIA numeric(25, 4),        BHYT_THANHTIEN numeric(25, 4),        BHYT_DONGIA_CHITRA numeric(25, 4),        BHYT_THANHTIEN_CHITRA numeric(25, 4),        BENHNHAN_PHAITHANHTOAN numeric(25, 4),        SOBHYT_HUONG_ID int,        SOBHYT nvarchar(30)) json        end]
2019-08-15 18:25:32,400 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] PreparedStatement : [update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = hdct.HOADON_ID, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN + hdct.GIATRI_BENHNHAN_DATHANHTOAN          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID          where HD.DATHANHTOAN = 1 and HD.HUYHOADON = 0 and HD.HOANTRA = 0 and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID is null and isnull(TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN,0) = 0          and TT_VIENPHI.TIEPNHAN_ID =  @param0             update TT_VIENPHI          set TT_VIENPHI.HOADON_ID = null, TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN = TT_VIENPHI.GIATRI_BENHNHAN_DATHANHTOAN - hdct.GIATRI_BENHNHAN_DATHANHTOAN,          TT_VIENPHI.DATHANHTOAN = '0'          from (select CT.HOADON_ID, CT.VIENPHI_ID, CT.GIATRI_BENHNHAN_DATHANHTOAN          from TT_HOADON_CHITIET_NGOAITRU CT          join TT_HOADON HD on HD.HOADON_ID = CT.HOADON_ID          join TT_VIENPHI vp on vp.VIENPHI_ID = ct.VIENPHI_ID and vp.HOADON_ID = ct.HOADON_ID          where HD.DATHANHTOAN = 0 and (HD.HUYHOADON = 1 or HD.HOANTRA = 1) and vp.TIEPNHAN_ID =  @param0 ) hdct          where          TT_VIENPHI.VIENPHI_ID = hdct.VIENPHI_ID and TT_VIENPHI.HOADON_ID = hdct.HOADON_ID          and TT_VIENPHI.TIEPNHAN_ID =  @param0]
2019-08-15 18:25:32,400 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Parameters: [@param0=[TIEPNHAN_ID,27327]]
2019-08-15 18:25:32,400 [1] DEBUG - Statement Id: [DAO00067_CapnhatDataVienphiKhiHuyThanhtoanHoadon] Types: [@param0=[Int64, System.Int64]]
2019-08-15 18:25:32,898 [1] DEBUG - Statement Id: [DAO00000_GetDoiTuongIsBHYT] PreparedStatement : [select * from TM_DOITUONG Where DOITUONG_ID = 3 and MADOITUONG like '%BHYT%']
2019-08-15 18:25:32,982 [1] DEBUG - Statement Id: [DAO00064_GetDOITUONG] PreparedStatement : [SELECT TOP 1      DT.TENDOITUONG,      BHYT.SOTHE,      BHYT.NGAYHIEULUC,      BHYT.NGAYHETHIEULUC,      BHYT.BENHVIEN_KCB_ID AS MABENHVIEN,      BV.TENBENHVIEN,      BHYT.NGAYMIENDONGCHITRA,      BHYT.TREN5NAM        FROM TT_BENHNHAN_BHYT BHYT, TM_DOITUONG DT, TM_BENHVIEN BV      WHERE      DT.NHOMTHE LIKE '%' + LEFT(BHYT.SOTHE,3) + '%'      AND BHYT.BENHNHAN_ID = '23301'      AND BHYT.BENHVIEN_KCB_ID = BV.MABENHVIEN      ORDER BY BHYT.NGAYTAO DESC]
2019-08-15 18:25:33,129 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:25:33,153 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:25:33,186 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:25:33,220 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:25:33,248 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:25:33,347 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:33,428 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:33,495 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:33,579 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:33,657 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:33,737 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:33,855 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:33,937 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:34,063 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:34,147 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:34,272 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:34,353 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:34,482 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:34,565 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:34,692 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:34,778 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:34,895 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:34,976 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:35,107 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:35,190 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:35,319 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:25:35,403 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:25:35,543 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
2019-08-15 18:25:35,690 [1] DEBUG - Statement Id: [DAO00019_Get_TiepNhan_ThongtinChuyenVien] PreparedStatement : [select CHANDOANNGT, ICDNOIGIOITHIEU_ID, LYDOCHUYENVIEN_ID, NOIGIOITHIEU_ID, HINHTHUCCHUYENVIEN_ID, THOIGIANCHUYENTUYEN, SOCHUYENVIEN        from TT_TIEPNHAN        where TIEPNHAN_ID = '27327']
2019-08-15 18:25:35,717 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:25:35,742 [1] DEBUG - Statement Id: [DAO00019_GetBenhNhanThanhVien] PreparedStatement : [select A.*, B.TENTHETHANHVIEN, convert(varchar, A.NGAYHIEULUC, 103) as NGAYHIEULUCTHE, B.SOTIEN        from TT_CSKH_THANHVIEN_CAPTHE A        left join TM_CSKH_THETHANHVIEN B on B.THETHANHVIEN_ID = A.THETHANHVIEN_ID        where   THANHVIEN_ID in (        select THANHVIEN_ID from TT_CSKH_THANHVIEN        where (BENHNHAN_ID = '23301' and TAMNGUNG is null or TAMNGUNG = '0')        and (DAXOA is null or DAXOA = '0'))        and A.KICHHOAT = '1' and (A.TAMNGUNG = '0' or A.TAMNGUNG is null)                 and A.BENHVIEN_ID = 'HLU01'        order by THE_ID desc]
2019-08-15 18:25:58,886 [1] DEBUG - Statement Id: [DAO00064_TT_TIEPNHAN_GetHoanThanh] PreparedStatement : [select *        from TT_TIEPNHAN        where        TIEPNHAN_ID = '27327'        and TRANGTHAI  = 'HOANTHANH']
2019-08-15 18:25:59,026 [1] DEBUG - Statement Id: [DAO00064_CheckBenhNhanDaXacNhanBHYT] PreparedStatement : [IF EXISTS (SELECT XACNHANCHIPHI_ID FROM TT_XACNHANCHIPHI WHERE TIEPNHAN_ID = 27327)        BEGIN        SELECT 1 AS RESULT        END        ELSE        BEGIN        SELECT 0 AS RESULT        END]
2019-08-15 18:26:02,342 [1] DEBUG - Statement Id: [DAO00014_GetInPatientStatus] PreparedStatement : [select TRANGTHAI, isnull(KHOACHUYENDEN_ID, KHOAVAO_ID) as KHOAHIENTAI from TT_NOITRU_BENHAN        where        TIEPNHAN_ID = '27327'        and BENHVIEN_ID = 'HLU01'         and           BENHAN_ID = '5849']
2019-08-15 18:26:03,335 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] PreparedStatement : [update TT_TIEPNHAN set        CHANDOANNGT =  @param0 ,        ICDNOIGIOITHIEU_ID =  @param1 ,        LYDOCHUYENVIEN_ID =  @param2 ,        NOIGIOITHIEU_ID =  @param3 ,        HINHTHUCCHUYENVIEN_ID =  @param4 ,        THOIGIANCHUYENTUYEN =  @param5 ,        SOCHUYENVIEN =  @param6         where TIEPNHAN_ID = '27327']
2019-08-15 18:26:03,335 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] Parameters: [@param0=[CHANDOANNGT,Bệnh Tăng huyết áp vô căn (nguyên phát)], @param1=[ICDNOIGIOITHIEU_ID,3518], @param2=[LYDOCHUYENVIEN_ID,1021], @param3=[NOIGIOITHIEU_ID,608], @param4=[HINHTHUCCHUYENVIEN_ID,6978], @param5=[THOIGIANCHUYENTUYEN,8/15/2019 6:25:37 PM], @param6=[SOCHUYENVIEN,1234]]
2019-08-15 18:26:03,335 [1] DEBUG - Statement Id: [DAO00019_Update_TiepNhan_ThongtinChuyenVien] Types: [@param0=[String, System.String], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[String, System.String], @param5=[DateTime, System.DateTime], @param6=[String, System.String]]
2019-08-15 18:26:03,371 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG_ID] PreparedStatement : [select isnull(MAX(SOBHYT_HUONG_ID),0) SOBHYT_HUONG_ID        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327']
2019-08-15 18:26:03,419 [1] DEBUG - Statement Id: [DAO00023_GetSOBHYT_HUONG] PreparedStatement : [select top 1 SOBHYT        from TT_TIEPNHAN_SOTHEBHYT        where TIEPNHAN_ID = '27327'                order by SOBHYT_HUONG_ID desc]
2019-08-15 18:26:03,443 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '670984']
2019-08-15 18:26:03,443 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204342], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,5492], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,33000], @param9=[THANHTIEN_DOANHTHU,33000], @param10=[BHYT_TL,0], @param11=[BHYT_DONGIA,0], @param12=[BHYT_THANHTIEN,0], @param13=[BHYT_DONGIA_CHITRA,0], @param14=[BHYT_THANHTIEN_CHITRA,0], @param15=[BENHNHAN_PHAITHANHTOAN,33000], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,33000], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,443 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,469 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,469 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,670984], @param3=[DONGIA_DOANHTHU,33000], @param4=[BHYT_DONGIA,0], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,469 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,493 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '671017']
2019-08-15 18:26:03,495 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204364], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4523], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,40000], @param9=[THANHTIEN_DOANHTHU,40000], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,40000], @param12=[BHYT_THANHTIEN,40000], @param13=[BHYT_DONGIA_CHITRA,40000], @param14=[BHYT_THANHTIEN_CHITRA,40000], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,1], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,495 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,521 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,521 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,671017], @param3=[DONGIA_DOANHTHU,40000], @param4=[BHYT_DONGIA,40000], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,521 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,546 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672718']
2019-08-15 18:26:03,547 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204870], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4681], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,547 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,573 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,573 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672718], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,573 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,598 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672719']
2019-08-15 18:26:03,598 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204871], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4722], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,598 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,623 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,623 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672719], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,623 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,650 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672720']
2019-08-15 18:26:03,650 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204872], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4668], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,650 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,679 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,680 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672720], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,680 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,704 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672721']
2019-08-15 18:26:03,705 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204873], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4642], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,705 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,734 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,734 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672721], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,734 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,826 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672722']
2019-08-15 18:26:03,826 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204874], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4641], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,21400], @param9=[THANHTIEN_DOANHTHU,21400], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,21400], @param12=[BHYT_THANHTIEN,21400], @param13=[BHYT_DONGIA_CHITRA,21400], @param14=[BHYT_THANHTIEN_CHITRA,21400], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,826 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,853 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,853 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672722], @param3=[DONGIA_DOANHTHU,21400], @param4=[BHYT_DONGIA,21400], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,853 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,880 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672724']
2019-08-15 18:26:03,881 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204876], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4017], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,42100], @param9=[THANHTIEN_DOANHTHU,42100], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,42100], @param12=[BHYT_THANHTIEN,42100], @param13=[BHYT_DONGIA_CHITRA,42100], @param14=[BHYT_THANHTIEN_CHITRA,42100], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,881 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,917 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,917 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672724], @param3=[DONGIA_DOANHTHU,42100], @param4=[BHYT_DONGIA,42100], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,917 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,942 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672725']
2019-08-15 18:26:03,942 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204877], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4129], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,64200], @param9=[THANHTIEN_DOANHTHU,64200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,64200], @param12=[BHYT_THANHTIEN,64200], @param13=[BHYT_DONGIA_CHITRA,64200], @param14=[BHYT_THANHTIEN_CHITRA,64200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,942 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:03,968 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:03,968 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672725], @param3=[DONGIA_DOANHTHU,64200], @param4=[BHYT_DONGIA,64200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:03,968 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:03,992 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '672881']
2019-08-15 18:26:03,992 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,204915], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4683], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,19200], @param9=[THANHTIEN_DOANHTHU,19200], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,19200], @param12=[BHYT_THANHTIEN,19200], @param13=[BHYT_DONGIA_CHITRA,19200], @param14=[BHYT_THANHTIEN_CHITRA,19200], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,1], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:03 PM]]
2019-08-15 18:26:03,992 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:04,018 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:04,018 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,672881], @param3=[DONGIA_DOANHTHU,19200], @param4=[BHYT_DONGIA,19200], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:04,019 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:04,043 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] PreparedStatement : [update TT_VIENPHI set            TIEPNHAN_ID =  @param0                          , REF_ID =  @param1             , REF_TABLE =  @param2             , DICHVU_ID =  @param3             , DUOC_ID =  @param4             , LOAI_CHIPHI =  @param5             , LOAIGIA_ID =  @param6             , SOLUONG =  @param7             , DONGIA_DOANHTHU =  @param8             , THANHTIEN_DOANHTHU =  @param9             , BHYT_TL =  @param10             , BHYT_DONGIA =  @param11             , BHYT_THANHTIEN =  @param12             , BHYT_DONGIA_CHITRA =  @param13             , BHYT_THANHTIEN_CHITRA =  @param14             , BENHNHAN_PHAITHANHTOAN =  @param15             , GIATRI_HOADON =  @param16             , GIATRI_HOADON_DATHANHTOAN =  @param17             , GIATRI_BIENLAI =  @param18             , GIATRI_BIENLAI_DATHANHTOAN =  @param19             , GIATRI_BENHNHAN_DATHANHTOAN =  @param20             , GIATRI_THATTHU =  @param21             , MIENGIAM_TL =  @param22             , MIENGIAM_GIATRI =  @param23             , NGANSACH_TL =  @param24             , NGANSACH_GIATRI =  @param25             , TAITRO_TL =  @param26             , TAITRO_GIATRI =  @param27             , BHTN_TL =  @param28             , BHTN_DONGIA =  @param29             , BHTN_THANHTIEN =  @param30             , BHTN_DONGIA_CHITRA =  @param31             , BHTN_THANHTIEN_CHITRA =  @param32                           , DUOCPHEPTHUCHIEN =  @param33                             , HUY =  @param34                             , DATHANHTOAN =  @param35                             , DATHUCHIEN =  @param36                             , KHONGTHUTIEN =  @param37                          , HOADON_ID =  @param38                           , ACTIVE =  @param39                           , YEUCAUVP =  @param40                             , BHYTDONGTIEN =  @param41                             , DOITUONG_HUONG_ID =  @param42                             , SOBHYT_HUONG_ID =  @param43                             , BHYT_DONGIA_DONGCT_DAU =  @param44                             , DONGIADOANHTHU_BANDAU =  @param45                             , DONGIA_BHYT_BANDAU =  @param46                             , DICHVU_TL =  @param47                            , NGUOICAPNHAT_ID =  @param48               , NGAYCAPNHAT =  @param49               where              VIENPHI_ID = '673566']
2019-08-15 18:26:04,043 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[REF_ID,205093], @param2=[REF_TABLE,TT_DVYEUCAU], @param3=[DICHVU_ID,4747], @param4=[DUOC_ID,null], @param5=[LOAI_CHIPHI,TT], @param6=[LOAIGIA_ID,2], @param7=[SOLUONG,1], @param8=[DONGIA_DOANHTHU,27300], @param9=[THANHTIEN_DOANHTHU,27300], @param10=[BHYT_TL,1], @param11=[BHYT_DONGIA,27300], @param12=[BHYT_THANHTIEN,27300], @param13=[BHYT_DONGIA_CHITRA,27300], @param14=[BHYT_THANHTIEN_CHITRA,27300], @param15=[BENHNHAN_PHAITHANHTOAN,0], @param16=[GIATRI_HOADON,0], @param17=[GIATRI_HOADON_DATHANHTOAN,0], @param18=[GIATRI_BIENLAI,0], @param19=[GIATRI_BIENLAI_DATHANHTOAN,0], @param20=[GIATRI_BENHNHAN_DATHANHTOAN,0], @param21=[GIATRI_THATTHU,0], @param22=[MIENGIAM_TL,0], @param23=[MIENGIAM_GIATRI,0], @param24=[NGANSACH_TL,0], @param25=[NGANSACH_GIATRI,0], @param26=[TAITRO_TL,0], @param27=[TAITRO_GIATRI,0], @param28=[BHTN_TL,0], @param29=[BHTN_DONGIA,0], @param30=[BHTN_THANHTIEN,0], @param31=[BHTN_DONGIA_CHITRA,0], @param32=[BHTN_THANHTIEN_CHITRA,0], @param33=[DUOCPHEPTHUCHIEN,0], @param34=[HUY,0], @param35=[DATHANHTOAN,0], @param36=[DATHUCHIEN,0], @param37=[KHONGTHUTIEN,0], @param38=[HOADON_ID,null], @param39=[ACTIVE,1], @param40=[YEUCAUVP,0], @param41=[BHYTDONGTIEN,0], @param42=[DOITUONG_HUONG_ID,3], @param43=[SOBHYT_HUONG_ID,28354], @param44=[BHYT_DONGIA_DONGCT_DAU,0], @param45=[DONGIADOANHTHU_BANDAU,0], @param46=[DONGIA_BHYT_BANDAU,null], @param47=[DICHVU_TL,1], @param48=[NGUOICAPNHAT_ID,1], @param49=[NGAYCAPNHAT,8/15/2019 6:26:04 PM]]
2019-08-15 18:26:04,043 [1] DEBUG - Statement Id: [DAO00024_TT_VIENPHI_Update] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[String, System.String], @param3=[Int64, System.Int64], @param4=[System.DBNull, null], @param5=[String, System.String], @param6=[Int64, System.Int64], @param7=[Double, System.Double], @param8=[Double, System.Double], @param9=[Double, System.Double], @param10=[Double, System.Double], @param11=[Double, System.Double], @param12=[Double, System.Double], @param13=[Double, System.Double], @param14=[Double, System.Double], @param15=[Double, System.Double], @param16=[Double, System.Double], @param17=[Double, System.Double], @param18=[Double, System.Double], @param19=[Double, System.Double], @param20=[Double, System.Double], @param21=[Double, System.Double], @param22=[Double, System.Double], @param23=[Double, System.Double], @param24=[Double, System.Double], @param25=[Double, System.Double], @param26=[Double, System.Double], @param27=[Double, System.Double], @param28=[Double, System.Double], @param29=[Double, System.Double], @param30=[Double, System.Double], @param31=[Double, System.Double], @param32=[Double, System.Double], @param33=[String, System.String], @param34=[String, System.String], @param35=[Int64, System.Int64], @param36=[String, System.String], @param37=[Int64, System.Int64], @param38=[System.DBNull, null], @param39=[String, System.String], @param40=[Int64, System.Int64], @param41=[Int64, System.Int64], @param42=[Int64, System.Int64], @param43=[Int32, System.Int32], @param44=[Double, System.Double], @param45=[Double, System.Double], @param46=[System.DBNull, null], @param47=[Double, System.Double], @param48=[Int64, System.Int64], @param49=[DateTime, System.DateTime]]
2019-08-15 18:26:04,074 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] PreparedStatement : [insert into TT_VIENPHI_CAPNHAT          (TIEPNHAN_ID           ,             BENHAN_ID                     ,VIENPHI_ID          ,DONGIA_DOANHTHU          ,BHYT_DONGIA          ,NGAYCAPNHAT          ,NGUOICAPNHAT_ID          ,BENHVIEN_ID)          values          ( @param0            ,              @param1                      , @param2           , @param3           , @param4           ,GETDATE()          , @param5           , @param6 )]
2019-08-15 18:26:04,074 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Parameters: [@param0=[TIEPNHAN_ID,27327], @param1=[BENHAN_ID,5849], @param2=[VIENPHI_ID,673566], @param3=[DONGIA_DOANHTHU,27300], @param4=[BHYT_DONGIA,27300], @param5=[NGUOICAPNHAT_ID,1], @param6=[BENHVIEN_ID,HLU01]]
2019-08-15 18:26:04,074 [1] DEBUG - Statement Id: [DAO00024_Insert_TT_VIENPHI_CAPNHAT] Types: [@param0=[Int64, System.Int64], @param1=[Int64, System.Int64], @param2=[Int64, System.Int64], @param3=[Double, System.Double], @param4=[Double, System.Double], @param5=[Int64, System.Int64], @param6=[String, System.String]]
2019-08-15 18:26:04,216 [1] DEBUG - Statement Id: [DAO00064_GetNgayDangKyDichVu] PreparedStatement : [SELECT        DISTINCT CONVERT(date, NGAYTAO) as NGAYCHIPHI        FROM TT_VIENPHI        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849'                 ORDER BY NGAYCHIPHI]
2019-08-15 18:26:04,240 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauDV] PreparedStatement : [SELECT        DISTINCT DVYEUCAU_ID, DICHVU_ID, CONVERT(date, NGAYYEUCAU) NGAYYEUCAU        FROM TT_DVYEUCAU        WHERE        TIEPNHAN_ID = '27327'         and           BENHAN_ID = '5849']
2019-08-15 18:26:04,266 [1] DEBUG - Statement Id: [DAO00064_GetAllNgayYeucauYlenh] PreparedStatement : [SELECT        DISTINCT A.TOATHUOC_ID, A.KHAMBENH_ID, A.DUOC_ID, CONVERT(date, B.THOIGIANKHAM) NGAYYEUCAU        FROM TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        WHERE        B.BENHAN_ID = '5849']
2019-08-15 18:26:04,293 [1] DEBUG - Statement Id: [DAO00063_AllGetTrangThaiThuocbyBenan_Id] PreparedStatement : [select A.CHUNGTU_ID, A.PHIEULINH_ID, A.HUYTOATHUOC, A.NGUOITAO_ID, A.TOATHUOC_ID        from TT_NOITRU_TOATHUOC A        inner join TT_NOITRU_KHAMBENH B on B.KHAMBENH_ID = A.KHAMBENH_ID        where B.BENHAN_ID  = '5849']
2019-08-15 18:26:04,317 [1] DEBUG - Statement Id: [DAO00064_TT_VIENPHI_GetList] PreparedStatement : [select distinct a.*, b.TINHTRANG AS TINHTRANG_MG, d.TINHTRANG_BHTN, e.TINHTRANG_MGCT        , b.MIENGIAMCHITIET_ID, b.GIATRIMIENGIAM, d.GIATRIMIENGIAM_BHTN, e.GIATRIMIENGIAM_CONGTY, e.GIATRIMIENGIAM_CONGTY as GIATRIMIENGIAM_CTCT, f.GIATRIMIENGIAM_THANHVIEN        , c.DVKEMTHEO, c.DVKEMTHEO_KHACEKIP, isnull(ttnt.PHONGBANRATOA_ID,c.NOIYEUCAU_ID) NOIYEUCAU_ID, c.NOITHUCHIEN_ID, c.DVYEUCAU_ID, c.HUYYEUCAU, c.DANGKY_ID,        isnull(dv.TENDICHVU, dc.TENDUOCDAYDU) NOIDUNG, isnull(dv.MADICHVU, dc.MADUOC) MADICHVU, dv.NORESULT, dc.DONVITINH, ld.MALOAIDUOC, dc.BHYT DUOC_BHYT, ld.LOAIVATTU_ID, ndv.MANHOMDICHVU        from        (select VP.*, sbh.SOBHYT as SOBHYT_HUONG        from TT_VIENPHI VP        left join TT_TIEPNHAN_SOTHEBHYT sbh on sbh.SOBHYT_HUONG_ID = VP.SOBHYT_HUONG_ID        where        ((isnull(VP.GIATRI_BENHNHAN_DATHANHTOAN, 0) = 0 and isnull(VP.DATHANHTOAN, 0) = 0)        and VP.REF_TABLE != 'TT_MAU_CHUNGTU_CHITIET'                 )         and             VP.TIEPNHAN_ID = '27327'           and           VP.BENHAN_ID = '5849'         and             VP.BENHVIEN_ID = 'HLU01'                   )a left join                         (        select VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM        from TT_MIENGIAM MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM'        group by VIENPHI_ID, MG.TINHTRANG, MGCT.MIENGIAMCHITIET_ID        )b        on a.VIENPHI_ID = b.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_BHTN, SUM(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_BHTN        from TT_MIENGIAM_BHTN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_BHTN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_BHTN'        group by VIENPHI_ID, MG.TINHTRANG        )d        on a.VIENPHI_ID = d.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_CONGTY        from TT_MIENGIAM_CONGTY MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_CONGTY_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_CONGTY'        group by VIENPHI_ID, MG.TINHTRANG        )e        on a.VIENPHI_ID = e.VIENPHI_ID          left join(        select VIENPHI_ID, MG.TINHTRANG AS TINHTRANG_MGCT, Sum(MGCT.GIATRIMIENGIAM) as GIATRIMIENGIAM_THANHVIEN        from TT_MIENGIAM_THANHVIEN MG INNER JOIN TT_MIENGIAM_CHITIET MGCT ON MG.MIENGIAM_THANHVIEN_ID = MGCT.MIENGIAM_ID        where MG.TIEPNHAN_ID= '27327' and MGCT.REF_TABLE = 'TT_MIENGIAM_THANHVIEN'        group by VIENPHI_ID, MG.TINHTRANG        )f        on a.VIENPHI_ID = f.VIENPHI_ID          left join        (        select DVYEUCAU_ID, TRANGTHAI, BHYTDONGTIEN, HUYYEUCAU, DVKEMTHEO, DVKEMTHEO_KHACEKIP, NOIYEUCAU_ID, NOITHUCHIEN_ID, DANGKY_ID from TT_DVYEUCAU        where TIEPNHAN_ID = '27327'        )c on c.DVYEUCAU_ID = a.REF_ID and a.REF_TABLE = 'TT_DVYEUCAU'        left join        (        select PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NOITRU_TOATHUOC' REF_TABLE  from TT_NOITRU_TOATHUOC where TIEPNHAN_ID  = '27327'        union        select PHONGBAN_ID as PHONGBANRATOA_ID, CLSKETQUA_VTYT_ID as TOATHUOC_ID, 'TT_CLSKETQUA_VTYT' REF_TABLE        from TT_CLSKETQUA_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_CLSKETQUA_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and TIEPNHAN_ID  = '27327')        union        select PHONGBAN_ID as PHONGBANRATOA_ID, KHAMBENH_VTYT_ID as TOATHUOC_ID, 'TT_NGOAITRU_KHAMBENH_VTYT' REF_TABLE        from TT_NGOAITRU_KHAMBENH_VTYT where exists (select DVYEUCAU_ID from TT_DVYEUCAU where TT_NGOAITRU_KHAMBENH_VTYT.DVYEUCAU_ID = DVYEUCAU_ID and  TIEPNHAN_ID  = '27327')        union        select B.PHONGBANTHUCHIEN_ID as PHONGBANRATOA_ID, PHAUTHUAT_VTYT_ID as TOATHUOC_ID, 'TT_PHAUTHUAT_VTYT' REF_TABLE        from TT_PHAUTHUAT_VTYT A        left join TT_PHAUTHUAT B on A.PHAUTHUAT_ID = B.PHAUTHUAT_ID        where B.TIEPNHAN_ID  = '27327'        union        select B.PHONGBAN_ID as PHONGBANRATOA_ID, TOATHUOC_ID, 'TT_NGOAITRU_TOATHUOC' REF_TABLE        from TT_NGOAITRU_TOATHUOC A        left join TT_NGOAITRU_KHAMBENH B on A.KHAMBENH_ID = B.KHAMBENH_ID        where B.TIEPNHAN_ID  = '27327'        ) ttnt on ttnt.TOATHUOC_ID = a.REF_ID and a.REF_TABLE = ttnt.REF_TABLE        left join TM_DUOC dc on A.DUOC_ID = dc.DUOC_ID        left join TM_LOAIDUOC ld on dc.LOAIDUOC_ID = ld.LOAIDUOC_ID        left join TM_DICHVU dv on A.DICHVU_ID = dv.DICHVU_ID and A.REF_TABLE = 'TT_DVYEUCAU'        left join TM_NHOMDICHVU ndv on ndv.NHOMDICHVU_ID = dv.NHOMDICHVU_ID        where        c.HUYYEUCAU = '0' or c.HUYYEUCAU is null]
2019-08-15 18:26:04,393 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:04,476 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"5492","DVYEUCAU_ID":"204342"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:04,540 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:04,622 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4523","DVYEUCAU_ID":"204364"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:04,713 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:04,797 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4681","DVYEUCAU_ID":"204870"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:04,949 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:05,032 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4722","DVYEUCAU_ID":"204871"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:05,161 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:05,271 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4668","DVYEUCAU_ID":"204872"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:05,397 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:05,481 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4642","DVYEUCAU_ID":"204873"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:05,602 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:05,687 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4641","DVYEUCAU_ID":"204874"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:05,805 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:05,929 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4017","DVYEUCAU_ID":"204876"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:06,061 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:06,150 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4129","DVYEUCAU_ID":"204877"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:06,281 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:06,367 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4683","DVYEUCAU_ID":"204915"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:06,492 [1] DEBUG - Statement Id: [DAO00009_TT_TIEPNHAN_GetProcess] PreparedStatement : [select PROCESS_ID from TT_TIEPNHAN where SOTIEPNHAN = 'TN190604.0000201']
2019-08-15 18:26:06,592 [1] DEBUG - Statement Id: [DAOWF004_laytrangthaiDV] PreparedStatement : [select top 1 A.CURR_STATE_CODE as STATE_CODE, isNull(C.SHORT_NAME,C.NAME) as TRANGTHAI, C.NAME as TRANGTHAI_CHITIET, C.STATUS_CODE, D.ISACTIVE as ACTIVE, E.STATUS_CODE  as OLD_STATUSCODE        from TT_REQUEST_SERVICE_DETAIL A                left join (select * from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}') D on D.ID = A.REQUEST_SERVICE_ID        left join TM_STATE C on A.CURR_STATE_CODE = C.STATE_CODE and C.PROCESS_CODE = D.PROCESS_CODE        left join TM_STATE E on A.OLD_STATE_CODE = E.STATE_CODE and E.PROCESS_CODE = D.PROCESS_CODE        where        A.REQUEST_SERVICE_ID = (select top 1 ID from TT_REQUEST_SERVICE where PARA = '{"DICHVU_ID":"4747","DVYEUCAU_ID":"205093"}' order by ID desc)        order by A.ID desc]
2019-08-15 18:26:06,736 [1] DEBUG - Statement Id: [DAO00017_GetLoaiGiaDoiTuongDichVu] PreparedStatement : [select a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID, MIN(a.UUTIEN_NGUON) AS UUTIEN_NGUON          , MAX(a.DOUUTIEN) AS DOUUTIEN, MIN(ISNULL(a.GIAHOTRO,0)) AS GIAHOTRO          from(                        select distinct A.LOAIGIA_ID, C.TENLOAIGIA, C.MALOAIGIA, 0 as UUTIEN_NGUON, isnull(B.DOUUTIEN,0) as DOUUTIEN, B.GIAHOTRO, C.CAPTREN_ID            from TM_DOITUONG_GIADICHVU A            left join TM_DOITUONG_LOAIGIA B on A.LOAIGIA_ID = B.LOAIGIA_ID and A.DOITUONG_ID = B.DOITUONG_ID and B.BENHVIEN_ID = 'HLU01'            inner join TM_LOAIGIA C on A.LOAIGIA_ID = C.LOAIGIA_ID and C.BENHVIEN_ID = 'HLU01'            where A.DOITUONG_ID = '3'                            and C.CAPTREN_ID = (select LOAIGIA_ID from TM_LOAIGIA              where MALOAIGIA = 'GiaDichVu'              and BENHVIEN_ID = 'HLU01')                         and A.BENHVIEN_ID = 'HLU01'                     ) a          where a.DOUUTIEN != 0 and a.DOUUTIEN is not null          group by a.LOAIGIA_ID, a.TENLOAIGIA, a.MALOAIGIA, a.CAPTREN_ID          order by MAX(a.UUTIEN_NGUON) desc ,MAX(a.DOUUTIEN) asc]
