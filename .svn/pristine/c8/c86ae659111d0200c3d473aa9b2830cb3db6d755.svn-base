<?xml version="1.0" encoding="utf-8" ?>
<!--============================================================================
//	CAUTION: This file is generated by IBatisNetGen.3.SQLMap.cst at 11/1/2016 6:36:32 PM
//				Any manual editing will be lost in re-generation.
//===========================================================================-->
<sqlMap namespace="eHospital" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <statements>
    <statement id="DAO00093_GetDanhSachHSBA" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT A.HOSO_ID, A.MABENHAN, A.MABENHNHAN, A.TENBENHNHAN, A.NAMSINH, F.DESCRIPTION AS GENDER,
      A.SOLUUTRU, A.TRANGTHAILUUTRU_ID, E.DICTIONARY_NAME AS TRANGTHAILUUTRU, C.TENPHONGBAN, D.PHIEUMUON_ID, D.SOPHIEU,
      A.CHANDOAN, A.LOAIBENHAN_ID, convert(date,A.NGAYVAOVIEN) NGAYVAOVIEN, convert(date,A.NGAYRAVIEN) NGAYRAVIEN, A.LYDONHAPVIEN_ID, L.TENLOAIBENHAN,
      D.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU, D.NGAYMUON, D.TINHTRANG_ID
      FROM TT_BENHAN_LUUTRU A
      LEFT JOIN TT_NOITRU_BENHAN B ON B.BENHAN_ID = A.BENHAN_ID
      LEFT JOIN TM_PHONGBAN C ON C.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN TM_GENDER F ON F.ID = A.GIOITINH
      LEFT JOIN (SELECT A.* FROM TT_BENHAN_MUONTRA A
      INNER JOIN LST_DICTIONARY B ON B.DICTIONARY_ID = A.TINHTRANG_ID WHERE B.DICTIONARY_CODE = 'DangMuon') D ON D.HOSO_ID = A.HOSO_ID
      LEFT JOIN LST_DICTIONARY E ON E.DICTIONARY_ID = A.TRANGTHAILUUTRU_ID
      LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = D.NGUOIYEUCAU_ID
      LEFT JOIN TM_LOAIBENHAN L ON L.LOAIBENHAN_ID = A.LOAIBENHAN_ID
      where (E.DICTIONARY_CODE = 'NhapKho' OR E.DICTIONARY_CODE = 'DangMuon')
      <dynamic>
        <isParameterPresent>
          <isNotEmpty prepend="AND" property="PHONGBAN">
            A.PHONGBAN_ID = '$PHONGBAN$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="SEARCHBA">
            (A.MABENHNHAN LIKE '%$SEARCHBN$%' OR A.TENBENHNHAN LIKE N'%$SEARCHBN$%')
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="MAHSBA">
            (A.SOLUUTRU LIKE '%$SEARCHBA$%' OR A.MABENHAN LIKE '%$SEARCHBA$%')
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            (E.DICTIONARY_CODE = 'NhapKho' OR E.DICTIONARY_CODE = 'DangMuon')
          </isNotEmpty>-->
        </isParameterPresent>
      </dynamic>
      ORDER BY A.NGAYRAVIEN DESC
    </statement>
    <statement id="DAO00093_GetDanhSachHoSoBenhAn" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT A.HOSO_ID, A.MABENHAN, A.MABENHNHAN, A.TENBENHNHAN, A.NAMSINH, F.DESCRIPTION AS GENDER,
      A.SOLUUTRU, A.TRANGTHAILUUTRU_ID, E.DICTIONARY_NAME AS TRANGTHAILUUTRU, C.TENPHONGBAN,
      A.CHANDOAN, A.LOAIBENHAN_ID, convert(date,A.NGAYVAOVIEN) NGAYVAOVIEN, convert(date,A.NGAYRAVIEN) NGAYRAVIEN, CT.LYDOVAOVIEN AS LYDONHAPVIEN_ID, L.DICTIONARY_NAME AS TENLOAIBENHAN
      FROM TT_BENHAN_LUUTRU A
      LEFT JOIN TT_NOITRU_BENHAN B ON B.BENHAN_ID = A.BENHAN_ID
      LEFT JOIN TT_NOITRU_BENHAN_CHITIET CT ON CT.BENHAN_ID = B.BENHAN_ID
      LEFT JOIN TM_PHONGBAN C ON C.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN TM_GENDER F ON F.ID = A.GIOITINH
      LEFT JOIN LST_DICTIONARY E ON E.DICTIONARY_ID = A.TRANGTHAILUUTRU_ID
      LEFT JOIN LST_DICTIONARY L ON L.DICTIONARY_ID = A.LOAIBENHAN_ID
      where E.DICTIONARY_CODE = 'NhapKho'
      <dynamic>
        <isParameterPresent>
          <isNotEmpty prepend="AND" property="KHOA">
            A.PHONGBAN_ID = '$KHOA$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="MAYTE">
            (A.MABENHNHAN LIKE '%$MAYTE$%' OR A.TENBENHNHAN LIKE N'%$MAYTE$%')
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="MAHSBA">
            (A.SOLUUTRU LIKE '%$MAHSBA$%' OR A.MABENHAN LIKE '%$MAHSBA$%')
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            (E.DICTIONARY_CODE = 'NhapKho' OR A.TRANGTHAILUUTRU_ID = 8339)
          </isNotEmpty>-->
        </isParameterPresent>
      </dynamic>
      ORDER BY A.NGAYRAVIEN DESC
    </statement>
    <statement id="DAO00093_GetHinhThucMuon" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID AS HINHTHUCMUON_ID, DICTIONARY_NAME AS HINHTHUCMUON FROM  LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE = 'HinhThucMuonBenhAn'
    </statement>
    <statement id="DAO00093_GetLyDoMuon" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID AS LYDOMUON_ID, DICTIONARY_NAME AS LYDOMUON FROM  LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE = 'LyDoMuonBenhAn'
    </statement>
    <statement id="DAO00093_GetLoaiHoSoBA" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID, DICTIONARY_NAME FROM LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE='LoaiHoSoBenhAn'
    </statement>
    <statement id="DAO00093_GetTrangThaiLuuTru" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID, DICTIONARY_NAME FROM LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE='TrangThaiBenhAnLuuTru' and DICTIONARY_CODE not in ('ThanhLy')
    </statement>
    <statement id="DAO00093_GetKieuHoSo" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID, DICTIONARY_NAME FROM LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE='KieuHoSoBenhAn'
    </statement>
    <statement id="DAO00093_GetTinhTrangMuonBA" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID AS TINHTRANG_ID, DICTIONARY_NAME AS TINHTRANG FROM  LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE = 'TinhTrangMuonBenhAn'
    </statement>
    <statement id="DAO00093_GetDanhSachPhieuMuon_Count" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT COUNT(*) AS TOTALROWS FROM (
      SELECT A.SOPHIEU, A.NGAYMUON, A.NGUOICHOMUON_ID, C.TENNHANVIEN AS NGUOICHOMUON, A.NGUOINHAN_ID, D.TENNHANVIEN AS NGUOINHAN, <!--A.PHIEUMUON_ID,-->
      A.PHONGBAN_ID, H.TENPHONGBAN, A.HINHTHUCMUON_ID, I.DICTIONARY_NAME AS HINHTHUCMUON, A.GHICHU, A.NGAYTRA, A.NGUOITRA_ID, E.TENNHANVIEN AS NGUOITRA,
      A.NGUOINHANTRA_ID, F.TENNHANVIEN AS NGUOINHANTRA, A.TINHTRANG_ID, J.DICTIONARY_NAME AS TINHTRANG, A.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU<!--, A.HOSO_ID, B.MABENHAN-->
      FROM TT_BENHAN_MUONTRA A
      LEFT JOIN TT_BENHAN_LUUTRU B ON B.HOSO_ID = A.HOSO_ID
      LEFT JOIN TM_NHANVIEN C ON C.NHANVIEN_ID = A.NGUOICHOMUON_ID
      LEFT JOIN TM_NHANVIEN D ON D.NHANVIEN_ID = A.NGUOINHAN_ID
      LEFT JOIN TM_NHANVIEN E ON E.NHANVIEN_ID = A.NGUOITRA_ID
      LEFT JOIN TM_NHANVIEN F ON F.NHANVIEN_ID = A.NGUOINHANTRA_ID
      LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = A.NGUOIYEUCAU_ID
      LEFT JOIN TM_PHONGBAN H ON H.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN LST_DICTIONARY I ON I.DICTIONARY_ID = A.HINHTHUCMUON_ID
      LEFT JOIN LST_DICTIONARY J ON J.DICTIONARY_ID = A.TINHTRANG_ID
      where CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')
      and J.DICTIONARY_CODE = 'DangMuon'
      <dynamic>
        <isParameterPresent>
          <!--<isNotEmpty prepend="AND">
            CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')
          </isNotEmpty>-->
          <isNotEmpty prepend="AND" property="PHONGBAN">
            A.PHONGBAN_ID = '$PHONGBAN$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="SOPHIEU">
            A.SOPHIEU LIKE N'%$SOPHIEU$%'
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            J.DICTIONARY_CODE = 'DangMuon'
          </isNotEmpty>-->
        </isParameterPresent>
      </dynamic>
      ) AS T
    </statement>
    <statement id="DAO00093_GetDanhSachPhieuMuon" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT *, COUNT(*) AS SL FROM (
      SELECT A.SOPHIEU, A.NGAYMUON, A.NGUOICHOMUON_ID, C.TENNHANVIEN AS NGUOICHOMUON, A.NGUOINHAN_ID, D.TENNHANVIEN AS NGUOINHAN,
      A.PHONGBAN_ID, H.TENPHONGBAN, A.HINHTHUCMUON_ID, I.DICTIONARY_NAME AS HINHTHUCMUON, A.GHICHU, A.NGAYTRA, A.NGUOITRA_ID, E.TENNHANVIEN AS NGUOITRA,
      A.NGUOINHANTRA_ID, F.TENNHANVIEN AS NGUOINHANTRA, A.TINHTRANG_ID, J.DICTIONARY_NAME AS TINHTRANG, A.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU,
      K.DICTIONARY_NAME AS LYDOMUON, A.NGAYPHAITRA
      FROM TT_BENHAN_MUONTRA A
      LEFT JOIN TT_BENHAN_LUUTRU B ON B.HOSO_ID = A.HOSO_ID
      LEFT JOIN TM_NHANVIEN C ON C.NHANVIEN_ID = A.NGUOICHOMUON_ID
      LEFT JOIN TM_NHANVIEN D ON D.NHANVIEN_ID = A.NGUOINHAN_ID
      LEFT JOIN TM_NHANVIEN E ON E.NHANVIEN_ID = A.NGUOITRA_ID
      LEFT JOIN TM_NHANVIEN F ON F.NHANVIEN_ID = A.NGUOINHANTRA_ID
      LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = A.NGUOIYEUCAU_ID
      LEFT JOIN TM_PHONGBAN H ON H.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN LST_DICTIONARY I ON I.DICTIONARY_ID = A.HINHTHUCMUON_ID
      LEFT JOIN LST_DICTIONARY J ON J.DICTIONARY_ID = A.TINHTRANG_ID
      LEFT JOIN LST_DICTIONARY k ON k.DICTIONARY_ID = A.LYDOMUON_ID
      WHERE J.DICTIONARY_CODE = 'DangMuon'
      <!--and CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')-->
      <dynamic>
        <isParameterPresent>
          <isNotEmpty prepend="AND">
            CONVERT(DATE, A.NGAYPHAITRA) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="PHONGBAN">
            A.PHONGBAN_ID = '$PHONGBAN$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="SOPHIEU">
            A.SOPHIEU LIKE N'%$SOPHIEU$%'
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            J.DICTIONARY_CODE = 'DangMuon'
          </isNotEmpty>-->
        </isParameterPresent>
      </dynamic>
      ) AS T
      GROUP BY T.SOPHIEU, T.NGAYMUON, T.NGUOICHOMUON_ID, T.NGUOICHOMUON, T.NGUOINHAN_ID, T.NGUOINHAN, T.PHONGBAN_ID, T.TENPHONGBAN,
      T.HINHTHUCMUON_ID, T.HINHTHUCMUON, T.GHICHU, T.NGAYTRA, T.NGUOITRA_ID, T.NGUOITRA,T.NGUOINHANTRA_ID, T.NGUOINHANTRA,
      T.TINHTRANG_ID, T.TINHTRANG, T.NGUOIYEUCAU_ID, T.NGUOIYEUCAU, T.LYDOMUON, T.NGAYPHAITRA
      ORDER BY T.NGAYMUON DESC
    </statement>
    <statement id="DAO00093_GetPhieuMuonTraDetail" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT A.SOPHIEU, A.NGUOICHOMUON_ID, C.TENNHANVIEN AS NGUOICHOMUON, A.NGUOINHAN_ID,
      D.TENNHANVIEN AS NGUOINHAN, A.PHIEUMUON_ID,
      A.PHONGBAN_ID, H.TENPHONGBAN, A.HINHTHUCMUON_ID, I.DICTIONARY_NAME AS HINHTHUCMUON, A.GHICHU,
      A.NGUOINHANTRA_ID, F.TENNHANVIEN AS NGUOINHANTRA, A.TINHTRANG_ID, J.DICTIONARY_NAME AS TINHTRANG,
      A.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU, A.HOSO_ID, B.MABENHAN,
      B.TENBENHNHAN, B.SOBIA AS SOBIABENHAN, B.NAMSINH, B.GIOITINH, B.SOLUUTRU, BA.TENLOAIBENHAN AS LOAIBENHAN,
      B.CHANDOAN,B.NGAYVAOVIEN, B.NGAYRAVIEN, A.NGAYMUON, B.MABENHNHAN
      FROM TT_BENHAN_MUONTRA A
      LEFT JOIN TT_BENHAN_LUUTRU B ON B.HOSO_ID = A.HOSO_ID
      LEFT JOIN TM_NHANVIEN C ON C.NHANVIEN_ID = A.NGUOICHOMUON_ID
      LEFT JOIN TM_NHANVIEN D ON D.NHANVIEN_ID = A.NGUOINHAN_ID
      LEFT JOIN TM_NHANVIEN E ON E.NHANVIEN_ID = A.NGUOITRA_ID
      LEFT JOIN TM_NHANVIEN F ON F.NHANVIEN_ID = A.NGUOINHANTRA_ID
      LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = A.NGUOIYEUCAU_ID
      LEFT JOIN TM_PHONGBAN H ON H.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN LST_DICTIONARY I ON I.DICTIONARY_ID = A.HINHTHUCMUON_ID
      LEFT JOIN LST_DICTIONARY J ON J.DICTIONARY_ID = A.TINHTRANG_ID
      LEFT JOIN TM_LOAIBENHAN BA ON BA.LOAIBENHAN_ID = B.LOAIBENHAN_ID
      WHERE A.SOPHIEU = '$SOPHIEU$'
    </statement>
    <statement id="DAO00093_GetPhieuThanhLyDetail" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT A.HOSO_ID, A.MABENHAN, A.MABENHNHAN, A.TENBENHNHAN, A.NAMSINH, F.DESCRIPTION AS GIOITINH,
      A.SOLUUTRU, A.TRANGTHAILUUTRU_ID, E.DICTIONARY_NAME AS TRANGTHAILUUTRU, C.TENPHONGBAN, A.SOBIA SOBIABENHAN,
      A.CHANDOAN, A.LOAIBENHAN_ID, convert(date,A.NGAYVAOVIEN) NGAYVAOVIEN, convert(date,A.NGAYRAVIEN) NGAYRAVIEN,
      A.LYDONHAPVIEN_ID, L.TENLOAIBENHAN LOAIBENHAN
      FROM TT_BENHAN_LUUTRU A
      LEFT JOIN TT_NOITRU_BENHAN B ON B.BENHAN_ID = A.BENHAN_ID
      LEFT JOIN TM_PHONGBAN C ON C.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN TM_GENDER F ON F.ID = A.GIOITINH
      LEFT JOIN LST_DICTIONARY E ON E.DICTIONARY_ID = A.TRANGTHAILUUTRU_ID
      LEFT JOIN TM_LOAIBENHAN L ON L.LOAIBENHAN_ID = A.LOAIBENHAN_ID
      WHERE A.MACHUNGTUTHANHLY = '$MACHUNGTUTHANHLY$'
    </statement>
    <statement id="DAO00093_GetBenhAn" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select a.NGAYCHUYEN, a.NGUOIGIAO_ID, b.TENNHANVIEN as NGUOIGIAO, A.NGUOINHAN_ID, D.TENNHANVIEN AS NGUOINHAN,
      A.NGUOICHUYEN_ID, C.TENNHANVIEN AS NGUOICHUYEN, A.TRANGTHAILUUTRU_ID, G.DICTIONARY_NAME AS TRANGTHAI
      from TT_BENHAN_LUUTRU A
      left join TM_NHANVIEN B on A.NGUOIGIAO_ID = b.NHANVIEN_ID
      left join TM_NHANVIEN C on a.NGUOICHUYEN_ID = c.NHANVIEN_ID
      left join TM_NHANVIEN D on a.NGUOINHAN_ID = d.NHANVIEN_ID
      left join LST_DICTIONARY G on a.TRANGTHAILUUTRU_ID = g.DICTIONARY_ID
      WHERE A.MABENHAN = '$MABENHAN$'
    </statement>
    <statement id="DAO00093_GetThongTinBenhNhan" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select B.MAYTE AS MABENHNHAN, convert(varchar(10),B.NGAYSINH,103) as NGAYSINH, B.NHOMMAU_ID, lst.DICTIONARY_NAME YEUTORH, C.SOLUUTRU, A.LOAIBENHAN_ID,
      case when b.GIOITINH='1' then N'Nam' else N'Ná»¯' end GIOITINH, B.TENBENHNHAN AS HOTENBENHNHAN, C.SOBIA AS SOBIABENHAN, B.DIACHILIENLAC, B.SODIENTHOAI,
      nv.TENNHANVIEN BACSIDIEUTRI, A.BACSIDIEUTRI_ID,
      A.CHUYENKHOA_ID, A.SONGAYDIEUTRI, A.LANVAOVIEN, A.THOIGIANVAOKHOA, A.THOIGIANRAVIEN,
      A.THOIGIANLAP, A.NOILAP_ID, C.PHONGBAN_ID, A.BENHVIEN_ID, A.LYDOXUATVIEN_ID, A.CHUYENVIEN_ID, A.CHUYENDENBENHVIEN_ID,
      tn.SOBHYT, tn.BHYTDENNGAY NGAYHIEULUC, tn.BHYTTUNGAY NGAYHETHIEULUC,
      icd.MAICD AS TUYENDUOI, icd2.MAICD AS KHAMBENH, icd3.MAICD AS LIST_ICD_VAOKHOA,
      CHANDOANTUYENDUOI, CHANDOANKHAMBENH, CHANDOANVAOKHOA, THUTHUAT, PHAUTHUAT,
      lst1.DICTIONARY_NAME AS KETQUADIEUTRI, lst2.DICTIONARY_NAME AS TINHTRANGGIAIPHAUBENH, A.THOIGIANTUVONG,
      lst3.DICTIONARY_NAME AS NGUYENNHANTUVONG,
      ICD_BENHCHINH, CHANDOANRAVIEN, ICD_BENHPHU, TAIBIENDIEUTRI, BIENCHUNG, NGUYENNHANTAIBIEN_ID,
      icd4.MAICD AS ICD_GIAIPHAUTUTHI, BB.TVAOVIEN, BB.NVAOVIEN, BB.MVAOVIEN, BB.GIAIDOANVAOVIEN,
      BB.TONGSONGAYDIEUTRISAUPHAUTHUAT, BB.TONGSOLANPHAUTHUAT, BB.TKHAMBENH, BB.MKHAMBENH, BB.NKHAMBENH, BB.GIAIDOANKHAMBENH,
      BB.CHANDOANTRUOCPHAUTHUAT, BB.CHANDOANSAUPHAUTHUAT, BB.TAIBIENDOGAYME, BB.TAIBIENDONHIEMKHUAN, BB.TAIBIENDOPHAUTHAU,
      BB.TAIBIENKHAC
      from TT_NOITRU_BENHAN A
      left join TT_TIEPNHAN tn on tn.TIEPNHAN_ID = a.TIEPNHAN_ID
      left join TT_BENHNHAN B on A.BENHNHAN_ID = B.BENHNHAN_ID
      left join TT_BENHAN_LUUTRU C on A.BENHAN_ID = C.BENHAN_ID
      left join TM_NHANVIEN nv on nv.NHANVIEN_ID = A.BACSIDIEUTRI_ID
      left join LST_DICTIONARY lst on lst.DICTIONARY_ID = B.YEUTORH_ID
      left join TT_NOITRU_BENHAN_CHITIET BB on A.BENHAN_ID = BB.BENHAN_ID
      left join LST_DICTIONARY lst1 on lst1.DICTIONARY_ID = a.KETQUADIEUTRI_ID
      left join LST_DICTIONARY lst2 on lst2.DICTIONARY_ID = A.TINHTRANGGIAIPHAUBENH_ID
      left join LST_DICTIONARY lst3 on lst3.DICTIONARY_ID = A.NGUYENNHANTUVONG_ID
      left join TM_ICD icd on icd.ICD_ID = A.ICD_TUYENDUOI
      left join TM_ICD icd2 on icd2.ICD_ID = A.ICD_KHAMBENH
      left join TM_ICD icd3 on icd3.ICD_ID = A.ICD_VAOKHOA
      left join TM_ICD icd4 on icd4.ICD_ID = A.ICD_GIAIPHAUTUTHI_ID
      where A.SOBENHAN = '$MABENHAN$'
    </statement>
    <statement id="DAO00093_GetThongTinChanDoanBenhNhan" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select icd.MAICD AS TUYENDUOI, icd2.MAICD AS KHAMBENH, icd3.MAICD AS LIST_ICD_VAOKHOA,
      CHANDOANTUYENDUOI, CHANDOANKHAMBENH, CHANDOANVAOKHOA, THUTHUAT, PHAUTHUAT,
      lst.DICTIONARY_NAME AS KETQUADIEUTRI, lst2.DICTIONARY_NAME AS TINHTRANGGIAIPHAUBENH, THOIGIANTUVONG,
      lst.DICTIONARY_NAME AS NGUYENNHANTUVONG,
      ICD_BENHCHINH, CHANDOANRAVIEN, ICD_BENHPHU, TAIBIENDIEUTRI, BIENCHUNG, NGUYENNHANTAIBIEN_ID,
      icd4.MAICD AS ICD_GIAIPHAUTUTHI, B.TVAOVIEN, B.NVAOVIEN, B.MVAOVIEN, B.GIAIDOANVAOVIEN,
      B.TONGSONGAYDIEUTRISAUPHAUTHUAT, B.TONGSOLANPHAUTHUAT, B.TKHAMBENH, B.MKHAMBENH, B.NKHAMBENH, B.GIAIDOANKHAMBENH,
      B.CHANDOANTRUOCPHAUTHUAT, B.CHANDOANSAUPHAUTHUAT, B.TAIBIENDOGAYME, B.TAIBIENDONHIEMKHUAN, B.TAIBIENDOPHAUTHAU,
      B.TAIBIENKHAC
      from TT_NOITRU_BENHAN A
      left join TT_NOITRU_BENHAN_CHITIET B on A.BENHAN_ID = B.BENHAN_ID
      left join LST_DICTIONARY lst on lst.DICTIONARY_ID = a.KETQUADIEUTRI_ID
      left join LST_DICTIONARY lst2 on lst2.DICTIONARY_ID = A.TINHTRANGGIAIPHAUBENH_ID
      left join LST_DICTIONARY lst3 on lst3.DICTIONARY_ID = A.NGUYENNHANTUVONG_ID
      left join TM_ICD icd on icd.ICD_ID = A.ICD_TUYENDUOI
      left join TM_ICD icd2 on icd2.ICD_ID = A.ICD_KHAMBENH
      left join TM_ICD icd3 on icd3.ICD_ID = A.ICD_VAOKHOA
      left join TM_ICD icd4 on icd4.ICD_ID = A.ICD_GIAIPHAUTUTHI_ID
      where A.SOBENHAN = '$MABENHAN$'
    </statement>
    <statement id="DAO00093_GetPhieuMuon" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT A.SOPHIEU, A.NGUOICHOMUON_ID, C.TENNHANVIEN AS NGUOICHOMUON, A.NGUOINHAN_ID,
      D.TENNHANVIEN AS NGUOINHAN, A.PHIEUMUON_ID,
      A.PHONGBAN_ID, H.TENPHONGBAN, A.HINHTHUCMUON_ID, I.DICTIONARY_NAME AS HINHTHUCMUON, A.GHICHU,
      A.NGUOINHANTRA_ID, F.TENNHANVIEN AS NGUOINHANTRA, A.TINHTRANG_ID, J.DICTIONARY_NAME AS TINHTRANG,
      A.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU, A.HOSO_ID, B.MABENHAN,
      B.TENBENHNHAN, B.SOBIA AS SOBIABENHAN, B.NAMSINH, B.GIOITINH, B.SOLUUTRU, BA.TENLOAIBENHAN AS LOAIBENHAN,
      B.CHANDOAN,B.NGAYVAOVIEN, B.NGAYRAVIEN, A.NGAYMUON, B.MABENHNHAN
      FROM TT_BENHAN_MUONTRA A
      LEFT JOIN TT_BENHAN_LUUTRU B ON B.HOSO_ID = A.HOSO_ID
      LEFT JOIN TM_NHANVIEN C ON C.NHANVIEN_ID = A.NGUOICHOMUON_ID
      LEFT JOIN TM_NHANVIEN D ON D.NHANVIEN_ID = A.NGUOINHAN_ID
      LEFT JOIN TM_NHANVIEN E ON E.NHANVIEN_ID = A.NGUOITRA_ID
      LEFT JOIN TM_NHANVIEN F ON F.NHANVIEN_ID = A.NGUOINHANTRA_ID
      LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = A.NGUOIYEUCAU_ID
      LEFT JOIN TM_PHONGBAN H ON H.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN LST_DICTIONARY I ON I.DICTIONARY_ID = A.HINHTHUCMUON_ID
      LEFT JOIN LST_DICTIONARY J ON J.DICTIONARY_ID = A.TINHTRANG_ID
      LEFT JOIN TM_LOAIBENHAN BA ON BA.LOAIBENHAN_ID = B.LOAIBENHAN_ID
      WHERE J.DICTIONARY_CODE = 'DangMuon'
      and CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')
      <dynamic>
        <isParameterPresent>
          <!--<isNotEmpty prepend="AND">
            CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')
          </isNotEmpty>-->
          <isNotEmpty prepend="AND" property="PHONGBAN">
            A.PHONGBAN_ID = '$PHONGBAN$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="SOPHIEU">
            A.SOPHIEU LIKE N'%$SOPHIEU$%'
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            J.DICTIONARY_CODE = 'DangMuon'
          </isNotEmpty>-->
        </isParameterPresent>
      </dynamic>
      ORDER BY A.NGAYMUON DESC
    </statement>
    <statement id="DAO00093_GetTinhTrangHoSo" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID, DICTIONARY_NAME
      FROM LST_DICTIONARY
      WHERE DICTIONARY_TYPE_CODE='TinhTrangMuonBenhAn'
    </statement>
    <statement id="DAO00093_GetDanhSachHoSo_Count" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT COUNT(*) AS TOTALROWS FROM (
      SELECT DISTINCT A.SOPHIEU,
      A.PHONGBAN_ID, H.TENPHONGBAN AS PHONGBAN, A.HINHTHUCMUON_ID, I.DICTIONARY_NAME AS HINHTHUCMUON, A.GHICHU,
      A.NGAYTRA, A.NGUOITRA_ID, E.TENNHANVIEN AS NGUOITRA,
      A.NGUOINHANTRA_ID, F.TENNHANVIEN AS NGUOINHANTRA, A.TINHTRANG_ID, D.TENNHANVIEN AS NGUOINHAN,
      J.DICTIONARY_NAME AS TINHTRANG, A.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU, A.SOTAILIEU,
      A.NGAYMUON, K.TENNHANVIEN AS NGUOICHOMUON
      FROM TT_BENHAN_MUONTRA A
      LEFT JOIN TT_BENHAN_LUUTRU B ON B.HOSO_ID = A.HOSO_ID
      LEFT JOIN TM_NHANVIEN D ON D.NHANVIEN_ID = A.NGUOINHAN_ID
      LEFT JOIN TM_NHANVIEN E ON E.NHANVIEN_ID = A.NGUOITRA_ID
      LEFT JOIN TM_NHANVIEN F ON F.NHANVIEN_ID = A.NGUOINHANTRA_ID
      LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = A.NGUOIYEUCAU_ID
      LEFT JOIN TM_NHANVIEN K ON K.NHANVIEN_ID = A.NGUOICHOMUON_ID
      LEFT JOIN TM_PHONGBAN H ON H.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN LST_DICTIONARY I ON I.DICTIONARY_ID = A.HINHTHUCMUON_ID
      LEFT JOIN LST_DICTIONARY J ON J.DICTIONARY_ID = A.TINHTRANG_ID
      where CONVERT(DATE, A.NGAYTAO) BETWEEN CONVERT(DATE,case when '$TUNGAY$' is null then '1900-01-01' else '$TUNGAY$' end) AND CONVERT(DATE,'$DENNGAY$')
      <dynamic>
        <isParameterPresent>
          <!--<isNotEmpty prepend="AND">
            CONVERT(DATE, A.NGAYTAO) BETWEEN CONVERT(DATE,case when '$TUNGAY$' is null then '1900-01-01' else '$TUNGAY$' end) AND CONVERT(DATE,'$DENNGAY$')
          </isNotEmpty>-->
          <isNotEmpty prepend="AND" property="PHONGBAN">
            A.PHONGBAN_ID = '$PHONGBAN$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="TRANGTHAILUUTRU">
            J.DICTIONARY_ID = '$TRANGTHAILUUTRU$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="SOPHIEU">
            A.SOPHIEU LIKE N'%$SOPHIEU$%'
          </isNotEmpty>
        </isParameterPresent>
      </dynamic>
      ) AS T
    </statement>
      <statement id="DAO00093_GetDanhSachHoSo" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
        SELECT * FROM (
        SELECT ROW_NUMBER() OVER (ORDER BY T.SOPHIEU) AS ROWNUMBER, * FROM (
        SELECT DISTINCT A.SOPHIEU,
        A.PHONGBAN_ID, H.TENPHONGBAN AS PHONGBAN, A.HINHTHUCMUON_ID, I.DICTIONARY_NAME AS HINHTHUCMUON, A.GHICHU,
        A.NGAYTRA, A.NGUOITRA_ID, E.TENNHANVIEN AS NGUOITRA,
        A.NGUOINHANTRA_ID, F.TENNHANVIEN AS NGUOINHANTRA, A.TINHTRANG_ID, D.TENNHANVIEN AS NGUOINHAN,
        J.DICTIONARY_NAME AS TINHTRANG, A.NGUOIYEUCAU_ID, G.TENNHANVIEN AS NGUOIYEUCAU, A.SOTAILIEU,
        A.NGAYMUON, K.TENNHANVIEN AS NGUOICHOMUON
        FROM TT_BENHAN_MUONTRA A
        LEFT JOIN TT_BENHAN_LUUTRU B ON B.HOSO_ID = A.HOSO_ID
        LEFT JOIN TM_NHANVIEN D ON D.NHANVIEN_ID = A.NGUOINHAN_ID
        LEFT JOIN TM_NHANVIEN E ON E.NHANVIEN_ID = A.NGUOITRA_ID
        LEFT JOIN TM_NHANVIEN F ON F.NHANVIEN_ID = A.NGUOINHANTRA_ID
        LEFT JOIN TM_NHANVIEN G ON G.NHANVIEN_ID = A.NGUOIYEUCAU_ID
        LEFT JOIN TM_NHANVIEN K ON K.NHANVIEN_ID = A.NGUOICHOMUON_ID
        LEFT JOIN TM_PHONGBAN H ON H.PHONGBAN_ID = A.PHONGBAN_ID
        LEFT JOIN LST_DICTIONARY I ON I.DICTIONARY_ID = A.HINHTHUCMUON_ID
        LEFT JOIN LST_DICTIONARY J ON J.DICTIONARY_ID = A.TINHTRANG_ID
        where CONVERT(DATE, A.NGAYTAO) BETWEEN CONVERT(DATE,case when '$TUNGAY$' is null then '1900-01-01' else '$TUNGAY$' end) AND CONVERT(DATE,'$DENNGAY$')
        <dynamic>
        <isParameterPresent>
          <!--<isNotEmpty prepend="AND">
            CONVERT(DATE, A.NGAYTAO) BETWEEN CONVERT(DATE,case when '$TUNGAY$' is null then '1900-01-01' else '$TUNGAY$' end) AND CONVERT(DATE,'$DENNGAY$')
          </isNotEmpty>-->
          <isNotEmpty prepend="AND" property="PHONGBAN">
            A.PHONGBAN_ID = '$PHONGBAN$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="TRANGTHAILUUTRU">
            J.DICTIONARY_ID = '$TRANGTHAILUUTRU$'
          </isNotEmpty>
          <isNotEmpty prepend="AND" property="SOPHIEU">
            A.SOPHIEU LIKE N'%$SOPHIEU$%'
          </isNotEmpty>
        </isParameterPresent>
      </dynamic>
      ) AS T)LST
      WHERE LST.ROWNUMBER BETWEEN '$FROMROW$' AND '$TOROW$'
      ORDER BY LST.SOPHIEU ASC
    </statement>
    <statement id="DAO00093_GetSoTaiLieuRef" resultClass="DataObject">
      select a.FILE_ID, a.REF_ID
      from TT_FILE_DINHKEM a
        inner join TT_BENHAN_MUONTRA b on a.REF_ID = b.SOTAILIEU
      where b.SOTAILIEU = '$SOTAILIEU$' and a.REF_TABLE='TT_BENHAN_MUONTRA' and b.SOPHIEU='$SOPHIEU$'
      group by a.FILE_ID, a.REF_ID
    </statement>
    <statement id="DAO00093_GetDanhSachHSBADangMuon" resultClass="DataObject">
      select ROW_NUMBER() OVER(ORDER BY A.PHIEUMUON_ID) AS STT, A.SOPHIEU,Y.TENNHANVIEN 'NGUOIYEUCAU', A.HOSO_ID,
      C.TENNHANVIEN 'NGUOICHOMUON', A.NGAYMUON, P.TENPHONGBAN, N.TENNHANVIEN 'NGUOINHAN', L.DICTIONARY_NAME 'HINHTHUCMUON',
      A.GHICHU, A.PHIEUMUON_ID
      from TT_BENHAN_MUONTRA A
      LEFT JOIN TM_NHANVIEN C ON A.NGUOICHOMUON_ID = C.NHANVIEN_ID
      LEFT JOIN TM_NHANVIEN Y ON A.NGUOIYEUCAU_ID = Y.NHANVIEN_ID
      LEFT JOIN TM_NHANVIEN N ON A.NGUOINHAN_ID = N.NHANVIEN_ID
      LEFT JOIN TM_PHONGBAN P ON A.PHONGBAN_ID = P.PHONGBAN_ID
      LEFT JOIN LST_DICTIONARY L ON A.HINHTHUCMUON_ID = L.DICTIONARY_ID
      where CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$') and A.TINHTRANG_ID = '8315'
      <dynamic>
        <isParameterPresent>
          <isNotEmpty prepend="AND" property="PHONGBAN_ID">
            A.PHONGBAN_ID = '$PHONGBAN_ID$'
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            CONVERT(DATE, A.NGAYMUON) BETWEEN CONVERT(DATE,'$TUNGAY$') AND CONVERT(DATE,'$DENNGAY$')
          </isNotEmpty>-->
          <isNotEmpty prepend="AND" property="SOPHIEU">
            A.SOPHIEU LIKE '%$SOPHIEU$%'
          </isNotEmpty>
          <!--<isNotEmpty prepend="AND">
            A.TINHTRANG_ID = '8315'
          </isNotEmpty>-->
        </isParameterPresent>
      </dynamic>
    </statement>
    <statement id="DAO00093_GetDanhSachHSBATheoPhieuMuon" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT D.PHIEUMUON_ID, A.HOSO_ID, A.MABENHAN, A.MABENHNHAN, A.TENBENHNHAN, A.NAMSINH, F.DESCRIPTION AS GENDER,
      A.SOLUUTRU, E.DICTIONARY_NAME AS TRANGTHAILUUTRU, A.LOAIBENHAN_ID, A.CHANDOAN, C.TENPHONGBAN,
      A.NGAYVAOVIEN, A.NGAYRAVIEN, D.GHICHU, A.LYDONHAPVIEN_ID, D.SOPHIEU, D.NGAYMUON, D.NGUOIYEUCAU_ID,
      D.NGUOINHAN_ID, D.PHONGBAN_ID, D.NGUOICHOMUON_ID, D.HINHTHUCMUON_ID, D.NGAYTRA, D.NGUOITRA_ID, D.NGUOINHANTRA_ID
      FROM TT_BENHAN_LUUTRU A
      LEFT JOIN TT_NOITRU_BENHAN B ON B.BENHAN_ID = A.BENHAN_ID
      LEFT JOIN TM_PHONGBAN C ON C.PHONGBAN_ID = A.PHONGBAN_ID
      LEFT JOIN TT_BENHAN_MUONTRA D ON D.HOSO_ID = A.HOSO_ID
      LEFT JOIN LST_DICTIONARY E ON E.DICTIONARY_ID = A.TRANGTHAILUUTRU_ID
      LEFT JOIN TM_GENDER F ON F.ID = A.GIOITINH
      WHERE D.SOPHIEU =  N'$SOPHIEU$'
      ORDER BY D.NGAYMUON DESC
    </statement>
    <statement id="DAO00093_GetAll" resultClass="DataObject">
      select *
      from TT_BENHAN_MUONTRA
      order by PHIEUMUON_ID
    </statement>
    <statement id="DAO00093_GetList" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT DICTIONARY_ID, DICTIONARY_NAME FROM LST_DICTIONARY WHERE DICTIONARY_TYPE_CODE='LoaiHoSoBenhAn'
    </statement>
    <statement id="DAO00093_GetDetail" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select *
      from TT_BENHAN_MUONTRA
      where TT_BENHAN_MUONTRA.PHIEUMUON_ID  = '$value$'
      order by PHIEUMUON_ID
    </statement>
    <statement id="DAO00093_GetDetailP" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select *
      from TT_BENHAN_MUONTRA
      where TT_BENHAN_MUONTRA.PHIEUMUON_ID  = '$PHIEUMUON_ID$'
      order by PHIEUMUON_ID
    </statement>
    <insert id="DAO00093_Add" parameterClass="System.Collections.IDictionary" resultClass="System.Int64">
      insert into TT_BENHAN_MUONTRA (
      SOPHIEU
      , HOSO_ID
      , NGAYMUON
      , NGUOIYEUCAU_ID
      , NGUOICHOMUON_ID
      , NGUOINHAN_ID
      , PHONGBAN_ID
      , HINHTHUCMUON_ID
      , LYDOMUON_ID
      , NGAYPHAITRA
      , GHICHU
      , NGAYTRA
      , NGUOITRA_ID
      , NGUOINHANTRA_ID
      , TINHTRANG_ID
      , BENHVIEN_ID
      , NGAYTAO
      , NGUOITAO_ID
      , NGAYCAPNHAT
      , NGUOICAPNHAT_ID
      , SOTAILIEU
      ) values (
      #SOPHIEU#
      , #HOSO_ID#
      , #NGAYMUON#
      , #NGUOIYEUCAU_ID#
      , #NGUOICHOMUON_ID#
      , #NGUOINHAN_ID#
      , #PHONGBAN_ID#
      , #HINHTHUCMUON_ID#
      , #LYDOMUON_ID#
      , #NGAYPHAITRA#
      , #GHICHU#
      , #NGAYTRA#
      , #NGUOITRA_ID#
      , #NGUOINHANTRA_ID#
      , #TINHTRANG_ID#
      , #BENHVIEN_ID#
      , #NGAYTAO#
      , #NGUOITAO_ID#
      , #NGAYCAPNHAT#
      , #NGUOICAPNHAT_ID#
      , #SOTAILIEU#
      )
      update TT_BENHAN_LUUTRU set
      TRANGTHAILUUTRU_ID = '8342'
      where
      HOSO_ID = '$HOSO_ID$'
    </insert>
    <update id="DAO00093_UpdateFileDinhKem" parameterClass="System.Collections.IDictionary">
      update TT_FILE_DINHKEM set
      REF_ID = #REF_ID#
      where FILE_ID IN ('$LIST_FILE_ID$')
    </update>
    <update id="DAO00093_UpdatePhieuMuonBA" parameterClass="System.Collections.IDictionary">
      update TT_BENHAN_MUONTRA set
      NGUOIYEUCAU_ID = #NGUOIYEUCAU#
      , NGUOINHAN_ID = #NGUOINHAN#
      , PHONGBAN_ID = #PHONGBAN#
      , HINHTHUCMUON_ID = #HINHTHUCMUON#
      , GHICHU = #GHICHU#
      , NGAYMUON = #NGAYMUON#
      , NGUOICHOMUON_ID = #NGUOICHOMUON_ID#
      , NGAYCAPNHAT = #NGAYCAPNHAT#
      , NGUOICAPNHAT_ID = #NGUOICAPNHAT_ID#
      , TINHTRANG_ID = '8315'
      where
      SOPHIEU = '$SOPHIEU$'
      update TT_BENHAN_LUUTRU set
      TRANGTHAILUUTRU_ID = '8342'
      where
      HOSO_ID = '$HOSO_ID$'
    </update>
    <update id="DAO00093_UpdatePhieuTraBA" parameterClass="System.Collections.IDictionary">
      update TT_BENHAN_MUONTRA set
       GHICHU = #GHICHU#
      , NGAYTRA = #NGAYTRA#
      , NGUOITRA_ID = #NGUOITRA_ID#
      , NGUOINHANTRA_ID = #NGUOINHANTRA_ID#
      , TINHTRANG_ID = '8316'
      where
      SOPHIEU = '$SOPHIEU$'
      update TT_BENHAN_LUUTRU set
      TRANGTHAILUUTRU_ID = '8339'
      where
      HOSO_ID = '$HOSO_ID$'
    </update>
    <statement id="DAO00093_Delete" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      delete from TT_BENHAN_MUONTRA
      where
      PHIEUMUON_ID = '$PHIEUMUON_ID$'
      update TT_BENHAN_LUUTRU set
      TRANGTHAILUUTRU_ID = '8339'
      where
      HOSO_ID = '$HOSO_ID$'
    </statement>
    <statement id="DAO00093_DeleteAllPhieuMuonBA" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      delete from TT_BENHAN_MUONTRA
      where
      SOPHIEU = '$SOPHIEU$'
    </statement>
    <statement id="DAO00093_DeleteP" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      delete from TT_BENHAN_MUONTRA
      <dynamic prepend="where">
        <isParameterPresent>
          <isNotEmpty prepend="and" property="PHIEUMUON_ID">
            TT_BENHAN_MUONTRA.PHIEUMUON_ID = '$PHIEUMUON_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="SOPHIEU">
            TT_BENHAN_MUONTRA.SOPHIEU = '$SOPHIEU$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="HOSO_ID">
            TT_BENHAN_MUONTRA.HOSO_ID = '$HOSO_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGAYMUON">
            TT_BENHAN_MUONTRA.NGAYMUON = '$NGAYMUON$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOIYEUCAU_ID">
            TT_BENHAN_MUONTRA.NGUOIYEUCAU_ID = '$NGUOIYEUCAU_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOICHOMUON_ID">
            TT_BENHAN_MUONTRA.NGUOICHOMUON_ID = '$NGUOICHOMUON_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOINHAN_ID">
            TT_BENHAN_MUONTRA.NGUOINHAN_ID = '$NGUOINHAN_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="PHONGBAN_ID">
            TT_BENHAN_MUONTRA.PHONGBAN_ID = '$PHONGBAN_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="HINHTHUCMUON_ID">
            TT_BENHAN_MUONTRA.HINHTHUCMUON_ID = '$HINHTHUCMUON_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="GHICHU">
            TT_BENHAN_MUONTRA.GHICHU = '$GHICHU$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGAYTRA">
            TT_BENHAN_MUONTRA.NGAYTRA = '$NGAYTRA$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOITRA_ID">
            TT_BENHAN_MUONTRA.NGUOITRA_ID = '$NGUOITRA_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOINHANTRA_ID">
            TT_BENHAN_MUONTRA.NGUOINHANTRA_ID = '$NGUOINHANTRA_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="TINHTRANG_ID">
            TT_BENHAN_MUONTRA.TINHTRANG_ID = '$TINHTRANG_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="BENHVIEN_ID">
            TT_BENHAN_MUONTRA.BENHVIEN_ID = '$BENHVIEN_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGAYTAO">
            TT_BENHAN_MUONTRA.NGAYTAO = '$NGAYTAO$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOITAO_ID">
            TT_BENHAN_MUONTRA.NGUOITAO_ID = '$NGUOITAO_ID$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGAYCAPNHAT">
            TT_BENHAN_MUONTRA.NGAYCAPNHAT = '$NGAYCAPNHAT$'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="NGUOICAPNHAT_ID">
            TT_BENHAN_MUONTRA.NGUOICAPNHAT_ID = '$NGUOICAPNHAT_ID$'
          </isNotEmpty>
        </isParameterPresent>
      </dynamic>
    </statement>
    <statement id="DAO00093_GetStatus" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select L.DICTIONARY_CODE, A.*
      from TT_BENHAN_MUONTRA A JOIN LST_DICTIONARY L ON L.DICTIONARY_ID = A.TINHTRANG_ID
      WHERE A.SOPHIEU = '$SOPHIEU$' AND A.BENHVIEN_ID = '$BENHVIEN_ID$'
    </statement>
  </statements>
</sqlMap>
