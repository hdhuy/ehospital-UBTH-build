<?xml version="1.0" encoding="utf-8" ?>
<!--============================================================================
//	CAUTION: This file is generated by IBatisNetGen.3.SQLMap.cst at 5/24/2016 11:05:56 AM
//				Any manual editing will be lost in re-generation.
//===========================================================================-->
<sqlMap namespace="eHospital" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <statements>
    
    <statement id="DAO00221_GetList" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select * from TM_GPB_KETQUA
      where LOAIGPB_ID =
      (select top (1) DICTIONARY_ID from LST_DICTIONARY where DICTIONARY_CODE = '$DICTIONARY_CODE$')
      <isNull prepend="and" property="IDX" >
        IDX is not null
      </isNull>
      <isNotNull prepend="and" property="IDX" >
        IDX is null
      </isNotNull>
      and CAP = 1
      and TAMNGUNG = 0
      <!--and BENHVIEN_ID = '$BENHVIEN_ID$'-->
    </statement>

    <statement id="DAO00221_GetDSGPBKetQua" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select * from TM_GPB_KETQUA
      where CAPTREN_ID = (select GPB_KETQUA_ID from TM_GPB_KETQUA where MA = '$MA$')
      and CAP = 2
      and TAMNGUNG = 0
      and BENHVIEN_ID = '$BENHVIEN_ID$'
    </statement>

    <statement id="DAO00221_GetGPBKetQuaByID" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      select * from TM_GPB_KETQUA
      where GPB_KETQUA_ID = '$GPB_KETQUA_ID$'
      and TAMNGUNG = 0
      and BENHVIEN_ID = '$BENHVIEN_ID$'
    </statement>

    <statement id="DAO00221_GetDSMauBenhPhamByDVYeuCauID" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      <!--select * from TT_QUANLYBENHPHAM
      where QUANLYBENHPHAM_ID in
      (select QUANLYBENHPHAM_ID from TT_QUANLYBENHPHAM_CHITIET where DVYEUCAU_ID = '$DVYEUCAU_ID$')
      and BENHVIEN_ID = '$BENHVIEN_ID$'-->

      select m.*, d.SID, dv.DONVITINH from TT_QUANLYBENHPHAM m
      inner join TT_QUANLYBENHPHAM_CHITIET d on m.QUANLYBENHPHAM_ID = d.QUANLYBENHPHAM_ID
      left join TM_DICHVU dv on dv.DICHVU_ID = d.DICHVU_ID
      where d.DVYEUCAU_ID = '$DVYEUCAU_ID$'
      and m.BENHVIEN_ID = '$BENHVIEN_ID$'

    </statement>
    
  </statements>

</sqlMap>
