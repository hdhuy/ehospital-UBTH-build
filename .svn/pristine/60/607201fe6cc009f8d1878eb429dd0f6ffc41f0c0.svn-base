<?xml version="1.0" encoding="utf-8" ?>
<!--============================================================================
//	CAUTION: This file is generated by IBatisNetGen.3.SQLMap.cst at 11/11/2015 9:30:18 AM
//				Any manual editing will be lost in re-generation.
//===========================================================================-->
<sqlMap namespace="eHospital" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <statements>
    <statement id="DAO00223_GetList" parameterClass="System.Collections.IDictionary" resultClass="DataObject">
      SELECT LOAIGIA_ID, MALOAIGIA,TENLOAIGIA,CAPTREN_ID
      FROM TM_LOAIGIA WHERE BENHVIEN_ID='$BENHVIEN_ID$'
    </statement>
    <statement id="DAO00223_GetThongTinPhanLoaiCapCuu" resultClass="DataObject" parameterClass="System.Collections.IDictionary">
      select TOP 1
      TT.[PHANLOAICAPCUU_ID]
      ,TT.[BENHAN_ID]
      ,TT.[TIEPNHAN_ID]
      ,TT.[BENHNHAN_ID]
      ,TT.[NGUOITAO_ID]
      ,TT.[NGAY]
      ,TT.[THOIGIANTRIAGE]
      ,TT.[YTHUC_ID]
      ,TT.[NGUYENNHANCAPCUU]
      ,TT.[PHUONGTIEN_ID]
      ,TT.[NOIGIOITHIEU_ID]
      ,TT.[TRIEUCHUNGLAMSANG]
      ,TT.[PHANLOAIMUCDONANG]
      ,TT.[TIENSU]
      ,TT.[TIENSU_TEXT]
      ,TT.[DIUNG]
      ,TT.[DIUNG_TEXT]
      ,TT.[DIEMDAU]
      ,TT.[DIEMDAU_TEXT]
      ,TT.[HOHAP]
      ,TT.[DUONGHUYETMAOMACH]
      ,TT.[HUYETDONG]
      ,TT.[MACHQUAY]
      ,TT.[MAT]
      ,TT.[DAPUNGLOINOI]
      ,TT.[DAPUNGVANDONG]
      ,TT.[GCS_SCORE]
      ,BA.TRANGTHAI
      from TT_PHANLOAICAPCUU TT
      INNER JOIN TT_NOITRU_BENHAN BA ON TT.BENHAN_ID=BA.BENHAN_ID
      where TT.BENHNHAN_ID='$BENHNHAN_ID$' AND TT.BENHAN_ID='$BENHAN_ID$' AND TT.TIEPNHAN_ID='$TIEPNHAN_ID$'
    </statement>
    <insert id="DAO00223_Add" parameterClass="System.Collections.IDictionary" resultClass="System.Int64">
      INSERT INTO  [TT_PHANLOAICAPCUU]
      (
      [BENHAN_ID]
      ,[TIEPNHAN_ID]
      ,[BENHNHAN_ID]
      ,[NGAYTAO]
      ,[NGUOITAO_ID]
      ,[NGUOICAPNHAT_ID]
      ,[NGAYCAPNHAT]
      ,[BENHVIEN_ID]
      ,[NGAY]
      ,[THOIGIANTRIAGE]
      ,[YTHUC_ID]
      ,[NGUYENNHANCAPCUU]
      ,[PHUONGTIEN_ID ]
      ,[NOIGIOITHIEU_ID]
      ,[TRIEUCHUNGLAMSANG]
      ,[PHANLOAIMUCDONANG]
      ,[TIENSU]
      ,[TIENSU_TEXT]
      ,[DIUNG]
      ,[DIUNG_TEXT]
      ,[DIEMDAU]
      ,[DIEMDAU_TEXT]
      ,[HOHAP]
      ,[DUONGHUYETMAOMACH]
      ,[HUYETDONG]
      ,[MACHQUAY]
      ,[MAT]
      ,[DAPUNGLOINOI]
      ,[DAPUNGVANDONG]
      ,[GCS_SCORE]
      )
      VALUES
      (
      #BENHAN_ID#
      ,#TIEPNHAN_ID#
      ,#BENHNHAN_ID#
      ,#NGAYTAO#
      ,#NGUOITAO_ID#
      ,#NGUOICAPNHAT_ID#
      ,#NGAYCAPNHAT#
      ,#BENHVIEN_ID#
      ,#NGAY#
      ,#THOIGIANTRIAGE#
      ,#YTHUC_ID#
      ,#NGUYENNHANCAPCUU#
      ,#PHUONGTIEN_ID #
      ,#NOIGIOITHIEU_ID#
      ,#TRIEUCHUNGLAMSANG#
      ,#PHANLOAIMUCDONANG#
      ,#TIENSU#
      ,#TIENSU_TEXT#
      ,#DIUNG#
      ,#DIUNG_TEXT#
      ,#DIEMDAU#
      ,#DIEMDAU_TEXT#
      ,#HOHAP#
      ,#DUONGHUYETMAOMACH#
      ,#HUYETDONG#
      ,#MACHQUAY#
      ,#MAT#
      ,#DAPUNGLOINOI#
      ,#DAPUNGVANDONG#
      ,#GCS_SCORE#
      )
      <selectKey resultClass="System.Int64" type="post" >
        SELECT @@IDENTITY as value
      </selectKey>
    </insert>
    <insert id="DAO00223_AddChild" parameterClass="System.Collections.IDictionary" resultClass="System.Int64">
      INSERT INTO  [TT_PHANLOAICAPCUU_TRIAGE]
      (
      [PHANLOAICAPCUU_ID]
      ,[BENHAN_ID]
      ,[TIEPNHAN_ID]
      ,[BENHNHAN_ID]
      ,[NGAYTAO]
      ,[NGUOITAO_ID]
      ,[NGUOICAPNHAT_ID]
      ,[NGAYCAPNHAT]
      ,[BENHVIEN_ID]
      ,[TIME]
      ,[NHIPTHO]
      ,[MACH]
      ,[HUYETAPTREN]
      ,[HUYETAPDUOI]
      ,[NHIETDO]
      ,[SPO2]
      ,[GCS]
      ,[DAU]
      ,[MUCDO]
      ,[TAITRIAGEVACANTHIEP]
      ,[DD]
      ,[CANNANG]
      ,[CHIEUCAO]

      )
      VALUES
      (
      #PHANLOAICAPCUU_ID#
      ,#BENHAN_ID#
      ,#TIEPNHAN_ID#
      ,#BENHNHAN_ID#
      ,#NGAYTAO#
      ,#NGUOITAO_ID#
      ,#NGUOICAPNHAT_ID#
      ,#NGAYCAPNHAT#
      ,#BENHVIEN_ID#
      ,#TIME#
      ,#NHIPTHO#
      ,#MACH#
      ,#HUYETAPTREN#
      ,#HUYETAPDUOI#
      ,#NHIETDO#
      ,#SPO2#
      ,#GCS#
      ,#DAU#
      ,#MUCDO#
      ,#TAITRIAGEVACANTHIEP#
      ,#DD#
      ,#CANNANG#
      ,#CHIEUCAO#

      )
      <selectKey resultClass="System.Int64" type="post" >
        SELECT @@IDENTITY as value
      </selectKey>
    </insert>
    <statement id="DAO00223_GetThongTinPhanLoaiCapCuu_Triage" resultClass="DataObject" parameterClass="System.Collections.IDictionary">
      SELECT
      [PHANLOAICAPCUU_ID]
      ,[PHANLOAICAPCUU_TRIAGE_ID]
      ,[TIME]
      ,[NHIPTHO]
      ,[MACH]
      ,[HUYETAPTREN]
      ,[HUYETAPDUOI]
      ,[NHIETDO]
      ,[SPO2]
      ,[GCS]
      ,[DAU]
      ,[MUCDO]
      ,[TAITRIAGEVACANTHIEP]
      ,[DD]
      ,[CANNANG]
      ,[CHIEUCAO]
      ,NV.TENNHANVIEN AS TENDIEUDUONG
      FROM TT_PHANLOAICAPCUU_TRIAGE TT
      LEFT JOIN TM_NHANVIEN NV ON TT.DD=NV.NHANVIEN_ID
      where [PHANLOAICAPCUU_ID]='$PHANLOAICAPCUU_ID$'

    </statement>
    <update id="DAO00223_Update" parameterClass="System.Collections.IDictionary">
      UPDATE TT_PHANLOAICAPCUU
      SET
      NGAY=#NGAY#
      ,NGAYCAPNHAT=#NGAYCAPNHAT#
      ,NGUOICAPNHAT_ID=#NGUOICAPNHAT_ID#
      ,THOIGIANTRIAGE= #THOIGIANTRIAGE#
      ,YTHUC_ID = #YTHUC_ID#
      ,NGUYENNHANCAPCUU = #NGUYENNHANCAPCUU#
      ,PHUONGTIEN_ID = #PHUONGTIEN_ID#
      ,NOIGIOITHIEU_ID = #NOIGIOITHIEU_ID#
      ,TRIEUCHUNGLAMSANG = #TRIEUCHUNGLAMSANG#
      ,PHANLOAIMUCDONANG = #PHANLOAIMUCDONANG#
      ,TIENSU= #TIENSU#
      ,TIENSU_TEXT= #TIENSU_TEXT#
      ,DIUNG= #DIUNG#
      ,DIUNG_TEXT= #DIUNG_TEXT#
      ,DIEMDAU= #DIEMDAU#
      ,DIEMDAU_TEXT= #DIEMDAU_TEXT#
      ,HOHAP= #HOHAP#
      ,DUONGHUYETMAOMACH= #DUONGHUYETMAOMACH#
      ,HUYETDONG= #HUYETDONG#
      ,MACHQUAY= #MACHQUAY#
      ,MAT= #MAT#
      ,DAPUNGLOINOI= #DAPUNGLOINOI#
      ,DAPUNGVANDONG = #DAPUNGVANDONG#
      ,GCS_SCORE= #GCS_SCORE#
      WHERE PHANLOAICAPCUU_ID ='$PHANLOAICAPCUU_ID$'

    </update>
    <statement id="DAO00223_Delete" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      delete TT_PHANLOAICAPCUU WHERE PHANLOAICAPCUU_ID ='$PHANLOAICAPCUU_ID$'
      DELETE TT_PHANLOAICAPCUU_TRIAGE WHERE PHANLOAICAPCUU_ID='$PHANLOAICAPCUU_ID$'
    </statement>
    <statement id="DAO00223_Delete_Triage" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      DELETE TT_PHANLOAICAPCUU_TRIAGE WHERE PHANLOAICAPCUU_ID='$PHANLOAICAPCUU_ID$'
    </statement>
    <statement id="DAO00223_Delete_Detail" parameterClass="System.Collections.IDictionary" resultClass="System.Int32">
      DELETE TT_PHANLOAICAPCUU_TRIAGE WHERE PHANLOAICAPCUU_TRIAGE_ID='$PHANLOAICAPCUU_TRIAGE_ID$'
    </statement>
    <update id="DAO00223_UpdateChild" parameterClass="System.Collections.IDictionary">
      UPDATE  [TT_PHANLOAICAPCUU_TRIAGE]
      SET
      [TIME] = #TIME#
      ,[SPO2] = #SPO2#
      ,[GCS] = #GCS#
      ,[DAU] = #DAU#
      ,[MUCDO] = #MUCDO#
      ,[TAITRIAGEVACANTHIEP] = #TAITRIAGEVACANTHIEP#
      ,[DD] = #DD#
      ,[NHIPTHO] = #NHIPTHO#
      ,[HUYETAPTREN] = #HUYETAPTREN#
      ,[HUYETAPDUOI] = #HUYETAPDUOI#
      ,[MACH] = #MACH#
      ,[NHIETDO] = #NHIETDO#
      ,[NGAYCAPNHAT] = #NGAYCAPNHAT#
      ,[NGUOICAPNHAT_ID] = #NGUOICAPNHAT_ID#
      ,[CANNANG] = #CANNANG#
      ,[CHIEUCAO] = #CHIEUCAO#
      WHERE PHANLOAICAPCUU_TRIAGE_ID=#PHANLOAICAPCUU_TRIAGE_ID#
    </update>
  </statements>
</sqlMap>
